import{u as N,r,k as M,d as o,R as e,$ as A,M as S,V as O}from"./vendor.0dc98fef.js";import{E as R,b as B,a as H,F as y}from"./formik.1e3cbfb7.js";import{u as z,i as V,b as P,a6 as G}from"./index.43cdcd02.js";import{t as $,D as j}from"./Index.cd78bc3d.js";import{y as q,t as Q,U as Y}from"./Index.842043b3.js";import{u as W,a as J}from"./init_form_values.fd5035f3.js";import{I as E}from"./Index.b7438409.js";import{E as K}from"./Index.a7509ad4.js";import{R as X}from"./Index.c65c3301.js";import{E as L}from"./Index.32d86a3d.js";import{T as k}from"./Index.31c6c60e.js";import"./redux.3f1f2b08.js";import"./@clerk/clerk-react.6c71122b.js";import"./@elastosfoundation/did-js-sdk.ab585390.js";import"./axios.391ccac8.js";import"./socket.io-client.b610e832.js";import"./redux-thunk.1b3bbe7b.js";import"./unicode-emoji-picker.85c61051.js";import"./index.7c84f60a.js";const Z=t=>{const n=t.search(q)===-1?null:"ytUrl",l=t.search(Q)===-1?null:"tweetUrl";return n||l},ee=t=>{const{createTopic:n,uploadTopicMedia:l}=z($),d=N(i=>i.session.currentUser);return r.exports.useCallback((i,{setSubmitting:b,resetForm:f},g)=>{var h;const p=Object.entries(i).map(([s,a])=>s.includes("Evidence")?a:null).filter(Boolean),x=Z(i.contentUrl),u={...i,description:g,createdBy:d.username,userId:d.id,evidenceLinks:p,[x]:i.contentUrl,thumbImgUrl:(h=t.ogImage)==null?void 0:h.url};if(i.file instanceof File){const[s,a]=i.file.type.split("/"),m=new FormData;m.append("image",i.file),l(m,s,a,u)}else M.promise(n(u),{pending:"Creating Topic...",success:"Topic Successfully Created!",error:{render({data:s}){const{response:a}=s,{data:m}=a;return`${m.msg} \u{1F92F} `}}});b(!1),f({})},[t])},te=o("div").withConfig({displayName:"Style__Container",componentId:"sc-18tk5eq-0"})(["position:relative;margin:auto;font-family:'Ubuntu',sans-serif;.fade{margin:auto;width:85%;}"]),_=o("label").withConfig({displayName:"Style__Label",componentId:"sc-18tk5eq-1"})(["display:flex;justify-content:flex-start;color:var(--m-trim-color);font-size:.5em;font-weight:bold;"]),ne=o("select").withConfig({displayName:"Style__StyledSelect",componentId:"sc-18tk5eq-2"})(["display:block;margin:auto;padding:.5em;color:black;width:",";height:3.5em;font-size:.8em;font-weight:bold;line-height:var(--inputLineHeight);outline:none;background:#E5E5E5;border:",";border-radius:0.4rem;transition:box-shadow var(--transitionDuration);::placeholder{color:var(--m-trim-color);}:focus{outline:none;box-shadow:5px 5px 8px #ffffff,-5px -5px 8px #ffffff;}:not(:placeholder-shown) + ",",:focus:not(:placeholder-shown) + ","{visibility:visible;z-index:1;opacity:1;transform:translate3d(0,var(--labelTransformedPosY),0) scale(var(--labelScaleFactor));transition:transform var(--inputTransitionDuration),visibility 0ms,z-index 0ms;option{color:var(--m-trim-color);font-size:.8em;cursor:pointer;}}"],t=>t.width||"30%",t=>t.showError?"1px solid var(--m-danger-color)":"1px solid var(--bg)",_,_),oe=({width:t,field:n,form:l,placeholder:d,setFieldValue:i,setFieldTouched:b,...f})=>{const[g,p]=r.exports.useState(!1),[x,u]=r.exports.useState(""),h=l.getFieldMeta(n.name),s=h.error&&h.touched,a=N(c=>c.enums.topicCategories),m=r.exports.useCallback((c,T)=>{T(n.name,c.target.value),u(c.target.value)},[]);return e.createElement(te,null,e.createElement(A,{in:g},e.createElement("div",null,e.createElement(_,{htmlFor:n.name},"Select A Category"))),e.createElement(ne,{...f,width:t,...n,id:n.name,showError:s,value:x,onChange:c=>m(c,i),onFocus:()=>p(!0),onBlur:()=>p(!1)},e.createElement("option",{value:""},"Select A Category"),a==null?void 0:a.map(c=>e.createElement("option",{key:c,value:c},c))),e.createElement(R,{width:t,name:n.name,component:K}))},ie=o("img").withConfig({displayName:"Style__OGFavicon",componentId:"sc-1w9hni8-0"})(["  border-radius:1vw;width:1.5vw;"]),re=({contentUrl:t,metaData:n,setIsLoading:l})=>(r.exports.useEffect(()=>{l(!0)},[t]),r.exports.useEffect(()=>{n&&l(!1)},[n]),e.createElement(ie,{src:n==null?void 0:n.favicon,alt:""})),le=V(re,"30px",!0),w=o("div").withConfig({displayName:"Style__FlexDiv",componentId:"sc-m4ezem-0"})(["  display:flex;align-items:center;justify-content:center;width:100%;"]),ae=o(B).withConfig({displayName:"Style__FormContainer",componentId:"sc-m4ezem-1"})(["margin-top:1em;h2{font-size:1em;}"]),ce=o("span").withConfig({displayName:"Style__Arrow",componentId:"sc-m4ezem-2"})(["transition:transform .5s ease-in-out;transform:",";cursor:pointer;"],t=>`rotate(${t.rotate}deg)`),F=o("div").withConfig({displayName:"Style__InputsContainer",componentId:"sc-m4ezem-3"})(["display:flex;width:100%;@media only screen and (max-width:800px){flex-direction:column;}"]),se=o("div").withConfig({displayName:"Style__Left",componentId:"sc-m4ezem-4"})(["display:flex;display:inline-block;flex-direction:column;width:50%;border-right:1px solid black;@media only screen and (max-width:800px){width:100%;border-right:none;}"]),me=o("div").withConfig({displayName:"Style__Right",componentId:"sc-m4ezem-5"})(["display:flex;display:inline-block;flex-direction:column;width:50%;@media only screen and (max-width:800px){width:100%;}"]);o("section").withConfig({displayName:"Style__SupplementalInformation",componentId:"sc-m4ezem-6"})([""]);o("div").withConfig({displayName:"Style__InputWrapper",componentId:"sc-m4ezem-7"})(["display:flex;flex-direction:column;"]);const de=o("div").withConfig({displayName:"Style__Container",componentId:"sc-m4ezem-8"})(["overflow-y:scroll;height:90vh;width:100vw;max-width:1000px;background:white;border-radius:1em;box-shadow:5px 5px 5px -3px #000000;h1{width:100%;margin:0;text-align:center;padding-bottom:.5em;border-bottom:1px solid black;}"]),U=o("hr").withConfig({displayName:"Style__Line",componentId:"sc-m4ezem-9"})(["  width:90%;margin:2em 1.3em;background-color:rgb(48,48,50);height:.5px;border:none;"]);o("div").withConfig({displayName:"Style__UploadMediaContainer",componentId:"sc-m4ezem-10"})(["  margin-left:1.3em;padding:.5em;border-radius:.5em;display:flex;box-shadow:5px 5px 5px -3px #AAAAAA;background:#E5E5E5;;"]);const I=o("h2").withConfig({displayName:"Style__SectionDescription",componentId:"sc-m4ezem-11"})(["text-decoration:underline;@media only screen and (max-width:600px){}"]),pe=o("hr").withConfig({displayName:"Style__MobileOnlyLine",componentId:"sc-m4ezem-12"})(["  width:90%;margin:2em 1.3em;background-color:rgb(48,48,50);height:.5px;border:none;display:none;@media only screen and (max-width:800px){display:block;}"]),ue=()=>{const[t,n]=r.exports.useState(null),l=r.exports.useCallback(d=>{n(d.currentTarget.value)},[]);return{contentUrl:t,getContentUrlOnBlur:l}},he={title:{REQUIRED:!0},summary:{REQUIRED:!0,MIN_LENGTH:5},category:{REQUIRED:!0}},ze=()=>{const[t,n]=r.exports.useState(!1),[l,d]=r.exports.useState(null),[i,b]=r.exports.useState(null),[f,g]=r.exports.useState(null),[p,x]=r.exports.useState(0),[u,h]=r.exports.useState({rawHTML:"",content:""}),s=W(he),{contentUrl:a,getContentUrlOnBlur:m}=ue(),c=ee(f),{closeModal:T}=z(P);return e.createElement(de,null,e.createElement(H,{initialValues:J,validate:s,onSubmit:(C,v)=>c(C,v,u.rawHTML)},({isSubmitting:C,setFieldValue:v,setFieldTouched:D})=>e.createElement(e.Fragment,null,e.createElement(S.Header,{closeButton:!0},e.createElement(S.Title,null,"Create Topic")),e.createElement(ae,null,e.createElement(S.Body,null,e.createElement(F,null,e.createElement(se,null,e.createElement(w,null,e.createElement(I,null," Topic Description "),e.createElement(k,{tooltipHeader:"Topic Description",tooltipText:"Provide information about the topic you would like to discuss"})),e.createElement(y,{type:"text",name:"title",label:"Title",component:E,width:"85%",placeholder:"Enter A Topic Title"}),e.createElement(y,{type:"text",name:"summary",label:"Summary",component:E,width:"85%",placeholder:"Give A Short Opinion Or Point"}),e.createElement(y,{type:"text",name:"category",label:"Category",component:oe,setFieldValue:v,setFieldTouched:D,width:"85%"})),e.createElement(pe,null),e.createElement(me,null,e.createElement(w,null,e.createElement(I,null,"Link to what you want to discuss here..."),e.createElement(k,{tooltipHeader:"Discussed Content",tooltipText:`Add a link to the external content you would like to discuss (
                        e.g a YouTube video, Tweet, publication, or anything else)`})),e.createElement(w,null,e.createElement(y,{type:"url",name:"contentUrl",placeholder:"Link To Content",label:"Link To Content",component:E,width:"85%",onBlur:m}),a&&e.createElement(le,{metaData:f,contentUrl:a})),e.createElement(U,null),e.createElement(w,null,e.createElement(I,null," Add your own media content "),e.createElement(k,{tooltipHeader:"User Provided Content",tooltipText:"This could be an image, graphic, or video pertaining to the topic you would like to discuss"})),e.createElement(Y,{setFieldValue:v,imgFile:l,videoFile:i,setImgFile:d,setVideoFile:b}))),e.createElement(U,null),e.createElement(j,{imgFile:l,videoFile:i,contentUrl:a,setMetaData:g}),e.createElement(X,{content:u.content,setContent:h}),e.createElement(ce,{rotate:p,onClick:()=>{n(!t),x(p+(t?-180:180))}},e.createElement(G,null)),e.createElement(A,{in:!t},e.createElement("div",null,"Enter Supplemental Information")),e.createElement(F,null,e.createElement(O,{in:t},e.createElement("div",{style:{whiteSpace:"nowrap",width:"100%"}},e.createElement(w,null,e.createElement("h2",null," Enter Links To Supplemental Evidence... "),e.createElement(k,{tooltipText:"Provide links to additional reading or evidence etc...",tooltipHeader:"Supplemental Information"})),e.createElement(y,{type:"url",name:"Evidence Link 1",component:E,width:"70%",label:"Link To Evidence"}),e.createElement(y,{type:"url",name:"Evidence Link 2",component:E,width:"70%",label:"Link To Evidence"}),e.createElement(y,{type:"url",name:"Evidence Link 3",component:E,width:"70%",label:"Link To Evidence"}))))),e.createElement(S.Footer,null,e.createElement(L,{type:"submit",height:"2.5vw",backgroundColor:"var(--m-primary-btn-color)",disabled:C,onClick:T},"Cancel"),e.createElement(L,{type:"submit",height:"2.5vw",backgroundColor:"var(--m-primary-btn-color)",disabled:C},"Submit"))))))};export{ze as default};
