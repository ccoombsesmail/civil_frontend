import{d as r,k as R,u as d,r as m,R as e,K as u,Q as k}from"./vendor.0dc98fef.js";import{S as A,P as N,e as z,d as M,A as P,T as D,G as F,C as O,u as G}from"./index.43cdcd02.js";import{t as K}from"./Index.cd78bc3d.js";import{g as j}from"./reports_api_util.b07935d3.js";import{c as B,t as J}from"./useDetectCurrentPage.b5fea03e.js";import{L}from"./index.7c84f60a.js";import{C as f,a as g,b as $}from"./index.e50d5695.js";import{T as H}from"./Style.bb09fefa.js";import{T as Y}from"./Index.906ab2cd.js";import{u as Q}from"./useOpenModal.986cd8ad.js";import{C as U,T as q}from"./Index.4b46e286.js";import{T as W}from"./Index.489e8e9a.js";import"./redux.3f1f2b08.js";import"./@clerk/clerk-react.6c71122b.js";import"./@elastosfoundation/did-js-sdk.ab585390.js";import"./axios.391ccac8.js";import"./socket.io-client.b610e832.js";import"./redux-thunk.1b3bbe7b.js";import"./unicode-emoji-picker.85c61051.js";import"./Index.31c6c60e.js";import"./useOpenDidExplorer.5209bade.js";import"./Index.faa60f37.js";import"./Index.73362e46.js";import"./dateFormatter.922bcdf9.js";import"./index.3229f831.js";const X=r("div").withConfig({displayName:"Style__OuterContainer",componentId:"sc-49bpeb-0"})(["display:flex;flex-direction:column;align-items:center;width:100%;padding-bottom:60vh;"]),Z=r("header").withConfig({displayName:"Style__Header",componentId:"sc-49bpeb-1"})(["display:flex;align-items:center;margin:clamp(30px,1vw,100px) 0 clamp(30px,1vw,100px) 0;h1{font-weight:bold;font-size:2vw;@media only screen and (max-width:600px){font-size:5.7vw;}}svg{width:4vw !important;height:4vw !important;@media only screen and (max-width:600px){width:12vw !important;height:12vw !important;}margin:0 3vw;}"]),v=r(A).withConfig({displayName:"Style__StyledScalesSvg",componentId:"sc-49bpeb-2"})(["width:4vw !important;height:4vw !important;margin:0 1vw;"]),b=r(N).withConfig({displayName:"Style__StyledPillarSvg",componentId:"sc-49bpeb-3"})(["display:block;"]),ee=r("div").withConfig({displayName:"Style__InnerContainer",componentId:"sc-49bpeb-4"})(["position:relative;display:flex;justify-content:space-between;width:100%;"]);r("section").withConfig({displayName:"Style__VotingContainer",componentId:"sc-49bpeb-5"})(["position:relative;width:50%;height:14vw;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;box-shadow:0px 10px 20px rgb(60 60 60 / 10%);border-radius:0.5em;background-color:white;border:0.5px solid lightgray;border-color:rgba(200,200,200,0.25);margin:clamp(30px,1vw,100px) 0 clamp(30px,1vw,100px) 0;@media only screen and (max-width:800px){width:90%;height:30vw;}svg{@media only screen and (max-width:800px){width:9vw;height:9vw;}}span{@media only screen and (max-width:800px){font-size:4vw;}}"]);const te=r("ul").withConfig({displayName:"Style__ReportStatsContainer",componentId:"sc-49bpeb-6"})(["display:flex;"]),x=r("li").withConfig({displayName:"Style__ReportStatItem",componentId:"sc-49bpeb-7"})(["background-color:var(--m-menu-item-hover);display:flex;flex-direction:column;align-items:center;box-shadow:0px 10px 20px rgb(60 60 60 / 10%);border-radius:0.5em;background-color:var(--m-secondary-background-color);font-size:1vw;padding:2vw 4vw;margin:2vw 4vw;@media only screen and (max-width:800px){font-size:4vw;margin:2vw 2vw;}"]);r("div").withConfig({displayName:"Style__VotesAgainst",componentId:"sc-49bpeb-8"})(["display:flex;flex-direction:column;position:absolute;left:10%;top:50%;transform:translate(0,-50%);font-size:2vw;align-items:center;@media only screen and (max-width:800px){font-size:4vw;}"]);r("div").withConfig({displayName:"Style__VotesFor",componentId:"sc-49bpeb-9"})(["display:flex;flex-direction:column;position:absolute;right:10%;top:50%;transform:translate(0,-50%);font-size:2vw;align-items:center;@media only screen and (max-width:800px){font-size:4vw;}"]);const ne=r("div").withConfig({displayName:"Style__Timer",componentId:"sc-49bpeb-10"})(["font-size:1.3vw;color:gray;margin:0 0 clamp(30px,1vw,100px) 0;display:flex;flex-direction:column;align-items:center;@media only screen and (max-width:800px){font-size:4vw;}h4{color:black;}"]);r("div").withConfig({displayName:"Style__MiddleSection",componentId:"sc-49bpeb-11"})(["span:first-child{font-weight:bold;color:red;}display:flex;flex-direction:column;align-items:center;justify-content:center;"]);const oe=o=>({type:P,payload:o}),ie=o=>t=>j(o).then(n=>t(oe(n.data))).catch(n=>R.error(z(n))).finally(()=>t(M())),ae={getReport:ie},re=o=>{const t=+new Date(o)-+new Date;let n={};return t>0&&(n={days:Math.floor(t/(1e3*60*60*24)),hours:Math.floor(t/(1e3*60*60)%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}),n},le=new Set(["Defendant","Reporter","Jury","General"]),me=()=>{const o=d(t=>t.tribunalComments.list);return m.exports.useMemo(()=>{const t={Defendant:[],Reporter:[],Jury:[],General:[],all:o};return o.forEach(n=>{var l,s;le.has((l=n.data)==null?void 0:l.commentType)&&t[(s=n.data)==null?void 0:s.commentType].push(n)}),t},[o])},se=r(H).withConfig({displayName:"Style__StyledThemeTab",componentId:"sc-1t6ws7z-0"})([".nav-item{margin:0 0.3em 0 0;}"]),ce=()=>{const[o,t]=m.exports.useState("all"),n=me();return e.createElement(e.Fragment,null,e.createElement(L,null),e.createElement(se,{activeKey:o,onSelect:l=>t(l)},e.createElement(u,{eventKey:"all",title:"All"},e.createElement(f,null,e.createElement(g,{numComments:n==null?void 0:n.allComments,comments:n.all,commentSentiment:"All",color:"var(--m-primary-background-color)"}))),e.createElement(u,{eventKey:"Defendant",title:"Defendant"},e.createElement(f,null,e.createElement(g,{numComments:n==null?void 0:n.positiveComments,comments:n.Defendant,commentSentiment:"Defendant",color:"#6A6E70"}))),e.createElement(u,{eventKey:"Reporter",title:"Reporters"},e.createElement(f,null,e.createElement(g,{comments:n.Reporter,commentSentiment:"Reporter",color:"#474A4F"}))),e.createElement(u,{eventKey:"Jury",title:"Jury"},e.createElement(f,null,e.createElement(g,{comments:n.Jury,commentSentiment:"Jury",color:"var(--m-primary-background-color)"}))),e.createElement(u,{eventKey:"General",title:"General Public"},e.createElement(f,null,e.createElement(g,{comments:n.General,commentSentiment:"General Public",color:"var(--m-primary-background-color)"})))))},de=r("section").withConfig({displayName:"Style__VotingContainer",componentId:"sc-6rtrkb-0"})(["position:relative;width:50%;height:14vw;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;box-shadow:0px 10px 20px rgb(60 60 60 / 10%);border-radius:0.5em;background-color:white;border:0.5px solid lightgray;border-color:rgba(200,200,200,0.25);margin:clamp(30px,1vw,100px) 0 clamp(30px,1vw,100px) 0;@media only screen and (max-width:800px){width:90%;height:30vw;}svg{@media only screen and (max-width:800px){width:9vw;height:9vw;}}span{@media only screen and (max-width:800px){font-size:4vw;}}"]),pe=r("div").withConfig({displayName:"Style__VotesAgainst",componentId:"sc-6rtrkb-1"})(["display:flex;flex-direction:column;position:absolute;right:10%;top:50%;transform:translate(0,-50%);font-size:1.3vw;align-items:center;@media only screen and (max-width:800px){font-size:4vw;}"]),ue=r("div").withConfig({displayName:"Style__VotesFor",componentId:"sc-6rtrkb-2"})(["display:flex;flex-direction:column;position:absolute;left:10%;top:50%;transform:translate(0,-50%);font-size:1.3vw;align-items:center;@media only screen and (max-width:800px){font-size:4vw;}"]),fe=r("div").withConfig({displayName:"Style__MiddleSection",componentId:"sc-6rtrkb-3"})(["span:first-child{font-size:2vw;font-weight:bold;color:",";}transform:translate(0,-35%);height:55%;display:flex;flex-direction:column;align-items:center;justify-content:space-between;"],o=>o.verdict==="Violation"?"red":"green"),ge=({contentId:o,reportStats:t,votingTimeUp:n})=>{var a,c;const l=Q(D,{contentId:o}),s=m.exports.useMemo(()=>t.voteAgainst||t.voteFor,[t.voteAgainst,t.voteFor]),y=m.exports.useMemo(()=>t.numVotesFor>t.numVotesAgainst?"Violation":"No Violation",[t.numVotesAgainst,t.numVotesFor]);return e.createElement(de,null,e.createElement(ue,null,"Violation Votes",e.createElement("span",null,t&&((a=t.numVotesFor)!=null?a:"?"))),e.createElement(pe,null,"No Violation Votes",e.createElement("span",null,t&&((c=t.numVotesAgainst)!=null?c:"?"))),e.createElement(fe,{verdict:y},n&&e.createElement("span",null,`VERDICT \u2B62 ${y}`," "),n?e.createElement(F,null):e.createElement(O,null),t&&!n&&e.createElement(Y,{onClick:l},s?"Change Your Vote":"Cast Your Vote")))},ye=m.exports.memo(ge),he=()=>{const{contentId:o,contentType:t}=k(),n=d(i=>i.session.currentUser),l=d(i=>i.topics.list),s=d(i=>i.comments.list),y=d(i=>i.tribunalComments),a=d(i=>i.reports)[o],[c,E]=m.exports.useState({}),{getTopic:C,getReport:S,getAllTribunalCommentsBatch:_,getComment:T}=G(K,ae,J,B);m.exports.useEffect(()=>{let i;return a&&(i=setInterval(()=>{E(re(a.reportPeriodEnd))},1e3)),()=>clearTimeout(i)},[a]),m.exports.useEffect(()=>{o&&n&&(t===U&&T(o),t===q&&C(o,n.id),S(o),_(o))},[o,n]);const h=[];Object.keys(c).forEach((i,p)=>{!c[i]||h.push(e.createElement("span",{key:String(`${p}0`)},c[i]," ",i," "))});const V=h.length===0,I=m.exports.useMemo(()=>{const i=l==null?void 0:l.find(w=>w.id===o),p=s==null?void 0:s.find(w=>w.data.id===o);return i?e.createElement(W,{key:i.id,topic:i,user:n}):p?e.createElement($,{commentData:p.data,replies:p.children}):null},[l,s,o]);return e.createElement(X,{id:"tribunal-container"},e.createElement(Z,null,e.createElement(v,null),e.createElement("h1",null,"Community Court"),e.createElement(v,null)),e.createElement(ne,null,e.createElement("h4",null,a!=null&&a.reportPeriodEnd?"Voting Period Timing Remaining":"Voting Has Ended"),`
`,e.createElement("div",null,!Object.keys(c)&&a?e.createElement("span",null,"Time Is Up!"):h)),e.createElement(ee,null,e.createElement(b,null),I,e.createElement(b,null)),a&&e.createElement(ye,{contentId:o,reportStats:a,votingTimeUp:V}),e.createElement(te,null,e.createElement(x,null,e.createElement("h2",null,"Toxic Reports"),a&&(a.numToxicReports||0)),e.createElement(x,null,e.createElement("h2",null,"Personal Attack Reports"),a&&(a.numPersonalAttackReports||0)),e.createElement(x,null,e.createElement("h2",null,"Spam Reports"),a&&(a.numSpamReports||0))),e.createElement(ce,{comments:y}))},Je=m.exports.memo(he);export{Je as default};
