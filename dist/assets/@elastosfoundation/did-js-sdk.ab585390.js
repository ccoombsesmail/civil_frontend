/*
  @license
    DID.js v2.2.9
    Wed, 11 May 2022 01:44:08 GMT - commit unknown

    Released under the MIT License.
*/class Es{constructor(e){this.LevelType=["ERROR","WARN","INFO","DEBUG","TRACE"],this.id=e,this.name=this.LevelType[e]}getLevel(){return this.id}}class We{constructor(e){this.context=e||""}static setLevel(e){e<=We.TRACE&&e>=We.INFO&&(We.logLevel=e)}static getLevel(){return We.logLevel}static levelIs(e){return e<=We.logLevel}log(...e){We.logLevel.id>=We.INFO.id&&console.log(this.format(We.INFO,e))}info(...e){We.logLevel.id>=We.INFO.id&&console.log(this.format(We.INFO,e))}debug(...e){We.logLevel.id>=We.DEBUG.id&&console.log(this.format(We.DEBUG,e))}trace(...e){We.logLevel.id>=We.TRACE.id&&console.log(this.format(We.TRACE,e))}warn(...e){We.logLevel.id>=We.WARNING.id&&console.log(this.format(We.WARNING,e))}error(...e){We.logLevel.id>=We.ERROR.id&&console.log(this.format(We.ERROR,e))}format(e,r){let n=new Date().toISOString()+" "+e.name.toUpperCase()+" "+this.context+" ";if(!r||r.length<1)return n;let i=String(r[0]);for(let o=1;o<r.length;o++)i=i.replace(/\{\}/,String(r[o]));return n+" "+i}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ve(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})}We.TRACE=new Es(4),We.DEBUG=new Es(3),We.INFO=new Es(2),We.WARNING=new Es(1),We.ERROR=new Es(0),We.logLevel=We.WARNING;class je extends Error{constructor(e,r){super(e+(r?`
Caused by: `+r.message+(r.stack?`
Caused by: `+r.stack:""):"")),this.causedBy=r,Object.setPrototypeOf(this,new.target.prototype)}from(e){return this.message+=" Caused by "+e.message,this}}class ti extends je{}class Ps extends je{}class vr extends je{}class Mt extends je{}class lb extends je{}class Hr extends je{}class Rs extends je{}class Kd extends je{}class Jr extends je{}class ql extends je{}class $e extends je{}class Ks extends je{}class kc extends je{}class ja extends je{}class gi extends je{}class Go extends je{}class $f extends je{}class Ta extends je{}class _o extends je{}class pt extends je{}class It extends je{}class cu extends je{}class un extends je{}class nt extends je{}class Yr extends je{}class Di extends je{}class Qn extends je{}class mo extends je{}class Dc extends je{}class fb extends je{}class hb extends je{}class Hl extends je{}class db extends je{}class xc extends je{}class Tc extends je{}class Vl extends je{}class Cs extends je{}class Ms extends je{}class hr extends je{}class pb extends je{}class Wl extends je{}class vo extends je{}class yb extends je{}class gb extends je{}class qd extends je{}class At extends je{}class mb extends je{}class Hd extends je{}class H6 extends je{}class er extends je{}class Jl extends je{}class Oo extends je{}class $u extends je{}class zo extends je{}class bb extends je{}var vA=Object.freeze({__proto__:null,ParentException:je,IllegalArgumentException:ti,WrongPasswordException:Ps,DIDStoreException:vr,DIDResolveException:Mt,MnemonicException:lb,DIDDeactivatedException:Hr,DIDAlreadyExistException:Rs,RootIdentityAlreadyExistException:Kd,UnknownInternalException:Jr,DIDStoreCryptoException:ql,MalformedDocumentException:$e,NotCustomizedDIDException:Ks,NotAttachedWithStoreException:kc,NotPrimitiveDIDException:ja,NoEffectiveControllerException:gi,NotControllerException:Go,AlreadySignedException:$f,MalformedTransferTicketException:Ta,MalformedCredentialException:_o,MalformedIDChainRequestException:pt,InvalidKeyException:It,MalformedIDChainTransactionException:cu,MalformedResolveResultException:un,DIDSyntaxException:nt,MalformedResolveRequestException:Yr,MalformedResolveResponseException:Di,DIDNotFoundException:Qn,MalformedDIDURLException:mo,AlreadySealedException:Dc,CredentialNotGenuineException:fb,CredentialExpiredException:hb,CredentialRevokedException:Hl,CredentialAlreadyExistException:db,DIDNotGenuineException:xc,DIDExpiredException:Tc,DIDNotUpToDateException:Vl,DIDObjectAlreadyExistException:Cs,IllegalUsage:Ms,DIDObjectNotExistException:hr,CanNotRemoveEffectiveController:pb,DIDObjectHasReference:Wl,MalformedPresentationException:vo,UnsupportedOperationException:yb,NetworkException:gb,ResolveException:qd,DIDStorageException:At,InvalidDateFormat:mb,OutOfBoundException:Hd,DIDTransactionException:H6,MalformedExportDataException:er,DIDControllersChangedException:Jl,MalformedMetadataException:Oo,JWTException:$u,MalformedDIDException:zo,IOException:bb});class Pe{getSerializeContextDid(){return null}clone(){const e=Object.assign({},this);return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}static deserialize(e,r,n=null){let i;oe(e&&e!=="","Invalid JSON content"),i=typeof e=="string"?JSON.parse(e):e;let o=new r;return o.fromJSON(i,n),o}static deserializeAsync(e,r,n=null){return ve(this,void 0,void 0,function*(){let i;oe(e&&e!=="","Invalid JSON content"),i=typeof e=="string"?JSON.parse(e):e;let o=new r;return yield o.fromJSON(i,n),o})}serialize(e=Pe.NORMALIZED_DEFAULT){var r;try{let n=e?null:(r=this.getSerializeContextDid())===null||r===void 0?void 0:r.toString();return JSON.stringify(this.toJSON(n)).normalize("NFC")}catch(n){throw new Jr(n)}}toString(e=Pe.NORMALIZED_DEFAULT){return this.serialize(e)}dateToString(e){return e?e.toISOString().split(".")[0]+"Z":null}dateFromString(e){if(e&&isNaN(Date.parse(e)))throw new mb(e);return e?new Date(e+(e.slice(e.length-1)=="Z"?"":"Z")):null}getString(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="string")throw new nt("Invalid property value: "+e+", type error");return r}getNumber(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="number")throw new nt("Invalid property value: "+e+", type error");return r}getBoolean(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="boolean")throw new nt("Invalid property value: "+e+", type error");return r}getStrings(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r=="string")return[r];if(Array.isArray(r))return Array.from(r,o=>(typeof o!="string"&&new nt("Invalid property value: "+e+", type error"),o)).sort();throw new nt("Invalid property value: "+e+", type error")}getContext(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(Array.isArray(r))return Array.from(r,o=>(typeof o!="string"&&new nt("Invalid property value: "+e+", type error"),o));throw new nt("Invalid property value: "+e+", type error")}getDids(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r=="string")try{return[new Oe(r)]}catch(i){new nt("Invalid property value: "+e+", "+i,i)}if(Array.isArray(r))return Array.from(r,o=>{typeof o!="string"&&new nt("Invalid property value: "+e+", type error");try{return new Oe(o)}catch(a){new nt("Invalid property value: "+e+", "+a,a)}}).sort((o,a)=>o.compareTo(a));throw new nt("Invalid property value: "+e+", type error")}getDate(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="string")throw new nt("Invalid property value: "+e+", type error");try{return this.dateFromString(r)}catch(i){throw new nt("Invalid property value: "+e+", "+i,i)}}getDid(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="string")throw new nt("Invalid property value: "+e+", type error");try{return new Oe(r)}catch(i){throw new nt("Invalid property value: "+e+", "+i,i)}}getDidUrl(e,r,n={}){if(r===void 0){if(n.mandatory)throw new nt("Missing property: "+e);return n.defaultValue?n.defaultValue:null}if(r===null){if(!n.defaultValue&&!n.nullable)throw new nt("Invalid property: "+e+", can not be null");return n.defaultValue?n.defaultValue:null}if(typeof r!="string")throw new nt("Invalid property value: "+e+", type error");try{return new Je(r,n.context)}catch(i){throw new nt("Invalid property value: "+e+", "+i,i)}}}function vb(t){return t&&t.length!=0?Array.from(t,e=>typeof e=="object"&&Object.keys(e).length>0&&!Array.isArray(e)?ea(e):Array.isArray(e)&&t.length>0?vb(e):e):t}function ea(t){let e=Object.keys(t);e.sort((i,o)=>i<o?-1:i>o?1:0);let r={};for(var n in e){let i=e[n],o=t[i];typeof o=="object"&&Object.keys(o).length>0&&!Array.isArray(o)?r[i]=ea(o):Array.isArray(o)&&o.length>0?r[i]=vb(o):r[i]=o}return r}Pe.NORMALIZED_DEFAULT=!0;class Vr extends Pe{constructor(e){super(),this.props={},this.store=e,this.props={}}attachStore(e){oe(e!=null,"Invalid store"),this.store=e}detachStore(){this.store=null}getStore(){return this.store}attachedStore(){return this.store!=null}get(e){return this.props[e]}put(e,r){r==null?delete this.props[e]:this.props[e]=r instanceof Date?r.toISOString():r,this.save()}getBoolean(e,r=!1){let n=this.get(e);return n!=null?new Boolean(n).valueOf():r}getInteger(e,r=-1){let n=this.get(e),i=r;if(n!=null)try{i=new Number(n).valueOf()}catch{}return i}getDate(e,r=null){let n=this.get(e),i=r;if(n!=null)try{i=new Date(n)}catch{}return i}remove(e){let r=this.props[e];return delete this.props[e],this.save(),r}isEmpty(){return this.props.size==0}setAlias(e){this.put(Vr.ALIAS,e)}getAlias(){return this.get(Vr.ALIAS)}setExtra(e,r){oe(e!=null&&e!="","Invalid key"),this.put(Vr.USER_EXTRA_PREFIX+e,r)}getExtra(e){return oe(e&&e!=null,"Invalid key"),this.get(Vr.USER_EXTRA_PREFIX+e)}getExtraBoolean(e,r=!1){return oe(e&&e!=null,"Invalid key"),this.getBoolean(Vr.USER_EXTRA_PREFIX+e,r)}getExtraInteger(e,r=-1){return oe(e&&e!=null,"Invalid key"),this.getInteger(Vr.USER_EXTRA_PREFIX+e,r)}getExtraDate(e,r=null){return oe(e&&e!=null,"Invalid key"),this.getDate(Vr.USER_EXTRA_PREFIX+e,r)}removeExtra(e){return oe(e&&e!=null,"Invalid key"),this.remove(Vr.USER_EXTRA_PREFIX+e)}merge(e){e!=this&&e!=null&&(this.props=Object.assign(Object.assign({},e.props),this.props))}clone(){let e=super.clone();return e.store=this.store,e.props=this.props,e}toJSON(e=null){return ea(this.props)}fromJSON(e,r=null){this.props=JSON.parse(JSON.stringify(e))}}Vr.ALIAS="alias",Vr.USER_EXTRA_PREFIX="UX-";class ct extends Vr{constructor(e=null,r=null){super(r),this.did=null,this.did=e}setDid(e){this.did=e}setRootIdentityId(e){this.put(ct.ROOT_IDENTITY,e)}getRootIdentityId(){return this.get(ct.ROOT_IDENTITY)}setIndex(e){this.put(ct.INDEX,e)}getIndex(){return this.getInteger(ct.INDEX,-1)}setTransactionId(e){this.put(ct.TXID,e)}getTransactionId(){return this.get(ct.TXID)}setPreviousSignature(e){this.put(ct.PREV_SIGNATURE,e)}getPreviousSignature(){return this.get(ct.PREV_SIGNATURE)}setSignature(e){this.put(ct.SIGNATURE,e)}getSignature(){return this.get(ct.SIGNATURE)}setPublished(e){this.put(ct.PUBLISHED,e)}getPublished(){try{return this.getDate(ct.PUBLISHED,null)}catch{return null}}setDeactivated(e){this.put(ct.DEACTIVATED,e)}isDeactivated(){return this.getBoolean(ct.DEACTIVATED,!1)}clone(){let e=new ct;return e.props=this.props,e.did=this.did,e.store=this.store,e}save(){if(this.attachedStore())try{this.getStore().storeDidMetadata(this.did,this)}catch(e){throw e instanceof vr&&console.log("INTERNAL - error store metadata for DID {}",this.did),e}}static parse(e,r=null){try{return Pe.deserialize(e,ct,r)}catch(n){throw n instanceof Oo?n:new Oo(n)}}}ct.ROOT_IDENTITY="rootIdentity",ct.INDEX="index",ct.TXID="txid",ct.PREV_SIGNATURE="prevSignature",ct.SIGNATURE="signature",ct.PUBLISHED="published",ct.DEACTIVATED="deactivated";class qt extends Vr{constructor(e=null){super(e),this.put(qt.TYPE,qt.DID_STORE_TYPE),this.put(qt.VERSION,qt.DID_STORE_VERSION)}getType(){return this.get(qt.TYPE)}getVersion(){return this.getInteger(qt.VERSION,-1)}setFingerprint(e){oe(e!=null&&e!="","Invalid fingerprint"),this.put(qt.FINGERPRINT,e)}getFingerprint(){return this.get(qt.FINGERPRINT)}setDefaultRootIdentity(e){this.put(qt.DEFAULT_ROOT_IDENTITY,e)}getDefaultRootIdentity(){return this.get(qt.DEFAULT_ROOT_IDENTITY)}save(){if(this.attachedStore())try{this.getStore().storage.storeMetadata(this)}catch(e){throw e instanceof vr&&qt.log.error("INTERNAL - error store metadata for DIDStore"),e}}static parse(e,r=null){try{return Pe.deserialize(e,qt,r)}catch(n){throw n instanceof Oo?n:new Oo(n)}}}qt.DID_STORE_TYPE="did:elastos:store",qt.DID_STORE_VERSION=3,qt.TYPE="type",qt.VERSION="version",qt.FINGERPRINT="fingerprint",qt.DEFAULT_ROOT_IDENTITY="defaultRootIdentity",qt.log=new We("DIDStoreMetadata");var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _b(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}function zh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}for(var Se={},V6={byteLength:function(t){var e=Ey(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=Ey(t),i=n[0],o=n[1],a=new W6(function(f,h,y){return 3*(h+y)/4-y}(0,i,o)),s=0,c=o>0?i-4:i;for(r=0;r<c;r+=4)e=zn[t.charCodeAt(r)]<<18|zn[t.charCodeAt(r+1)]<<12|zn[t.charCodeAt(r+2)]<<6|zn[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;return o===2&&(e=zn[t.charCodeAt(r)]<<2|zn[t.charCodeAt(r+1)]>>4,a[s++]=255&e),o===1&&(e=zn[t.charCodeAt(r)]<<10|zn[t.charCodeAt(r+1)]<<4|zn[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e),a},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(Y6(t,a,a+o>s?s:a+o));return n===1?(e=t[r-1],i.push(Wi[e>>2]+Wi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Wi[e>>10]+Wi[e>>4&63]+Wi[e<<2&63]+"=")),i.join("")}},Wi=[],zn=[],W6=typeof Uint8Array<"u"?Uint8Array:Array,Kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ys=0,J6=Kh.length;ys<J6;++ys)Wi[ys]=Kh[ys],zn[Kh.charCodeAt(ys)]=ys;function Ey(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return r===-1&&(r=e),[r,r===e?0:4-r%4]}function Y6(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(Wi[(i=n)>>18&63]+Wi[i>>12&63]+Wi[i>>6&63]+Wi[63&i]);return o.join("")}zn["-".charCodeAt(0)]=62,zn["_".charCodeAt(0)]=63;var Iy,qh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function oe(t,e){if(!t)throw new Error(e)}function xo(t,e){oe(t!=null&&t!=="",e)}function Sb(t,e){if(t===null)throw new Error(e)}function na(t){if(typeof t=="string"){for(var e=0,r=t.length;r>0;)e=(e<<5)-e+t.charCodeAt(--r)|0;return e}if(typeof t=="number")return t;if(typeof t=="boolean")return t===!0?1231:1237;throw new ti("Unsupported type "+typeof t)}qh.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,f=c>>1,h=-7,y=r?i-1:0,g=r?-1:1,_=t[e+y];for(y+=g,o=_&(1<<-h)-1,_>>=-h,h+=s;h>0;o=256*o+t[e+y],y+=g,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[e+y],y+=g,h-=8);if(o===0)o=1-f;else{if(o===c)return a?NaN:1/0*(_?-1:1);a+=Math.pow(2,n),o-=f}return(_?-1:1)*a*Math.pow(2,o-n)},qh.write=function(t,e,r,n,i,o){var a,s,c,f=8*o-i-1,h=(1<<f)-1,y=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,E=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+y>=1?g/c:g*Math.pow(2,1-y))*c>=2&&(a++,c/=2),a+y>=h?(s=0,a=h):a+y>=1?(s=(e*c-1)*Math.pow(2,i),a+=y):(s=e*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;t[r+_]=255&s,_+=E,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+_]=255&a,_+=E,a/=256,f-=8);t[r+_-E]|=128*O},function(t){var e=V6,r=qh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(C){return+C!=C&&(C=0),a.alloc(+C)},t.INSPECT_MAX_BYTES=50;var i=2147483647;function o(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');var j=new Uint8Array(C);return Object.setPrototypeOf(j,a.prototype),j}function a(C,j,S){if(typeof C=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(C)}return s(C,j,S)}function s(C,j,S){if(typeof C=="string")return function(z,x){if(typeof x=="string"&&x!==""||(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);var K=0|_(z,x),ee=o(K),G=ee.write(z,x);return G!==K&&(ee=ee.slice(0,G)),ee}(C,j);if(ArrayBuffer.isView(C))return function(z){if(ue(z,Uint8Array)){var x=new Uint8Array(z);return y(x.buffer,x.byteOffset,x.byteLength)}return h(z)}(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(ue(C,ArrayBuffer)||C&&ue(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ue(C,SharedArrayBuffer)||C&&ue(C.buffer,SharedArrayBuffer)))return y(C,j,S);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var M=C.valueOf&&C.valueOf();if(M!=null&&M!==C)return a.from(M,j,S);var B=function(z){if(a.isBuffer(z)){var x=0|g(z.length),K=o(x);return K.length===0||z.copy(K,0,0,x),K}if(z.length!==void 0)return typeof z.length!="number"||ge(z.length)?o(0):h(z);if(z.type==="Buffer"&&Array.isArray(z.data))return h(z.data)}(C);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),j,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}function c(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function f(C){return c(C),o(C<0?0:0|g(C))}function h(C){for(var j=C.length<0?0:0|g(C.length),S=o(j),M=0;M<j;M+=1)S[M]=255&C[M];return S}function y(C,j,S){if(j<0||C.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<j+(S||0))throw new RangeError('"length" is outside of buffer bounds');var M;return M=j===void 0&&S===void 0?new Uint8Array(C):S===void 0?new Uint8Array(C,j):new Uint8Array(C,j,S),Object.setPrototypeOf(M,a.prototype),M}function g(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|C}function _(C,j){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||ue(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);var S=C.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&S===0)return 0;for(var B=!1;;)switch(j){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return Z(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return fe(C).length;default:if(B)return M?-1:Z(C).length;j=(""+j).toLowerCase(),B=!0}}function E(C,j,S){var M=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(j>>>=0))return"";for(C||(C="utf8");;)switch(C){case"hex":return w(this,j,S);case"utf8":case"utf-8":return T(this,j,S);case"ascii":return v(this,j,S);case"latin1":case"binary":return D(this,j,S);case"base64":return Y(this,j,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,j,S);default:if(M)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),M=!0}}function O(C,j,S){var M=C[j];C[j]=C[S],C[S]=M}function R(C,j,S,M,B){if(C.length===0)return-1;if(typeof S=="string"?(M=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),ge(S=+S)&&(S=B?0:C.length-1),S<0&&(S=C.length+S),S>=C.length){if(B)return-1;S=C.length-1}else if(S<0){if(!B)return-1;S=0}if(typeof j=="string"&&(j=a.from(j,M)),a.isBuffer(j))return j.length===0?-1:L(C,j,S,M,B);if(typeof j=="number")return j&=255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(C,j,S):Uint8Array.prototype.lastIndexOf.call(C,j,S):L(C,[j],S,M,B);throw new TypeError("val must be string, number or Buffer")}function L(C,j,S,M,B){var z,x=1,K=C.length,ee=j.length;if(M!==void 0&&((M=String(M).toLowerCase())==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(C.length<2||j.length<2)return-1;x=2,K/=2,ee/=2,S/=2}function G(pe,ce){return x===1?pe[ce]:pe.readUInt16BE(ce*x)}if(B){var J=-1;for(z=S;z<K;z++)if(G(C,z)===G(j,J===-1?0:z-J)){if(J===-1&&(J=z),z-J+1===ee)return J*x}else J!==-1&&(z-=z-J),J=-1}else for(S+ee>K&&(S=K-ee),z=S;z>=0;z--){for(var re=!0,de=0;de<ee;de++)if(G(C,z+de)!==G(j,de)){re=!1;break}if(re)return z}return-1}function q(C,j,S,M){S=Number(S)||0;var B=C.length-S;M?(M=Number(M))>B&&(M=B):M=B;var z=j.length;M>z/2&&(M=z/2);for(var x=0;x<M;++x){var K=parseInt(j.substr(2*x,2),16);if(ge(K))return x;C[S+x]=K}return x}function X(C,j,S,M){return se(Z(j,C.length-S),C,S,M)}function ne(C,j,S,M){return se(function(B){for(var z=[],x=0;x<B.length;++x)z.push(255&B.charCodeAt(x));return z}(j),C,S,M)}function W(C,j,S,M){return se(fe(j),C,S,M)}function H(C,j,S,M){return se(function(B,z){for(var x,K,ee,G=[],J=0;J<B.length&&!((z-=2)<0);++J)K=(x=B.charCodeAt(J))>>8,ee=x%256,G.push(ee),G.push(K);return G}(j,C.length-S),C,S,M)}function Y(C,j,S){return j===0&&S===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(j,S))}function T(C,j,S){S=Math.min(C.length,S);for(var M=[],B=j;B<S;){var z,x,K,ee,G=C[B],J=null,re=G>239?4:G>223?3:G>191?2:1;if(B+re<=S)switch(re){case 1:G<128&&(J=G);break;case 2:(192&(z=C[B+1]))==128&&(ee=(31&G)<<6|63&z)>127&&(J=ee);break;case 3:z=C[B+1],x=C[B+2],(192&z)==128&&(192&x)==128&&(ee=(15&G)<<12|(63&z)<<6|63&x)>2047&&(ee<55296||ee>57343)&&(J=ee);break;case 4:z=C[B+1],x=C[B+2],K=C[B+3],(192&z)==128&&(192&x)==128&&(192&K)==128&&(ee=(15&G)<<18|(63&z)<<12|(63&x)<<6|63&K)>65535&&ee<1114112&&(J=ee)}J===null?(J=65533,re=1):J>65535&&(J-=65536,M.push(J>>>10&1023|55296),J=56320|1023&J),M.push(J),B+=re}return function(de){var pe=de.length;if(pe<=te)return String.fromCharCode.apply(String,de);for(var ce="",Ee=0;Ee<pe;)ce+=String.fromCharCode.apply(String,de.slice(Ee,Ee+=te));return ce}(M)}t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var C=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(C,j),C.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(C,j,S){return s(C,j,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(C,j,S){return function(M,B,z){return c(M),M<=0?o(M):B!==void 0?typeof z=="string"?o(M).fill(B,z):o(M).fill(B):o(M)}(C,j,S)},a.allocUnsafe=function(C){return f(C)},a.allocUnsafeSlow=function(C){return f(C)},a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,j){if(ue(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),ue(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(C)||!a.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===j)return 0;for(var S=C.length,M=j.length,B=0,z=Math.min(S,M);B<z;++B)if(C[B]!==j[B]){S=C[B],M=j[B];break}return S<M?-1:M<S?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,j){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);var S;if(j===void 0)for(j=0,S=0;S<C.length;++S)j+=C[S].length;var M=a.allocUnsafe(j),B=0;for(S=0;S<C.length;++S){var z=C[S];if(ue(z,Uint8Array))B+z.length>M.length?a.from(z).copy(M,B):Uint8Array.prototype.set.call(M,z,B);else{if(!a.isBuffer(z))throw new TypeError('"list" argument must be an Array of Buffers');z.copy(M,B)}B+=z.length}return M},a.byteLength=_,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var j=0;j<C;j+=2)O(this,j,j+1);return this},a.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var j=0;j<C;j+=4)O(this,j,j+3),O(this,j+1,j+2);return this},a.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var j=0;j<C;j+=8)O(this,j,j+7),O(this,j+1,j+6),O(this,j+2,j+5),O(this,j+3,j+4);return this},a.prototype.toString=function(){var C=this.length;return C===0?"":arguments.length===0?T(this,0,C):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||a.compare(this,C)===0},a.prototype.inspect=function(){var C="",j=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(C+=" ... "),"<Buffer "+C+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(C,j,S,M,B){if(ue(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(j===void 0&&(j=0),S===void 0&&(S=C?C.length:0),M===void 0&&(M=0),B===void 0&&(B=this.length),j<0||S>C.length||M<0||B>this.length)throw new RangeError("out of range index");if(M>=B&&j>=S)return 0;if(M>=B)return-1;if(j>=S)return 1;if(this===C)return 0;for(var z=(B>>>=0)-(M>>>=0),x=(S>>>=0)-(j>>>=0),K=Math.min(z,x),ee=this.slice(M,B),G=C.slice(j,S),J=0;J<K;++J)if(ee[J]!==G[J]){z=ee[J],x=G[J];break}return z<x?-1:x<z?1:0},a.prototype.includes=function(C,j,S){return this.indexOf(C,j,S)!==-1},a.prototype.indexOf=function(C,j,S){return R(this,C,j,S,!0)},a.prototype.lastIndexOf=function(C,j,S){return R(this,C,j,S,!1)},a.prototype.write=function(C,j,S,M){if(j===void 0)M="utf8",S=this.length,j=0;else if(S===void 0&&typeof j=="string")M=j,S=this.length,j=0;else{if(!isFinite(j))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");j>>>=0,isFinite(S)?(S>>>=0,M===void 0&&(M="utf8")):(M=S,S=void 0)}var B=this.length-j;if((S===void 0||S>B)&&(S=B),C.length>0&&(S<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");for(var z=!1;;)switch(M){case"hex":return q(this,C,j,S);case"utf8":case"utf-8":return X(this,C,j,S);case"ascii":case"latin1":case"binary":return ne(this,C,j,S);case"base64":return W(this,C,j,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,C,j,S);default:if(z)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function v(C,j,S){var M="";S=Math.min(C.length,S);for(var B=j;B<S;++B)M+=String.fromCharCode(127&C[B]);return M}function D(C,j,S){var M="";S=Math.min(C.length,S);for(var B=j;B<S;++B)M+=String.fromCharCode(C[B]);return M}function w(C,j,S){var M=C.length;(!j||j<0)&&(j=0),(!S||S<0||S>M)&&(S=M);for(var B="",z=j;z<S;++z)B+=me[C[z]];return B}function k(C,j,S){for(var M=C.slice(j,S),B="",z=0;z<M.length-1;z+=2)B+=String.fromCharCode(M[z]+256*M[z+1]);return B}function A(C,j,S){if(C%1!=0||C<0)throw new RangeError("offset is not uint");if(C+j>S)throw new RangeError("Trying to access beyond buffer length")}function b(C,j,S,M,B,z){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>B||j<z)throw new RangeError('"value" argument is out of bounds');if(S+M>C.length)throw new RangeError("Index out of range")}function P(C,j,S,M,B,z){if(S+M>C.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function V(C,j,S,M,B){return j=+j,S>>>=0,B||P(C,0,S,4),r.write(C,j,S,M,23,4),S+4}function Q(C,j,S,M,B){return j=+j,S>>>=0,B||P(C,0,S,8),r.write(C,j,S,M,52,8),S+8}a.prototype.slice=function(C,j){var S=this.length;(C=~~C)<0?(C+=S)<0&&(C=0):C>S&&(C=S),(j=j===void 0?S:~~j)<0?(j+=S)<0&&(j=0):j>S&&(j=S),j<C&&(j=C);var M=this.subarray(C,j);return Object.setPrototypeOf(M,a.prototype),M},a.prototype.readUintLE=a.prototype.readUIntLE=function(C,j,S){C>>>=0,j>>>=0,S||A(C,j,this.length);for(var M=this[C],B=1,z=0;++z<j&&(B*=256);)M+=this[C+z]*B;return M},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,j,S){C>>>=0,j>>>=0,S||A(C,j,this.length);for(var M=this[C+--j],B=1;j>0&&(B*=256);)M+=this[C+--j]*B;return M},a.prototype.readUint8=a.prototype.readUInt8=function(C,j){return C>>>=0,j||A(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,j){return C>>>=0,j||A(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,j){return C>>>=0,j||A(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,j){return C>>>=0,j||A(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,j){return C>>>=0,j||A(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readIntLE=function(C,j,S){C>>>=0,j>>>=0,S||A(C,j,this.length);for(var M=this[C],B=1,z=0;++z<j&&(B*=256);)M+=this[C+z]*B;return M>=(B*=128)&&(M-=Math.pow(2,8*j)),M},a.prototype.readIntBE=function(C,j,S){C>>>=0,j>>>=0,S||A(C,j,this.length);for(var M=j,B=1,z=this[C+--M];M>0&&(B*=256);)z+=this[C+--M]*B;return z>=(B*=128)&&(z-=Math.pow(2,8*j)),z},a.prototype.readInt8=function(C,j){return C>>>=0,j||A(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},a.prototype.readInt16LE=function(C,j){C>>>=0,j||A(C,2,this.length);var S=this[C]|this[C+1]<<8;return 32768&S?4294901760|S:S},a.prototype.readInt16BE=function(C,j){C>>>=0,j||A(C,2,this.length);var S=this[C+1]|this[C]<<8;return 32768&S?4294901760|S:S},a.prototype.readInt32LE=function(C,j){return C>>>=0,j||A(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,j){return C>>>=0,j||A(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readFloatLE=function(C,j){return C>>>=0,j||A(C,4,this.length),r.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,j){return C>>>=0,j||A(C,4,this.length),r.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,j){return C>>>=0,j||A(C,8,this.length),r.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,j){return C>>>=0,j||A(C,8,this.length),r.read(this,C,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,j,S,M){C=+C,j>>>=0,S>>>=0,M||b(this,C,j,S,Math.pow(2,8*S)-1,0);var B=1,z=0;for(this[j]=255&C;++z<S&&(B*=256);)this[j+z]=C/B&255;return j+S},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,j,S,M){C=+C,j>>>=0,S>>>=0,M||b(this,C,j,S,Math.pow(2,8*S)-1,0);var B=S-1,z=1;for(this[j+B]=255&C;--B>=0&&(z*=256);)this[j+B]=C/z&255;return j+S},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,1,255,0),this[j]=255&C,j+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,2,65535,0),this[j]=255&C,this[j+1]=C>>>8,j+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,2,65535,0),this[j]=C>>>8,this[j+1]=255&C,j+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,4,4294967295,0),this[j+3]=C>>>24,this[j+2]=C>>>16,this[j+1]=C>>>8,this[j]=255&C,j+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,4,4294967295,0),this[j]=C>>>24,this[j+1]=C>>>16,this[j+2]=C>>>8,this[j+3]=255&C,j+4},a.prototype.writeIntLE=function(C,j,S,M){if(C=+C,j>>>=0,!M){var B=Math.pow(2,8*S-1);b(this,C,j,S,B-1,-B)}var z=0,x=1,K=0;for(this[j]=255&C;++z<S&&(x*=256);)C<0&&K===0&&this[j+z-1]!==0&&(K=1),this[j+z]=(C/x>>0)-K&255;return j+S},a.prototype.writeIntBE=function(C,j,S,M){if(C=+C,j>>>=0,!M){var B=Math.pow(2,8*S-1);b(this,C,j,S,B-1,-B)}var z=S-1,x=1,K=0;for(this[j+z]=255&C;--z>=0&&(x*=256);)C<0&&K===0&&this[j+z+1]!==0&&(K=1),this[j+z]=(C/x>>0)-K&255;return j+S},a.prototype.writeInt8=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,1,127,-128),C<0&&(C=255+C+1),this[j]=255&C,j+1},a.prototype.writeInt16LE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,2,32767,-32768),this[j]=255&C,this[j+1]=C>>>8,j+2},a.prototype.writeInt16BE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,2,32767,-32768),this[j]=C>>>8,this[j+1]=255&C,j+2},a.prototype.writeInt32LE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,4,2147483647,-2147483648),this[j]=255&C,this[j+1]=C>>>8,this[j+2]=C>>>16,this[j+3]=C>>>24,j+4},a.prototype.writeInt32BE=function(C,j,S){return C=+C,j>>>=0,S||b(this,C,j,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[j]=C>>>24,this[j+1]=C>>>16,this[j+2]=C>>>8,this[j+3]=255&C,j+4},a.prototype.writeFloatLE=function(C,j,S){return V(this,C,j,!0,S)},a.prototype.writeFloatBE=function(C,j,S){return V(this,C,j,!1,S)},a.prototype.writeDoubleLE=function(C,j,S){return Q(this,C,j,!0,S)},a.prototype.writeDoubleBE=function(C,j,S){return Q(this,C,j,!1,S)},a.prototype.copy=function(C,j,S,M){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(S||(S=0),M||M===0||(M=this.length),j>=C.length&&(j=C.length),j||(j=0),M>0&&M<S&&(M=S),M===S||C.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),C.length-j<M-S&&(M=C.length-j+S);var B=M-S;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,S,M):Uint8Array.prototype.set.call(C,this.subarray(S,M),j),B},a.prototype.fill=function(C,j,S,M){if(typeof C=="string"){if(typeof j=="string"?(M=j,j=0,S=this.length):typeof S=="string"&&(M=S,S=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(C.length===1){var B=C.charCodeAt(0);(M==="utf8"&&B<128||M==="latin1")&&(C=B)}}else typeof C=="number"?C&=255:typeof C=="boolean"&&(C=Number(C));if(j<0||this.length<j||this.length<S)throw new RangeError("Out of range index");if(S<=j)return this;var z;if(j>>>=0,S=S===void 0?this.length:S>>>0,C||(C=0),typeof C=="number")for(z=j;z<S;++z)this[z]=C;else{var x=a.isBuffer(C)?C:a.from(C,M),K=x.length;if(K===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(z=0;z<S-j;++z)this[z+j]=x[z%K]}return this};var U=/[^+/0-9A-Za-z-_]/g;function Z(C,j){var S;j=j||1/0;for(var M=C.length,B=null,z=[],x=0;x<M;++x){if((S=C.charCodeAt(x))>55295&&S<57344){if(!B){if(S>56319){(j-=3)>-1&&z.push(239,191,189);continue}if(x+1===M){(j-=3)>-1&&z.push(239,191,189);continue}B=S;continue}if(S<56320){(j-=3)>-1&&z.push(239,191,189),B=S;continue}S=65536+(B-55296<<10|S-56320)}else B&&(j-=3)>-1&&z.push(239,191,189);if(B=null,S<128){if((j-=1)<0)break;z.push(S)}else if(S<2048){if((j-=2)<0)break;z.push(S>>6|192,63&S|128)}else if(S<65536){if((j-=3)<0)break;z.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((j-=4)<0)break;z.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return z}function fe(C){return e.toByteArray(function(j){if((j=(j=j.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;j.length%4!=0;)j+="=";return j}(C))}function se(C,j,S,M){for(var B=0;B<M&&!(B+S>=j.length||B>=C.length);++B)j[B+S]=C[B];return B}function ue(C,j){return C instanceof j||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===j.name}function ge(C){return C!=C}var me=function(){for(var C="0123456789abcdef",j=new Array(256),S=0;S<16;++S)for(var M=16*S,B=0;B<16;++B)j[M+B]=C[S]+C[B];return j}()}(Se);class Oe{constructor(e,r=null,n,i){if(this.repr=null,this.parser=new class{constructor(o){this.superThis=o}isTokenChar(o,a){return o>="A"&&o<="Z"||o>="a"&&o<="z"||o>="0"&&o<="9"||!a&&(o=="."||o=="_"||o=="-")}scanNextPart(o,a,s,c){let f=s,h=!0;for(let y=a;y<s;y++){let g=o.charAt(y);if(typeof g=="string"){if(g==c){f=y;break}}else for(let _=0;_<c.length;_++)if(g==c[_]){f=_;break}if(!this.isTokenChar(g,h))throw new zo("Invalid char at: "+y);h=!1}return f}parse(o,a=0,s){if(o==null)throw new zo("null DID string");for(s==null&&(s=o.length);s>a&&o.charAt(s-1)<=" ";)s--;for(;a<s&&o.charAt(a)<=" ";)a++;if(a==s)throw new zo("Empty DID string");let c=a,f=this.scanNextPart(o,c,s,":"),h=o.substring(c,f);if(h!=Oe.SCHEMA)throw new zo("Invalid DID schema: '"+h+"', at: "+c);if(c=f,c+1>=s||o.charAt(c)!=":")throw new zo("Missing method and id string at: "+c);f=this.scanNextPart(o,++c,s,":");let y=o.substring(c,f);if(y!=Oe.METHOD)throw new zo("Unknown DID method: '"+y+"', at: "+c);if(this.superThis.method=Oe.METHOD,c=f,c+1>=s||o.charAt(c)!=":")throw new zo("Missing id string at: "+(c+1>s?c:c+1));f=this.scanNextPart(o,++c,s,"\0"),this.superThis.methodSpecificId=o.substring(c,f)}}(this),this.metadata=null,r){let o=e;xo(o,"Invalid method"),xo(r,"Invalid methodSpecificId"),this.method=o,this.methodSpecificId=r}else n||(n=0),i||(i=e.length),xo(e,"Invalid DID string"),this.parser.parse(e,n,i)}static createFrom(e,r,n){return oe(e!=null&&e!="","Invalid DID string"),oe(r<n,"Invalid offsets"),new Oe(e,null,r,n)}static from(e){return e?typeof e=="string"?new Oe(e):e:null}getMethod(){return this.method}getMethodSpecificId(){return this.methodSpecificId}setMetadata(e){this.metadata=e}toJSON(e=null){return this.toString()}getMetadata(){return ve(this,void 0,void 0,function*(){if(this.metadata==null)try{let e=yield this.resolve();this.metadata=e!=null?e.getMetadata():new ct(this)}catch{this.metadata=new ct(this)}return this.metadata})}isDeactivated(){return ve(this,void 0,void 0,function*(){if((yield this.getMetadata()).isDeactivated())return!0;let e=yield yt.getInstance().resolveDidBiography(this);if(e==null)return!1;let r=e.getStatus()==_r.DEACTIVATED;return r&&(yield this.getMetadata()).setDeactivated(r),r})}resolve(e=!1){return ve(this,void 0,void 0,function*(){let r=yield yt.getInstance().resolveDid(this,e);return r!=null&&this.setMetadata(r.getMetadata()),r})}resolveBiography(){return ve(this,void 0,void 0,function*(){return yield yt.getInstance().resolveDidBiography(this)})}toString(){return this.repr==null&&(this.repr="did:"+this.method+":"+this.methodSpecificId),this.repr}hashCode(){return 3357+na(this.toString())}equals(e){if(e==this)return!0;if(e instanceof Oe){let r=e,n=this.method===r.method;return n&&this.methodSpecificId===r.methodSpecificId}if(typeof e=="string"){let r=e;return this.toString()===r}return!1}compareTo(e){Sb(e,"did is null");let r=(i,o)=>i<o?-1:i>o?1:0,n=r(this.method,e.method);return n==0?r(this.methodSpecificId,e.methodSpecificId):n}}Oe.SCHEMA="did",Oe.METHOD="elastos",Oe.METADATA="metadata";class Je{constructor(e,r){if(this.did=null,this.path=null,this.fragment=null,this.parser=new class{constructor(n){this.superThis=n}isHexChar(n){return n>="A"&&n<="F"||n>="a"&&n<="f"||n>="0"&&n<="9"}isTokenChar(n,i){return n>="A"&&n<="Z"||n>="a"&&n<="z"||n>="0"&&n<="9"||!i&&(n=="."||n=="_"||n=="-")}scanNextPart(n,i,o,a,s){let c=o,f=!0;for(let h=i;h<o;h++){let y=n.charAt(h);if(a!=null&&a.indexOf(y)>=0){c=h;break}if(s!=null&&s.indexOf(y)>=0){if(f)throw new mo("Invalid char at: "+h);f=!0}else if(this.isTokenChar(y,f))f=!1;else{if(y!="%")throw new mo("Invalid char at: "+h);{if(h+2>=o)throw new mo("Invalid char at: "+h);let g=n.charAt(++h);if(!this.isHexChar(g))throw new mo("Invalid hex char at: "+h);if(g=n.charAt(++h),!this.isHexChar(g))throw new mo("Invalid hex char at: "+h);f=!1}}}return c}parse(n,i){if(n==null&&(n=null),this.superThis.did=n,i==null)throw new mo("Null DIDURL string");let o,a=0,s=i.length;for(;s>0&&i.charAt(s-1)<=" ";)s--;for(;a<s&&i.charAt(a)<=" ";)a++;if(a==s)throw new mo("Empty DIDURL string");let c=a;if(c<s&&i.substring(c,c+4)=="did:"){o=this.scanNextPart(i,c,s,"/?#",":");try{this.superThis.did=Oe.createFrom(i.toString(),c,o)}catch(f){throw new mo("Invalid did at: "+c,f)}c=o}if(c<s&&i.charAt(c)=="/"&&(o=this.scanNextPart(i,c+1,s,"?#","/"),this.superThis.path=i.substring(c,o),c=o),c<s&&i.charAt(c)=="?"){o=this.scanNextPart(i,c+1,s,"#","&=");let f=i.substring(c+1,o);if(c=o,f!=""){let h=new Map,y=f.split("&");for(let g of y){let _=g.split("=");if(_.length>0&&_[0]!=""){let E=_[0],O=_.length==2?_[1]:null;h.set(E,O)}}this.superThis.query=h}}else this.superThis.query=new Map;if(c<s&&i.charAt(c)=="#"||c==a){i.charAt(c)=="#"&&c++,o=this.scanNextPart(i,c,s,"",null);let f=i.substring(c,o);f!=""&&(this.superThis.fragment=f)}}}(this),oe(!!e||!!r,"Invalid context and url"),!e)return this.did=r,this.query=new Map,this;typeof e=="string"?this.parser.parse(r,e):(e.did!=null&&(this.did=e.did),this.path=e.path,this.query=e.query,this.queryString=e.queryString,this.fragment=e.fragment,this.repr=e.repr,this.metadata=e.metadata)}static fromDID(e){return new Je(null,e)}static from(e,r){if(!e)return null;let n;return n=r==null?null:typeof r=="string"?Oe.from(r):r,typeof e=="string"||n?new Je(e,n):e}clone(e){let r=Je.fromDID(this.did);return r.path=this.path,r.query=this.query.size==0&&e?new Map:new Map(this.query),r.queryString=this.queryString,r.fragment=this.fragment,r.repr=this.repr,r}getDid(){return this.did}setDid(e){this.did=e}mapToString(e,r){let n=!0,i="";return e.forEach((o,a)=>{n?n=!1:i+=r,i+=a,o!=null&&(i+="="+o)}),i}getPath(){return this.path}setPath(e){this.path=e}getQueryString(){return this.query.size==0?null:(this.queryString==null&&(this.queryString=this.mapToString(this.query,"&")),this.queryString)}getQuery(){return this.query}setQuery(e){this.query=new Map(e)}getQueryParameter(e){oe(e!=null&&e!=="","Invalid parameter name");let r=this.query.get(e);return r==null?null:r}hasQueryParameter(e){return oe(e!=null&&e!="","Invalid parameter name"),this.query.has(e)}getFragment(){return this.fragment}setFragment(e){this.fragment=e}setMetadata(e){this.metadata=e}getMetadata(){return this.metadata}isQualified(){return this.did!=null&&this.fragment!=null}toJSON(e=null){let r=null;return e&&(r=new Oe(e)),this.toString(r)}toString(e=null){if(!e&&this.repr)return this.repr;let r="";return this.did==null||e!=null&&this.did.equals(e)||(r+=this.did),this.path!=null&&this.path!==""&&(r+=this.path),this.query!=null&&this.query.size!=0&&(r+="?"+this.getQueryString()),this.fragment!=null&&this.fragment!==""&&(r+="#"+this.getFragment()),e||(this.repr=r),r}equals(e){if(e==this)return!0;if(e instanceof Je){let r=e;return this.toString()===r.toString()}if(typeof e=="string"){let r=e;return this.toString()===r}return!1}compareTo(e){return Sb(e,"id is null"),r=this.toString(),n=e.toString(),r<n?-1:r>n?1:0;var r,n}hashCode(){return na(this.toString())}}Je.SEPS=[":",";","/","?","#"],function(t){t.Builder=class{constructor(e){this.url=e instanceof Oe?t.fromDID(e):e.clone(!1)}setDid(e){return oe(e!=null,"Invalid did"),typeof e=="string"?this.url.setDid(Oe.from(e)):this.url.setDid(e),this}clearDid(){return this.url.setDid(null),this}setPath(e){return this.url.setPath(e),this}clearPath(){return this.url.setPath(""),this}setQueryParameter(e,r){return oe(e!=null&&e!=="","Invalid parameter name"),this.url.getQuery().set(e,r),this}setQueryParameters(e){return this.url.getQuery().clear(),e!=null&&e.size>0&&e.forEach((r,n)=>this.url.getQuery().set(n,r)),this}removeQueryParameter(e){return oe(e!=null&&e!=="","Invalid parameter name"),this.url.getQuery().delete(e),this}clearQueryParameters(){return this.url.getQuery().clear(),this}setFragment(e){return this.url.setFragment(e),this}clearFragment(){return this.url.setFragment(""),this}build(){return this.url.clone(!0)}}}(Je||(Je={})),function(t){t[t.ERROR=0]="ERROR",t[t.WARNING=1]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.TRACE=4]="TRACE"}(Iy||(Iy={}));class ta{static enableJsonLdContext(e){this.enabledJsonLdContext=e}static isEnabledJsonLdContext(){return this.enabledJsonLdContext}static setLogLevel(e){We.setLevel(new Es(e))}static getLogLevel(){return We.getLevel().getLevel()}}ta.enabledJsonLdContext=!1;class Ii{constructor(e){this.header=e||{}}setAlgorithm(e){return delete this.header.alg,this.header.alg=e,this}getAlgorithm(){return this.header.alg}setKeyId(e){return this.header.kid=e,this}getKeyId(){return this.header.kid}setType(e){return this.header.typ=e,this}getType(){return this.header.typ}setContentType(e){return this.header.cty=e,this}getContentType(){return this.header.cty}put(e,r){return e!=Ii.ALG&&e!=Ii.KID&&(this.header[e]&&delete this.header[e],this.header[e]=r),this}get(e){return this.header?this.header[e]:null}getJWSHeaderParameters(){return this.header}getJWTHeaderParameters(){return this.header.alg!=null&&this.header.alg!=="none"?this.header:null}}Ii.JWT_TYPE="JWT",Ii.TYPE="typ",Ii.CONTENT_TYPE="cty",Ii.ALG="alg",Ii.KID="kid";class Qu{constructor(e){this.payload=e||{}}put(e,r){return this.payload[e]&&delete this.payload[e],this.payload[e]=r,this}putWithObject(e){return this.payload=Object.assign(Object.assign({},this.payload),e),this}putWithJson(e){let r=JSON.parse(e);return this.putWithObject(r),this}get(e){return this.payload[e]}getAsObject(e){let r=this.payload[e];return r!=null?r:null}getAsJson(e){let r=this.payload[e];return r==null?null:JSON.stringify(r)}setId(e){return this.payload.jti=e,this}getId(){return this.payload.jti}setAudience(e){return this.payload.aud=e,this}getAudience(){return this.payload.aud}setExpiration(e){return this.payload.exp=e,this}getExpiration(){return this.payload.exp}setIssuedAt(e){return this.payload.iat=e,this}getIssuedAt(){return this.payload.iat}setIssuer(e){return this.payload.iss=e,this}getIssuer(){return this.payload.iss}setJti(e){return this.payload.jti=e,this}getJti(){return this.payload.jti}setNotBefore(e){return this.payload.nbf=e,this}getNotBefore(){return this.payload.nbf}setSubject(e){return this.payload.sub=e,this}getSubject(){return this.payload.sub}getJWTPayload(){return this.payload}}const eo=new TextEncoder,ia=new TextDecoder;function Eb(...t){const e=t.reduce((i,{length:o})=>i+o,0),r=new Uint8Array(e);let n=0;return t.forEach(i=>{r.set(i,n),n+=i.length}),r}const gc=t=>(e=>{let r=e;typeof r=="string"&&(r=eo.encode(r));const n=[];for(let i=0;i<r.length;i+=32768)n.push(String.fromCharCode.apply(null,r.subarray(i,i+32768)));return btoa(n.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ra=t=>{let e=t;e instanceof Uint8Array&&(e=ia.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(r=>new Uint8Array(atob(r).split("").map(n=>n.charCodeAt(0))))(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class is extends Error{constructor(e){var r;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class ji extends is{constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class Ay extends is{constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}static get code(){return"ERR_JWT_EXPIRED"}}class Z6 extends is{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class vi extends is{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class cr extends is{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class qs extends is{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class X6 extends is{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var Oc=crypto;function Ib(t){try{return t!=null&&typeof t.extractable=="boolean"&&typeof t.algorithm.name=="string"&&typeof t.type=="string"}catch{return!1}}var Pc=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Ab(){throw new Error("setTimeout has not been defined")}function kb(){throw new Error("clearTimeout has not been defined")}var Ko=Ab,qo=kb;function Db(t){if(Ko===setTimeout)return setTimeout(t,0);if((Ko===Ab||!Ko)&&setTimeout)return Ko=setTimeout,setTimeout(t,0);try{return Ko(t,0)}catch{try{return Ko.call(null,t,0)}catch{return Ko.call(this,t,0)}}}typeof Pc.setTimeout=="function"&&(Ko=setTimeout),typeof Pc.clearTimeout=="function"&&(qo=clearTimeout);var Ka,Ao=[],Hs=!1,Yl=-1;function G6(){Hs&&Ka&&(Hs=!1,Ka.length?Ao=Ka.concat(Ao):Yl=-1,Ao.length&&xb())}function xb(){if(!Hs){var t=Db(G6);Hs=!0;for(var e=Ao.length;e;){for(Ka=Ao,Ao=[];++Yl<e;)Ka&&Ka[Yl].run();Yl=-1,e=Ao.length}Ka=null,Hs=!1,function(r){if(qo===clearTimeout)return clearTimeout(r);if((qo===kb||!qo)&&clearTimeout)return qo=clearTimeout,clearTimeout(r);try{qo(r)}catch{try{return qo.call(null,r)}catch{return qo.call(this,r)}}}(t)}}function xr(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ao.push(new Tb(t,e)),Ao.length!==1||Hs||Db(xb)}function Tb(t,e){this.fun=t,this.array=e}Tb.prototype.run=function(){this.fun.apply(null,this.array)};function os(){}var $6=os,Q6=os,e3=os,t3=os,r3=os,n3=os,i3=os,Is=Pc.performance||{},o3=Is.now||Is.mozNow||Is.msNow||Is.oNow||Is.webkitNow||function(){return new Date().getTime()},a3=new Date,Zt={nextTick:xr,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:$6,addListener:Q6,once:e3,off:t3,removeListener:r3,removeAllListeners:n3,emit:i3,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*o3.call(Is),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-a3)/1e3}};function Fp(){return typeof WebSocketPair=="function"}function xf(){try{return Zt.versions.node!==void 0}catch{return!1}}function Bi(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function Nu(t,e){return t.name===e}function Hh(t){return parseInt(t.name.substr(4),10)}function s3(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!Nu(t.algorithm,"HMAC"))throw Bi("HMAC");const n=parseInt(e.substr(2),10);if(Hh(t.algorithm.hash)!==n)throw Bi(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Nu(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Bi("RSASSA-PKCS1-v1_5");const n=parseInt(e.substr(2),10);if(Hh(t.algorithm.hash)!==n)throw Bi(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Nu(t.algorithm,"RSA-PSS"))throw Bi("RSA-PSS");const n=parseInt(e.substr(2),10);if(Hh(t.algorithm.hash)!==n)throw Bi(`SHA-${n}`,"algorithm.hash");break}case(xf()&&"EdDSA"):if(t.algorithm.name!=="NODE-ED25519"&&t.algorithm.name!=="NODE-ED448")throw Bi("NODE-ED25519 or NODE-ED448");break;case(Fp()&&"EdDSA"):if(!Nu(t.algorithm,"NODE-ED25519"))throw Bi("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!Nu(t.algorithm,"ECDSA"))throw Bi("ECDSA");const n=function(i){switch(i){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==n)throw Bi(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}(function(n,i){if(i.length&&!i.some(o=>n.usages.includes(o))){let o="CryptoKey does not support this operation, its usages must include ";if(i.length>2){const a=i.pop();o+=`one of ${i.join(", ")}, or ${a}.`}else i.length===2?o+=`one of ${i[0]} or ${i[1]}.`:o+=`${i[0]}.`;throw new TypeError(o)}})(t,r)}var Tf=(t,...e)=>{let r="Key must be ";if(e.length>2){const n=e.pop();r+=`one of type ${e.join(", ")}, or ${n}.`}else e.length===2?r+=`one of type ${e[0]} or ${e[1]}.`:r+=`of type ${e[0]}.`;return t==null?r+=` Received ${t}`:typeof t=="function"&&t.name?r+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(r+=` Received an instance of ${t.constructor.name}`),r},ky=t=>Ib(t);const Ki=["CryptoKey"];var Ob=(...t)=>{const e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(const n of e){const i=Object.keys(n);if(r&&r.size!==0)for(const o of i){if(r.has(o))return!1;r.add(o)}else r=new Set(i)}return!0};function lu(t){if(typeof(e=t)!="object"||e===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}var Pb=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},Dy=async t=>{var e,r;const{algorithm:n,keyUsages:i}=function(s){let c,f;switch(s.kty){case"oct":switch(s.alg){case"HS256":case"HS384":case"HS512":c={name:"HMAC",hash:`SHA-${s.alg.substr(-3)}`},f=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new vi(`${s.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":c={name:"AES-GCM"},f=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":c={name:"AES-KW"},f=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":c={name:"PBKDF2"},f=["deriveBits"];break;default:throw new vi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(s.alg){case"PS256":case"PS384":case"PS512":c={name:"RSA-PSS",hash:`SHA-${s.alg.substr(-3)}`},f=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":c={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.substr(-3)}`},f=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":c={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.substr(-3),10)||1}`},f=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new vi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(s.alg){case"ES256":c={name:"ECDSA",namedCurve:"P-256"},f=s.d?["sign"]:["verify"];break;case"ES384":c={name:"ECDSA",namedCurve:"P-384"},f=s.d?["sign"]:["verify"];break;case"ES512":c={name:"ECDSA",namedCurve:"P-521"},f=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":c={name:"ECDH",namedCurve:s.crv},f=s.d?["deriveBits"]:[];break;default:throw new vi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case((Fp()||xf())&&"OKP"):if(s.alg!=="EdDSA")throw new vi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(s.crv){case"Ed25519":c={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},f=s.d?["sign"]:["verify"];break;case(xf()&&"Ed448"):c={name:"NODE-ED448",namedCurve:"NODE-ED448"},f=s.d?["sign"]:["verify"];break;default:throw new vi('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new vi('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:c,keyUsages:f}}(t),o=[n,(e=t.ext)!==null&&e!==void 0&&e,(r=t.key_ops)!==null&&r!==void 0?r:i];if(n.name==="PBKDF2")return Oc.subtle.importKey("raw",ra(t.k),...o);const a={...t};return delete a.alg,Oc.subtle.importKey("jwk",a,...o)};async function xy(t,e,r){if(!lu(t))throw new TypeError("JWK must be an object");if(e||(e=t.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r!=null||(r=t.ext!==!0),r?Dy({...t,alg:e,ext:!1}):ra(t.k);case"RSA":if(t.oth!==void 0)throw new vi('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Dy({...t,alg:e});default:throw new vi('Unsupported "kty" (Key Type) Parameter value')}}var Rb=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?(n=>{if(!(n instanceof Uint8Array)){if(!ky(n))throw new TypeError(Tf(n,...Ki,"Uint8Array"));if(n.type!=="secret")throw new TypeError(`${Ki.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e):((n,i)=>{if(!ky(n))throw new TypeError(Tf(n,...Ki));if(n.type==="secret")throw new TypeError(`${Ki.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(i==="sign"&&n.type==="public")throw new TypeError(`${Ki.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(i==="decrypt"&&n.type==="public")throw new TypeError(`${Ki.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(n.algorithm&&i==="verify"&&n.type==="private")throw new TypeError(`${Ki.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(n.algorithm&&i==="encrypt"&&n.type==="private")throw new TypeError(`${Ki.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,r)};function Cb(t,e,r,n,i){if(i.crit!==void 0&&n.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(a=>typeof a!="string"||a.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=r!==void 0?new Map([...Object.entries(r),...e.entries()]):e;for(const a of n.crit){if(!o.has(a))throw new vi(`Extension Header Parameter "${a}" is not recognized`);if(i[a]===void 0)throw new t(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&n[a]===void 0)throw new t(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}var u3=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};function Mb(t,e){const r=parseInt(t.substr(-3),10);switch(t){case"HS256":case"HS384":case"HS512":return{hash:`SHA-${r}`,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:`SHA-${r}`,name:"RSA-PSS",saltLength:r>>3};case"RS256":case"RS384":case"RS512":return{hash:`SHA-${r}`,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:`SHA-${r}`,name:"ECDSA",namedCurve:e};case((Fp()||xf())&&"EdDSA"):return{name:e,namedCurve:e};default:throw new vi(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function Nb(t,e,r){if(Ib(e))return s3(e,t,r),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Tf(e,...Ki));return Oc.subtle.importKey("raw",e,{hash:`SHA-${t.substr(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Tf(e,...Ki,"Uint8Array"))}var c3=async(t,e,r,n)=>{const i=await Nb(t,e,"verify");Pb(t,i);const o=Mb(t,i.algorithm.namedCurve);try{return await Oc.subtle.verify(o,i,r,n)}catch{return!1}};async function l3(t,e,r){if(t instanceof Uint8Array&&(t=ia.decode(t)),typeof t!="string")throw new cr("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:a}=t.split(".");if(a!==3)throw new cr("Invalid Compact JWS");const s=await async function(f,h,y){var g;if(!lu(f))throw new cr("Flattened JWS must be an object");if(f.protected===void 0&&f.header===void 0)throw new cr('Flattened JWS must have either of the "protected" or "header" members');if(f.protected!==void 0&&typeof f.protected!="string")throw new cr("JWS Protected Header incorrect type");if(f.payload===void 0)throw new cr("JWS Payload missing");if(typeof f.signature!="string")throw new cr("JWS Signature missing or incorrect type");if(f.header!==void 0&&!lu(f.header))throw new cr("JWS Unprotected Header incorrect type");let _={};if(f.protected){const Y=ra(f.protected);try{_=JSON.parse(ia.decode(Y))}catch{throw new cr("JWS Protected Header is invalid")}}if(!Ob(_,f.header))throw new cr("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const E={..._,...f.header};let O=!0;if(Cb(cr,new Map([["b64",!0]]),y==null?void 0:y.crit,_,E).has("b64")&&(O=_.b64,typeof O!="boolean"))throw new cr('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:R}=E;if(typeof R!="string"||!R)throw new cr('JWS "alg" (Algorithm) Header Parameter missing or invalid');const L=y&&u3("algorithms",y.algorithms);if(L&&!L.has(R))throw new Z6('"alg" (Algorithm) Header Parameter not allowed');if(O){if(typeof f.payload!="string")throw new cr("JWS Payload must be a string")}else if(typeof f.payload!="string"&&!(f.payload instanceof Uint8Array))throw new cr("JWS Payload must be a string or an Uint8Array instance");let q=!1;typeof h=="function"&&(h=await h(_,f),q=!0),Rb(R,h,"verify");const X=Eb(eo.encode((g=f.protected)!==null&&g!==void 0?g:""),eo.encode("."),typeof f.payload=="string"?eo.encode(f.payload):f.payload),ne=ra(f.signature);if(!await c3(R,h,ne,X))throw new X6;let W;W=O?ra(f.payload):typeof f.payload=="string"?eo.encode(f.payload):f.payload;const H={payload:W};return f.protected!==void 0&&(H.protectedHeader=_),f.header!==void 0&&(H.unprotectedHeader=f.header),q?{...H,key:h}:H}({payload:i,protected:n,signature:o},e,r),c={payload:s.payload,protectedHeader:s.protectedHeader};return typeof e=="function"?{...c,key:s.key}:c}var Zl=t=>Math.floor(t.getTime()/1e3);const f3=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var Of=t=>{const e=f3.exec(t);if(!e)throw new TypeError("Invalid time period format");const r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};const Ty=t=>t.toLowerCase().replace(/^application\//,"");var jb=(t,e,r={})=>{const{typ:n}=r;if(n&&(typeof t.typ!="string"||Ty(t.typ)!==Ty(n)))throw new ji('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(ia.decode(e))}catch{}if(!lu(i))throw new qs("JWT Claims Set must be a top-level JSON object");const{issuer:o}=r;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new ji('unexpected "iss" claim value',"iss","check_failed");const{subject:a}=r;if(a&&i.sub!==a)throw new ji('unexpected "sub" claim value',"sub","check_failed");const{audience:s}=r;if(s&&(c=i.aud,f=typeof s=="string"?[s]:s,!(typeof c=="string"?f.includes(c):Array.isArray(c)&&f.some(Set.prototype.has.bind(new Set(c))))))throw new ji('unexpected "aud" claim value',"aud","check_failed");var c,f;let h;switch(typeof r.clockTolerance){case"string":h=Of(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:y}=r,g=Zl(y||new Date);if(i.iat!==void 0||r.maxTokenAge){if(typeof i.iat!="number")throw new ji('"iat" claim must be a number',"iat","invalid");if(i.exp===void 0&&i.iat>g+h)throw new ji('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new ji('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>g+h)throw new ji('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new ji('"exp" claim must be a number',"exp","invalid");if(i.exp<=g-h)throw new Ay('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const _=g-i.iat;if(_-h>(typeof r.maxTokenAge=="number"?r.maxTokenAge:Of(r.maxTokenAge)))throw new Ay('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(_<0-h)throw new ji('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i},h3=async(t,e,r)=>{const n=await Nb(t,e,"sign");Pb(t,n);const i=await Oc.subtle.sign(Mb(t,n.algorithm.namedCurve),n,r);return new Uint8Array(i)};class d3{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new cr("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ob(this._protectedHeader,this._unprotectedHeader))throw new cr("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader};let i=!0;if(Cb(cr,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n).has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new cr('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=n;if(typeof o!="string"||!o)throw new cr('JWS "alg" (Algorithm) Header Parameter missing or invalid');Rb(o,e,"sign");let a,s=this._payload;i&&(s=eo.encode(gc(s))),a=this._protectedHeader?eo.encode(gc(JSON.stringify(this._protectedHeader))):eo.encode("");const c=Eb(a,eo.encode("."),s),f=await h3(o,e,c),h={signature:gc(f),payload:""};return i&&(h.payload=ia.decode(s)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=ia.decode(a)),h}}class p3{constructor(e){this._flattened=new d3(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,r){const n=await this._flattened.sign(e,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class Bb{constructor(e){if(!lu(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload=typeof e=="number"?{...this._payload,nbf:e}:{...this._payload,nbf:Zl(new Date)+Of(e)},this}setExpirationTime(e){return this._payload=typeof e=="number"?{...this._payload,exp:e}:{...this._payload,exp:Zl(new Date)+Of(e)},this}setIssuedAt(e){return this._payload=e===void 0?{...this._payload,iat:Zl(new Date)}:{...this._payload,iat:e},this}}class y3 extends Bb{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,r){var n;const i=new p3(eo.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new qs("JWTs MUST NOT use unencoded payload");return i.sign(e,r)}}class g3 extends Bb{encode(){return`${gc(JSON.stringify({alg:"none"}))}.${gc(JSON.stringify(this._payload))}.`}static decode(e,r){if(typeof e!="string")throw new qs("Unsecured JWT must be a string");const{0:n,1:i,2:o,length:a}=e.split(".");if(a!==3||o!=="")throw new qs("Invalid Unsecured JWT");let s;try{if(s=JSON.parse(ia.decode(ra(n))),s.alg!=="none")throw new Error}catch{throw new qs("Invalid Unsecured JWT")}return{payload:jb(s,ra(i),r),header:s}}}const m3=ra;function Oy(t){let e;if(typeof t=="string"){const r=t.split(".");r.length!==3&&r.length!==5||([e]=r)}else if(typeof t=="object"&&t){if(!("protected"in t))throw new TypeError("Token does not contain a Protected Header");e=t.protected}try{if(typeof e!="string"||!e)throw new Error;const r=JSON.parse(ia.decode(m3(e)));if(!lu(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}class b3{constructor(e,r){this.header=null,this.payload=null,oe(e!=null,"Invalid issuer"),this.header=new Ii,this.payload=new Qu,this.payload.setIssuer(e.toString()),this.keyprovider=r,this.issuer=e}static createHeader(){return new Ii}static createClaims(){return new Qu}setHeader(e){return this.header=e,this}setClaims(e){return this.payload=e,e.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}setClaimsWithJson(e){return this.payload=new Qu,this.payload.putWithJson(e),this.payload.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}setClaimsWithObject(e){return this.payload=new Qu,this.payload.putWithObject(e),this.payload.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}addClaims(e){return this.payload.putWithObject(e),this}addClaimsWithJson(e){let r=JSON.parse(e);return this.addClaims(r),this}addHeader(e,r){return this.header.put(e,r),this}claims(e,r){return this.payload.put(e,r),this}claimsWithJson(e,r){let n=JSON.parse(r);return this.claims(e,n),this}setId(e){return this.payload.setId(e),this}setAudience(e){return this.payload.setAudience(e),this}setExpiration(e){let r=e instanceof Date?e.getUTCSeconds():e;return this.payload.setExpiration(r),this}setIssuedAt(e){let r=e instanceof Date?e.getUTCSeconds():e;return this.payload.setIssuedAt(r),this}setIssuer(e){return this.payload.setIssuer(e),this}setJti(e){return this.payload.setJti(e),this}setNotBefore(e){let r=e instanceof Date?e.getUTCSeconds():e;return this.payload.setNotBefore(r),this}setSubject(e){return this.payload.setSubject(e),this}sign(e,r=null){return ve(this,void 0,void 0,function*(){oe(e!=null&&e!="","Invalid password"),this.header.setAlgorithm("ES256"),r&&this.header.setKeyId(r);const n=new y3(this.payload.getJWTPayload()).setProtectedHeader(this.header.getJWTHeaderParameters());let i=yield this.keyprovider.getPrivateKey(r,e);return yield n.sign(i)})}compact(){return this.header.setAlgorithm("none"),`${Zr.fromString(JSON.stringify(this.header.getJWSHeaderParameters()))}.${Zr.fromString(JSON.stringify(this.payload.getJWTPayload()))}.`}}class Py{constructor(e,r){this.header=new Ii(e),this.claims=new Qu(r)}getHeader(){return this.header}getBody(){return this.claims}}class v3{constructor(e,r){this.keyprovider=e,this.options=r}isSigned(e){return Oy(e).alg!="none"}getSignkey(e){return Oy(e).kid}getIssuer(e){let r=e.split(".");if(r.length!=3)throw new $u("Invalid jwt token.");let n=JSON.parse(Zr.toString(r[1])).iss;if(n==null)throw new $u("No issuer in the token.");return n}parse(e){return ve(this,void 0,void 0,function*(){if(this.isSigned(e)){if(this.keyprovider==null){let i=Oe.from(this.getIssuer(e));if(i==null)throw new $u("No issuer in the token");let o=yield i.resolve();if(o==null)throw new Mt("No issuer doc in the chain.");this.keyprovider=o.getKeyProvider()}let n=yield this.keyprovider.getPublicKey(this.getSignkey(e));var r;try{r=yield async function(i,o,a){var s;const c=await l3(i,o,a);if(((s=c.protectedHeader.crit)===null||s===void 0?void 0:s.includes("b64"))&&c.protectedHeader.b64===!1)throw new qs("JWTs MUST NOT use unencoded payload");const f={payload:jb(c.protectedHeader,c.payload,a),protectedHeader:c.protectedHeader};return typeof o=="function"?{...f,key:c.key}:f}(e,n,this.options)}catch(i){throw new $u(i)}return new Py(r.protectedHeader,r.payload)}{const n=g3.decode(e,this.options);return new Py(n.header,n.payload)}})}}class Up{constructor(){return this.keyProvider=null,this.options={},this}static newWithKeyProvider(e){let r=new Up;return r.keyProvider=e,r}requireSubject(e){return this.options.subject=e,this}requireAudience(e){return this.options.audience=e,this}requireIssuer(e){return this.options.issuer=e,this}requireIssuedAt(e){return this.options.maxTokenAge=e,this}requireAlgorithms(e){return this.options.algorithms=e,this}requireHeaderType(e){return this.options.typ=e,this}setAllowedClockSkewSeconds(e){return this.options.clockTolerance=e,this}build(){return Object.assign({},this.options),new v3(this.keyProvider,this.options)}}class lr extends Vr{constructor(e=null,r=null){super(r),this.id=e}setId(e){this.id=e}setTransactionId(e){this.put(lr.TXID,e)}getTransactionId(){return this.get(lr.TXID)}setPublished(e){oe(e!=null,"Invalid timestamp"),this.put(lr.PUBLISHED,e)}getPublished(){return this.getDate(lr.PUBLISHED,null)}setRevoked(e){this.put(lr.REVOKED,e)}isRevoked(){return this.getBoolean(lr.REVOKED,!1)}clone(){try{return super.clone()}catch(e){return lr.log.error(e),null}}save(){if(this.attachedStore())try{this.getStore().storeCredentialMetadata(this.id,this)}catch(e){throw lr.log.error("INTERNAL - error store metadata for credential {}",this.id),e}}static parse(e,r=null){try{return Pe.deserialize(e,lr,r)}catch(n){throw n instanceof Oo?n:new Oo(n)}}}lr.TXID="txid",lr.PUBLISHED="published",lr.REVOKED="revoked",lr.log=new We("CredentialMetadata");var Ry,Cy,My,ei=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",o="minute",a="hour",s="day",c="week",f="month",h="quarter",y="year",g="date",_="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},L=function(D,w,k){var A=String(D);return!A||A.length>=w?D:""+Array(w+1-A.length).join(k)+D},q={s:L,z:function(D){var w=-D.utcOffset(),k=Math.abs(w),A=Math.floor(k/60),b=k%60;return(w<=0?"+":"-")+L(A,2,"0")+":"+L(b,2,"0")},m:function D(w,k){if(w.date()<k.date())return-D(k,w);var A=12*(k.year()-w.year())+(k.month()-w.month()),b=w.clone().add(A,f),P=k-b<0,V=w.clone().add(A+(P?-1:1),f);return+(-(A+(k-b)/(P?b-V:V-b))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:f,y,w:c,d:s,D:g,h:a,m:o,s:i,ms:n,Q:h}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},X="en",ne={};ne[X]=R;var W=function(D){return D instanceof te},H=function(D,w,k){var A;if(!D)return X;if(typeof D=="string")ne[D]&&(A=D),w&&(ne[D]=w,A=D);else{var b=D.name;ne[b]=D,A=b}return!k&&A&&(X=A),A||!k&&X},Y=function(D,w){if(W(D))return D.clone();var k=typeof w=="object"?w:{};return k.date=D,k.args=arguments,new te(k)},T=q;T.l=H,T.i=W,T.w=function(D,w){return Y(D,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var te=function(){function D(k){this.$L=H(k.locale,null,!0),this.parse(k)}var w=D.prototype;return w.parse=function(k){this.$d=function(A){var b=A.date,P=A.utc;if(b===null)return new Date(NaN);if(T.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var V=b.match(E);if(V){var Q=V[2]-1||0,U=(V[7]||"0").substring(0,3);return P?new Date(Date.UTC(V[1],Q,V[3]||1,V[4]||0,V[5]||0,V[6]||0,U)):new Date(V[1],Q,V[3]||1,V[4]||0,V[5]||0,V[6]||0,U)}}return new Date(b)}(k),this.$x=k.x||{},this.init()},w.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},w.$utils=function(){return T},w.isValid=function(){return this.$d.toString()!==_},w.isSame=function(k,A){var b=Y(k);return this.startOf(A)<=b&&b<=this.endOf(A)},w.isAfter=function(k,A){return Y(k)<this.startOf(A)},w.isBefore=function(k,A){return this.endOf(A)<Y(k)},w.$g=function(k,A,b){return T.u(k)?this[A]:this.set(b,k)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(k,A){var b=this,P=!!T.u(A)||A,V=T.p(k),Q=function(C,j){var S=T.w(b.$u?Date.UTC(b.$y,j,C):new Date(b.$y,j,C),b);return P?S:S.endOf(s)},U=function(C,j){return T.w(b.toDate()[C].apply(b.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(j)),b)},Z=this.$W,fe=this.$M,se=this.$D,ue="set"+(this.$u?"UTC":"");switch(V){case y:return P?Q(1,0):Q(31,11);case f:return P?Q(1,fe):Q(0,fe+1);case c:var ge=this.$locale().weekStart||0,me=(Z<ge?Z+7:Z)-ge;return Q(P?se-me:se+(6-me),fe);case s:case g:return U(ue+"Hours",0);case a:return U(ue+"Minutes",1);case o:return U(ue+"Seconds",2);case i:return U(ue+"Milliseconds",3);default:return this.clone()}},w.endOf=function(k){return this.startOf(k,!1)},w.$set=function(k,A){var b,P=T.p(k),V="set"+(this.$u?"UTC":""),Q=(b={},b[s]=V+"Date",b[g]=V+"Date",b[f]=V+"Month",b[y]=V+"FullYear",b[a]=V+"Hours",b[o]=V+"Minutes",b[i]=V+"Seconds",b[n]=V+"Milliseconds",b)[P],U=P===s?this.$D+(A-this.$W):A;if(P===f||P===y){var Z=this.clone().set(g,1);Z.$d[Q](U),Z.init(),this.$d=Z.set(g,Math.min(this.$D,Z.daysInMonth())).$d}else Q&&this.$d[Q](U);return this.init(),this},w.set=function(k,A){return this.clone().$set(k,A)},w.get=function(k){return this[T.p(k)]()},w.add=function(k,A){var b,P=this;k=Number(k);var V=T.p(A),Q=function(fe){var se=Y(P);return T.w(se.date(se.date()+Math.round(fe*k)),P)};if(V===f)return this.set(f,this.$M+k);if(V===y)return this.set(y,this.$y+k);if(V===s)return Q(1);if(V===c)return Q(7);var U=(b={},b[o]=e,b[a]=r,b[i]=t,b)[V]||1,Z=this.$d.getTime()+k*U;return T.w(Z,this)},w.subtract=function(k,A){return this.add(-1*k,A)},w.format=function(k){var A=this,b=this.$locale();if(!this.isValid())return b.invalidDate||_;var P=k||"YYYY-MM-DDTHH:mm:ssZ",V=T.z(this),Q=this.$H,U=this.$m,Z=this.$M,fe=b.weekdays,se=b.months,ue=function(j,S,M,B){return j&&(j[S]||j(A,P))||M[S].substr(0,B)},ge=function(j){return T.s(Q%12||12,j,"0")},me=b.meridiem||function(j,S,M){var B=j<12?"AM":"PM";return M?B.toLowerCase():B},C={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Z+1,MM:T.s(Z+1,2,"0"),MMM:ue(b.monthsShort,Z,se,3),MMMM:ue(se,Z),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:ue(b.weekdaysMin,this.$W,fe,2),ddd:ue(b.weekdaysShort,this.$W,fe,3),dddd:fe[this.$W],H:String(Q),HH:T.s(Q,2,"0"),h:ge(1),hh:ge(2),a:me(Q,U,!0),A:me(Q,U,!1),m:String(U),mm:T.s(U,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:V};return P.replace(O,function(j,S){return S||C[j]||V.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(k,A,b){var P,V=T.p(A),Q=Y(k),U=(Q.utcOffset()-this.utcOffset())*e,Z=this-Q,fe=T.m(this,Q);return fe=(P={},P[y]=fe/12,P[f]=fe,P[h]=fe/3,P[c]=(Z-U)/6048e5,P[s]=(Z-U)/864e5,P[a]=Z/r,P[o]=Z/e,P[i]=Z/t,P)[V]||Z,b?fe:T.a(fe)},w.daysInMonth=function(){return this.endOf(f).$D},w.$locale=function(){return ne[this.$L]},w.locale=function(k,A){if(!k)return this.$L;var b=this.clone(),P=H(k,A,!0);return P&&(b.$L=P),b},w.clone=function(){return T.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},D}(),v=te.prototype;return Y.prototype=v,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",s],["$M",f],["$y",y],["$D",g]].forEach(function(D){v[D[1]]=function(w){return this.$g(w,D[0],D[1])}}),Y.extend=function(D,w){return D.$i||(D(w,te,Y),D.$i=!0),Y},Y.locale=H,Y.isDayjs=W,Y.unix=function(D){return Y(1e3*D)},Y.en=ne[X],Y.Ls=ne,Y.p={},Y}();(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.INTERNAL=1]="INTERNAL"})(Ry||(Ry={})),function(t){t[t.ELA=0]="ELA",t[t.IDCHAIN=1]="IDCHAIN"}(Cy||(Cy={})),function(t){t.ELA_STANDARD="ELA_STANDARD",t.ELA_MULTISIG="ELA_MULTISIG",t.ELA_CROSSCHAIN="ELA_CROSSCHAIN",t.ELA_IDCHAIN="ELA_IDCHAIN",t.ELA_DESTROY="ELA_DESTROY"}(My||(My={}));class tt{}tt._DEFAULT_PUBLICKEY_TYPE="secp256r1",tt.DEFAULT_PUBLICKEY_TYPE="ECDSAsecp256r1",tt.DATE_FORMAT="yyyy-MM-dd'T'HH:mm:ss'Z'",tt.DATE_FORMAT_ISO_8601="yyyy-MM-dd'T'HH:mm:ss.SSS'Z'",tt.MAX_VALID_YEARS=5;const li=new We("VerifiableCredential");class gt extends Pe{constructor(){super()}static newWithVerifiableCredential(e,r){let n=new gt;return n.context=e.context,n.id=e.id,n.type=e.type,n.issuer=e.issuer,n.issuanceDate=e.issuanceDate,n.expirationDate=e.expirationDate,n.subject=e.subject,r&&(n.proof=e.proof),n}checkAttachedStore(){if(!this.getMetadata().attachedStore())throw new kc("Not attach with did store")}getId(){return this.id}getType(){return this.type}getIssuer(){return this.issuer}getIssuanceDate(){return this.issuanceDate}hasExpirationDate(){return this.expirationDate!=null}getExpirationDate(){return ve(this,void 0,void 0,function*(){if(this.expirationDate!=null)return this.expirationDate;try{let e=yield this.subject.getId().resolve();if(e!=null)return e.getExpires()}catch{return null}return null})}getLastModified(){return this.proof.getCreated()}getSubject(){return this.subject}getProof(){return this.proof}getSerializeContextDid(){return this.getSubject().getId()}setMetadata(e){this.metadata=e,this.getId().setMetadata(e)}getMetadata(){return this.metadata==null&&(this.metadata=new lr(this.getId())),this.metadata}getStore(){return this.metadata.getStore()}isSelfProclaimed(){return this.issuer.equals(this.subject.getId())}isExpired(){return!(this.expirationDate==null||!ei().isAfter(ei(this.expirationDate)))}isGenuine(e=null){return ve(this,void 0,void 0,function*(){if(!this.getId().getDid().equals(this.getSubject().getId()))return e!=null&&(e.failed(this,"VC {}: invalid id '{}', should under the scope of '{}'",this.getId(),this.getId(),this.getSubject().getId()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;let r=yield this.issuer.resolve();if(r==null)return e!=null&&(e.failed(this,"VC {}: Can not resolve the document for issuer '{}'",this.getId(),this.getIssuer()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!r.isGenuine(e))return e!=null&&(e.failed(this,"VC {}: issuer '{}' is not genuine",this.getId(),this.getIssuer()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!r.isAuthenticationKey(this.proof.getVerificationMethod()))return e!=null&&(e.failed(this,"VC {}: key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;if(this.proof.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"VC {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;let n=gt.newWithVerifiableCredential(this,!1).serialize(!0);if(!r.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),Se.Buffer.from(n)))return e!=null&&(e.failed(this,"VC {}: proof is invalid, signature mismatch",this.getId()),e.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!this.isSelfProclaimed()){let i=yield this.subject.getId().resolve();if(i!=null&&!i.isGenuine(e))return e!=null&&(e.failed(this,"VC {}: holder's document is not genuine",this.getId()),e.failed(this,"VC {}: is not genuine",this.getId())),!1}return e!=null&&e.succeeded(this,"VC {}: is genuine",this.getId()),!0})}isGenuineInternal(e){if(function(n,i){if(!n)throw new Error(i)}(this.isSelfProclaimed(),"The credential should be self-proclaimed"),oe(this.getSubject().getId().equals(e.getSubject()),"Invalid owner document"),!this.getId().getDid().equals(this.getSubject().getId())||!e.isAuthenticationKey(this.proof.getVerificationMethod())||this.proof.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return!1;let r=gt.newWithVerifiableCredential(this,!1).serialize(!0);return!!e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),Se.Buffer.from(r))}isRevoked(){return ve(this,void 0,void 0,function*(){if(this.getMetadata().isRevoked())return!0;let e=yield yt.getInstance().resolveCredentialBiography(this.getId(),this.getIssuer());if(e==null)return!1;let r=e.getStatus().equals(Fr.REVOKED);return r&&this.getMetadata().setRevoked(r),r})}isValid(e=null){return ve(this,void 0,void 0,function*(){if(yield this.isRevoked())return e!=null&&(e.failed(this,"VC {}: is revoked",this.getId()),e.failed(this,"VC {}: is invalid",this.getId())),!1;if(this.isExpired())return e!=null&&(e.failed(this,"VC {}: is expired",this.getId()),e.failed(this,"VC {}: is invalid",this.getId())),!1;let r=yield this.issuer.resolve();if(r==null)return e!=null&&(e.failed(this,"VC {}: can not resolve the document for issuer '{}'",this.getId(),this.getIssuer()),e.failed(this,"VC {}: is invalid",this.getId())),!1;if(yield r.isDeactivated())return e!=null&&(e.failed(this,"VC {}: issuer '{}' is deactivated",this.getId(),this.getIssuer()),e.failed(this,"VC {}: is invalid",this.getId())),!1;if(!r.isGenuine())return e!=null&&(e.failed(this,"VC {}: issuer '{}' is not genuine",this.getId(),this.getIssuer()),e.failed(this,"VC {}: is invalid",this.getId())),!1;if(!r.isAuthenticationKey(this.proof.getVerificationMethod()))return e!=null&&(e.failed(this,"VC {}: key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),e.failed(this,"VC {}: is invalid",this.getSubject())),!1;if(this.proof.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"VC {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),e.failed(this,"VC {}: is invalid",this.getId())),!1;let n=gt.newWithVerifiableCredential(this,!1).serialize(!0);return r.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),Se.Buffer.from(n))?(e!=null&&e.succeeded(this,"VC {}: is valid",this.getId()),!0):(e!=null&&(e.failed(this,"VC {}: proof is invalid, signature mismatch",this.getId()),e.failed(this,"VC {}: is invalid",this.getId())),!1)})}wasDeclared(){return ve(this,void 0,void 0,function*(){let e=yield yt.getInstance().resolveCredentialBiography(this.getId(),this.getIssuer());if(e.getStatus()==Fr.NOT_FOUND)return!1;for(let r of e.getAllTransactions())if(r.getRequest().getOperation().equals(Ve.Operation.DECLARE))return!0;return!1})}declare(e,r,n=null){return ve(this,void 0,void 0,function*(){if(oe(r!=null&&r!=="","Invalid storepass"),this.checkAttachedStore(),!(yield this.isGenuine()))throw li.error("Publish failed because the credential is not genuine."),new fb(this.getId().toString()+" isn't genuine");if(yield this.isExpired())throw li.error("Publish failed because the credential is expired."),new hb(this.getId().toString()+" is expired");if(yield this.isRevoked())throw li.error("Publish failed because the credential is revoked."),new Hl(this.getId().toString()+" is revoked");if(yield this.wasDeclared())throw li.error("Publish failed because the credential already declared."),new db(this.getId().toString()+" is already declared");let i=yield this.getStore().loadDid(this.getSubject().getId());if(i==null){if(i=yield this.getSubject().getId().resolve(),i==null)throw new Qn(this.getSubject().getId().toString()+" isn't found in the chain");i.getMetadata().attachStore(this.getStore())}if(e==null&&i.getDefaultPublicKeyId()==null)throw new It("Unknown sign key");if(e!=null){if(!i.isAuthenticationKey(e))throw new It(e.toString()+" isn't the authentication key")}else e=i.getDefaultPublicKeyId();yield yt.getInstance().declareCredential(this,i,e,r,n)})}revoke(e,r=null,n=null,i=null){return ve(this,void 0,void 0,function*(){oe(n!=null&&n!=="","Invalid storepass"),this.checkAttachedStore(),r!=null&&r.getMetadata().attachedStore()&&this.getMetadata().attachStore(r.getStore());let o=yield this.getSubject().getId().resolve();if(o==null)throw li.error("Publish failed because the credential owner is not published."),new Qn(this.getSubject().getId().toString()+" isn't found in the chain");o.getMetadata().attachStore(this.getStore());let a=yield this.getIssuer().resolve();if(a==null)throw li.error("Publish failed because the credential issuer is not published."),new Qn(this.getIssuer().toString()+" isn't found in the chain");if(a.getMetadata().attachStore(this.getStore()),yield this.isRevoked())throw li.error("Publish failed because the credential is revoked."),new Hl(this.getId().toString()+" is revoked");if(typeof e=="string"&&(e=Je.from(e,this.getSubject().getId())),r==null){let s=e!=null&&e.getDid()!=null?e.getDid():this.getSubject().getId();if((r=yield this.getStore().loadDid(s))==null){if((r=yield this.getSubject().getId().resolve())==null)throw new Qn(this.getSubject().getId().toString()+" isn't found in the chain");r.getMetadata().attachStore(this.getStore())}}if(!(r.getSubject().equals(this.getSubject().getId())||r.getSubject().equals(this.getIssuer())||o.hasController(r.getSubject())||a.hasController(r.getSubject())))throw li.error("Publish failed because the invalid signer or signkey."),new It("Not owner or issuer: "+r.getSubject());if(e==null&&r.getDefaultPublicKeyId()==null)throw new It("Unknown sign key");if(e!=null){if(!r.isAuthenticationKey(e))throw new It(e.toString()+" isn't the authencation key")}else e=r.getDefaultPublicKeyId();yield yt.getInstance().revokeCredential(this,r,e,n,i)})}static revoke(e,r,n,i,o=null){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid credential id"),oe(r!=null,"Invalid issuer's document"),oe(i&&i!=null,"Invalid storepass"),!r.getMetadata().attachedStore())throw new kc(r.getSubject().toString()+" not attach with did store");let a=yield yt.getInstance().resolveCredentialBiography(e,r.getSubject());if(a.getStatus().equals(Fr.REVOKED))throw li.error("Publish failed because the credential is revoked."),new Hl(e.toString()+" is revoked");if(a.getStatus().equals(Fr.VALID)){let s=a.getTransaction(0).getRequest().getCredential();if(!r.getSubject().equals(s.getSubject().getId())&&!r.getSubject().equals(s.getIssuer()))throw li.error("Publish failed because the invalid signer or signkey."),new It("Not owner or issuer: "+r.getSubject())}if(n==null&&r.getDefaultPublicKeyId()==null)throw new It("Unknown sign key");if(n!=null){if(!r.isAuthenticationKey(n))throw new It(n.toString()+" isn't the authencation key")}else n=r.getDefaultPublicKeyId();yield yt.getInstance().revokeCredential(e,r,n,i,o)})}static resolve(e,r=null,n=!1){return ve(this,void 0,void 0,function*(){if(e==null)throw new ti("No credential id");typeof e=="string"&&(e=Je.from(e)),typeof r=="string"&&(r=Oe.from(r));let i=yield yt.getInstance().resolveCredential(e,r,n);return i!=null&&e.setMetadata(i.getMetadata()),i})}static resolveBiography(e,r){return oe(e!=null,"Invalid credential id"),yt.getInstance().resolveCredentialBiography(e,r)}static list(e,r=0,n=0){return oe(e!=null,"Invalid did"),yt.getInstance().listCredentials(e,r,n)}toJSON(e=null){let r=e?new Oe(e):null,n={};return this.context!=null&&this.context.length>0&&(n["@context"]=Array.from(this.context)),n.id=this.id.toString(r),n.type=this.type,r&&this.issuer.equals(r)||(n.issuer=this.issuer.toString()),this.issuanceDate&&(n.issuanceDate=this.dateToString(this.issuanceDate)),this.expirationDate&&(n.expirationDate=this.dateToString(this.expirationDate)),n.credentialSubject=this.subject.toJSON(e),this.proof&&(n.proof=this.proof.toJSON(e)),n}fromJSON(e,r=null){if(!e.credentialSubject)throw new _o("Missing property: subject");let n=e.credentialSubject,i=this.getDid("credentialSubject.id",n.id,{mandatory:!1,nullable:!1,defaultValue:r});if(!i)throw new _o("Missing property: subject.id");if(this.context=this.getContext("@context",e["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.id=this.getDidUrl("id",e.id,{mandatory:!0,nullable:!1,context:i}),this.type=this.getStrings("type",e.type,{mandatory:!0,nullable:!1}),this.issuer=this.getDid("issuer",e.issuer,{mandatory:!1,nullable:!1,defaultValue:i}),this.issuanceDate=this.getDate("issuanceDate",e.issuanceDate,{mandatory:!0,nullable:!1}),this.expirationDate=this.getDate("expirationDate",e.expirationDate,{mandatory:!0,nullable:!0}),this.subject=gt.Subject.deserialize(n,gt.Subject,i),!e.proof)throw new _o("Missing property: proof");let o=e.proof;this.proof=gt.Proof.deserialize(o,gt.Proof,this.issuer)}static parse(e,r=null){try{return Pe.deserialize(e,gt,r)}catch(n){throw n instanceof _o?n:new _o(n)}}}gt.W3C_CREDENTIAL_CONTEXT="https://www.w3.org/2018/credentials/v1",gt.ELASTOS_CREDENTIAL_CONTEXT="https://ns.elastos.org/credentials/v1",gt.DEFAULT_CREDENTIAL_TYPE="VerifiableCredential",function(t){t.Subject=class extends Pe{constructor(e=null,r={}){super(),this.id=e,this.properties=ea(JSON.parse(JSON.stringify(r)))}getId(){return this.id}getProperties(){return JSON.parse(JSON.stringify(this.properties))}getPropertyCount(){return Object.keys(this.properties).length}getProperty(e){return this.properties[e]}getPropertiesAsString(){return JSON.stringify(this.properties)}toJSON(e=null){e&&new Oe(e);let r={};return r.id=this.id.toString(),r=Object.assign(Object.assign({},r),this.properties),r}fromJSON(e,r=null){this.id=this.getDid("subject.id",e.id,{mandatory:!1,defaultValue:r});let n=JSON.parse(JSON.stringify(e));delete n.id,this.properties=ea(n)}},t.Proof=class extends Pe{constructor(e=null,r=null,n=new Date,i=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.type=i!=null?i:tt.DEFAULT_PUBLICKEY_TYPE,this.created=n==null?null:new Date(n.getTime()/1e3*1e3),this.created&&this.created.setMilliseconds(0),this.verificationMethod=e,this.signature=r}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}getCreated(){return this.created}getSignature(){return this.signature}toJSON(e=null){let r={};return(e?new Oe(e):null)&&this.type===tt.DEFAULT_PUBLICKEY_TYPE||(r.type=this.type),this.created&&(r.created=this.dateToString(this.created)),r.verificationMethod=this.verificationMethod.toJSON(e),r.signature=this.signature,r}fromJSON(e,r=null){this.type=this.getString("proof.type",e.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",e.created,{mandatory:!1}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",e.verificationMethod,{mandatory:!0,nullable:!1,context:r}),this.signature=this.getString("proof.signature",e.signature,{mandatory:!0,nullable:!1})}},t.Builder=class{constructor(e,r){this.issuer=e,this.target=r,this.credential=new t,this.credential.issuer=e.getDid(),this.setDefaultType()}checkNotSealed(){if(this.credential==null)throw new Dc(this.id.toString()+" is already sealed")}id(e){return this.checkNotSealed(),oe(e!=null,"Invalid id"),typeof e=="string"&&(e=Je.from(e,this.target)),oe(e.getDid()==null||e.getDid().equals(this.target),"Invalid id"),e.getDid()==null&&(e=Je.from(e,this.target)),this.credential.id=e,this}setDefaultType(){this.checkNotSealed(),ta.isEnabledJsonLdContext()&&(this.credential.context==null&&(this.credential.context=[]),this.credential.context.includes(t.W3C_CREDENTIAL_CONTEXT)||this.credential.context.push(t.W3C_CREDENTIAL_CONTEXT),this.credential.context.includes(t.ELASTOS_CREDENTIAL_CONTEXT)||this.credential.context.push(t.ELASTOS_CREDENTIAL_CONTEXT)),this.credential.type==null&&(this.credential.type=[]),this.credential.type.includes(t.DEFAULT_CREDENTIAL_TYPE)||this.credential.type.push(t.DEFAULT_CREDENTIAL_TYPE)}typeWithContext(e,r){return this.checkNotSealed(),xo(e,"Invalid type: "+e),ta.isEnabledJsonLdContext()?(xo(r,"Invalid context: "+r),this.credential.context==null&&(this.credential.context=[]),this.credential.context.includes(r)||this.credential.context.push(r)):li.warn("JSON-LD context support not enabled"),this.credential.type==null&&(this.credential.type=[]),this.credential.type.includes(e)||this.credential.type.push(e),this}type(e){if(this.checkNotSealed(),xo(e,"Invalid type: "+e),e.indexOf("#")<0)return this.typeWithContext(e,null);{let r=e.split("#",2);return this.typeWithContext(r[1],r[0])}}types(...e){if(e==null||e.length==0)return this;this.checkNotSealed();for(let r of e)this.type(r);return this}getMaxExpires(){let e;return e=this.credential.getIssuanceDate()!=null?ei(this.credential.getIssuanceDate()):ei(),e=e.add(tt.MAX_VALID_YEARS,"years"),e.toDate()}defaultExpirationDate(){return this.checkNotSealed(),this.credential.expirationDate=this.getMaxExpires(),this.credential.expirationDate&&this.credential.expirationDate.setMilliseconds(0),this}expirationDate(e){this.checkNotSealed(),oe(e!=null,"Invalid expiration date");let r=ei(e),n=this.getMaxExpires();return r.isAfter(n)&&(r=ei(n)),this.credential.expirationDate=r.toDate(),this.credential.expirationDate&&this.credential.expirationDate.setMilliseconds(0),this}properties(e){this.checkNotSealed();let r=typeof e=="string"?JSON.parse(e):JSON.parse(JSON.stringify(e));return delete r.id,e==null||Object.keys(e).length==0?(this.subjectProperties={},this):(this.subjectProperties=r,this)}property(e,r){return this.checkNotSealed(),oe(e!=null&&e!==""&&e!=="id","Invalid name"),this.subjectProperties||(this.subjectProperties={}),this.subjectProperties[e]=r,this}sanitize(){if(this.credential.context!=null&&this.credential.context.length!=0||(this.credential.context=[]),this.credential.id==null)throw new _o("Missing credential id");if(this.credential.type==null||this.credential.type.length==0)throw new _o("Missing credential type");Xc.sort(this.credential.type),this.credential.issuanceDate=new Date,this.credential.issuanceDate&&this.credential.issuanceDate.setMilliseconds(0),this.credential.hasExpirationDate()||this.defaultExpirationDate(),this.subjectProperties=ea(this.subjectProperties),this.credential.proof=null}seal(e){return ve(this,void 0,void 0,function*(){this.checkNotSealed(),oe(e!=null&&e!=="","Invalid storepass"),this.sanitize(),this.credential.subject=new t.Subject(this.target,this.subjectProperties);let r=this.credential.serialize(!0),n=yield this.issuer.sign(e,Se.Buffer.from(r));this.credential.proof=new t.Proof(this.issuer.getSignKey(),n);let i=this.credential;return this.credential=null,i})}}}(gt||(gt={}));var Lb={},Pf={},Vs={},Ws={},Js={},as={},Qt={exports:{}},w3=_b(Object.freeze({__proto__:null,default:{}}));(function(t,e){function r(v,D){if(!v)throw new Error(D||"Assertion failed")}function n(v,D){v.super_=D;var w=function(){};w.prototype=D.prototype,v.prototype=new w,v.prototype.constructor=v}function i(v,D,w){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&(D!=="le"&&D!=="be"||(w=D,D=10),this._init(v||0,D||10,w||"be"))}var o;typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:w3.Buffer}catch{}function a(v,D){var w=v.charCodeAt(D);return w>=48&&w<=57?w-48:w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:void r(!1,"Invalid character in "+v)}function s(v,D,w){var k=a(v,w);return w-1>=D&&(k|=a(v,w-1)<<4),k}function c(v,D,w,k){for(var A=0,b=0,P=Math.min(v.length,w),V=D;V<P;V++){var Q=v.charCodeAt(V)-48;A*=k,b=Q>=49?Q-49+10:Q>=17?Q-17+10:Q,r(Q>=0&&b<k,"Invalid character"),A+=b}return A}function f(v,D){v.words=D.words,v.length=D.length,v.negative=D.negative,v.red=D.red}if(i.isBN=function(v){return v instanceof i||v!==null&&typeof v=="object"&&v.constructor.wordSize===i.wordSize&&Array.isArray(v.words)},i.max=function(v,D){return v.cmp(D)>0?v:D},i.min=function(v,D){return v.cmp(D)<0?v:D},i.prototype._init=function(v,D,w){if(typeof v=="number")return this._initNumber(v,D,w);if(typeof v=="object")return this._initArray(v,D,w);D==="hex"&&(D=16),r(D===(0|D)&&D>=2&&D<=36);var k=0;(v=v.toString().replace(/\s+/g,""))[0]==="-"&&(k++,this.negative=1),k<v.length&&(D===16?this._parseHex(v,k,w):(this._parseBase(v,D,k),w==="le"&&this._initArray(this.toArray(),D,w)))},i.prototype._initNumber=function(v,D,w){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[67108863&v],this.length=1):v<4503599627370496?(this.words=[67108863&v,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[67108863&v,v/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),D,w)},i.prototype._initArray=function(v,D,w){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var A,b,P=0;if(w==="be")for(k=v.length-1,A=0;k>=0;k-=3)b=v[k]|v[k-1]<<8|v[k-2]<<16,this.words[A]|=b<<P&67108863,this.words[A+1]=b>>>26-P&67108863,(P+=24)>=26&&(P-=26,A++);else if(w==="le")for(k=0,A=0;k<v.length;k+=3)b=v[k]|v[k+1]<<8|v[k+2]<<16,this.words[A]|=b<<P&67108863,this.words[A+1]=b>>>26-P&67108863,(P+=24)>=26&&(P-=26,A++);return this._strip()},i.prototype._parseHex=function(v,D,w){this.length=Math.ceil((v.length-D)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var A,b=0,P=0;if(w==="be")for(k=v.length-1;k>=D;k-=2)A=s(v,D,k)<<b,this.words[P]|=67108863&A,b>=18?(b-=18,P+=1,this.words[P]|=A>>>26):b+=8;else for(k=(v.length-D)%2==0?D+1:D;k<v.length;k+=2)A=s(v,D,k)<<b,this.words[P]|=67108863&A,b>=18?(b-=18,P+=1,this.words[P]|=A>>>26):b+=8;this._strip()},i.prototype._parseBase=function(v,D,w){this.words=[0],this.length=1;for(var k=0,A=1;A<=67108863;A*=D)k++;k--,A=A/D|0;for(var b=v.length-w,P=b%k,V=Math.min(b,b-P)+w,Q=0,U=w;U<V;U+=k)Q=c(v,U,U+k,D),this.imuln(A),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(P!==0){var Z=1;for(Q=c(v,U,v.length,D),U=0;U<P;U++)Z*=D;this.imuln(Z),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this._strip()},i.prototype.copy=function(v){v.words=new Array(this.length);for(var D=0;D<this.length;D++)v.words[D]=this.words[D];v.length=this.length,v.negative=this.negative,v.red=this.red},i.prototype._move=function(v){f(v,this)},i.prototype.clone=function(){var v=new i(null);return this.copy(v),v},i.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function E(v,D,w){w.negative=D.negative^v.negative;var k=v.length+D.length|0;w.length=k,k=k-1|0;var A=0|v.words[0],b=0|D.words[0],P=A*b,V=67108863&P,Q=P/67108864|0;w.words[0]=V;for(var U=1;U<k;U++){for(var Z=Q>>>26,fe=67108863&Q,se=Math.min(U,D.length-1),ue=Math.max(0,U-v.length+1);ue<=se;ue++){var ge=U-ue|0;Z+=(P=(A=0|v.words[ge])*(b=0|D.words[ue])+fe)/67108864|0,fe=67108863&P}w.words[U]=0|fe,Q=0|Z}return Q!==0?w.words[U]=0|Q:w.length--,w._strip()}i.prototype.toString=function(v,D){var w;if(D=0|D||1,(v=v||10)===16||v==="hex"){w="";for(var k=0,A=0,b=0;b<this.length;b++){var P=this.words[b],V=(16777215&(P<<k|A)).toString(16);w=(A=P>>>24-k&16777215)!=0||b!==this.length-1?y[6-V.length]+V+w:V+w,(k+=2)>=26&&(k-=26,b--)}for(A!==0&&(w=A.toString(16)+w);w.length%D!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(v===(0|v)&&v>=2&&v<=36){var Q=g[v],U=_[v];w="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var fe=Z.modrn(U).toString(v);w=(Z=Z.idivn(U)).isZero()?fe+w:y[Q-fe.length]+fe+w}for(this.isZero()&&(w="0"+w);w.length%D!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=67108864*this.words[1]:this.length===3&&this.words[2]===1?v+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(v,D){return this.toArrayLike(o,v,D)}),i.prototype.toArray=function(v,D){return this.toArrayLike(Array,v,D)},i.prototype.toArrayLike=function(v,D,w){this._strip();var k=this.byteLength(),A=w||Math.max(1,k);r(k<=A,"byte array longer than desired length"),r(A>0,"Requested array length <= 0");var b=function(P,V){return P.allocUnsafe?P.allocUnsafe(V):new P(V)}(v,A);return this["_toArrayLike"+(D==="le"?"LE":"BE")](b,k),b},i.prototype._toArrayLikeLE=function(v,D){for(var w=0,k=0,A=0,b=0;A<this.length;A++){var P=this.words[A]<<b|k;v[w++]=255&P,w<v.length&&(v[w++]=P>>8&255),w<v.length&&(v[w++]=P>>16&255),b===6?(w<v.length&&(v[w++]=P>>24&255),k=0,b=0):(k=P>>>24,b+=2)}if(w<v.length)for(v[w++]=k;w<v.length;)v[w++]=0},i.prototype._toArrayLikeBE=function(v,D){for(var w=v.length-1,k=0,A=0,b=0;A<this.length;A++){var P=this.words[A]<<b|k;v[w--]=255&P,w>=0&&(v[w--]=P>>8&255),w>=0&&(v[w--]=P>>16&255),b===6?(w>=0&&(v[w--]=P>>24&255),k=0,b=0):(k=P>>>24,b+=2)}if(w>=0)for(v[w--]=k;w>=0;)v[w--]=0},Math.clz32?i.prototype._countBits=function(v){return 32-Math.clz32(v)}:i.prototype._countBits=function(v){var D=v,w=0;return D>=4096&&(w+=13,D>>>=13),D>=64&&(w+=7,D>>>=7),D>=8&&(w+=4,D>>>=4),D>=2&&(w+=2,D>>>=2),w+D},i.prototype._zeroBits=function(v){if(v===0)return 26;var D=v,w=0;return(8191&D)==0&&(w+=13,D>>>=13),(127&D)==0&&(w+=7,D>>>=7),(15&D)==0&&(w+=4,D>>>=4),(3&D)==0&&(w+=2,D>>>=2),(1&D)==0&&w++,w},i.prototype.bitLength=function(){var v=this.words[this.length-1],D=this._countBits(v);return 26*(this.length-1)+D},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,D=0;D<this.length;D++){var w=this._zeroBits(this.words[D]);if(v+=w,w!==26)break}return v},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},i.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var D=0;D<v.length;D++)this.words[D]=this.words[D]|v.words[D];return this._strip()},i.prototype.ior=function(v){return r((this.negative|v.negative)==0),this.iuor(v)},i.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},i.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},i.prototype.iuand=function(v){var D;D=this.length>v.length?v:this;for(var w=0;w<D.length;w++)this.words[w]=this.words[w]&v.words[w];return this.length=D.length,this._strip()},i.prototype.iand=function(v){return r((this.negative|v.negative)==0),this.iuand(v)},i.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},i.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},i.prototype.iuxor=function(v){var D,w;this.length>v.length?(D=this,w=v):(D=v,w=this);for(var k=0;k<w.length;k++)this.words[k]=D.words[k]^w.words[k];if(this!==D)for(;k<D.length;k++)this.words[k]=D.words[k];return this.length=D.length,this._strip()},i.prototype.ixor=function(v){return r((this.negative|v.negative)==0),this.iuxor(v)},i.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},i.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},i.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var D=0|Math.ceil(v/26),w=v%26;this._expand(D),w>0&&D--;for(var k=0;k<D;k++)this.words[k]=67108863&~this.words[k];return w>0&&(this.words[k]=~this.words[k]&67108863>>26-w),this._strip()},i.prototype.notn=function(v){return this.clone().inotn(v)},i.prototype.setn=function(v,D){r(typeof v=="number"&&v>=0);var w=v/26|0,k=v%26;return this._expand(w+1),this.words[w]=D?this.words[w]|1<<k:this.words[w]&~(1<<k),this._strip()},i.prototype.iadd=function(v){var D,w,k;if(this.negative!==0&&v.negative===0)return this.negative=0,D=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,D=this.isub(v),v.negative=1,D._normSign();this.length>v.length?(w=this,k=v):(w=v,k=this);for(var A=0,b=0;b<k.length;b++)D=(0|w.words[b])+(0|k.words[b])+A,this.words[b]=67108863&D,A=D>>>26;for(;A!==0&&b<w.length;b++)D=(0|w.words[b])+A,this.words[b]=67108863&D,A=D>>>26;if(this.length=w.length,A!==0)this.words[this.length]=A,this.length++;else if(w!==this)for(;b<w.length;b++)this.words[b]=w.words[b];return this},i.prototype.add=function(v){var D;return v.negative!==0&&this.negative===0?(v.negative=0,D=this.sub(v),v.negative^=1,D):v.negative===0&&this.negative!==0?(this.negative=0,D=v.sub(this),this.negative=1,D):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},i.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var D=this.iadd(v);return v.negative=1,D._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var w,k,A=this.cmp(v);if(A===0)return this.negative=0,this.length=1,this.words[0]=0,this;A>0?(w=this,k=v):(w=v,k=this);for(var b=0,P=0;P<k.length;P++)b=(D=(0|w.words[P])-(0|k.words[P])+b)>>26,this.words[P]=67108863&D;for(;b!==0&&P<w.length;P++)b=(D=(0|w.words[P])+b)>>26,this.words[P]=67108863&D;if(b===0&&P<w.length&&w!==this)for(;P<w.length;P++)this.words[P]=w.words[P];return this.length=Math.max(this.length,P),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(v){return this.clone().isub(v)};var O=function(v,D,w){var k,A,b,P=v.words,V=D.words,Q=w.words,U=0,Z=0|P[0],fe=8191&Z,se=Z>>>13,ue=0|P[1],ge=8191&ue,me=ue>>>13,C=0|P[2],j=8191&C,S=C>>>13,M=0|P[3],B=8191&M,z=M>>>13,x=0|P[4],K=8191&x,ee=x>>>13,G=0|P[5],J=8191&G,re=G>>>13,de=0|P[6],pe=8191&de,ce=de>>>13,Ee=0|P[7],Ie=8191&Ee,we=Ee>>>13,Re=0|P[8],Fe=8191&Re,Ce=Re>>>13,Ht=0|P[9],mt=8191&Ht,rt=Ht>>>13,Tr=0|V[0],Ue=8191&Tr,at=Tr>>>13,hn=0|V[1],et=8191&hn,lt=hn>>>13,Pi=0|V[2],kt=8191&Pi,Tt=Pi>>>13,Ri=0|V[3],bt=8191&Ri,vt=Ri>>>13,ca=0|V[4],wt=8191&ca,st=ca>>>13,Pn=0|V[5],_t=8191&Pn,Vt=Pn>>>13,la=0|V[6],Ot=8191&la,Ke=la>>>13,fa=0|V[7],Pt=8191&fa,Nt=fa>>>13,ii=0|V[8],St=8191&ii,jt=ii>>>13,Rn=0|V[9],Wt=8191&Rn,Ft=Rn>>>13;w.negative=v.negative^D.negative,w.length=19;var dn=(U+(k=Math.imul(fe,Ue))|0)+((8191&(A=(A=Math.imul(fe,at))+Math.imul(se,Ue)|0))<<13)|0;U=((b=Math.imul(se,at))+(A>>>13)|0)+(dn>>>26)|0,dn&=67108863,k=Math.imul(ge,Ue),A=(A=Math.imul(ge,at))+Math.imul(me,Ue)|0,b=Math.imul(me,at);var Ro=(U+(k=k+Math.imul(fe,et)|0)|0)+((8191&(A=(A=A+Math.imul(fe,lt)|0)+Math.imul(se,et)|0))<<13)|0;U=((b=b+Math.imul(se,lt)|0)+(A>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,k=Math.imul(j,Ue),A=(A=Math.imul(j,at))+Math.imul(S,Ue)|0,b=Math.imul(S,at),k=k+Math.imul(ge,et)|0,A=(A=A+Math.imul(ge,lt)|0)+Math.imul(me,et)|0,b=b+Math.imul(me,lt)|0;var so=(U+(k=k+Math.imul(fe,kt)|0)|0)+((8191&(A=(A=A+Math.imul(fe,Tt)|0)+Math.imul(se,kt)|0))<<13)|0;U=((b=b+Math.imul(se,Tt)|0)+(A>>>13)|0)+(so>>>26)|0,so&=67108863,k=Math.imul(B,Ue),A=(A=Math.imul(B,at))+Math.imul(z,Ue)|0,b=Math.imul(z,at),k=k+Math.imul(j,et)|0,A=(A=A+Math.imul(j,lt)|0)+Math.imul(S,et)|0,b=b+Math.imul(S,lt)|0,k=k+Math.imul(ge,kt)|0,A=(A=A+Math.imul(ge,Tt)|0)+Math.imul(me,kt)|0,b=b+Math.imul(me,Tt)|0;var Co=(U+(k=k+Math.imul(fe,bt)|0)|0)+((8191&(A=(A=A+Math.imul(fe,vt)|0)+Math.imul(se,bt)|0))<<13)|0;U=((b=b+Math.imul(se,vt)|0)+(A>>>13)|0)+(Co>>>26)|0,Co&=67108863,k=Math.imul(K,Ue),A=(A=Math.imul(K,at))+Math.imul(ee,Ue)|0,b=Math.imul(ee,at),k=k+Math.imul(B,et)|0,A=(A=A+Math.imul(B,lt)|0)+Math.imul(z,et)|0,b=b+Math.imul(z,lt)|0,k=k+Math.imul(j,kt)|0,A=(A=A+Math.imul(j,Tt)|0)+Math.imul(S,kt)|0,b=b+Math.imul(S,Tt)|0,k=k+Math.imul(ge,bt)|0,A=(A=A+Math.imul(ge,vt)|0)+Math.imul(me,bt)|0,b=b+Math.imul(me,vt)|0;var ha=(U+(k=k+Math.imul(fe,wt)|0)|0)+((8191&(A=(A=A+Math.imul(fe,st)|0)+Math.imul(se,wt)|0))<<13)|0;U=((b=b+Math.imul(se,st)|0)+(A>>>13)|0)+(ha>>>26)|0,ha&=67108863,k=Math.imul(J,Ue),A=(A=Math.imul(J,at))+Math.imul(re,Ue)|0,b=Math.imul(re,at),k=k+Math.imul(K,et)|0,A=(A=A+Math.imul(K,lt)|0)+Math.imul(ee,et)|0,b=b+Math.imul(ee,lt)|0,k=k+Math.imul(B,kt)|0,A=(A=A+Math.imul(B,Tt)|0)+Math.imul(z,kt)|0,b=b+Math.imul(z,Tt)|0,k=k+Math.imul(j,bt)|0,A=(A=A+Math.imul(j,vt)|0)+Math.imul(S,bt)|0,b=b+Math.imul(S,vt)|0,k=k+Math.imul(ge,wt)|0,A=(A=A+Math.imul(ge,st)|0)+Math.imul(me,wt)|0,b=b+Math.imul(me,st)|0;var Mo=(U+(k=k+Math.imul(fe,_t)|0)|0)+((8191&(A=(A=A+Math.imul(fe,Vt)|0)+Math.imul(se,_t)|0))<<13)|0;U=((b=b+Math.imul(se,Vt)|0)+(A>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,k=Math.imul(pe,Ue),A=(A=Math.imul(pe,at))+Math.imul(ce,Ue)|0,b=Math.imul(ce,at),k=k+Math.imul(J,et)|0,A=(A=A+Math.imul(J,lt)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,lt)|0,k=k+Math.imul(K,kt)|0,A=(A=A+Math.imul(K,Tt)|0)+Math.imul(ee,kt)|0,b=b+Math.imul(ee,Tt)|0,k=k+Math.imul(B,bt)|0,A=(A=A+Math.imul(B,vt)|0)+Math.imul(z,bt)|0,b=b+Math.imul(z,vt)|0,k=k+Math.imul(j,wt)|0,A=(A=A+Math.imul(j,st)|0)+Math.imul(S,wt)|0,b=b+Math.imul(S,st)|0,k=k+Math.imul(ge,_t)|0,A=(A=A+Math.imul(ge,Vt)|0)+Math.imul(me,_t)|0,b=b+Math.imul(me,Vt)|0;var oi=(U+(k=k+Math.imul(fe,Ot)|0)|0)+((8191&(A=(A=A+Math.imul(fe,Ke)|0)+Math.imul(se,Ot)|0))<<13)|0;U=((b=b+Math.imul(se,Ke)|0)+(A>>>13)|0)+(oi>>>26)|0,oi&=67108863,k=Math.imul(Ie,Ue),A=(A=Math.imul(Ie,at))+Math.imul(we,Ue)|0,b=Math.imul(we,at),k=k+Math.imul(pe,et)|0,A=(A=A+Math.imul(pe,lt)|0)+Math.imul(ce,et)|0,b=b+Math.imul(ce,lt)|0,k=k+Math.imul(J,kt)|0,A=(A=A+Math.imul(J,Tt)|0)+Math.imul(re,kt)|0,b=b+Math.imul(re,Tt)|0,k=k+Math.imul(K,bt)|0,A=(A=A+Math.imul(K,vt)|0)+Math.imul(ee,bt)|0,b=b+Math.imul(ee,vt)|0,k=k+Math.imul(B,wt)|0,A=(A=A+Math.imul(B,st)|0)+Math.imul(z,wt)|0,b=b+Math.imul(z,st)|0,k=k+Math.imul(j,_t)|0,A=(A=A+Math.imul(j,Vt)|0)+Math.imul(S,_t)|0,b=b+Math.imul(S,Vt)|0,k=k+Math.imul(ge,Ot)|0,A=(A=A+Math.imul(ge,Ke)|0)+Math.imul(me,Ot)|0,b=b+Math.imul(me,Ke)|0;var uo=(U+(k=k+Math.imul(fe,Pt)|0)|0)+((8191&(A=(A=A+Math.imul(fe,Nt)|0)+Math.imul(se,Pt)|0))<<13)|0;U=((b=b+Math.imul(se,Nt)|0)+(A>>>13)|0)+(uo>>>26)|0,uo&=67108863,k=Math.imul(Fe,Ue),A=(A=Math.imul(Fe,at))+Math.imul(Ce,Ue)|0,b=Math.imul(Ce,at),k=k+Math.imul(Ie,et)|0,A=(A=A+Math.imul(Ie,lt)|0)+Math.imul(we,et)|0,b=b+Math.imul(we,lt)|0,k=k+Math.imul(pe,kt)|0,A=(A=A+Math.imul(pe,Tt)|0)+Math.imul(ce,kt)|0,b=b+Math.imul(ce,Tt)|0,k=k+Math.imul(J,bt)|0,A=(A=A+Math.imul(J,vt)|0)+Math.imul(re,bt)|0,b=b+Math.imul(re,vt)|0,k=k+Math.imul(K,wt)|0,A=(A=A+Math.imul(K,st)|0)+Math.imul(ee,wt)|0,b=b+Math.imul(ee,st)|0,k=k+Math.imul(B,_t)|0,A=(A=A+Math.imul(B,Vt)|0)+Math.imul(z,_t)|0,b=b+Math.imul(z,Vt)|0,k=k+Math.imul(j,Ot)|0,A=(A=A+Math.imul(j,Ke)|0)+Math.imul(S,Ot)|0,b=b+Math.imul(S,Ke)|0,k=k+Math.imul(ge,Pt)|0,A=(A=A+Math.imul(ge,Nt)|0)+Math.imul(me,Pt)|0,b=b+Math.imul(me,Nt)|0;var le=(U+(k=k+Math.imul(fe,St)|0)|0)+((8191&(A=(A=A+Math.imul(fe,jt)|0)+Math.imul(se,St)|0))<<13)|0;U=((b=b+Math.imul(se,jt)|0)+(A>>>13)|0)+(le>>>26)|0,le&=67108863,k=Math.imul(mt,Ue),A=(A=Math.imul(mt,at))+Math.imul(rt,Ue)|0,b=Math.imul(rt,at),k=k+Math.imul(Fe,et)|0,A=(A=A+Math.imul(Fe,lt)|0)+Math.imul(Ce,et)|0,b=b+Math.imul(Ce,lt)|0,k=k+Math.imul(Ie,kt)|0,A=(A=A+Math.imul(Ie,Tt)|0)+Math.imul(we,kt)|0,b=b+Math.imul(we,Tt)|0,k=k+Math.imul(pe,bt)|0,A=(A=A+Math.imul(pe,vt)|0)+Math.imul(ce,bt)|0,b=b+Math.imul(ce,vt)|0,k=k+Math.imul(J,wt)|0,A=(A=A+Math.imul(J,st)|0)+Math.imul(re,wt)|0,b=b+Math.imul(re,st)|0,k=k+Math.imul(K,_t)|0,A=(A=A+Math.imul(K,Vt)|0)+Math.imul(ee,_t)|0,b=b+Math.imul(ee,Vt)|0,k=k+Math.imul(B,Ot)|0,A=(A=A+Math.imul(B,Ke)|0)+Math.imul(z,Ot)|0,b=b+Math.imul(z,Ke)|0,k=k+Math.imul(j,Pt)|0,A=(A=A+Math.imul(j,Nt)|0)+Math.imul(S,Pt)|0,b=b+Math.imul(S,Nt)|0,k=k+Math.imul(ge,St)|0,A=(A=A+Math.imul(ge,jt)|0)+Math.imul(me,St)|0,b=b+Math.imul(me,jt)|0;var be=(U+(k=k+Math.imul(fe,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(fe,Ft)|0)+Math.imul(se,Wt)|0))<<13)|0;U=((b=b+Math.imul(se,Ft)|0)+(A>>>13)|0)+(be>>>26)|0,be&=67108863,k=Math.imul(mt,et),A=(A=Math.imul(mt,lt))+Math.imul(rt,et)|0,b=Math.imul(rt,lt),k=k+Math.imul(Fe,kt)|0,A=(A=A+Math.imul(Fe,Tt)|0)+Math.imul(Ce,kt)|0,b=b+Math.imul(Ce,Tt)|0,k=k+Math.imul(Ie,bt)|0,A=(A=A+Math.imul(Ie,vt)|0)+Math.imul(we,bt)|0,b=b+Math.imul(we,vt)|0,k=k+Math.imul(pe,wt)|0,A=(A=A+Math.imul(pe,st)|0)+Math.imul(ce,wt)|0,b=b+Math.imul(ce,st)|0,k=k+Math.imul(J,_t)|0,A=(A=A+Math.imul(J,Vt)|0)+Math.imul(re,_t)|0,b=b+Math.imul(re,Vt)|0,k=k+Math.imul(K,Ot)|0,A=(A=A+Math.imul(K,Ke)|0)+Math.imul(ee,Ot)|0,b=b+Math.imul(ee,Ke)|0,k=k+Math.imul(B,Pt)|0,A=(A=A+Math.imul(B,Nt)|0)+Math.imul(z,Pt)|0,b=b+Math.imul(z,Nt)|0,k=k+Math.imul(j,St)|0,A=(A=A+Math.imul(j,jt)|0)+Math.imul(S,St)|0,b=b+Math.imul(S,jt)|0;var ke=(U+(k=k+Math.imul(ge,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(ge,Ft)|0)+Math.imul(me,Wt)|0))<<13)|0;U=((b=b+Math.imul(me,Ft)|0)+(A>>>13)|0)+(ke>>>26)|0,ke&=67108863,k=Math.imul(mt,kt),A=(A=Math.imul(mt,Tt))+Math.imul(rt,kt)|0,b=Math.imul(rt,Tt),k=k+Math.imul(Fe,bt)|0,A=(A=A+Math.imul(Fe,vt)|0)+Math.imul(Ce,bt)|0,b=b+Math.imul(Ce,vt)|0,k=k+Math.imul(Ie,wt)|0,A=(A=A+Math.imul(Ie,st)|0)+Math.imul(we,wt)|0,b=b+Math.imul(we,st)|0,k=k+Math.imul(pe,_t)|0,A=(A=A+Math.imul(pe,Vt)|0)+Math.imul(ce,_t)|0,b=b+Math.imul(ce,Vt)|0,k=k+Math.imul(J,Ot)|0,A=(A=A+Math.imul(J,Ke)|0)+Math.imul(re,Ot)|0,b=b+Math.imul(re,Ke)|0,k=k+Math.imul(K,Pt)|0,A=(A=A+Math.imul(K,Nt)|0)+Math.imul(ee,Pt)|0,b=b+Math.imul(ee,Nt)|0,k=k+Math.imul(B,St)|0,A=(A=A+Math.imul(B,jt)|0)+Math.imul(z,St)|0,b=b+Math.imul(z,jt)|0;var Be=(U+(k=k+Math.imul(j,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(j,Ft)|0)+Math.imul(S,Wt)|0))<<13)|0;U=((b=b+Math.imul(S,Ft)|0)+(A>>>13)|0)+(Be>>>26)|0,Be&=67108863,k=Math.imul(mt,bt),A=(A=Math.imul(mt,vt))+Math.imul(rt,bt)|0,b=Math.imul(rt,vt),k=k+Math.imul(Fe,wt)|0,A=(A=A+Math.imul(Fe,st)|0)+Math.imul(Ce,wt)|0,b=b+Math.imul(Ce,st)|0,k=k+Math.imul(Ie,_t)|0,A=(A=A+Math.imul(Ie,Vt)|0)+Math.imul(we,_t)|0,b=b+Math.imul(we,Vt)|0,k=k+Math.imul(pe,Ot)|0,A=(A=A+Math.imul(pe,Ke)|0)+Math.imul(ce,Ot)|0,b=b+Math.imul(ce,Ke)|0,k=k+Math.imul(J,Pt)|0,A=(A=A+Math.imul(J,Nt)|0)+Math.imul(re,Pt)|0,b=b+Math.imul(re,Nt)|0,k=k+Math.imul(K,St)|0,A=(A=A+Math.imul(K,jt)|0)+Math.imul(ee,St)|0,b=b+Math.imul(ee,jt)|0;var Ut=(U+(k=k+Math.imul(B,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(B,Ft)|0)+Math.imul(z,Wt)|0))<<13)|0;U=((b=b+Math.imul(z,Ft)|0)+(A>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,k=Math.imul(mt,wt),A=(A=Math.imul(mt,st))+Math.imul(rt,wt)|0,b=Math.imul(rt,st),k=k+Math.imul(Fe,_t)|0,A=(A=A+Math.imul(Fe,Vt)|0)+Math.imul(Ce,_t)|0,b=b+Math.imul(Ce,Vt)|0,k=k+Math.imul(Ie,Ot)|0,A=(A=A+Math.imul(Ie,Ke)|0)+Math.imul(we,Ot)|0,b=b+Math.imul(we,Ke)|0,k=k+Math.imul(pe,Pt)|0,A=(A=A+Math.imul(pe,Nt)|0)+Math.imul(ce,Pt)|0,b=b+Math.imul(ce,Nt)|0,k=k+Math.imul(J,St)|0,A=(A=A+Math.imul(J,jt)|0)+Math.imul(re,St)|0,b=b+Math.imul(re,jt)|0;var rr=(U+(k=k+Math.imul(K,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(K,Ft)|0)+Math.imul(ee,Wt)|0))<<13)|0;U=((b=b+Math.imul(ee,Ft)|0)+(A>>>13)|0)+(rr>>>26)|0,rr&=67108863,k=Math.imul(mt,_t),A=(A=Math.imul(mt,Vt))+Math.imul(rt,_t)|0,b=Math.imul(rt,Vt),k=k+Math.imul(Fe,Ot)|0,A=(A=A+Math.imul(Fe,Ke)|0)+Math.imul(Ce,Ot)|0,b=b+Math.imul(Ce,Ke)|0,k=k+Math.imul(Ie,Pt)|0,A=(A=A+Math.imul(Ie,Nt)|0)+Math.imul(we,Pt)|0,b=b+Math.imul(we,Nt)|0,k=k+Math.imul(pe,St)|0,A=(A=A+Math.imul(pe,jt)|0)+Math.imul(ce,St)|0,b=b+Math.imul(ce,jt)|0;var Rt=(U+(k=k+Math.imul(J,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(J,Ft)|0)+Math.imul(re,Wt)|0))<<13)|0;U=((b=b+Math.imul(re,Ft)|0)+(A>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,k=Math.imul(mt,Ot),A=(A=Math.imul(mt,Ke))+Math.imul(rt,Ot)|0,b=Math.imul(rt,Ke),k=k+Math.imul(Fe,Pt)|0,A=(A=A+Math.imul(Fe,Nt)|0)+Math.imul(Ce,Pt)|0,b=b+Math.imul(Ce,Nt)|0,k=k+Math.imul(Ie,St)|0,A=(A=A+Math.imul(Ie,jt)|0)+Math.imul(we,St)|0,b=b+Math.imul(we,jt)|0;var Ze=(U+(k=k+Math.imul(pe,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(pe,Ft)|0)+Math.imul(ce,Wt)|0))<<13)|0;U=((b=b+Math.imul(ce,Ft)|0)+(A>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,k=Math.imul(mt,Pt),A=(A=Math.imul(mt,Nt))+Math.imul(rt,Pt)|0,b=Math.imul(rt,Nt),k=k+Math.imul(Fe,St)|0,A=(A=A+Math.imul(Fe,jt)|0)+Math.imul(Ce,St)|0,b=b+Math.imul(Ce,jt)|0;var zr=(U+(k=k+Math.imul(Ie,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(Ie,Ft)|0)+Math.imul(we,Wt)|0))<<13)|0;U=((b=b+Math.imul(we,Ft)|0)+(A>>>13)|0)+(zr>>>26)|0,zr&=67108863,k=Math.imul(mt,St),A=(A=Math.imul(mt,jt))+Math.imul(rt,St)|0,b=Math.imul(rt,jt);var dr=(U+(k=k+Math.imul(Fe,Wt)|0)|0)+((8191&(A=(A=A+Math.imul(Fe,Ft)|0)+Math.imul(Ce,Wt)|0))<<13)|0;U=((b=b+Math.imul(Ce,Ft)|0)+(A>>>13)|0)+(dr>>>26)|0,dr&=67108863;var Et=(U+(k=Math.imul(mt,Wt))|0)+((8191&(A=(A=Math.imul(mt,Ft))+Math.imul(rt,Wt)|0))<<13)|0;return U=((b=Math.imul(rt,Ft))+(A>>>13)|0)+(Et>>>26)|0,Et&=67108863,Q[0]=dn,Q[1]=Ro,Q[2]=so,Q[3]=Co,Q[4]=ha,Q[5]=Mo,Q[6]=oi,Q[7]=uo,Q[8]=le,Q[9]=be,Q[10]=ke,Q[11]=Be,Q[12]=Ut,Q[13]=rr,Q[14]=Rt,Q[15]=Ze,Q[16]=zr,Q[17]=dr,Q[18]=Et,U!==0&&(Q[19]=U,w.length++),w};function R(v,D,w){w.negative=D.negative^v.negative,w.length=v.length+D.length;for(var k=0,A=0,b=0;b<w.length-1;b++){var P=A;A=0;for(var V=67108863&k,Q=Math.min(b,D.length-1),U=Math.max(0,b-v.length+1);U<=Q;U++){var Z=b-U,fe=(0|v.words[Z])*(0|D.words[U]),se=67108863&fe;V=67108863&(se=se+V|0),A+=(P=(P=P+(fe/67108864|0)|0)+(se>>>26)|0)>>>26,P&=67108863}w.words[b]=V,k=P,P=A}return k!==0?w.words[b]=k:w.length--,w._strip()}function L(v,D,w){return R(v,D,w)}Math.imul||(O=E),i.prototype.mulTo=function(v,D){var w=this.length+v.length;return this.length===10&&v.length===10?O(this,v,D):w<63?E(this,v,D):w<1024?R(this,v,D):L(this,v,D)},i.prototype.mul=function(v){var D=new i(null);return D.words=new Array(this.length+v.length),this.mulTo(v,D)},i.prototype.mulf=function(v){var D=new i(null);return D.words=new Array(this.length+v.length),L(this,v,D)},i.prototype.imul=function(v){return this.clone().mulTo(v,this)},i.prototype.imuln=function(v){var D=v<0;D&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var w=0,k=0;k<this.length;k++){var A=(0|this.words[k])*v,b=(67108863&A)+(67108863&w);w>>=26,w+=A/67108864|0,w+=b>>>26,this.words[k]=67108863&b}return w!==0&&(this.words[k]=w,this.length++),D?this.ineg():this},i.prototype.muln=function(v){return this.clone().imuln(v)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(v){var D=function(b){for(var P=new Array(b.bitLength()),V=0;V<P.length;V++){var Q=V/26|0,U=V%26;P[V]=b.words[Q]>>>U&1}return P}(v);if(D.length===0)return new i(1);for(var w=this,k=0;k<D.length&&D[k]===0;k++,w=w.sqr());if(++k<D.length)for(var A=w.sqr();k<D.length;k++,A=A.sqr())D[k]!==0&&(w=w.mul(A));return w},i.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var D,w=v%26,k=(v-w)/26,A=67108863>>>26-w<<26-w;if(w!==0){var b=0;for(D=0;D<this.length;D++){var P=this.words[D]&A,V=(0|this.words[D])-P<<w;this.words[D]=V|b,b=P>>>26-w}b&&(this.words[D]=b,this.length++)}if(k!==0){for(D=this.length-1;D>=0;D--)this.words[D+k]=this.words[D];for(D=0;D<k;D++)this.words[D]=0;this.length+=k}return this._strip()},i.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},i.prototype.iushrn=function(v,D,w){var k;r(typeof v=="number"&&v>=0),k=D?(D-D%26)/26:0;var A=v%26,b=Math.min((v-A)/26,this.length),P=67108863^67108863>>>A<<A,V=w;if(k-=b,k=Math.max(0,k),V){for(var Q=0;Q<b;Q++)V.words[Q]=this.words[Q];V.length=b}if(b!==0)if(this.length>b)for(this.length-=b,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+b];else this.words[0]=0,this.length=1;var U=0;for(Q=this.length-1;Q>=0&&(U!==0||Q>=k);Q--){var Z=0|this.words[Q];this.words[Q]=U<<26-A|Z>>>A,U=Z&P}return V&&U!==0&&(V.words[V.length++]=U),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(v,D,w){return r(this.negative===0),this.iushrn(v,D,w)},i.prototype.shln=function(v){return this.clone().ishln(v)},i.prototype.ushln=function(v){return this.clone().iushln(v)},i.prototype.shrn=function(v){return this.clone().ishrn(v)},i.prototype.ushrn=function(v){return this.clone().iushrn(v)},i.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var D=v%26,w=(v-D)/26,k=1<<D;return!(this.length<=w||!(this.words[w]&k))},i.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var D=v%26,w=(v-D)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(D!==0&&w++,this.length=Math.min(w,this.length),D!==0){var k=67108863^67108863>>>D<<D;this.words[this.length-1]&=k}return this._strip()},i.prototype.maskn=function(v){return this.clone().imaskn(v)},i.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(0|this.words[0])<=v?(this.words[0]=v-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},i.prototype._iaddn=function(v){this.words[0]+=v;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},i.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this._strip()},i.prototype.addn=function(v){return this.clone().iaddn(v)},i.prototype.subn=function(v){return this.clone().isubn(v)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(v,D,w){var k,A,b=v.length+w;this._expand(b);var P=0;for(k=0;k<v.length;k++){A=(0|this.words[k+w])+P;var V=(0|v.words[k])*D;P=((A-=67108863&V)>>26)-(V/67108864|0),this.words[k+w]=67108863&A}for(;k<this.length-w;k++)P=(A=(0|this.words[k+w])+P)>>26,this.words[k+w]=67108863&A;if(P===0)return this._strip();for(r(P===-1),P=0,k=0;k<this.length;k++)P=(A=-(0|this.words[k])+P)>>26,this.words[k]=67108863&A;return this.negative=1,this._strip()},i.prototype._wordDiv=function(v,D){var w=(this.length,v.length),k=this.clone(),A=v,b=0|A.words[A.length-1];(w=26-this._countBits(b))!=0&&(A=A.ushln(w),k.iushln(w),b=0|A.words[A.length-1]);var P,V=k.length-A.length;if(D!=="mod"){(P=new i(null)).length=V+1,P.words=new Array(P.length);for(var Q=0;Q<P.length;Q++)P.words[Q]=0}var U=k.clone()._ishlnsubmul(A,1,V);U.negative===0&&(k=U,P&&(P.words[V]=1));for(var Z=V-1;Z>=0;Z--){var fe=67108864*(0|k.words[A.length+Z])+(0|k.words[A.length+Z-1]);for(fe=Math.min(fe/b|0,67108863),k._ishlnsubmul(A,fe,Z);k.negative!==0;)fe--,k.negative=0,k._ishlnsubmul(A,1,Z),k.isZero()||(k.negative^=1);P&&(P.words[Z]=fe)}return P&&P._strip(),k._strip(),D!=="div"&&w!==0&&k.iushrn(w),{div:P||null,mod:k}},i.prototype.divmod=function(v,D,w){return r(!v.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&v.negative===0?(b=this.neg().divmod(v,D),D!=="mod"&&(k=b.div.neg()),D!=="div"&&(A=b.mod.neg(),w&&A.negative!==0&&A.iadd(v)),{div:k,mod:A}):this.negative===0&&v.negative!==0?(b=this.divmod(v.neg(),D),D!=="mod"&&(k=b.div.neg()),{div:k,mod:b.mod}):(this.negative&v.negative)!=0?(b=this.neg().divmod(v.neg(),D),D!=="div"&&(A=b.mod.neg(),w&&A.negative!==0&&A.isub(v)),{div:b.div,mod:A}):v.length>this.length||this.cmp(v)<0?{div:new i(0),mod:this}:v.length===1?D==="div"?{div:this.divn(v.words[0]),mod:null}:D==="mod"?{div:null,mod:new i(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new i(this.modrn(v.words[0]))}:this._wordDiv(v,D);var k,A,b},i.prototype.div=function(v){return this.divmod(v,"div",!1).div},i.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},i.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},i.prototype.divRound=function(v){var D=this.divmod(v);if(D.mod.isZero())return D.div;var w=D.div.negative!==0?D.mod.isub(v):D.mod,k=v.ushrn(1),A=v.andln(1),b=w.cmp(k);return b<0||A===1&&b===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},i.prototype.modrn=function(v){var D=v<0;D&&(v=-v),r(v<=67108863);for(var w=(1<<26)%v,k=0,A=this.length-1;A>=0;A--)k=(w*k+(0|this.words[A]))%v;return D?-k:k},i.prototype.modn=function(v){return this.modrn(v)},i.prototype.idivn=function(v){var D=v<0;D&&(v=-v),r(v<=67108863);for(var w=0,k=this.length-1;k>=0;k--){var A=(0|this.words[k])+67108864*w;this.words[k]=A/v|0,w=A%v}return this._strip(),D?this.ineg():this},i.prototype.divn=function(v){return this.clone().idivn(v)},i.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var D=this,w=v.clone();D=D.negative!==0?D.umod(v):D.clone();for(var k=new i(1),A=new i(0),b=new i(0),P=new i(1),V=0;D.isEven()&&w.isEven();)D.iushrn(1),w.iushrn(1),++V;for(var Q=w.clone(),U=D.clone();!D.isZero();){for(var Z=0,fe=1;(D.words[0]&fe)==0&&Z<26;++Z,fe<<=1);if(Z>0)for(D.iushrn(Z);Z-- >0;)(k.isOdd()||A.isOdd())&&(k.iadd(Q),A.isub(U)),k.iushrn(1),A.iushrn(1);for(var se=0,ue=1;(w.words[0]&ue)==0&&se<26;++se,ue<<=1);if(se>0)for(w.iushrn(se);se-- >0;)(b.isOdd()||P.isOdd())&&(b.iadd(Q),P.isub(U)),b.iushrn(1),P.iushrn(1);D.cmp(w)>=0?(D.isub(w),k.isub(b),A.isub(P)):(w.isub(D),b.isub(k),P.isub(A))}return{a:b,b:P,gcd:w.iushln(V)}},i.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var D=this,w=v.clone();D=D.negative!==0?D.umod(v):D.clone();for(var k,A=new i(1),b=new i(0),P=w.clone();D.cmpn(1)>0&&w.cmpn(1)>0;){for(var V=0,Q=1;(D.words[0]&Q)==0&&V<26;++V,Q<<=1);if(V>0)for(D.iushrn(V);V-- >0;)A.isOdd()&&A.iadd(P),A.iushrn(1);for(var U=0,Z=1;(w.words[0]&Z)==0&&U<26;++U,Z<<=1);if(U>0)for(w.iushrn(U);U-- >0;)b.isOdd()&&b.iadd(P),b.iushrn(1);D.cmp(w)>=0?(D.isub(w),A.isub(b)):(w.isub(D),b.isub(A))}return(k=D.cmpn(1)===0?A:b).cmpn(0)<0&&k.iadd(v),k},i.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var D=this.clone(),w=v.clone();D.negative=0,w.negative=0;for(var k=0;D.isEven()&&w.isEven();k++)D.iushrn(1),w.iushrn(1);for(;;){for(;D.isEven();)D.iushrn(1);for(;w.isEven();)w.iushrn(1);var A=D.cmp(w);if(A<0){var b=D;D=w,w=b}else if(A===0||w.cmpn(1)===0)break;D.isub(w)}return w.iushln(k)},i.prototype.invm=function(v){return this.egcd(v).a.umod(v)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(v){return this.words[0]&v},i.prototype.bincn=function(v){r(typeof v=="number");var D=v%26,w=(v-D)/26,k=1<<D;if(this.length<=w)return this._expand(w+1),this.words[w]|=k,this;for(var A=k,b=w;A!==0&&b<this.length;b++){var P=0|this.words[b];A=(P+=A)>>>26,P&=67108863,this.words[b]=P}return A!==0&&(this.words[b]=A,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(v){var D,w=v<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;if(this._strip(),this.length>1)D=1;else{w&&(v=-v),r(v<=67108863,"Number is too big");var k=0|this.words[0];D=k===v?0:k<v?-1:1}return this.negative!==0?0|-D:D},i.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var D=this.ucmp(v);return this.negative!==0?0|-D:D},i.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var D=0,w=this.length-1;w>=0;w--){var k=0|this.words[w],A=0|v.words[w];if(k!==A){k<A?D=-1:k>A&&(D=1);break}}return D},i.prototype.gtn=function(v){return this.cmpn(v)===1},i.prototype.gt=function(v){return this.cmp(v)===1},i.prototype.gten=function(v){return this.cmpn(v)>=0},i.prototype.gte=function(v){return this.cmp(v)>=0},i.prototype.ltn=function(v){return this.cmpn(v)===-1},i.prototype.lt=function(v){return this.cmp(v)===-1},i.prototype.lten=function(v){return this.cmpn(v)<=0},i.prototype.lte=function(v){return this.cmp(v)<=0},i.prototype.eqn=function(v){return this.cmpn(v)===0},i.prototype.eq=function(v){return this.cmp(v)===0},i.red=function(v){return new T(v)},i.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(v){return this.red=v,this},i.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},i.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},i.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},i.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},i.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},i.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},i.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},i.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var q={k256:null,p224:null,p192:null,p25519:null};function X(v,D){this.name=v,this.p=new i(D,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ne(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function W(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function H(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Y(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(v){if(typeof v=="string"){var D=i._prime(v);this.m=D.p,this.prime=D}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}function te(v){T.call(this,v),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var v=new i(null);return v.words=new Array(Math.ceil(this.n/13)),v},X.prototype.ireduce=function(v){var D,w=v;do this.split(w,this.tmp),D=(w=(w=this.imulK(w)).iadd(this.tmp)).bitLength();while(D>this.n);var k=D<this.n?-1:w.ucmp(this.p);return k===0?(w.words[0]=0,w.length=1):k>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},X.prototype.split=function(v,D){v.iushrn(this.n,0,D)},X.prototype.imulK=function(v){return v.imul(this.k)},n(ne,X),ne.prototype.split=function(v,D){for(var w=4194303,k=Math.min(v.length,9),A=0;A<k;A++)D.words[A]=v.words[A];if(D.length=k,v.length<=9)return v.words[0]=0,void(v.length=1);var b=v.words[9];for(D.words[D.length++]=b&w,A=10;A<v.length;A++){var P=0|v.words[A];v.words[A-10]=(P&w)<<4|b>>>22,b=P}b>>>=22,v.words[A-10]=b,b===0&&v.length>10?v.length-=10:v.length-=9},ne.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var D=0,w=0;w<v.length;w++){var k=0|v.words[w];D+=977*k,v.words[w]=67108863&D,D=64*k+(D/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v},n(W,X),n(H,X),n(Y,X),Y.prototype.imulK=function(v){for(var D=0,w=0;w<v.length;w++){var k=19*(0|v.words[w])+D,A=67108863&k;k>>>=26,v.words[w]=A,D=k}return D!==0&&(v.words[v.length++]=D),v},i._prime=function(v){if(q[v])return q[v];var D;if(v==="k256")D=new ne;else if(v==="p224")D=new W;else if(v==="p192")D=new H;else{if(v!=="p25519")throw new Error("Unknown prime "+v);D=new Y}return q[v]=D,D},T.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},T.prototype._verify2=function(v,D){r((v.negative|D.negative)==0,"red works only with positives"),r(v.red&&v.red===D.red,"red works only with red numbers")},T.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(f(v,v.umod(this.m)._forceRed(this)),v)},T.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},T.prototype.add=function(v,D){this._verify2(v,D);var w=v.add(D);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},T.prototype.iadd=function(v,D){this._verify2(v,D);var w=v.iadd(D);return w.cmp(this.m)>=0&&w.isub(this.m),w},T.prototype.sub=function(v,D){this._verify2(v,D);var w=v.sub(D);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},T.prototype.isub=function(v,D){this._verify2(v,D);var w=v.isub(D);return w.cmpn(0)<0&&w.iadd(this.m),w},T.prototype.shl=function(v,D){return this._verify1(v),this.imod(v.ushln(D))},T.prototype.imul=function(v,D){return this._verify2(v,D),this.imod(v.imul(D))},T.prototype.mul=function(v,D){return this._verify2(v,D),this.imod(v.mul(D))},T.prototype.isqr=function(v){return this.imul(v,v.clone())},T.prototype.sqr=function(v){return this.mul(v,v)},T.prototype.sqrt=function(v){if(v.isZero())return v.clone();var D=this.m.andln(3);if(r(D%2==1),D===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(v,w)}for(var k=this.m.subn(1),A=0;!k.isZero()&&k.andln(1)===0;)A++,k.iushrn(1);r(!k.isZero());var b=new i(1).toRed(this),P=b.redNeg(),V=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new i(2*Q*Q).toRed(this);this.pow(Q,V).cmp(P)!==0;)Q.redIAdd(P);for(var U=this.pow(Q,k),Z=this.pow(v,k.addn(1).iushrn(1)),fe=this.pow(v,k),se=A;fe.cmp(b)!==0;){for(var ue=fe,ge=0;ue.cmp(b)!==0;ge++)ue=ue.redSqr();r(ge<se);var me=this.pow(U,new i(1).iushln(se-ge-1));Z=Z.redMul(me),U=me.redSqr(),fe=fe.redMul(U),se=ge}return Z},T.prototype.invm=function(v){var D=v._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},T.prototype.pow=function(v,D){if(D.isZero())return new i(1).toRed(this);if(D.cmpn(1)===0)return v.clone();var w=new Array(16);w[0]=new i(1).toRed(this),w[1]=v;for(var k=2;k<w.length;k++)w[k]=this.mul(w[k-1],v);var A=w[0],b=0,P=0,V=D.bitLength()%26;for(V===0&&(V=26),k=D.length-1;k>=0;k--){for(var Q=D.words[k],U=V-1;U>=0;U--){var Z=Q>>U&1;A!==w[0]&&(A=this.sqr(A)),Z!==0||b!==0?(b<<=1,b|=Z,(++P==4||k===0&&U===0)&&(A=this.mul(A,w[b]),P=0,b=0)):P=0}V=26}return A},T.prototype.convertTo=function(v){var D=v.umod(this.m);return D===v?D.clone():D},T.prototype.convertFrom=function(v){var D=v.clone();return D.red=null,D},i.mont=function(v){return new te(v)},n(te,T),te.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},te.prototype.convertFrom=function(v){var D=this.imod(v.mul(this.rinv));return D.red=null,D},te.prototype.imul=function(v,D){if(v.isZero()||D.isZero())return v.words[0]=0,v.length=1,v;var w=v.imul(D),k=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=w.isub(k).iushrn(this.shift),b=A;return A.cmp(this.m)>=0?b=A.isub(this.m):A.cmpn(0)<0&&(b=A.iadd(this.m)),b._forceRed(this)},te.prototype.mul=function(v,D){if(v.isZero()||D.isZero())return new i(0)._forceRed(this);var w=v.mul(D),k=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=w.isub(k).iushrn(this.shift),b=A;return A.cmp(this.m)>=0?b=A.isub(this.m):A.cmpn(0)<0&&(b=A.iadd(this.m)),b._forceRed(this)},te.prototype.invm=function(v){return this.imod(v._invmp(this.m).mul(this.r2))._forceRed(this)}})(Qt,ae);var ho=Qt.exports,Fb={},zp={},ot={exports:{}};typeof Object.create=="function"?ot.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ot.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};var Yn,Xl=Se,Ys=Xl.Buffer,Zn={};for(Yn in Xl)Xl.hasOwnProperty(Yn)&&Yn!=="SlowBuffer"&&Yn!=="Buffer"&&(Zn[Yn]=Xl[Yn]);var As=Zn.Buffer={};for(Yn in Ys)Ys.hasOwnProperty(Yn)&&Yn!=="allocUnsafe"&&Yn!=="allocUnsafeSlow"&&(As[Yn]=Ys[Yn]);if(Zn.Buffer.prototype=Ys.prototype,As.from&&As.from!==Uint8Array.from||(As.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&t.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Ys(t,e,r)}),As.alloc||(As.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Ys(t);return e&&e.length!==0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n}),!Zn.kStringMaxLength)try{Zn.kStringMaxLength=Zt.binding("buffer").kStringMaxLength}catch{}Zn.constants||(Zn.constants={MAX_LENGTH:Zn.kMaxLength},Zn.kStringMaxLength&&(Zn.constants.MAX_STRING_LENGTH=Zn.kStringMaxLength));var Kp=Zn,Qf={};const _3=ot.exports;function Nn(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function gs(t,e){this.path=t,this.rethrow(e)}Qf.Reporter=Nn,Nn.prototype.isError=function(t){return t instanceof gs},Nn.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},Nn.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},Nn.prototype.enterKey=function(t){return this._reporterState.path.push(t)},Nn.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},Nn.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),n.obj!==null&&(n.obj[e]=r)},Nn.prototype.path=function(){return this._reporterState.path.join("/")},Nn.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},Nn.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},Nn.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof gs;if(e=n?t:new gs(r.path.map(function(i){return"["+JSON.stringify(i)+"]"}).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},Nn.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},_3(gs,Error),gs.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,gs),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this};var Qa={};const S3=ot.exports,Gl=Qf.Reporter,Zs=Kp.Buffer;function jn(t,e){Gl.call(this,e),Zs.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function Ns(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return Ns.isEncoderBuffer(r)||(r=new Ns(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Zs.byteLength(t);else{if(!Zs.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}S3(jn,Gl),Qa.DecoderBuffer=jn,jn.isDecoderBuffer=function(t){return t instanceof jn?!0:typeof t=="object"&&Zs.isBuffer(t.base)&&t.constructor.name==="DecoderBuffer"&&typeof t.offset=="number"&&typeof t.length=="number"&&typeof t.save=="function"&&typeof t.restore=="function"&&typeof t.isEmpty=="function"&&typeof t.readUInt8=="function"&&typeof t.skip=="function"&&typeof t.raw=="function"},jn.prototype.save=function(){return{offset:this.offset,reporter:Gl.prototype.save.call(this)}},jn.prototype.restore=function(t){const e=new jn(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,Gl.prototype.restore.call(this,t.reporter),e},jn.prototype.isEmpty=function(){return this.offset===this.length},jn.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},jn.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new jn(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},jn.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},Qa.EncoderBuffer=Ns,Ns.isEncoderBuffer=function(t){return t instanceof Ns?!0:typeof t=="object"&&t.constructor.name==="EncoderBuffer"&&typeof t.length=="number"&&typeof t.join=="function"},Ns.prototype.join=function(t,e){return t||(t=Zs.alloc(this.length)),e||(e=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(t,e),e+=r.length}):(typeof this.value=="number"?t[e]=this.value:typeof this.value=="string"?t.write(this.value,e):Zs.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t};var ni=Ub;function Ub(t,e){if(!t)throw new Error(e||"Assertion failed")}Ub.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};const E3=Qf.Reporter,I3=Qa.EncoderBuffer,A3=Qa.DecoderBuffer,Kr=ni,zb=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],k3=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(zb);function Dt(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var qp=Dt;const D3=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Dt.prototype.clone=function(){const t=this._baseState,e={};D3.forEach(function(n){e[n]=t[n]});const r=new this.constructor(e.parent);return r._baseState=e,r},Dt.prototype._wrap=function(){const t=this._baseState;k3.forEach(function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}},this)},Dt.prototype._init=function(t){const e=this._baseState;Kr(e.parent===null),t.call(this),e.children=e.children.filter(function(r){return r._baseState.parent===this},this),Kr.equal(e.children.length,1,"Root node can have only one child")},Dt.prototype._useArgs=function(t){const e=this._baseState,r=t.filter(function(n){return n instanceof this.constructor},this);t=t.filter(function(n){return!(n instanceof this.constructor)},this),r.length!==0&&(Kr(e.children===null),e.children=r,r.forEach(function(n){n._baseState.parent=this},this)),t.length!==0&&(Kr(e.args===null),e.args=t,e.reverseArgs=t.map(function(n){if(typeof n!="object"||n.constructor!==Object)return n;const i={};return Object.keys(n).forEach(function(o){o==(0|o)&&(o|=0);const a=n[o];i[a]=o}),i}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){Dt.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),zb.forEach(function(t){Dt.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return Kr(e.tag===null),e.tag=t,this._useArgs(r),this}}),Dt.prototype.use=function(t){Kr(t);const e=this._baseState;return Kr(e.use===null),e.use=t,this},Dt.prototype.optional=function(){return this._baseState.optional=!0,this},Dt.prototype.def=function(t){const e=this._baseState;return Kr(e.default===null),e.default=t,e.optional=!0,this},Dt.prototype.explicit=function(t){const e=this._baseState;return Kr(e.explicit===null&&e.implicit===null),e.explicit=t,this},Dt.prototype.implicit=function(t){const e=this._baseState;return Kr(e.explicit===null&&e.implicit===null),e.implicit=t,this},Dt.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,e.length!==0&&this._useArgs(e),this},Dt.prototype.key=function(t){const e=this._baseState;return Kr(e.key===null),e.key=t,this},Dt.prototype.any=function(){return this._baseState.any=!0,this},Dt.prototype.choice=function(t){const e=this._baseState;return Kr(e.choice===null),e.choice=t,this._useArgs(Object.keys(t).map(function(r){return t[r]})),this},Dt.prototype.contains=function(t){const e=this._baseState;return Kr(e.use===null),e.contains=t,this},Dt.prototype._decode=function(t,e){const r=this._baseState;if(r.parent===null)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,o=!0,a=null;if(r.key!==null&&(a=t.enterKey(r.key)),r.optional){let s=null;if(r.explicit!==null?s=r.explicit:r.implicit!==null?s=r.implicit:r.tag!==null&&(s=r.tag),s!==null||r.any){if(o=this._peekTag(t,s,r.any),t.isError(o))return o}else{const c=t.save();try{r.choice===null?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),o=!0}catch{o=!1}t.restore(c)}}if(r.obj&&o&&(n=t.enterObject()),o){if(r.explicit!==null){const c=this._decodeTag(t,r.explicit);if(t.isError(c))return c;t=c}const s=t.offset;if(r.use===null&&r.choice===null){let c;r.any&&(c=t.save());const f=this._decodeTag(t,r.implicit!==null?r.implicit:r.tag,r.any);if(t.isError(f))return f;r.any?i=t.raw(c):t=f}if(e&&e.track&&r.tag!==null&&e.track(t.path(),s,t.length,"tagged"),e&&e.track&&r.tag!==null&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=r.choice===null?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||r.choice!==null||r.children===null||r.children.forEach(function(c){c._decode(t,e)}),r.contains&&(r.tag==="octstr"||r.tag==="bitstr")){const c=new A3(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(c,e)}}return r.obj&&o&&(i=t.leaveObject(n)),r.key===null||i===null&&o!==!0?a!==null&&t.exitKey(a):t.leaveKey(a,r.key,i),i},Dt.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return t==="seq"||t==="set"?null:t==="seqof"||t==="setof"?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):t==="objid"&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):t==="objid"?this._decodeObjid(e,null,null,r):t==="gentime"||t==="utctime"?this._decodeTime(e,t,r):t==="null_"?this._decodeNull(e,r):t==="bool"?this._decodeBool(e,r):t==="objDesc"?this._decodeStr(e,t,r):t==="int"||t==="enum"?this._decodeInt(e,n.args&&n.args[0],r):n.use!==null?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},Dt.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),Kr(r.useDecoder._baseState.parent===null),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},Dt.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some(function(o){const a=t.save(),s=r.choice[o];try{const c=s._decode(t,e);if(t.isError(c))return!1;n={type:o,value:c},i=!0}catch{return t.restore(a),!1}return!0},this),i?n:t.error("Choice not matched")},Dt.prototype._createEncoderBuffer=function(t){return new I3(t,this.reporter)},Dt.prototype._encode=function(t,e,r){const n=this._baseState;if(n.default!==null&&n.default===t)return;const i=this._encodeValue(t,e,r);return i===void 0||this._skipDefault(i,e,r)?void 0:i},Dt.prototype._encodeValue=function(t,e,r){const n=this._baseState;if(n.parent===null)return n.children[0]._encode(t,e||new E3);let i=null;if(this.reporter=e,n.optional&&t===void 0){if(n.default===null)return;t=n.default}let o=null,a=!1;if(n.any)i=this._createEncoderBuffer(t);else if(n.choice)i=this._encodeChoice(t,e);else if(n.contains)o=this._getUse(n.contains,r)._encode(t,e),a=!0;else if(n.children)o=n.children.map(function(s){if(s._baseState.tag==="null_")return s._encode(null,e,t);if(s._baseState.key===null)return e.error("Child should have a key");const c=e.enterKey(s._baseState.key);if(typeof t!="object")return e.error("Child expected, but input is not object");const f=s._encode(t[s._baseState.key],e,t);return e.leaveKey(c),f},this).filter(function(s){return s}),o=this._createEncoderBuffer(o);else if(n.tag==="seqof"||n.tag==="setof"){if(!n.args||n.args.length!==1)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const s=this.clone();s._baseState.implicit=null,o=this._createEncoderBuffer(t.map(function(c){const f=this._baseState;return this._getUse(f.args[0],t)._encode(c,e)},s))}else n.use!==null?i=this._getUse(n.use,r)._encode(t,e):(o=this._encodePrimitive(n.tag,t),a=!0);if(!n.any&&n.choice===null){const s=n.implicit!==null?n.implicit:n.tag,c=n.implicit===null?"universal":"context";s===null?n.use===null&&e.error("Tag could be omitted only for .use()"):n.use===null&&(i=this._encodeComposite(s,a,c,o))}return n.explicit!==null&&(i=this._encodeComposite(n.explicit,!1,"context",i)),i},Dt.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||Kr(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},Dt.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if(t==="objid"&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if(t==="objid")return this._encodeObjid(e,null,null);if(t==="gentime"||t==="utctime")return this._encodeTime(e,t);if(t==="null_")return this._encodeNull();if(t==="int"||t==="enum")return this._encodeInt(e,r.args&&r.reverseArgs[0]);if(t==="bool")return this._encodeBool(e);if(t==="objDesc")return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},Dt.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},Dt.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)};var eh={};(function(t){function e(r){const n={};return Object.keys(r).forEach(function(i){(0|i)==i&&(i|=0);const o=r[i];n[o]=i}),n}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(eh);const x3=ot.exports,po=Kp.Buffer,Kb=qp,Vh=eh;function qb(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new fi,this.tree._init(t.body)}var Hb=qb;function fi(t){Kb.call(this,"der",t)}function Bn(t){return t<10?"0"+t:t}qb.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},x3(fi,Kb),fi.prototype._encodeComposite=function(t,e,r,n){const i=function(s,c,f,h){let y;if(s==="seqof"?s="seq":s==="setof"&&(s="set"),Vh.tagByName.hasOwnProperty(s))y=Vh.tagByName[s];else{if(typeof s!="number"||(0|s)!==s)return h.error("Unknown tag: "+s);y=s}return y>=31?h.error("Multi-octet tag encoding unsupported"):(c||(y|=32),y|=Vh.tagClassByName[f||"universal"]<<6,y)}(t,e,r,this.reporter);if(n.length<128){const s=po.alloc(2);return s[0]=i,s[1]=n.length,this._createEncoderBuffer([s,n])}let o=1;for(let s=n.length;s>=256;s>>=8)o++;const a=po.alloc(2+o);a[0]=i,a[1]=128|o;for(let s=1+o,c=n.length;c>0;s--,c>>=8)a[s]=255&c;return this._createEncoderBuffer([a,n])},fi.prototype._encodeStr=function(t,e){if(e==="bitstr")return this._createEncoderBuffer([0|t.unused,t.data]);if(e==="bmpstr"){const r=po.alloc(2*t.length);for(let n=0;n<t.length;n++)r.writeUInt16BE(t.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return e==="numstr"?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):e==="printstr"?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||e==="objDesc"?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},fi.prototype._encodeObjid=function(t,e,r){if(typeof t=="string"){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let a=0;a<t.length;a++)t[a]|=0}else if(Array.isArray(t)){t=t.slice();for(let a=0;a<t.length;a++)t[a]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let a=0;a<t.length;a++){let s=t[a];for(n++;s>=128;s>>=7)n++}const i=po.alloc(n);let o=i.length-1;for(let a=t.length-1;a>=0;a--){let s=t[a];for(i[o--]=127&s;(s>>=7)>0;)i[o--]=128|127&s}return this._createEncoderBuffer(i)},fi.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return e==="gentime"?r=[Bn(n.getUTCFullYear()),Bn(n.getUTCMonth()+1),Bn(n.getUTCDate()),Bn(n.getUTCHours()),Bn(n.getUTCMinutes()),Bn(n.getUTCSeconds()),"Z"].join(""):e==="utctime"?r=[Bn(n.getUTCFullYear()%100),Bn(n.getUTCMonth()+1),Bn(n.getUTCDate()),Bn(n.getUTCHours()),Bn(n.getUTCMinutes()),Bn(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},fi.prototype._encodeNull=function(){return this._createEncoderBuffer("")},fi.prototype._encodeInt=function(t,e){if(typeof t=="string"){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if(typeof t!="number"&&!po.isBuffer(t)){const i=t.toArray();!t.sign&&128&i[0]&&i.unshift(0),t=po.from(i)}if(po.isBuffer(t)){let i=t.length;t.length===0&&i++;const o=po.alloc(i);return t.copy(o),t.length===0&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let i=t;i>=256;i>>=8)r++;const n=new Array(r);for(let i=n.length-1;i>=0;i--)n[i]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(po.from(n))},fi.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},fi.prototype._use=function(t,e){return typeof t=="function"&&(t=t(e)),t._getEncoder("der").tree},fi.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(n.default===null)return!1;const o=t.join();if(n.defaultBuffer===void 0&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0};const T3=ot.exports,Hp=Hb;function Vp(t){Hp.call(this,t),this.enc="pem"}T3(Vp,Hp);var O3=Vp;Vp.prototype.encode=function(t,e){const r=Hp.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let i=0;i<r.length;i+=64)n.push(r.slice(i,i+64));return n.push("-----END "+e.label+"-----"),n.join(`
`)},function(t){const e=t;e.der=Hb,e.pem=O3}(zp);var Vd={};const P3=ot.exports,R3=Qt.exports,Ny=Qa.DecoderBuffer,Vb=qp,jy=eh;function Wb(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new vn,this.tree._init(t.body)}var Jb=Wb;function vn(t){Vb.call(this,"der",t)}function Wh(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=jy.tagClass[r>>6],i=(32&r)==0;if((31&r)==31){let o=r;for(r=0;(128&o)==128;){if(o=t.readUInt8(e),t.isError(o))return o;r<<=7,r|=127&o}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:jy.tag[r]}}function By(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if((128&n)==0)return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const a=t.readUInt8(r);if(t.isError(a))return a;n|=a}return n}Wb.prototype.decode=function(t,e){return Ny.isDecoderBuffer(t)||(t=new Ny(t,e)),this.tree._decode(t,e)},P3(vn,Vb),vn.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=Wh(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},vn.prototype._decodeTag=function(t,e,r){const n=Wh(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=By(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||i!==null)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},vn.prototype._skipUntilEnd=function(t,e){for(;;){const r=Wh(t,e);if(t.isError(r))return r;const n=By(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||n!==null?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if(r.tagStr==="end")break}},vn.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const o=this._peekTag(t,"end");if(t.isError(o))return o;const a=r.decode(t,"der",n);if(t.isError(a)&&o)break;i.push(a)}return i},vn.prototype._decodeStr=function(t,e){if(e==="bitstr"){const r=t.readUInt8();return t.isError(r)?r:{unused:r,data:t.raw()}}if(e==="bmpstr"){const r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let n="";for(let i=0;i<r.length/2;i++)n+=String.fromCharCode(r.readUInt16BE(2*i));return n}if(e==="numstr"){const r=t.raw().toString("ascii");return this._isNumstr(r)?r:t.error("Decoding of string type: numstr unsupported characters")}if(e==="octstr"||e==="objDesc")return t.raw();if(e==="printstr"){const r=t.raw().toString("ascii");return this._isPrintstr(r)?r:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},vn.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,(128&a)==0&&(i.push(o),o=0);128&a&&i.push(o);const s=i[0]/40|0,c=i[0]%40;if(n=r?i:[s,c].concat(i.slice(1)),e){let f=e[n.join(" ")];f===void 0&&(f=e[n.join(".")]),f!==void 0&&(n=f)}return n},vn.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,a,s,c;if(e==="gentime")n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),c=0|r.slice(12,14);else{if(e!=="utctime")return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,a,s,c,0)},vn.prototype._decodeNull=function(){return null},vn.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:e!==0},vn.prototype._decodeInt=function(t,e){const r=t.raw();let n=new R3(r);return e&&(n=e[n.toString(10)]||n),n},vn.prototype._use=function(t,e){return typeof t=="function"&&(t=t(e)),t._getDecoder("der").tree};const C3=ot.exports,M3=Kp.Buffer,Wp=Jb;function Jp(t){Wp.call(this,t),this.enc="pem"}C3(Jp,Wp);var N3=Jp;Jp.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,a=-1;for(let f=0;f<r.length;f++){const h=r[f].match(i);if(h!==null&&h[2]===n){if(o!==-1){if(h[1]!=="END")break;a=f;break}if(h[1]!=="BEGIN")break;o=f}}if(o===-1||a===-1)throw new Error("PEM section not found for: "+n);const s=r.slice(o+1,a).join("");s.replace(/[^a-z0-9+/=]+/gi,"");const c=M3.from(s,"base64");return Wp.prototype.decode.call(this,c,e)},function(t){const e=t;e.der=Jb,e.pem=N3}(Vd),function(t){const e=zp,r=Vd,n=ot.exports;function i(o,a){this.name=o,this.body=a,this.decoders={},this.encoders={}}t.define=function(o,a){return new i(o,a)},i.prototype._createNamed=function(o){const a=this.name;function s(c){this._initNamed(c,a)}return n(s,o),s.prototype._initNamed=function(c,f){o.call(this,c,f)},new s(this)},i.prototype._getDecoder=function(o){return o=o||"der",this.decoders.hasOwnProperty(o)||(this.decoders[o]=this._createNamed(r[o])),this.decoders[o]},i.prototype.decode=function(o,a,s){return this._getDecoder(a).decode(o,s)},i.prototype._getEncoder=function(o){return o=o||"der",this.encoders.hasOwnProperty(o)||(this.encoders[o]=this._createNamed(e[o])),this.encoders[o]},i.prototype.encode=function(o,a,s){return this._getEncoder(a).encode(o,s)}}(Fb);var Yb={};(function(t){const e=Yb;e.Reporter=Qf.Reporter,e.DecoderBuffer=Qa.DecoderBuffer,e.EncoderBuffer=Qa.EncoderBuffer,e.Node=qp})();var Ly={};(function(t){const e=t;e._reverse=function(r){const n={};return Object.keys(r).forEach(function(i){(0|i)==i&&(i|=0);const o=r[i];n[o]=i}),n},e.der=eh})(Ly),function(t){const e=as;e.bignum=Qt.exports,e.define=Fb.define,e.base=Yb,e.constants=Ly,e.decoders=Vd,e.encoders=zp}();var Kt={};function Zb(t,e){return Object.keys(e).filter(function(r){return e[r].oid.toString()===t.toString()})}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.getAlgorithmFromOidStrict=Kt.getAlgorithmFromOid=Kt.hashes=Kt.encryptionSchemes=Kt.pbkdf2Prfs=Kt.keyDerivationFunctions=Kt.passwordBasedEncryptionSchemes=Kt.publicKeyAlgorithms=Kt.namedCurves=void 0,Kt.namedCurves={"P-256":{indutnyName:"p256",payloadSize:32,oid:[1,2,840,10045,3,1,7]},"P-384":{indutnyName:"p384",payloadSize:48,oid:[1,3,132,0,34]},"P-521":{indutnyName:"p521",payloadSize:66,oid:[1,3,132,0,35]},"P-256K":{indutnyName:"secp256k1",payloadSize:32,oid:[1,3,132,0,10]}},Kt.publicKeyAlgorithms={EC:{oid:[1,2,840,10045,2,1]},RSA:{oid:[1,2,840,113549,1,1,1]}},Kt.passwordBasedEncryptionSchemes={"pbeWithMD5AndDES-CBC":{oid:[1,2,840,113549,1,5,3],hash:"MD5",encrypt:"DES-CBC"},"pbeWithSHA1AndDES-CBC":{oid:[1,2,840,113549,1,5,10],hash:"SHA-1",encrypt:"DES-CBC"},pbes2:{oid:[1,2,840,113549,1,5,13]}},Kt.keyDerivationFunctions={pbkdf2:{oid:[1,2,840,113549,1,5,12],defaultSaltLen:8}},Kt.pbkdf2Prfs={hmacWithSHA1:{oid:[1,2,840,113549,2,7],hash:"SHA-1"},hmacWithSHA256:{oid:[1,2,840,113549,2,9],hash:"SHA-256"},hmacWithSHA384:{oid:[1,2,840,113549,2,10],hash:"SHA-384"},hmacWithSHA512:{oid:[1,2,840,113549,2,11],hash:"SHA-512"}},Kt.encryptionSchemes={"des-ede3-cbc":{oid:[1,2,840,113549,3,7],keyLength:24,ivLength:8},"aes128-cbc":{oid:[2,16,840,1,101,3,4,1,2],keyLength:16,ivLength:16},"aes192-cbc":{oid:[2,16,840,1,101,3,4,1,22],keyLength:24,ivLength:16},"aes256-cbc":{oid:[2,16,840,1,101,3,4,1,42],keyLength:32,ivLength:16}},Kt.hashes={"SHA-256":{hashSize:32},"SHA-384":{hashSize:48},"SHA-512":{hashSize:64},"SHA-1":{hashSize:20},MD5:{hashSize:16}},Kt.getAlgorithmFromOid=Zb;Kt.getAlgorithmFromOidStrict=function(t,e){var r=Zb(t,e);if(r.length===0)throw new Error("UnsupportedAlgorithm");return r[0]};var Ga={},Po={},Yp={},Xi=[],qn=[],j3=typeof Uint8Array<"u"?Uint8Array:Array,Zp=!1;function Xb(){Zp=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Xi[e]=t[e],qn[t.charCodeAt(e)]=e;qn["-".charCodeAt(0)]=62,qn["_".charCodeAt(0)]=63}function B3(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(Xi[(i=n)>>18&63]+Xi[i>>12&63]+Xi[i>>6&63]+Xi[63&i]);return o.join("")}function Fy(t){var e;Zp||Xb();for(var r=t.length,n=r%3,i="",o=[],a=16383,s=0,c=r-n;s<c;s+=a)o.push(B3(t,s,s+a>c?c:s+a));return n===1?(e=t[r-1],i+=Xi[e>>2],i+=Xi[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=Xi[e>>10],i+=Xi[e>>4&63],i+=Xi[e<<2&63],i+="="),o.push(i),o.join("")}function ll(t,e,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,f=c>>1,h=-7,y=r?i-1:0,g=r?-1:1,_=t[e+y];for(y+=g,o=_&(1<<-h)-1,_>>=-h,h+=s;h>0;o=256*o+t[e+y],y+=g,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[e+y],y+=g,h-=8);if(o===0)o=1-f;else{if(o===c)return a?NaN:1/0*(_?-1:1);a+=Math.pow(2,n),o-=f}return(_?-1:1)*a*Math.pow(2,o-n)}function Gb(t,e,r,n,i,o){var a,s,c,f=8*o-i-1,h=(1<<f)-1,y=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,E=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+y>=1?g/c:g*Math.pow(2,1-y))*c>=2&&(a++,c/=2),a+y>=h?(s=0,a=h):a+y>=1?(s=(e*c-1)*Math.pow(2,i),a+=y):(s=e*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;t[r+_]=255&s,_+=E,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+_]=255&a,_+=E,a/=256,f-=8);t[r+_-E]|=128*O}var L3={}.toString,$b=Array.isArray||function(t){return L3.call(t)=="[object Array]"};function Wd(){return ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ko(t,e){if(Wd()<e)throw new RangeError("Invalid typed array length");return ye.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ye.prototype:(t===null&&(t=new ye(e)),t.length=e),t}function ye(t,e,r){if(!(ye.TYPED_ARRAY_SUPPORT||this instanceof ye))return new ye(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Jd(this,t)}return Qb(this,t,e,r)}function Qb(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(i,o,a,s){if(a<0||o.byteLength<a)throw new RangeError("'offset' is out of bounds");if(o.byteLength<a+(s||0))throw new RangeError("'length' is out of bounds");return o=a===void 0&&s===void 0?new Uint8Array(o):s===void 0?new Uint8Array(o,a):new Uint8Array(o,a,s),ye.TYPED_ARRAY_SUPPORT?(i=o).__proto__=ye.prototype:i=Jh(i,o),i}(t,e,r,n):typeof e=="string"?function(i,o,a){if(typeof a=="string"&&a!==""||(a="utf8"),!ye.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var s=0|tv(o,a),c=(i=ko(i,s)).write(o,a);return c!==s&&(i=i.slice(0,c)),i}(t,e,r):function(i,o){if(Gi(o)){var a=0|Xp(o.length);return(i=ko(i,a)).length===0||o.copy(i,0,0,a),i}if(o){if(typeof ArrayBuffer<"u"&&o.buffer instanceof ArrayBuffer||"length"in o)return typeof o.length!="number"||(s=o.length)!=s?ko(i,0):Jh(i,o);if(o.type==="Buffer"&&$b(o.data))return Jh(i,o.data)}var s;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ev(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Jd(t,e){if(ev(e),t=ko(t,e<0?0:0|Xp(e)),!ye.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function Jh(t,e){var r=e.length<0?0:0|Xp(e.length);t=ko(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function Xp(t){if(t>=Wd())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wd().toString(16)+" bytes");return 0|t}function Gi(t){return!(t==null||!t._isBuffer)}function tv(t,e){if(Gi(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Rf(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ov(t).length;default:if(n)return Rf(t).length;e=(""+e).toLowerCase(),n=!0}}function F3(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Y3(this,e,r);case"utf8":case"utf-8":return nv(this,e,r);case"ascii":return W3(this,e,r);case"latin1":case"binary":return J3(this,e,r);case"base64":return V3(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z3(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function Ea(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Uy(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if(typeof e=="string"&&(e=ye.from(e,n)),Gi(e))return e.length===0?-1:zy(t,e,r,n,i);if(typeof e=="number")return e&=255,ye.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):zy(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function zy(t,e,r,n,i){var o,a=1,s=t.length,c=e.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function f(_,E){return a===1?_[E]:_.readUInt16BE(E*a)}if(i){var h=-1;for(o=r;o<s;o++)if(f(t,o)===f(e,h===-1?0:o-h)){if(h===-1&&(h=o),o-h+1===c)return h*a}else h!==-1&&(o-=o-h),h=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){for(var y=!0,g=0;g<c;g++)if(f(t,o+g)!==f(e,g)){y=!1;break}if(y)return o}return-1}function U3(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function z3(t,e,r,n){return th(Rf(e,t.length-r),t,r,n)}function rv(t,e,r,n){return th(function(i){for(var o=[],a=0;a<i.length;++a)o.push(255&i.charCodeAt(a));return o}(e),t,r,n)}function K3(t,e,r,n){return rv(t,e,r,n)}function q3(t,e,r,n){return th(ov(e),t,r,n)}function H3(t,e,r,n){return th(function(i,o){for(var a,s,c,f=[],h=0;h<i.length&&!((o-=2)<0);++h)s=(a=i.charCodeAt(h))>>8,c=a%256,f.push(c),f.push(s);return f}(e,t.length-r),t,r,n)}function V3(t,e,r){return e===0&&r===t.length?Fy(t):Fy(t.slice(e,r))}function nv(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,c,f=t[i],h=null,y=f>239?4:f>223?3:f>191?2:1;if(i+y<=r)switch(y){case 1:f<128&&(h=f);break;case 2:(192&(o=t[i+1]))==128&&(c=(31&f)<<6|63&o)>127&&(h=c);break;case 3:o=t[i+1],a=t[i+2],(192&o)==128&&(192&a)==128&&(c=(15&f)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],(192&o)==128&&(192&a)==128&&(192&s)==128&&(c=(15&f)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(h=c)}h===null?(h=65533,y=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=y}return function(g){var _=g.length;if(_<=4096)return String.fromCharCode.apply(String,g);for(var E="",O=0;O<_;)E+=String.fromCharCode.apply(String,g.slice(O,O+=4096));return E}(n)}ye.TYPED_ARRAY_SUPPORT=Pc.TYPED_ARRAY_SUPPORT===void 0||Pc.TYPED_ARRAY_SUPPORT,ye.poolSize=8192,ye._augment=function(t){return t.__proto__=ye.prototype,t},ye.from=function(t,e,r){return Qb(null,t,e,r)},ye.TYPED_ARRAY_SUPPORT&&(ye.prototype.__proto__=Uint8Array.prototype,ye.__proto__=Uint8Array),ye.alloc=function(t,e,r){return function(n,i,o,a){return ev(i),i<=0?ko(n,i):o!==void 0?typeof a=="string"?ko(n,i).fill(o,a):ko(n,i).fill(o):ko(n,i)}(null,t,e,r)},ye.allocUnsafe=function(t){return Jd(null,t)},ye.allocUnsafeSlow=function(t){return Jd(null,t)},ye.isBuffer=kn,ye.compare=function(t,e){if(!Gi(t)||!Gi(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},ye.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.concat=function(t,e){if(!$b(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ye.alloc(0);var r;if(e===void 0)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=ye.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!Gi(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},ye.byteLength=tv,ye.prototype._isBuffer=!0,ye.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ea(this,e,e+1);return this},ye.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ea(this,e,e+3),Ea(this,e+1,e+2);return this},ye.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ea(this,e,e+7),Ea(this,e+1,e+6),Ea(this,e+2,e+5),Ea(this,e+3,e+4);return this},ye.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?nv(this,0,t):F3.apply(this,arguments)},ye.prototype.equals=function(t){if(!Gi(t))throw new TypeError("Argument must be a Buffer");return this===t||ye.compare(this,t)===0},ye.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ye.prototype.compare=function(t,e,r,n,i){if(!Gi(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),r===void 0&&(r=t?t.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(n,i),f=t.slice(e,r),h=0;h<s;++h)if(c[h]!==f[h]){o=c[h],a=f[h];break}return o<a?-1:a<o?1:0},ye.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},ye.prototype.indexOf=function(t,e,r){return Uy(this,t,e,r,!0)},ye.prototype.lastIndexOf=function(t,e,r){return Uy(this,t,e,r,!1)},ye.prototype.write=function(t,e,r,n){if(e===void 0)n="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,n===void 0&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((r===void 0||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return U3(this,t,e,r);case"utf8":case"utf-8":return z3(this,t,e,r);case"ascii":return rv(this,t,e,r);case"latin1":case"binary":return K3(this,t,e,r);case"base64":return q3(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H3(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W3(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function J3(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Y3(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=G3(t[o]);return i}function Z3(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function pr(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function nn(t,e,r,n,i,o){if(!Gi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function fl(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function hl(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function iv(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ky(t,e,r,n,i){return i||iv(t,0,r,4),Gb(t,e,r,n,23,4),r+4}function qy(t,e,r,n,i){return i||iv(t,0,r,8),Gb(t,e,r,n,52,8),r+8}ye.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=e===void 0?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),ye.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=ye.prototype;else{var i=e-t;r=new ye(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},ye.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||pr(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},ye.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||pr(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},ye.prototype.readUInt8=function(t,e){return e||pr(t,1,this.length),this[t]},ye.prototype.readUInt16LE=function(t,e){return e||pr(t,2,this.length),this[t]|this[t+1]<<8},ye.prototype.readUInt16BE=function(t,e){return e||pr(t,2,this.length),this[t]<<8|this[t+1]},ye.prototype.readUInt32LE=function(t,e){return e||pr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ye.prototype.readUInt32BE=function(t,e){return e||pr(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ye.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||pr(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},ye.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||pr(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},ye.prototype.readInt8=function(t,e){return e||pr(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ye.prototype.readInt16LE=function(t,e){e||pr(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ye.prototype.readInt16BE=function(t,e){e||pr(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ye.prototype.readInt32LE=function(t,e){return e||pr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ye.prototype.readInt32BE=function(t,e){return e||pr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ye.prototype.readFloatLE=function(t,e){return e||pr(t,4,this.length),ll(this,t,!0,23,4)},ye.prototype.readFloatBE=function(t,e){return e||pr(t,4,this.length),ll(this,t,!1,23,4)},ye.prototype.readDoubleLE=function(t,e){return e||pr(t,8,this.length),ll(this,t,!0,52,8)},ye.prototype.readDoubleBE=function(t,e){return e||pr(t,8,this.length),ll(this,t,!1,52,8)},ye.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||nn(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},ye.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||nn(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},ye.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,1,255,0),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ye.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):fl(this,t,e,!0),e+2},ye.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):fl(this,t,e,!1),e+2},ye.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):hl(this,t,e,!0),e+4},ye.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):hl(this,t,e,!1),e+4},ye.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);nn(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&s===0&&this[e+o-1]!==0&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},ye.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);nn(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&s===0&&this[e+o+1]!==0&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},ye.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,1,127,-128),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ye.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):fl(this,t,e,!0),e+2},ye.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):fl(this,t,e,!1),e+2},ye.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,4,2147483647,-2147483648),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):hl(this,t,e,!0),e+4},ye.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||nn(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):hl(this,t,e,!1),e+4},ye.prototype.writeFloatLE=function(t,e,r){return Ky(this,t,e,!0,r)},ye.prototype.writeFloatBE=function(t,e,r){return Ky(this,t,e,!1,r)},ye.prototype.writeDoubleLE=function(t,e,r){return qy(this,t,e,!0,r)},ye.prototype.writeDoubleBE=function(t,e,r){return qy(this,t,e,!1,r)},ye.prototype.copy=function(t,e,r,n){if(r||(r=0),n||n===0||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!ye.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},ye.prototype.fill=function(t,e,r,n){if(typeof t=="string"){if(typeof e=="string"?(n=e,e=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ye.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=r===void 0?this.length:r>>>0,t||(t=0),typeof t=="number")for(o=e;o<r;++o)this[o]=t;else{var a=Gi(t)?t:Rf(new ye(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var X3=/[^+\/0-9A-Za-z-_]/g;function G3(t){return t<16?"0"+t.toString(16):t.toString(16)}function Rf(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function ov(t){return function(e){var r,n,i,o,a,s;Zp||Xb();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=e[c-2]==="="?2:e[c-1]==="="?1:0,s=new j3(3*c/4-a),i=a>0?c-4:c;var f=0;for(r=0,n=0;r<i;r+=4,n+=3)o=qn[e.charCodeAt(r)]<<18|qn[e.charCodeAt(r+1)]<<12|qn[e.charCodeAt(r+2)]<<6|qn[e.charCodeAt(r+3)],s[f++]=o>>16&255,s[f++]=o>>8&255,s[f++]=255&o;return a===2?(o=qn[e.charCodeAt(r)]<<2|qn[e.charCodeAt(r+1)]>>4,s[f++]=255&o):a===1&&(o=qn[e.charCodeAt(r)]<<10|qn[e.charCodeAt(r+1)]<<4|qn[e.charCodeAt(r+2)]>>2,s[f++]=o>>8&255,s[f++]=255&o),s}(function(e){if((e=function(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}(e).replace(X3,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function th(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function kn(t){return t!=null&&(!!t._isBuffer||Hy(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Hy(e.slice(0,0))}(t))}function Hy(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.getEnvAtob=ks.getEnvBtoa=void 0,ks.getEnvBtoa=function(){return typeof window<"u"?window.btoa:$3},ks.getEnvAtob=function(){return typeof window<"u"?window.atob:Q3};var $3=function(t){return ye.from(t.toString(),"binary").toString("base64")},Q3=function(t){return ye.from(t,"base64").toString("binary")};(function(t){var e=ae&&ae.__createBinding||(Object.create?function(s,c,f,h){h===void 0&&(h=f),Object.defineProperty(s,h,{enumerable:!0,get:function(){return c[f]}})}:function(s,c,f,h){h===void 0&&(h=f),s[h]=c[f]}),r=ae&&ae.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=ae&&ae.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var f in s)f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)&&e(c,s,f);return r(c,s),c};Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.arrayBufferToString=t.hexStringToArrayBuffer=t.arrayBufferToHexString=t.decodeBase64Url=t.encodeBase64Url=t.decodeBase64=t.encodeBase64=void 0;var i=n(ks);t.encodeBase64=function(s){var c="";return c=typeof s=="string"?s:t.arrayBufferToString(s),i.getEnvBtoa()(c)},t.decodeBase64=function(s){var c=i.getEnvAtob()(s),f=t.stringToArrayBuffer(c);return a(f)};var o=function(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)&&s.buffer!==void 0?new Uint8Array(s.buffer):new Uint8Array(s)},a=function(s){for(var c=!0,f=0;f<s.length;f++)if(s[f]>126||s[f]<32&&s[f]!==13&&s[f]!==10){c=!1;break}var h=null;if(c)for(h="",f=0;f<s.length;f++)h+=String.fromCharCode(s[f]);else h=s;return h};t.encodeBase64Url=function(s){return t.encodeBase64(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.decodeBase64Url=function(s){return s=s.replace(/-/g,"+").replace(/_/g,"/"),t.decodeBase64(s)},t.arrayBufferToHexString=function(s){for(var c=o(s),f="",h=0;h<c.length;h++){var y=(255&c[h]).toString(16);f+=y=y.length===1?"0"+y:y}return f},t.hexStringToArrayBuffer=function(s){for(var c=[],f=s.length,h=0;h<f;h+=2)c.push(parseInt(s.substr(h,2),16));return new Uint8Array(c)},t.arrayBufferToString=function(s){var c=o(s),f=new Array(c.length);return c.forEach(function(h,y){f[y]=h}),String.fromCharCode.apply(null,f)},t.stringToArrayBuffer=function(s){return new Uint8Array(s.length).map(function(c,f){return s.charCodeAt(f)})}})(Yp);var Xs={},e5=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),t5=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r5=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&e5(e,t,r);return t5(e,t),e};Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.binToPem=Xs.pemToBin=void 0;var Vy=r5(Yp),n5={public:"PUBLIC KEY",private:"PRIVATE KEY",encryptedPrivate:"ENCRYPTED PRIVATE KEY",certificate:"CERTIFICATE",certRequest:"CERTIFICATE REQUEST"};Xs.pemToBin=function(t){var e=o5(t);return Vy.decodeBase64(e)},Xs.binToPem=function(t,e){var r=Vy.encodeBase64(t);return i5(r,e)};var i5=function(t,e){for(var r=n5[e],n="-----BEGIN "+r+`-----
`;t.length>0;)n+=t.substring(0,64)+`
`,t=t.substring(64);return n=n+"-----END "+r+"-----"},o5=function(t){var e=RegExp("^-----[s]*BEGIN[^-]*-----$","gm"),r=RegExp("^-----[s]*END[^-]*-----$","gm");try{var n=t.split(e)[1].split(r)[0];return n=n.replace(/\r?\n/g,"")}catch{throw new Error("Invalid format as PEM")}};(function(t){var e=ae&&ae.__createBinding||(Object.create?function(c,f,h,y){y===void 0&&(y=h),Object.defineProperty(c,y,{enumerable:!0,get:function(){return f[h]}})}:function(c,f,h,y){y===void 0&&(y=h),c[y]=f[h]}),r=ae&&ae.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),n=ae&&ae.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&e(f,c,h);return r(f,c),f};Object.defineProperty(t,"__esModule",{value:!0}),t.formatter=t.encoder=void 0;var i,o,a=n(Yp),s=n(Xs);(function(c){c.encodeBase64=a.encodeBase64,c.decodeBase64=a.decodeBase64,c.encodeBase64Url=a.encodeBase64Url,c.decodeBase64Url=a.decodeBase64Url,c.arrayBufferToHexString=a.arrayBufferToHexString,c.hexStringToArrayBuffer=a.hexStringToArrayBuffer,c.stringToArrayBuffer=a.stringToArrayBuffer,c.arrayBufferToString=a.arrayBufferToString})(i=t.encoder||(t.encoder={})),function(c){c.binToPem=s.binToPem,c.pemToBin=s.pemToBin}(o=t.formatter||(t.formatter={})),t.default={encoder:i,formatter:o}})(Po);var oa={},a5="6.5.4",Tn={},Yd={};(function(t){var e=Yd;function r(i){return i.length===1?"0"+i:i}function n(i){for(var o="",a=0;a<i.length;a++)o+=r(i[a].toString(16));return o}e.toArray=function(i,o){if(Array.isArray(i))return i.slice();if(!i)return[];var a=[];if(typeof i!="string"){for(var s=0;s<i.length;s++)a[s]=0|i[s];return a}if(o==="hex")for((i=i.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(i="0"+i),s=0;s<i.length;s+=2)a.push(parseInt(i[s]+i[s+1],16));else for(s=0;s<i.length;s++){var c=i.charCodeAt(s),f=c>>8,h=255&c;f?a.push(f,h):a.push(h)}return a},e.zero2=r,e.toHex=n,e.encode=function(i,o){return o==="hex"?n(i):i}})(),function(t){var e=Tn,r=Qt.exports,n=ni,i=Yd;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode,e.getNAF=function(o,a,s){var c=new Array(Math.max(o.bitLength(),s)+1);c.fill(0);for(var f=1<<a+1,h=o.clone(),y=0;y<c.length;y++){var g,_=h.andln(f-1);h.isOdd()?(g=_>(f>>1)-1?(f>>1)-_:_,h.isubn(g)):g=0,c[y]=g,h.iushrn(1)}return c},e.getJSF=function(o,a){var s=[[],[]];o=o.clone(),a=a.clone();for(var c,f=0,h=0;o.cmpn(-f)>0||a.cmpn(-h)>0;){var y,g,_=o.andln(3)+f&3,E=a.andln(3)+h&3;_===3&&(_=-1),E===3&&(E=-1),y=(1&_)==0?0:(c=o.andln(7)+f&7)!==3&&c!==5||E!==2?_:-_,s[0].push(y),g=(1&E)==0?0:(c=a.andln(7)+h&7)!==3&&c!==5||_!==2?E:-E,s[1].push(g),2*f===y+1&&(f=1-f),2*h===g+1&&(h=1-h),o.iushrn(1),a.iushrn(1)}return s},e.cachedProperty=function(o,a,s){var c="_"+a;o.prototype[a]=function(){return this[c]!==void 0?this[c]:this[c]=s.call(this)}},e.parseBytes=function(o){return typeof o=="string"?e.toArray(o,"hex"):o},e.intFromLE=function(o){return new r(o,"hex","le")}}();var Yh,Rc={exports:{}};function Bo(t){this.rand=t}if(Rc.exports=function(t){return Yh||(Yh=new Bo(null)),Yh.generate(t)},Rc.exports.Rand=Bo,Bo.prototype.generate=function(t){return this._rand(t)},Bo.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},typeof self=="object")self.crypto&&self.crypto.getRandomValues?Bo.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?Bo.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:typeof window=="object"&&(Bo.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(typeof null.randomBytes!="function")throw new Error("Not supported");Bo.prototype._rand=function(t){return null.randomBytes(t)}}catch{}var Gp={},Ia=Qt.exports,Cc=Tn,dl=Cc.getNAF,s5=Cc.getJSF,pl=Cc.assert;function Ho(t,e){this.type=t,this.p=new Ia(e.p,16),this.red=e.prime?Ia.red(e.prime):Ia.mont(this.p),this.zero=new Ia(0).toRed(this.red),this.one=new Ia(1).toRed(this.red),this.two=new Ia(2).toRed(this.red),this.n=e.n&&new Ia(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var rh=Ho;function Ln(t,e){this.curve=t,this.type=e,this.precomputed=null}Ho.prototype.point=function(){throw new Error("Not implemented")},Ho.prototype.validate=function(){throw new Error("Not implemented")},Ho.prototype._fixedNafMul=function(t,e){pl(t.precomputed);var r=t._getDoubles(),n=dl(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var c=o+r.step-1;c>=o;c--)a=(a<<1)+n[c];s.push(a)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),y=i;y>0;y--){for(o=0;o<s.length;o++)(a=s[o])===y?h=h.mixedAdd(r.points[o]):a===-y&&(h=h.mixedAdd(r.points[o].neg()));f=f.add(h)}return f.toP()},Ho.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=dl(e,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var c=0;s>=0&&o[s]===0;s--)c++;if(s>=0&&c++,a=a.dblp(c),s<0)break;var f=o[s];pl(f!==0),a=t.type==="affine"?f>0?a.mixedAdd(i[f-1>>1]):a.mixedAdd(i[-f-1>>1].neg()):f>0?a.add(i[f-1>>1]):a.add(i[-f-1>>1].neg())}return t.type==="affine"?a.toP():a},Ho.prototype._wnafMulAdd=function(t,e,r,n,i){var o,a,s,c=this._wnafT1,f=this._wnafT2,h=this._wnafT3,y=0;for(o=0;o<n;o++){var g=(s=e[o])._getNAFPoints(t);c[o]=g.wnd,f[o]=g.points}for(o=n-1;o>=1;o-=2){var _=o-1,E=o;if(c[_]===1&&c[E]===1){var O=[e[_],null,null,e[E]];e[_].y.cmp(e[E].y)===0?(O[1]=e[_].add(e[E]),O[2]=e[_].toJ().mixedAdd(e[E].neg())):e[_].y.cmp(e[E].y.redNeg())===0?(O[1]=e[_].toJ().mixedAdd(e[E]),O[2]=e[_].add(e[E].neg())):(O[1]=e[_].toJ().mixedAdd(e[E]),O[2]=e[_].toJ().mixedAdd(e[E].neg()));var R=[-3,-1,-5,-7,0,7,5,1,3],L=s5(r[_],r[E]);for(y=Math.max(L[0].length,y),h[_]=new Array(y),h[E]=new Array(y),a=0;a<y;a++){var q=0|L[0][a],X=0|L[1][a];h[_][a]=R[3*(q+1)+(X+1)],h[E][a]=0,f[_]=O}}else h[_]=dl(r[_],c[_],this._bitLength),h[E]=dl(r[E],c[E],this._bitLength),y=Math.max(h[_].length,y),y=Math.max(h[E].length,y)}var ne=this.jpoint(null,null,null),W=this._wnafT4;for(o=y;o>=0;o--){for(var H=0;o>=0;){var Y=!0;for(a=0;a<n;a++)W[a]=0|h[a][o],W[a]!==0&&(Y=!1);if(!Y)break;H++,o--}if(o>=0&&H++,ne=ne.dblp(H),o<0)break;for(a=0;a<n;a++){var T=W[a];T!==0&&(T>0?s=f[a][T-1>>1]:T<0&&(s=f[a][-T-1>>1].neg()),ne=s.type==="affine"?ne.mixedAdd(s):ne.add(s))}}for(o=0;o<n;o++)f[o]=null;return i?ne:ne.toP()},Ho.BasePoint=Ln,Ln.prototype.eq=function(){throw new Error("Not implemented")},Ln.prototype.validate=function(){return this.curve.validate(this)},Ho.prototype.decodePoint=function(t,e){t=Cc.toArray(t,e);var r=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1==2*r)return t[0]===6?pl(t[t.length-1]%2==0):t[0]===7&&pl(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((t[0]===2||t[0]===3)&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),t[0]===3);throw new Error("Unknown point format")},Ln.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Ln.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},Ln.prototype.encode=function(t,e){return Cc.encode(this._encode(e),t)},Ln.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Ln.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},Ln.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},Ln.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=r===1?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},Ln.prototype._getBeta=function(){return null},Ln.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var u5=Tn,tr=Qt.exports,Zd=ot.exports,fu=rh,c5=u5.assert;function Kn(t){fu.call(this,"short",t),this.a=new tr(t.a,16).toRed(this.red),this.b=new tr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Zd(Kn,fu);var l5=Kn;function yr(t,e,r,n){fu.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new tr(e,16),this.y=new tr(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Sr(t,e,r,n){fu.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new tr(0)):(this.x=new tr(e,16),this.y=new tr(r,16),this.z=new tr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Kn.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var e,r;if(t.beta)e=new tr(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new tr(t.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))===0?r=i[0]:(r=i[1],c5(this.g.mul(r).x.cmp(this.g.x.redMul(e))===0))}return{beta:e,lambda:r,basis:t.basis?t.basis.map(function(o){return{a:new tr(o.a,16),b:new tr(o.b,16)}}):this._getEndoBasis(r)}}},Kn.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:tr.mont(t),r=new tr(2).toRed(e).redInvm(),n=r.redNeg(),i=new tr(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Kn.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,a,s,c,f,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),y=t,g=this.n.clone(),_=new tr(1),E=new tr(0),O=new tr(0),R=new tr(1),L=0;y.cmpn(0)!==0;){var q=g.div(y);c=g.sub(q.mul(y)),f=O.sub(q.mul(_));var X=R.sub(q.mul(E));if(!n&&c.cmp(h)<0)e=s.neg(),r=_,n=c.neg(),i=f;else if(n&&++L==2)break;s=c,g=y,y=c,O=_,_=f,R=E,E=X}o=c.neg(),a=f;var ne=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(ne)>=0&&(o=e,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},Kn.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),c=i.mul(r.b),f=o.mul(n.b);return{k1:t.sub(a).sub(s),k2:c.add(f).neg()}},Kn.prototype.pointFromX=function(t,e){(t=new tr(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(n.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},Kn.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0},Kn.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],c=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),n[2*o]=s,n[2*o+1]=c,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var f=this._wnafMulAdd(1,n,i,2*o,r),h=0;h<2*o;h++)n[h]=null,i[h]=null;return f},Zd(yr,fu.BasePoint),Kn.prototype.point=function(t,e,r){return new yr(this,t,e,r)},Kn.prototype.pointFromJSON=function(t,e){return yr.fromJSON(this,t,e)},yr.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},yr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},yr.fromJSON=function(t,e,r){typeof e=="string"&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(a){return t.point(a[0],a[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},yr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},yr.prototype.isInfinity=function(){return this.inf},yr.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},yr.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},yr.prototype.getX=function(){return this.x.fromRed()},yr.prototype.getY=function(){return this.y.fromRed()},yr.prototype.mul=function(t){return t=new tr(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},yr.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},yr.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},yr.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)},yr.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(i){return i.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},yr.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Zd(Sr,fu.BasePoint),Kn.prototype.jpoint=function(t,e,r){return new Sr(this,t,e,r)},Sr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},Sr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Sr.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=n.redSub(i),c=o.redSub(a);if(s.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=s.redSqr(),h=f.redMul(s),y=n.redMul(f),g=c.redSqr().redIAdd(h).redISub(y).redISub(y),_=c.redMul(y.redISub(g)).redISub(o.redMul(h)),E=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(g,_,E)},Sr.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(a.cmpn(0)===0)return s.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),f=c.redMul(a),h=r.redMul(c),y=s.redSqr().redIAdd(f).redISub(h).redISub(h),g=s.redMul(h.redISub(y)).redISub(i.redMul(f)),_=this.z.redMul(a);return this.curve.jpoint(y,g,_)},Sr.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,c=s.redSqr().redSqr(),f=a.redAdd(a);for(e=0;e<t;e++){var h=o.redSqr(),y=f.redSqr(),g=y.redSqr(),_=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),E=o.redMul(y),O=_.redSqr().redISub(E.redAdd(E)),R=E.redISub(O),L=_.redMul(R);L=L.redIAdd(L).redISub(g);var q=f.redMul(s);e+1<t&&(c=c.redMul(g)),o=O,s=q,f=L}return this.curve.jpoint(o,f.redMul(i),s)},Sr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Sr.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),c=s.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=(f=f.redIAdd(f)).redIAdd(f),t=c,e=s.redMul(a.redISub(c)).redISub(f),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),y=this.y.redSqr(),g=y.redSqr(),_=this.x.redAdd(y).redSqr().redISub(h).redISub(g);_=_.redIAdd(_);var E=h.redAdd(h).redIAdd(h),O=E.redSqr(),R=g.redIAdd(g);R=(R=R.redIAdd(R)).redIAdd(R),t=O.redISub(_).redISub(_),e=E.redMul(_.redISub(t)).redISub(R),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},Sr.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=s.redSqr().redISub(a).redISub(a);t=c;var f=o.redIAdd(o);f=(f=f.redIAdd(f)).redIAdd(f),e=s.redMul(a.redISub(c)).redISub(f),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),y=this.y.redSqr(),g=this.x.redMul(y),_=this.x.redSub(h).redMul(this.x.redAdd(h));_=_.redAdd(_).redIAdd(_);var E=g.redIAdd(g),O=(E=E.redIAdd(E)).redAdd(E);t=_.redSqr().redISub(O),r=this.y.redAdd(this.z).redSqr().redISub(y).redISub(h);var R=y.redSqr();R=(R=(R=R.redIAdd(R)).redIAdd(R)).redIAdd(R),e=_.redMul(E.redISub(t)).redISub(R)}return this.curve.jpoint(t,e,r)},Sr.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),c=e.redAdd(e),f=(c=c.redIAdd(c)).redMul(a),h=s.redSqr().redISub(f.redAdd(f)),y=f.redISub(h),g=a.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g);var _=s.redMul(y).redISub(g),E=r.redAdd(r).redMul(n);return this.curve.jpoint(h,_,E)},Sr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var f=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(c),h=e.redMul(f);h=(h=h.redIAdd(h)).redIAdd(h);var y=this.x.redMul(s).redISub(h);y=(y=y.redIAdd(y)).redIAdd(y);var g=this.y.redMul(f.redMul(c.redISub(f)).redISub(a.redMul(s)));g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g);var _=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(y,g,_)},Sr.prototype.mul=function(t,e){return t=new tr(t,e),this.curve._wnafMul(this,t)},Sr.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)===0},Sr.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},Sr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Sr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var js=Qt.exports,av=ot.exports,nh=rh,f5=Tn;function Bs(t){nh.call(this,"mont",t),this.a=new js(t.a,16).toRed(this.red),this.b=new js(t.b,16).toRed(this.red),this.i4=new js(4).toRed(this.red).redInvm(),this.two=new js(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}av(Bs,nh);var h5=Bs;function gr(t,e,r){nh.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new js(e,16),this.z=new js(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Bs.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return n.redSqrt().redSqr().cmp(n)===0},av(gr,nh.BasePoint),Bs.prototype.decodePoint=function(t,e){return this.point(f5.toArray(t,e),1)},Bs.prototype.point=function(t,e){return new gr(this,t,e)},Bs.prototype.pointFromJSON=function(t){return gr.fromJSON(this,t)},gr.prototype.precompute=function(){},gr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},gr.fromJSON=function(t,e){return new gr(t,e[0],e[1]||t.one)},gr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},gr.prototype.isInfinity=function(){return this.z.cmpn(0)===0},gr.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},gr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},gr.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=i.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),c=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,c)},gr.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];e.cmpn(0)!==0;e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)i[o]===0?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},gr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},gr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},gr.prototype.eq=function(t){return this.getX().cmp(t.getX())===0},gr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},gr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var d5=Tn,Do=Qt.exports,sv=ot.exports,ih=rh,p5=d5.assert;function qi(t){this.twisted=(0|t.a)!=1,this.mOneA=this.twisted&&(0|t.a)==-1,this.extended=this.mOneA,ih.call(this,"edwards",t),this.a=new Do(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Do(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Do(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),p5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|t.c)==1}sv(qi,ih);var y5=qi;function Bt(t,e,r,n,i){ih.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Do(e,16),this.y=new Do(r,16),this.z=n?new Do(n,16):this.curve.one,this.t=i&&new Do(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}qi.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},qi.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},qi.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},qi.prototype.pointFromX=function(t,e){(t=new Do(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var s=a.fromRed().isOdd();return(e&&!s||!e&&s)&&(a=a.redNeg()),this.point(t,a)},qi.prototype.pointFromY=function(t,e){(t=new Do(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(o.cmp(this.zero)===0){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},qi.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return n.cmp(i)===0},sv(Bt,ih.BasePoint),qi.prototype.pointFromJSON=function(t){return Bt.fromJSON(this,t)},qi.prototype.point=function(t,e,r,n){return new Bt(this,t,e,r,n)},Bt.fromJSON=function(t,e){return new Bt(t,e[0],e[1],e[2])},Bt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Bt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Bt.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(r),s=n.redSub(e),c=i.redMul(a),f=o.redMul(s),h=i.redMul(s),y=a.redMul(o);return this.curve.point(c,f,y,h)},Bt.prototype._projDbl=function(){var t,e,r,n,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var f=(n=this.curve._mulA(s)).redAdd(c);this.zOne?(t=a.redSub(s).redSub(c).redMul(f.redSub(this.curve.two)),e=f.redMul(n.redSub(c)),r=f.redSqr().redSub(f).redSub(f)):(i=this.z.redSqr(),o=f.redSub(i).redISub(i),t=a.redSub(s).redISub(c).redMul(o),e=f.redMul(n.redSub(c)),r=f.redMul(o))}else n=s.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(a.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(s.redISub(c)),r=n.redMul(o);return this.curve.point(t,e,r)},Bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Bt.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=i.redSub(n),s=i.redAdd(n),c=r.redAdd(e),f=o.redMul(a),h=s.redMul(c),y=o.redMul(c),g=a.redMul(s);return this.curve.point(f,h,g,y)},Bt.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),c=i.redSub(s),f=i.redAdd(s),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),y=n.redMul(c).redMul(h);return this.curve.twisted?(e=n.redMul(f).redMul(a.redSub(this.curve._mulA(o))),r=c.redMul(f)):(e=n.redMul(f).redMul(a.redSub(o)),r=this.curve._mulC(c).redMul(f)),this.curve.point(y,e,r)},Bt.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Bt.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Bt.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},Bt.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},Bt.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Bt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Bt.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Bt.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Bt.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0},Bt.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(e)===0)return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),this.x.cmp(e)===0)return!0}},Bt.prototype.toP=Bt.prototype.normalize,Bt.prototype.mixedAdd=Bt.prototype.add,function(t){var e=t;e.base=rh,e.short=l5,e.mont=h5,e.edwards=y5}(Gp);var oh={},Wc={},it={},g5=ni,m5=ot.exports;function b5(t,e){return(64512&t.charCodeAt(e))==55296&&!(e<0||e+1>=t.length)&&(64512&t.charCodeAt(e+1))==56320}function Wy(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function Jy(t){return t.length===1?"0"+t:t}function Yy(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}it.inherits=m5,it.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):b5(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},it.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=Jy(t[r].toString(16));return e},it.htonl=Wy,it.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Wy(i)),r+=Yy(i.toString(16))}return r},it.zero2=Jy,it.zero8=Yy,it.join32=function(t,e,r,n){var i=r-e;g5(i%4==0);for(var o=new Array(i/4),a=0,s=e;a<o.length;a++,s+=4){var c;c=n==="big"?t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]:t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s],o[a]=c>>>0}return o},it.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];e==="big"?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},it.rotr32=function(t,e){return t>>>e|t<<32-e},it.rotl32=function(t,e){return t<<e|t>>>32-e},it.sum32=function(t,e){return t+e>>>0},it.sum32_3=function(t,e,r){return t+e+r>>>0},it.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},it.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},it.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o},it.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},it.sum64_lo=function(t,e,r,n){return e+n>>>0},it.sum64_4_hi=function(t,e,r,n,i,o,a,s){var c=0,f=e;return c+=(f=f+n>>>0)<e?1:0,c+=(f=f+o>>>0)<o?1:0,t+r+i+a+(c+=(f=f+s>>>0)<s?1:0)>>>0},it.sum64_4_lo=function(t,e,r,n,i,o,a,s){return e+n+o+s>>>0},it.sum64_5_hi=function(t,e,r,n,i,o,a,s,c,f){var h=0,y=e;return h+=(y=y+n>>>0)<e?1:0,h+=(y=y+o>>>0)<o?1:0,h+=(y=y+s>>>0)<s?1:0,t+r+i+a+c+(h+=(y=y+f>>>0)<f?1:0)>>>0},it.sum64_5_lo=function(t,e,r,n,i,o,a,s,c,f){return e+n+o+s+f>>>0},it.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},it.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},it.shr64_hi=function(t,e,r){return t>>>r},it.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0};var mu={},Zy=it,v5=ni;function yl(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}mu.BlockHash=yl,yl.prototype.update=function(t,e){if(t=Zy.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=Zy.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},yl.prototype.digest=function(t){return this.update(this._pad()),v5(this.pending===null),this._digest(t)},yl.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var Ds={},Hi={},Li=it.rotr32;function Xy(t,e,r){return t&e^~t&r}function Gy(t,e,r){return t&e^t&r^e&r}function $y(t,e,r){return t^e^r}Hi.ft_1=function(t,e,r,n){return t===0?Xy(e,r,n):t===1||t===3?$y(e,r,n):t===2?Gy(e,r,n):void 0},Hi.ch32=Xy,Hi.maj32=Gy,Hi.p32=$y,Hi.s0_256=function(t){return Li(t,2)^Li(t,13)^Li(t,22)},Hi.s1_256=function(t){return Li(t,6)^Li(t,11)^Li(t,25)},Hi.g0_256=function(t){return Li(t,7)^Li(t,18)^t>>>3},Hi.g1_256=function(t){return Li(t,17)^Li(t,19)^t>>>10};var hu=it,w5=mu,_5=Hi,Zh=hu.rotl32,ju=hu.sum32,S5=hu.sum32_5,E5=_5.ft_1,uv=w5.BlockHash,I5=[1518500249,1859775393,2400959708,3395469782];function Ji(){if(!(this instanceof Ji))return new Ji;uv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}hu.inherits(Ji,uv);var A5=Ji;Ji.blockSize=512,Ji.outSize=160,Ji.hmacStrength=80,Ji.padLength=64,Ji.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=Zh(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var f=~~(n/20),h=S5(Zh(i,5),E5(f,o,a,s),c,r[n],I5[f]);c=s,s=a,a=Zh(o,30),o=i,i=h}this.h[0]=ju(this.h[0],i),this.h[1]=ju(this.h[1],o),this.h[2]=ju(this.h[2],a),this.h[3]=ju(this.h[3],s),this.h[4]=ju(this.h[4],c)},Ji.prototype._digest=function(t){return t==="hex"?hu.toHex32(this.h,"big"):hu.split32(this.h,"big")};var du=it,k5=mu,bu=Hi,D5=ni,si=du.sum32,x5=du.sum32_4,T5=du.sum32_5,O5=bu.ch32,P5=bu.maj32,R5=bu.s0_256,C5=bu.s1_256,M5=bu.g0_256,N5=bu.g1_256,cv=k5.BlockHash,j5=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Yi(){if(!(this instanceof Yi))return new Yi;cv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=j5,this.W=new Array(64)}du.inherits(Yi,cv);var lv=Yi;Yi.blockSize=512,Yi.outSize=256,Yi.hmacStrength=192,Yi.padLength=64,Yi.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=x5(N5(r[n-2]),r[n-7],M5(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],c=this.h[4],f=this.h[5],h=this.h[6],y=this.h[7];for(D5(this.k.length===r.length),n=0;n<r.length;n++){var g=T5(y,C5(c),O5(c,f,h),this.k[n],r[n]),_=si(R5(i),P5(i,o,a));y=h,h=f,f=c,c=si(s,g),s=a,a=o,o=i,i=si(g,_)}this.h[0]=si(this.h[0],i),this.h[1]=si(this.h[1],o),this.h[2]=si(this.h[2],a),this.h[3]=si(this.h[3],s),this.h[4]=si(this.h[4],c),this.h[5]=si(this.h[5],f),this.h[6]=si(this.h[6],h),this.h[7]=si(this.h[7],y)},Yi.prototype._digest=function(t){return t==="hex"?du.toHex32(this.h,"big"):du.split32(this.h,"big")};var Xd=it,fv=lv;function So(){if(!(this instanceof So))return new So;fv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Xd.inherits(So,fv);var B5=So;So.blockSize=512,So.outSize=224,So.hmacStrength=192,So.padLength=64,So.prototype._digest=function(t){return t==="hex"?Xd.toHex32(this.h.slice(0,7),"big"):Xd.split32(this.h.slice(0,7),"big")};var fn=it,L5=mu,F5=ni,ro=fn.rotr64_hi,no=fn.rotr64_lo,hv=fn.shr64_hi,dv=fn.shr64_lo,Lo=fn.sum64,Xh=fn.sum64_hi,Gh=fn.sum64_lo,U5=fn.sum64_4_hi,z5=fn.sum64_4_lo,K5=fn.sum64_5_hi,q5=fn.sum64_5_lo,pv=L5.BlockHash,H5=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function wi(){if(!(this instanceof wi))return new wi;pv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=H5,this.W=new Array(160)}fn.inherits(wi,pv);var yv=wi;function V5(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function W5(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function J5(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function Y5(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function Z5(t,e){var r=ro(t,e,28)^ro(e,t,2)^ro(e,t,7);return r<0&&(r+=4294967296),r}function X5(t,e){var r=no(t,e,28)^no(e,t,2)^no(e,t,7);return r<0&&(r+=4294967296),r}function G5(t,e){var r=ro(t,e,14)^ro(t,e,18)^ro(e,t,9);return r<0&&(r+=4294967296),r}function $5(t,e){var r=no(t,e,14)^no(t,e,18)^no(e,t,9);return r<0&&(r+=4294967296),r}function Q5(t,e){var r=ro(t,e,1)^ro(t,e,8)^hv(t,e,7);return r<0&&(r+=4294967296),r}function e4(t,e){var r=no(t,e,1)^no(t,e,8)^dv(t,e,7);return r<0&&(r+=4294967296),r}function t4(t,e){var r=ro(t,e,19)^ro(e,t,29)^hv(t,e,6);return r<0&&(r+=4294967296),r}function r4(t,e){var r=no(t,e,19)^no(e,t,29)^dv(t,e,6);return r<0&&(r+=4294967296),r}wi.blockSize=1024,wi.outSize=512,wi.hmacStrength=192,wi.padLength=128,wi.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=t4(r[n-4],r[n-3]),o=r4(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],c=Q5(r[n-30],r[n-29]),f=e4(r[n-30],r[n-29]),h=r[n-32],y=r[n-31];r[n]=U5(i,o,a,s,c,f,h,y),r[n+1]=z5(i,o,a,s,c,f,h,y)}},wi.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],s=this.h[4],c=this.h[5],f=this.h[6],h=this.h[7],y=this.h[8],g=this.h[9],_=this.h[10],E=this.h[11],O=this.h[12],R=this.h[13],L=this.h[14],q=this.h[15];F5(this.k.length===r.length);for(var X=0;X<r.length;X+=2){var ne=L,W=q,H=G5(y,g),Y=$5(y,g),T=V5(y,g,_,E,O),te=W5(y,g,_,E,O,R),v=this.k[X],D=this.k[X+1],w=r[X],k=r[X+1],A=K5(ne,W,H,Y,T,te,v,D,w,k),b=q5(ne,W,H,Y,T,te,v,D,w,k);ne=Z5(n,i),W=X5(n,i),H=J5(n,i,o,a,s),Y=Y5(n,i,o,a,s,c);var P=Xh(ne,W,H,Y),V=Gh(ne,W,H,Y);L=O,q=R,O=_,R=E,_=y,E=g,y=Xh(f,h,A,b),g=Gh(h,h,A,b),f=s,h=c,s=o,c=a,o=n,a=i,n=Xh(A,b,P,V),i=Gh(A,b,P,V)}Lo(this.h,0,n,i),Lo(this.h,2,o,a),Lo(this.h,4,s,c),Lo(this.h,6,f,h),Lo(this.h,8,y,g),Lo(this.h,10,_,E),Lo(this.h,12,O,R),Lo(this.h,14,L,q)},wi.prototype._digest=function(t){return t==="hex"?fn.toHex32(this.h,"big"):fn.split32(this.h,"big")};var Gd=it,gv=yv;function Eo(){if(!(this instanceof Eo))return new Eo;gv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Gd.inherits(Eo,gv);var n4=Eo;Eo.blockSize=1024,Eo.outSize=384,Eo.hmacStrength=192,Eo.padLength=128,Eo.prototype._digest=function(t){return t==="hex"?Gd.toHex32(this.h.slice(0,12),"big"):Gd.split32(this.h.slice(0,12),"big")},Ds.sha1=A5,Ds.sha224=B5,Ds.sha256=lv,Ds.sha384=n4,Ds.sha512=yv;var mv={},$a=it,i4=mu,gl=$a.rotl32,Qy=$a.sum32,Bu=$a.sum32_3,eg=$a.sum32_4,bv=i4.BlockHash;function Vi(){if(!(this instanceof Vi))return new Vi;bv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function tg(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function o4(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function a4(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}$a.inherits(Vi,bv),mv.ripemd160=Vi,Vi.blockSize=512,Vi.outSize=160,Vi.hmacStrength=192,Vi.padLength=64,Vi.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],s=r,c=n,f=i,h=o,y=a,g=0;g<80;g++){var _=Qy(gl(eg(r,tg(g,n,i,o),t[s4[g]+e],o4(g)),c4[g]),a);r=a,a=o,o=gl(i,10),i=n,n=_,_=Qy(gl(eg(s,tg(79-g,c,f,h),t[u4[g]+e],a4(g)),l4[g]),y),s=y,y=h,h=gl(f,10),f=c,c=_}_=Bu(this.h[1],i,h),this.h[1]=Bu(this.h[2],o,y),this.h[2]=Bu(this.h[3],a,s),this.h[3]=Bu(this.h[4],r,c),this.h[4]=Bu(this.h[0],n,f),this.h[0]=_},Vi.prototype._digest=function(t){return t==="hex"?$a.toHex32(this.h,"little"):$a.split32(this.h,"little")};var s4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u4=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c4=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l4=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f4=it,h4=ni;function Gs(t,e,r){if(!(this instanceof Gs))return new Gs(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(f4.toArray(e,r))}var d4=Gs;Gs.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),h4(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},Gs.prototype.update=function(t,e){return this.inner.update(t,e),this},Gs.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=Wc;e.utils=it,e.common=mu,e.sha=Ds,e.ripemd=mv,e.hmac=d4,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}();var p4={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};(function(t){var e,r=oh,n=Wc,i=Gp,o=Tn.assert;function a(c){c.type==="short"?this.curve=new i.short(c):c.type==="edwards"?this.curve=new i.edwards(c):this.curve=new i.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(c,f){Object.defineProperty(r,c,{configurable:!0,enumerable:!0,get:function(){var h=new a(f);return Object.defineProperty(r,c,{configurable:!0,enumerable:!0,value:h}),h}})}r.PresetCurve=a,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=p4}catch{e=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]})})();var y4=Wc,qa=Yd,vv=ni;function $o(t){if(!(this instanceof $o))return new $o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=qa.toArray(t.entropy,t.entropyEnc||"hex"),r=qa.toArray(t.nonce,t.nonceEnc||"hex"),n=qa.toArray(t.pers,t.persEnc||"hex");vv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var g4=$o;$o.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},$o.prototype._hmac=function(){return new y4.hmac(this.hash,this.K)},$o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},$o.prototype.reseed=function(t,e,r,n){typeof e!="string"&&(n=r,r=e,e=null),t=qa.toArray(t,e),r=qa.toArray(r,n),vv(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},$o.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(n=r,r=e,e=null),r&&(r=qa.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,qa.encode(o,e)};var m4=Qt.exports,$h=Tn.assert;function Br(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var b4=Br;Br.fromPublic=function(t,e,r){return e instanceof Br?e:new Br(t,{pub:e,pubEnc:r})},Br.fromPrivate=function(t,e,r){return e instanceof Br?e:new Br(t,{priv:e,privEnc:r})},Br.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Br.prototype.getPublic=function(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Br.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv},Br.prototype._importPrivate=function(t,e){this.priv=new m4(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Br.prototype._importPublic=function(t,e){if(t.x||t.y)return this.ec.curve.type==="mont"?$h(t.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||$h(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Br.prototype.derive=function(t){return t.validate()||$h(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Br.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Br.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Br.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Cf=Qt.exports,$d=Tn,v4=$d.assert;function Mf(t,e){if(t instanceof Mf)return t;this._importDER(t,e)||(v4(t.r&&t.s,"Signature without r or s"),this.r=new Cf(t.r,16),this.s=new Cf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var w4=Mf;function _4(){this.place=0}function Qh(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return!(i<=127)&&(e.place=a,i)}function rg(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return e===0?t:t.slice(e)}function ed(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}Mf.prototype._importDER=function(t,e){t=$d.toArray(t,e);var r=new _4;if(t[r.place++]!==48)return!1;var n=Qh(t,r);if(n===!1||n+r.place!==t.length||t[r.place++]!==2)return!1;var i=Qh(t,r);if(i===!1)return!1;var o=t.slice(r.place,i+r.place);if(r.place+=i,t[r.place++]!==2)return!1;var a=Qh(t,r);if(a===!1||t.length!==a+r.place)return!1;var s=t.slice(r.place,a+r.place);if(o[0]===0){if(!(128&o[1]))return!1;o=o.slice(1)}if(s[0]===0){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new Cf(o),this.s=new Cf(s),this.recoveryParam=null,!0},Mf.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=rg(e),r=rg(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];ed(n,e.length),(n=n.concat(e)).push(2),ed(n,r.length);var i=n.concat(r),o=[48];return ed(o,i.length),o=o.concat(i),$d.encode(o,t)};var Aa=Qt.exports,ng=g4,S4=Tn,td=oh,E4=Rc.exports,wv=S4.assert,rd=b4,ml=w4;function Hn(t){if(!(this instanceof Hn))return new Hn(t);typeof t=="string"&&(wv(Object.prototype.hasOwnProperty.call(td,t),"Unknown curve "+t),t=td[t]),t instanceof td.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var I4=Hn;Hn.prototype.keyPair=function(t){return new rd(this,t)},Hn.prototype.keyFromPrivate=function(t,e){return rd.fromPrivate(this,t,e)},Hn.prototype.keyFromPublic=function(t,e){return rd.fromPublic(this,t,e)},Hn.prototype.genKeyPair=function(t){t||(t={});for(var e=new ng({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||E4(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Aa(2));;){var i=new Aa(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Hn.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Hn.prototype.sign=function(t,e,r,n){typeof r=="object"&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new Aa(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),a=t.toArray("be",i),s=new ng({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new Aa(1)),f=0;;f++){var h=n.k?n.k(f):new Aa(s.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var y=this.g.mul(h);if(!y.isInfinity()){var g=y.getX(),_=g.umod(this.n);if(_.cmpn(0)!==0){var E=h.invm(this.n).mul(_.mul(e.getPrivate()).iadd(t));if((E=E.umod(this.n)).cmpn(0)!==0){var O=(y.getY().isOdd()?1:0)|(g.cmp(_)!==0?2:0);return n.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),O^=1),new ml({r:_,s:E,recoveryParam:O})}}}}}},Hn.prototype.verify=function(t,e,r,n){t=this._truncateToN(new Aa(t,16)),r=this.keyFromPublic(r,n);var i=(e=new ml(e,"hex")).r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,s=o.invm(this.n),c=s.mul(t).umod(this.n),f=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),f)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(c,r.getPublic(),f)).isInfinity()&&a.getX().umod(this.n).cmp(i)===0},Hn.prototype.recoverPubKey=function(t,e,r,n){wv((3&r)===r,"The recovery param is more than two bits"),e=new ml(e,n);var i=this.n,o=new Aa(t),a=e.r,s=e.s,c=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var h=e.r.invm(i),y=i.sub(o).mul(h).umod(i),g=s.mul(h).umod(i);return this.g.mulAdd(y,a,g)},Hn.prototype.getKeyRecoveryParam=function(t,e,r,n){if((e=new ml(e,n)).recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Mc=Tn,ig=Mc.assert,og=Mc.parseBytes,ms=Mc.cachedProperty;function br(t,e){this.eddsa=t,this._secret=og(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=og(e.pub)}br.fromPublic=function(t,e){return e instanceof br?e:new br(t,{pub:e})},br.fromSecret=function(t,e){return e instanceof br?e:new br(t,{secret:e})},br.prototype.secret=function(){return this._secret},ms(br,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),ms(br,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),ms(br,"privBytes",function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),ms(br,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),ms(br,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),ms(br,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),br.prototype.sign=function(t){return ig(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},br.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},br.prototype.getSecret=function(t){return ig(this._secret,"KeyPair is public only"),Mc.encode(this.secret(),t)},br.prototype.getPublic=function(t){return Mc.encode(this.pubBytes(),t)};var A4=br,k4=Qt.exports,ah=Tn,D4=ah.assert,bl=ah.cachedProperty,x4=ah.parseBytes;function Oa(t,e){this.eddsa=t,typeof e!="object"&&(e=x4(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),D4(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof k4&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}bl(Oa,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),bl(Oa,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),bl(Oa,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),bl(Oa,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Oa.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Oa.prototype.toHex=function(){return ah.encode(this.toBytes(),"hex").toUpperCase()};var T4=Oa,O4=Wc,P4=oh,Ls=Tn,R4=Ls.assert,ag=Ls.parseBytes,sg=A4,ug=T4;function sn(t){if(R4(t==="ed25519","only tested with ed25519 so far"),!(this instanceof sn))return new sn(t);t=P4[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=O4.sha512}var C4=sn;sn.prototype.sign=function(t,e){t=ag(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),s=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:s,Rencoded:o})},sn.prototype.verify=function(t,e,r){t=ag(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},sn.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return Ls.intFromLE(t.digest()).umod(this.curve.n)},sn.prototype.keyFromPublic=function(t){return sg.fromPublic(this,t)},sn.prototype.keyFromSecret=function(t){return sg.fromSecret(this,t)},sn.prototype.makeSignature=function(t){return t instanceof ug?t:new ug(this,t)},sn.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},sn.prototype.decodePoint=function(t){var e=(t=Ls.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=(128&t[e])!=0,i=Ls.intFromLE(r);return this.curve.pointFromY(i,n)},sn.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},sn.prototype.decodeInt=function(t){return Ls.intFromLE(t)},sn.prototype.isPoint=function(t){return t instanceof this.pointClass},function(t){var e=oa;e.version=a5,e.utils=Tn,e.rand=Rc.exports,e.curve=Gp,e.curves=oh,e.ec=I4,e.eddsa=C4}();var Jc={},Nf={};(function(t){var e=ae&&ae.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.PBES2ESParams=t.PBKDF2Params=t.PBES2Params=t.PBEParameter=t.EncryptedPrivateKeyInfo=t.OneAsymmetricKey=t.SubjectPublicKeyInfo=t.KeyStructure=void 0;var r=e(as);t.KeyStructure=r.default.define("KeyStructure",function(){this.choice({subjectPublicKeyInfo:this.use(t.SubjectPublicKeyInfo),oneAsymmetricKey:this.use(t.OneAsymmetricKey),encryptedPrivateKeyInfo:this.use(t.EncryptedPrivateKeyInfo)})}),t.SubjectPublicKeyInfo=r.default.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),t.OneAsymmetricKey=r.default.define("OneAsymmetricKey",function(){this.seq().obj(this.key("version").use(i),this.key("privateKeyAlgorithm").use(n),this.key("privateKey").octstr(),this.key("attributes").implicit(0).optional().any(),this.key("publicKey").implicit(1).optional().bitstr())}),t.EncryptedPrivateKeyInfo=r.default.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("encryptionAlgorithm").use(n),this.key("encryptedData").octstr())}),t.PBEParameter=r.default.define("PBEParameter",function(){this.seq().obj(this.key("salt").octstr(8),this.key("iterationCount").int())}),t.PBES2Params=r.default.define("PBES2Params",function(){this.seq().obj(this.key("keyDerivationFunc").use(n),this.key("encryptionScheme").use(n))}),t.PBKDF2Params=r.default.define("PBKDF2Params",function(){this.seq().obj(this.key("salt").choice({specified:this.octstr(),otherSource:this.use(n)}),this.key("iterationCount").int(),this.key("keyLength").int().optional(),this.key("prf").use(n).def({algorithm:[1,2,840,113549,2,7],parameters:ye.from([5,0])}))}),t.PBES2ESParams={"des-ede3-cbc":r.default.define("DesEde3CbcParams",function(){this.octstr()}),"aes128-cbc":r.default.define("Aes128CbcParams",function(){this.octstr()}),"aes192-cbc":r.default.define("Aes192CbcParams",function(){this.octstr()}),"aes256-cbc":r.default.define("Aes256CbcParams",function(){this.octstr()})};var n=r.default.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),i=r.default.define("Version",function(){this.int()})})(Nf),function(t){var e=ae&&ae.__createBinding||(Object.create?function(c,f,h,y){y===void 0&&(y=h),Object.defineProperty(c,y,{enumerable:!0,get:function(){return f[h]}})}:function(c,f,h,y){y===void 0&&(y=h),c[y]=f[h]}),r=ae&&ae.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),n=ae&&ae.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&e(f,c,h);return r(f,c),f},i=ae&&ae.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.appendLeadingZeros=t.pruneLeadingZeros=t.getJwkType=t.getSec1KeyType=t.getAsn1KeyType=t.isAsn1Public=t.isAsn1Encrypted=void 0;var o=i(Po),a=n(Kt),s=Nf;t.isAsn1Encrypted=function(c,f){var h;f===void 0&&(f="pem");try{h=(0,t.getAsn1KeyType)(c,f)}catch{return!1}return h==="encryptedPrivate"},t.isAsn1Public=function(c,f){var h;f===void 0&&(f="pem");try{h=(0,t.getAsn1KeyType)(c,f)}catch{return!1}return h==="public"},t.getAsn1KeyType=function(c,f){f===void 0&&(f="pem");var h=f==="pem"?o.default.formatter.pemToBin(c):c,y=s.KeyStructure.decode(ye.from(h),"der");if(y.type==="encryptedPrivateKeyInfo")return"encryptedPrivate";if(y.type==="oneAsymmetricKey")return"private";if(y.type==="subjectPublicKeyInfo")return"public";throw new Error("NotSpkiNorPkcs8Key")},t.getSec1KeyType=function(c,f){var h=a.namedCurves[f].payloadSize,y=c instanceof Uint8Array?c:o.default.encoder.hexStringToArrayBuffer(c);if(y.length<=h)return"private";if(y.length===2*h+1&&y[0]===4||y.length===h+1&&(y[0]===2||y[0]===3))return"public";throw new Error("UnsupportedKeyStructure")},t.getJwkType=function(c){if(c.kty==="EC"){if(c.x&&c.y&&c.d)return"private";if(c.x&&c.y)return"public";throw new Error("InvalidECKey")}if(c.kty==="RSA"){if(c.n&&c.e&&c.d&&c.p&&c.q&&c.dp&&c.dq&&c.qi)return"private";if(c.n&&c.e)return"public";throw new Error("InvalidRSAKey")}throw new Error("UnsupportedJWKType")},t.pruneLeadingZeros=function(c){for(var f=0,h=0;h<c.length&&c[h]===0;h++)f++;var y=new Uint8Array(c.length-f);return y.set(c.slice(f,c.length)),y},t.appendLeadingZeros=function(c,f){if(c.length>f)throw new Error("InvalidLength");var h=new Uint8Array(f);return h.set(c,f-c.length),h}}(Jc);var M4=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),N4=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_v=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&M4(e,t,r);return N4(e,t),e},j4=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.toJwk=Ga.fromJwk=void 0;var nd=_v(Kt),Io=j4(Po),B4=_v(oa),Sv=Jc,L4=B4.ec;Ga.fromJwk=function(t,e){var r=e.outputPublic,n=e.outputFormat,i=n===void 0?"binary":n,o=e.compact,a=o!==void 0&&o,s=(0,Sv.getJwkType)(t);if((typeof r=="boolean"&&r?"public":s)==="public"){var c=Io.default.encoder.decodeBase64Url(t.x),f=Io.default.encoder.decodeBase64Url(t.y),h=void 0;return a?((h=new Uint8Array(c.length+1))[0]=255&2+(1&f.slice(-1)[0]),h.set(c,1)):((h=new Uint8Array(c.length+f.length+1))[0]=4,h.set(c,1),h.set(f,c.length+1)),i==="string"?Io.default.encoder.arrayBufferToHexString(h):h}if(!t.d)throw new Error("InvalidKey");var y=Io.default.encoder.decodeBase64Url(t.d);return i==="string"?Io.default.encoder.arrayBufferToHexString(y):y};Ga.toJwk=function(t,e,r){var n=r.outputPublic;if(Object.keys(nd.namedCurves).indexOf(e)<0)throw new Error("UnsupportedCurve");var i=(0,Sv.getSec1KeyType)(t,e),o=typeof n=="boolean"&&n?"public":i,a=typeof t=="string"?Io.default.encoder.hexStringToArrayBuffer(t):t,s=nd.namedCurves[e].indutnyName,c=new L4(s),f=i==="public"?c.keyFromPublic(a):c.keyFromPrivate(a),h=new Uint8Array(f.getPublic("array")),y=nd.namedCurves[e].payloadSize,g=h.slice(1,y+1),_=h.slice(y+1,2*y+1),E={kty:"EC",crv:e,x:Io.default.encoder.encodeBase64Url(g),y:Io.default.encoder.encodeBase64Url(_)};return o==="private"&&(E.d=Io.default.encoder.encodeBase64Url(a)),E};var F4=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),U4=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),z4=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&F4(e,t,r);return U4(e,t),e},K4=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0}),Js.toJWK=Js.fromJWK=void 0;var $p=K4(as),Fs=z4(Kt),jf=Ga;Js.fromJWK=function(t,e,r){r===void 0&&(r=!1);var n=(0,jf.fromJwk)(t,{outputFormat:"binary",outputPublic:!0,compact:r}),i=Fs.publicKeyAlgorithms.EC.oid,o={unused:0,data:Array.from(n)},a=Qd.encode({type:"namedCurve",value:Fs.namedCurves[t.crv].oid},"der"),s={algorithm:i,parameters:a},c={};if(e==="public")c.subjectPublicKey=o,c.algorithm=s;else if(e==="private"){var f=(0,jf.fromJwk)(t,{outputFormat:"binary",outputPublic:!1,compact:r});c.version=0,c.privateKeyAlgorithm=s,c.privateKey=Ev.encode({version:1,privateKey:Array.from(f),parameters:a,publicKey:o},"der")}return c};Js.toJWK=function(t,e){if(e==="public"){t.algorithm.parameters=Qd.decode(t.algorithm.parameters,"der");var r=new Uint8Array(t.subjectPublicKey.data),n=Fs.getAlgorithmFromOid(t.algorithm.parameters.value,Fs.namedCurves);return(0,jf.toJwk)(r,n[0],{outputPublic:!0})}t.privateKeyAlgorithm.parameters=Qd.decode(t.privateKeyAlgorithm.parameters,"der");try{t.privateKey=Ev.decode(t.privateKey,"der")}catch{t.privateKey=q4.decode(t.privateKey,"der")}var i=new Uint8Array(t.privateKey.privateKey);if((n=Fs.getAlgorithmFromOid(t.privateKeyAlgorithm.parameters.value,Fs.namedCurves)).length<1)throw new Error("UnsupportedCurve");return(0,jf.toJwk)(i,n[0],{outputPublic:!1})};var Qd=$p.default.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),Ev=$p.default.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}),q4=$p.default.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").explicit(1).optional().bitstr())}),$s={},H4=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V4=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Iv=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&H4(e,t,r);return V4(e,t),e},Av=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($s,"__esModule",{value:!0}),$s.toJwk=$s.fromJwk=void 0;var Vn=Av(as),wr=Av(Po),W4=Iv(Se).Buffer,J4=Iv(Kt),Ar=Jc;$s.fromJwk=function(t,e){var r={algorithm:J4.publicKeyAlgorithms.RSA.oid,parameters:W4.from([5,0])},n=wr.default.encoder.decodeBase64Url(t.n),i=n.length,o=i%128==0?i:i+(128-i%128),a=new Vn.default.bignum((0,Ar.appendLeadingZeros)(n,o)),s=new Vn.default.bignum(wr.default.encoder.decodeBase64Url(t.e)),c={};return e==="public"?(c.subjectPublicKey={unused:0,data:kv.encode({modulus:a,publicExponent:s},"der")},c.algorithm=r):e==="private"&&(c.version=0,c.privateKeyAlgorithm=r,c.privateKey=Dv.encode({version:0,modulus:a,publicExponent:s,privateExponent:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.d),o)),prime1:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.p),o)),prime2:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.q),o)),exponent1:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.dp),o)),exponent2:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.dq),o)),coefficient:new Vn.default.bignum((0,Ar.appendLeadingZeros)(wr.default.encoder.decodeBase64Url(t.qi),o))},"der")),c};$s.toJwk=function(t,e){if(e==="public"){t.subjectPublicKey.data=kv.decode(t.subjectPublicKey.data,"der");var r=t.subjectPublicKey.data.modulus,n=t.subjectPublicKey.data.publicExponent,i=(a=r.byteLength())%128==0?a:a+(128-a%128);return r=new Uint8Array(r.toArray("be",i)),n=new Uint8Array(n.toArray("be",n.byteLength())),{kty:"RSA",n:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(r)),e:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(n))}}t.privateKey=Dv.decode(t.privateKey,"der");var o={};o.modulus=t.privateKey.modulus;var a,s=(a=o.modulus.byteLength())%128==0?a:a+(128-a%128);return o.modulus=new Uint8Array(o.modulus.toArray("be",s)),o.publicExponent=new Uint8Array(t.privateKey.publicExponent.toArray("be",t.privateKey.publicExponent.byteLength())),o.privateExponent=new Uint8Array(t.privateKey.privateExponent.toArray("be",s)),["prime1","prime2","exponent1","exponent2","coefficient"].forEach(function(c){o[c]=new Uint8Array(t.privateKey[c].toArray("be",s>>1))}),{kty:"RSA",n:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.modulus)),e:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.publicExponent)),d:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.privateExponent)),p:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.prime1)),q:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.prime2)),dp:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.exponent1)),dq:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.exponent2)),qi:wr.default.encoder.encodeBase64Url((0,Ar.pruneLeadingZeros)(o.coefficient))}};var kv=Vn.default.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),Dv=Vn.default.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int(),this.key("otherPrimeInfos").optional().use(Y4))}),Y4=Vn.default.define("OtherPrimeInfos",function(){this.seqof(Z4)}),Z4=Vn.default.define("OtherPrimeInfo",function(){this.seq().obj(this.key("prime").int(),this.key("exponent").int(),this.key("coefficient").int())}),Qs={},Ba={},es={readUInt32BE:function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},writeUInt32BE:function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},ip:function(t,e,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},rip:function(t,e,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},pc1:function(t,e,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},r28shl:function(t,e){return t<<e&268435455|t>>>28-e}},vl=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];es.pc2=function(t,e,r,n){for(var i=0,o=0,a=vl.length>>>1,s=0;s<a;s++)i<<=1,i|=t>>>vl[s]&1;for(s=a;s<vl.length;s++)o<<=1,o|=e>>>vl[s]&1;r[n+0]=i>>>0,r[n+1]=o>>>0},es.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var cg=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];es.substitute=function(t,e){for(var r=0,n=0;n<4;n++)r<<=4,r|=cg[64*n+(t>>>18-6*n&63)];for(n=0;n<4;n++)r<<=4,r|=cg[256+64*n+(e>>>18-6*n&63)];return r>>>0};var lg=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];es.permute=function(t){for(var e=0,r=0;r<lg.length;r++)e<<=1,e|=t>>>lg[r]&1;return e>>>0},es.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")};var X4=ni;function Un(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var Qp=Un;Un.prototype._init=function(){},Un.prototype.update=function(t){return t.length===0?[]:this.type==="decrypt"?this._updateDecrypt(t):this._updateEncrypt(t)},Un.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},Un.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},Un.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);this.bufferOff!==0&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},Un.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},Un.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},Un.prototype._pad=function(t,e){if(e===0)return!1;for(;e<t.length;)t[e++]=0;return!0},Un.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},Un.prototype._unpad=function(t){return t},Un.prototype._finalDecrypt=function(){X4.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)};var fg=ni,G4=ot.exports,fr=es,xv=Qp;function $4(){this.tmp=new Array(2),this.keys=null}function Zi(t){xv.call(this,t);var e=new $4;this._desState=e,this.deriveKeys(e,t.key)}G4(Zi,xv);var Tv=Zi;Zi.create=function(t){return new Zi(t)};var Q4=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Zi.prototype.deriveKeys=function(t,e){t.keys=new Array(32),fg.equal(e.length,this.blockSize,"Invalid key length");var r=fr.readUInt32BE(e,0),n=fr.readUInt32BE(e,4);fr.pc1(r,n,t.tmp,0),r=t.tmp[0],n=t.tmp[1];for(var i=0;i<t.keys.length;i+=2){var o=Q4[i>>>1];r=fr.r28shl(r,o),n=fr.r28shl(n,o),fr.pc2(r,n,t.keys,i)}},Zi.prototype._update=function(t,e,r,n){var i=this._desState,o=fr.readUInt32BE(t,e),a=fr.readUInt32BE(t,e+4);fr.ip(o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],this.type==="encrypt"?this._encrypt(i,o,a,i.tmp,0):this._decrypt(i,o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],fr.writeUInt32BE(r,o,n),fr.writeUInt32BE(r,a,n+4)},Zi.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},Zi.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)fg.equal(t[r],e);return t.slice(0,t.length-e)},Zi.prototype._encrypt=function(t,e,r,n,i){for(var o=e,a=r,s=0;s<t.keys.length;s+=2){var c=t.keys[s],f=t.keys[s+1];fr.expand(a,t.tmp,0),c^=t.tmp[0],f^=t.tmp[1];var h=fr.substitute(c,f),y=a;a=(o^fr.permute(h))>>>0,o=y}fr.rip(a,o,n,i)},Zi.prototype._decrypt=function(t,e,r,n,i){for(var o=r,a=e,s=t.keys.length-2;s>=0;s-=2){var c=t.keys[s],f=t.keys[s+1];fr.expand(o,t.tmp,0),c^=t.tmp[0],f^=t.tmp[1];var h=fr.substitute(c,f),y=o;o=(a^fr.permute(h))>>>0,a=y}fr.rip(o,a,n,i)};var Ov={},e8=ni,t8=ot.exports,wl={};function r8(t){e8.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}Ov.instantiate=function(t){function e(o){t.call(this,o),this._cbcInit()}t8(e,t);for(var r=Object.keys(wl),n=0;n<r.length;n++){var i=r[n];e.prototype[i]=wl[i]}return e.create=function(o){return new e(o)},e},wl._cbcInit=function(){var t=new r8(this.options.iv);this._cbcState=t},wl._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if(this.type==="encrypt"){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];for(o._update.call(this,a,0,r,n),s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{for(o._update.call(this,t,e,r,n),s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}};var n8=ni,i8=ot.exports,Pv=Qp,Wo=Tv;function o8(t,e){n8.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),i=e.slice(16,24);this.ciphers=t==="encrypt"?[Wo.create({type:"encrypt",key:r}),Wo.create({type:"decrypt",key:n}),Wo.create({type:"encrypt",key:i})]:[Wo.create({type:"decrypt",key:i}),Wo.create({type:"encrypt",key:n}),Wo.create({type:"decrypt",key:r})]}function La(t){Pv.call(this,t);var e=new o8(this.type,this.options.key);this._edeState=e}i8(La,Pv);var a8=La;La.create=function(t){return new La(t)},La.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},La.prototype._pad=Wo.prototype._pad,La.prototype._unpad=Wo.prototype._unpad,Ba.utils=es,Ba.Cipher=Qp,Ba.DES=Tv,Ba.CBC=Ov,Ba.EDE=a8;var Rv={},eu={},sh={},Bf={},cn={},Ge={},aa={exports:{}},Ye={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Se,n=r.Buffer;function i(a,s){for(var c in a)s[c]=a[c]}function o(a,s,c){return n(a,s,c)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,c)},o.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=n(a);return s!==void 0?typeof c=="string"?f.fill(s,c):f.fill(s):f.fill(0),f},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Ye,Ye.exports);var s8=Ye.exports.Buffer,_l=ae.crypto||ae.msCrypto;_l&&_l.getRandomValues?aa.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=s8.allocUnsafe(t);if(t>0)if(t>65536)for(var n=0;n<t;n+=65536)_l.getRandomValues(r.slice(n,n+65536));else _l.getRandomValues(r);return typeof e=="function"?xr(function(){e(null,r)}):r}:aa.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)};var Cv,Nc={exports:{}},tu=typeof Reflect=="object"?Reflect:null,hg=tu&&typeof tu.apply=="function"?tu.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};Cv=tu&&typeof tu.ownKeys=="function"?tu.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var dg=Number.isNaN||function(t){return t!=t};function xt(){xt.init.call(this)}Nc.exports=xt,Nc.exports.once=function(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}vg(t,e,o,{once:!0}),e!=="error"&&function(a,s,c){typeof a.on=="function"&&vg(a,"error",s,c)}(t,i,{once:!0})})},xt.EventEmitter=xt,xt.prototype._events=void 0,xt.prototype._eventsCount=0,xt.prototype._maxListeners=void 0;var pg=10;function $l(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Mv(t){return t._maxListeners===void 0?xt.defaultMaxListeners:t._maxListeners}function yg(t,e,r,n){var i,o,a,s;if($l(r),(o=t._events)===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=Mv(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function u8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gg(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=u8.bind(n);return i.listener=r,n.wrapFn=i,i}function mg(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?function(o){for(var a=new Array(o.length),s=0;s<a.length;++s)a[s]=o[s].listener||o[s];return a}(i):Nv(i,i.length)}function bg(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}function Nv(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function vg(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)})}}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return pg},set:function(t){if(typeof t!="number"||t<0||dg(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");pg=t}}),xt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},xt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||dg(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},xt.prototype.getMaxListeners=function(){return Mv(this)},xt.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[t];if(s===void 0)return!1;if(typeof s=="function")hg(s,this,e);else{var c=s.length,f=Nv(s,c);for(r=0;r<c;++r)hg(f[r],this,e)}return!0},xt.prototype.addListener=function(t,e){return yg(this,t,e,!1)},xt.prototype.on=xt.prototype.addListener,xt.prototype.prependListener=function(t,e){return yg(this,t,e,!0)},xt.prototype.once=function(t,e){return $l(e),this.on(t,gg(this,t,e)),this},xt.prototype.prependOnceListener=function(t,e){return $l(e),this.prependListener(t,gg(this,t,e)),this},xt.prototype.removeListener=function(t,e){var r,n,i,o,a;if($l(e),(n=this._events)===void 0)return this;if((r=n[t])===void 0)return this;if(r===e||r.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():function(s,c){for(;c+1<s.length;c++)s[c]=s[c+1];s.pop()}(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},xt.prototype.off=xt.prototype.removeListener,xt.prototype.removeAllListeners=function(t){var e,r,n;if((r=this._events)===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i,o=Object.keys(r);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=r[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},xt.prototype.listeners=function(t){return mg(this,t,!0)},xt.prototype.rawListeners=function(t){return mg(this,t,!1)},xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):bg.call(t,e)},xt.prototype.listenerCount=bg,xt.prototype.eventNames=function(){return this._eventsCount>0?Cv(this._events):[]};var pu=Nc.exports,ru=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t};function Pa(){this.head=null,this.tail=null,this.length=0}Pa.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},Pa.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length},Pa.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},Pa.prototype.clear=function(){this.head=this.tail=null,this.length=0},Pa.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},Pa.prototype.concat=function(t){if(this.length===0)return Se.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=Se.Buffer.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var ep=Ye.exports.Buffer,wg=ep.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},jv=ec;function ec(t){var e;switch(this.encoding=function(r){var n=function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}}(r);if(typeof n!="string"&&(ep.isEncoding===wg||!wg(r)))throw new Error("Unknown encoding: "+r);return n||r}(t),this.encoding){case"utf16le":this.text=l8,this.end=f8,e=4;break;case"utf8":this.fillLast=c8,e=4;break;case"base64":this.text=h8,this.end=d8,e=3;break;default:return this.write=p8,void(this.end=y8)}this.lastNeed=0,this.lastTotal=0,this.lastChar=ep.allocUnsafe(e)}function id(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function c8(t){var e=this.lastTotal-this.lastNeed,r=function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}}(this,t);return r!==void 0?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l8(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f8(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function h8(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function d8(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p8(t){return t.toString(this.encoding)}function y8(t){return t&&t.length?this.write(t):""}function Bv(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Dn&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Pa,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new jv(t.encoding),this.encoding=t.encoding)}function Gt(t){if(!(this instanceof Gt))return new Gt(t);this._readableState=new Bv(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),pu.call(this)}function _g(t,e,r,n,i){var o=function(f,h){var y=null;return kn(h)||typeof h=="string"||h==null||f.objectMode||(y=new TypeError("Invalid non-string/buffer chunk")),y}(e,r);if(o)t.emit("error",o);else if(r===null)e.reading=!1,function(f,h){if(!h.ended){if(h.decoder){var y=h.decoder.end();y&&y.length&&(h.buffer.push(y),h.length+=h.objectMode?1:y.length)}h.ended=!0,Lf(f)}}(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var c;!e.decoder||i||n||(r=e.decoder.write(r),c=!e.objectMode&&r.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Lf(t))),function(f,h){h.readingMore||(h.readingMore=!0,xr(g8,f,h))}(t,e)}else i||(e.reading=!1);return function(f){return!f.ended&&(f.needReadable||f.length<f.highWaterMark||f.length===0)}(e)}ec.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if((e=this.fillLast(t))===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},ec.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e},ec.prototype.text=function(t,e){var r=function(i,o,a){var s=o.length-1;if(s<a)return 0;var c=id(o[s]);return c>=0?(c>0&&(i.lastNeed=c-1),c):--s<a||c===-2?0:(c=id(o[s]))>=0?(c>0&&(i.lastNeed=c-2),c):--s<a||c===-2?0:(c=id(o[s]))>=0?(c>0&&(c===2?c=0:i.lastNeed=c-3),c):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},ec.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},Gt.ReadableState=Bv,ru(Gt,pu),Gt.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||typeof t!="string"||(e=e||r.defaultEncoding)!==r.encoding&&(t=ye.from(t,e),e=""),_g(this,r,t,e,!1)},Gt.prototype.unshift=function(t){return _g(this,this._readableState,t,"",!0)},Gt.prototype.isPaused=function(){return this._readableState.flowing===!1},Gt.prototype.setEncoding=function(t){return this._readableState.decoder=new jv(t),this._readableState.encoding=t,this};function Sg(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(r){return r>=8388608?r=8388608:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Lf(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?xr(Eg,t):Eg(t))}function Eg(t){t.emit("readable"),e0(t)}function g8(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function m8(t){t.read(0)}function b8(t,e){e.reading||t.read(0),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),e0(t),e.flowing&&!e.reading&&t.read(0)}function e0(t){for(var e=t._readableState;e.flowing&&t.read()!==null;);}function Ig(t,e){return e.length===0?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):e.buffer.length===1?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(n,i,o){var a;return n<i.head.data.length?(a=i.head.data.slice(0,n),i.head.data=i.head.data.slice(n)):a=n===i.head.data.length?i.shift():o?function(s,c){var f=c.head,h=1,y=f.data;for(s-=y.length;f=f.next;){var g=f.data,_=s>g.length?g.length:s;if(_===g.length?y+=g:y+=g.slice(0,s),(s-=_)===0){_===g.length?(++h,f.next?c.head=f.next:c.head=c.tail=null):(c.head=f,f.data=g.slice(_));break}++h}return c.length-=h,y}(n,i):function(s,c){var f=ye.allocUnsafe(s),h=c.head,y=1;for(h.data.copy(f),s-=h.data.length;h=h.next;){var g=h.data,_=s>g.length?g.length:s;if(g.copy(f,f.length-s,0,_),(s-=_)===0){_===g.length?(++y,h.next?c.head=h.next:c.head=c.tail=null):(c.head=h,h.data=g.slice(_));break}++y}return c.length-=y,f}(n,i),a}(t,e.buffer,e.decoder),r);var r}function od(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,xr(v8,e,t))}function v8(t,e){t.endEmitted||t.length!==0||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Ag(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function w8(){}function _8(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function tp(t,e){Object.defineProperty(this,"buffer",{get:function(){return console.log("_writableState.buffer is deprecated. Use _writableState.getBuffer instead."),this.getBuffer()}}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Dn&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){(function(a,s){var c=a._writableState,f=c.sync,h=c.writecb;if(function(g){g.writing=!1,g.writecb=null,g.length-=g.writelen,g.writelen=0}(c),s)(function(g,_,E,O,R){--_.pendingcb,E?xr(R,O):R(O),g._writableState.errorEmitted=!0,g.emit("error",O)})(a,c,f,s,h);else{var y=Fv(c);y||c.corked||c.bufferProcessing||!c.bufferedRequest||Lv(a,c),f?xr(kg,a,c,y,h):kg(a,c,y,h)}})(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new zv(this)}function kr(t){if(!(this instanceof kr||this instanceof Dn))return new kr(t);this._writableState=new tp(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),Nc.exports.EventEmitter.call(this)}function rp(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function kg(t,e,r,n){r||function(i,o){o.length===0&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))}(t,e),e.pendingcb--,n(),Uv(t,e)}function Lv(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;rp(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new zv(e)}else{for(;r;){var s=r.chunk,c=r.encoding,f=r.callback;if(rp(t,e,!1,e.objectMode?1:s.length,s,c,f),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function Fv(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Dg(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function Uv(t,e){var r=Fv(e);return r&&(e.pendingcb===0?(Dg(t,e),e.finished=!0,t.emit("finish")):Dg(t,e)),r}function zv(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Gt.prototype.read=function(t){t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return e.length===0&&e.ended?od(this):Lf(this),null;if((t=Sg(t,e))===0&&e.ended)return e.length===0&&od(this),null;var n,i=e.needReadable;return(e.length===0||e.length-t<e.highWaterMark)&&(i=!0),e.ended||e.reading?i=!1:i&&(e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Sg(r,e))),(n=t>0?Ig(t,e):null)===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&od(this)),n!==null&&this.emit("data",n),n},Gt.prototype._read=function(t){this.emit("error",new Error("not implemented"))},Gt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1;var i=!e||e.end!==!1?a:f;function o(R){R===r&&f()}function a(){t.end()}n.endEmitted?xr(i):r.once("end",i),t.on("unpipe",o);var s=function(R){return function(){var L=R._readableState;L.awaitDrain&&L.awaitDrain--,L.awaitDrain===0&&R.listeners("data").length&&(L.flowing=!0,e0(R))}}(r);t.on("drain",s);var c=!1;function f(){t.removeListener("close",_),t.removeListener("finish",E),t.removeListener("drain",s),t.removeListener("error",g),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",f),r.removeListener("data",y),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||s()}var h=!1;function y(R){h=!1,t.write(R)!==!1||h||((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Ag(n.pipes,t)!==-1)&&!c&&(r._readableState.awaitDrain++,h=!0),r.pause())}function g(R){var L;O(),t.removeListener("error",g),L="error",t.listeners(L).length===0&&t.emit("error",R)}function _(){t.removeListener("finish",E),O()}function E(){t.removeListener("close",_),O()}function O(){r.unpipe(t)}return r.on("data",y),function(R,L,q){if(typeof R.prependListener=="function")return R.prependListener(L,q);R._events&&R._events[L]?Array.isArray(R._events[L])?R._events[L].unshift(q):R._events[L]=[q,R._events[L]]:R.on(L,q)}(t,"error",g),t.once("close",_),t.once("finish",E),t.emit("pipe",r),n.flowing||r.resume(),t},Gt.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=Ag(e.pipes,t);return o===-1||(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},Gt.prototype.on=function(t,e){var r=pu.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Lf(this):xr(m8,this))}return r},Gt.prototype.addListener=Gt.prototype.on,Gt.prototype.resume=function(){var t=this._readableState;return t.flowing||(t.flowing=!0,function(e,r){r.resumeScheduled||(r.resumeScheduled=!0,xr(b8,e,r))}(this,t)),this},Gt.prototype.pause=function(){return this._readableState.flowing!==!1&&(this._readableState.flowing=!1,this.emit("pause")),this},Gt.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",function(){if(e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),t.on("data",function(o){e.decoder&&(o=e.decoder.write(o)),e.objectMode&&o==null||(e.objectMode||o&&o.length)&&(n.push(o)||(r=!0,t.pause()))}),t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(o){return function(){return t[o].apply(t,arguments)}}(i));return function(o,a){for(var s=0,c=o.length;s<c;s++)a(o[s],s)}(["error","close","destroy","pause","resume"],function(o){t.on(o,n.emit.bind(n,o))}),n._read=function(o){r&&(r=!1,t.resume())},n},Gt._fromList=Ig,kr.WritableState=tp,ru(kr,Nc.exports.EventEmitter),tp.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},kr.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},kr.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return typeof e=="function"&&(r=e,e=null),Se.Buffer.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=w8),n.ended?function(o,a){var s=new Error("write after end");o.emit("error",s),xr(a,s)}(this,r):function(o,a,s,c){var f=!0,h=!1;return s===null?h=new TypeError("May not write null values to stream"):Se.Buffer.isBuffer(s)||typeof s=="string"||s===void 0||a.objectMode||(h=new TypeError("Invalid non-string/buffer chunk")),h&&(o.emit("error",h),xr(c,h),f=!1),f}(this,n,t,r)&&(n.pendingcb++,i=function(o,a,s,c,f){s=function(_,E,O){return _.objectMode||_.decodeStrings===!1||typeof E!="string"||(E=Se.Buffer.from(E,O)),E}(a,s,c),Se.Buffer.isBuffer(s)&&(c="buffer");var h=a.objectMode?1:s.length;a.length+=h;var y=a.length<a.highWaterMark;if(y||(a.needDrain=!0),a.writing||a.corked){var g=a.lastBufferedRequest;a.lastBufferedRequest=new _8(s,c,f),g?g.next=a.lastBufferedRequest:a.bufferedRequest=a.lastBufferedRequest,a.bufferedRequestCount+=1}else rp(o,a,!1,h,s,c,f);return y}(this,n,t,e,r)),i},kr.prototype.cork=function(){this._writableState.corked++},kr.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||Lv(this,t))},kr.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},kr.prototype._write=function(t,e,r){r(new Error("not implemented"))},kr.prototype._writev=null,kr.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(i,o,a){o.ending=!0,Uv(i,o),a&&(o.finished?xr(a):i.once("finish",a)),o.ended=!0,i.writable=!1}(this,n,r)},ru(Dn,Gt);for(var xg=Object.keys(kr.prototype),ad=0;ad<xg.length;ad++){var sd=xg[ad];Dn.prototype[sd]||(Dn.prototype[sd]=kr.prototype[sd])}function Dn(t){if(!(this instanceof Dn))return new Dn(t);Gt.call(this,t),kr.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",S8)}function S8(){this.allowHalfOpen||this._writableState.ended||xr(E8,this)}function E8(t){t.end()}function I8(t){this.afterTransform=function(e,r){return function(n,i,o){var a=n._transformState;a.transforming=!1;var s=a.writecb;if(!s)return n.emit("error",new Error("no writecb in Transform class"));a.writechunk=null,a.writecb=null,o!=null&&n.push(o),s(i);var c=n._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&n._read(c.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function _i(t){if(!(this instanceof _i))return new _i(t);Dn.call(this,t),this._transformState=new I8(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){Tg(e,r)}):Tg(e)})}function Tg(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function nu(t){if(!(this instanceof nu))return new nu(t);_i.call(this,t)}function yi(){pu.call(this)}ru(_i,Dn),_i.prototype.push=function(t,e){return this._transformState.needTransform=!1,Dn.prototype.push.call(this,t,e)},_i.prototype._transform=function(t,e,r){throw new Error("Not implemented")},_i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},_i.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},ru(nu,_i),nu.prototype._transform=function(t,e,r){r(null,t)},ru(yi,pu),yi.Readable=Gt,yi.Writable=kr,yi.Duplex=Dn,yi.Transform=_i,yi.PassThrough=nu,yi.Stream=yi,yi.prototype.pipe=function(t,e){var r=this;function n(h){t.writable&&t.write(h)===!1&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(r.on("end",a),r.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function c(h){if(f(),pu.listenerCount(this,"error")===0)throw h}function f(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",f),r.removeListener("close",f),t.removeListener("close",f)}return r.on("error",c),t.on("error",c),r.on("end",f),r.on("close",f),t.on("close",f),t.emit("pipe",r),t};var t0=_b(Object.freeze({__proto__:null,default:yi,Readable:Gt,Writable:kr,Duplex:Dn,Transform:_i,PassThrough:nu,Stream:yi})),Ql=Ye.exports.Buffer,Kv=t0.Transform;function Vo(t){Kv.call(this),this._block=Ql.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}(0,ot.exports)(Vo,Kv),Vo.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)},Vo.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)},Vo.prototype.update=function(t,e){if(function(s,c){if(!Ql.isBuffer(s)&&typeof s!="string")throw new TypeError(c+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");Ql.isBuffer(t)||(t=Ql.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},Vo.prototype._update=function(){throw new Error("_update is not implemented")},Vo.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},Vo.prototype._digest=function(){throw new Error("_digest is not implemented")};var qv=Vo,A8=ot.exports,Hv=qv,k8=Ye.exports.Buffer,D8=new Array(16);function ef(){Hv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function uh(t,e){return t<<e|t>>>32-e}function Rr(t,e,r,n,i,o,a){return uh(t+(e&r|~e&n)+i+o|0,a)+e|0}function Cr(t,e,r,n,i,o,a){return uh(t+(e&n|r&~n)+i+o|0,a)+e|0}function Mr(t,e,r,n,i,o,a){return uh(t+(e^r^n)+i+o|0,a)+e|0}function Nr(t,e,r,n,i,o,a){return uh(t+(r^(e|~n))+i+o|0,a)+e|0}A8(ef,Hv),ef.prototype._update=function(){for(var t=D8,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=Rr(r,n,i,o,t[0],3614090360,7),o=Rr(o,r,n,i,t[1],3905402710,12),i=Rr(i,o,r,n,t[2],606105819,17),n=Rr(n,i,o,r,t[3],3250441966,22),r=Rr(r,n,i,o,t[4],4118548399,7),o=Rr(o,r,n,i,t[5],1200080426,12),i=Rr(i,o,r,n,t[6],2821735955,17),n=Rr(n,i,o,r,t[7],4249261313,22),r=Rr(r,n,i,o,t[8],1770035416,7),o=Rr(o,r,n,i,t[9],2336552879,12),i=Rr(i,o,r,n,t[10],4294925233,17),n=Rr(n,i,o,r,t[11],2304563134,22),r=Rr(r,n,i,o,t[12],1804603682,7),o=Rr(o,r,n,i,t[13],4254626195,12),i=Rr(i,o,r,n,t[14],2792965006,17),r=Cr(r,n=Rr(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=Cr(o,r,n,i,t[6],3225465664,9),i=Cr(i,o,r,n,t[11],643717713,14),n=Cr(n,i,o,r,t[0],3921069994,20),r=Cr(r,n,i,o,t[5],3593408605,5),o=Cr(o,r,n,i,t[10],38016083,9),i=Cr(i,o,r,n,t[15],3634488961,14),n=Cr(n,i,o,r,t[4],3889429448,20),r=Cr(r,n,i,o,t[9],568446438,5),o=Cr(o,r,n,i,t[14],3275163606,9),i=Cr(i,o,r,n,t[3],4107603335,14),n=Cr(n,i,o,r,t[8],1163531501,20),r=Cr(r,n,i,o,t[13],2850285829,5),o=Cr(o,r,n,i,t[2],4243563512,9),i=Cr(i,o,r,n,t[7],1735328473,14),r=Mr(r,n=Cr(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=Mr(o,r,n,i,t[8],2272392833,11),i=Mr(i,o,r,n,t[11],1839030562,16),n=Mr(n,i,o,r,t[14],4259657740,23),r=Mr(r,n,i,o,t[1],2763975236,4),o=Mr(o,r,n,i,t[4],1272893353,11),i=Mr(i,o,r,n,t[7],4139469664,16),n=Mr(n,i,o,r,t[10],3200236656,23),r=Mr(r,n,i,o,t[13],681279174,4),o=Mr(o,r,n,i,t[0],3936430074,11),i=Mr(i,o,r,n,t[3],3572445317,16),n=Mr(n,i,o,r,t[6],76029189,23),r=Mr(r,n,i,o,t[9],3654602809,4),o=Mr(o,r,n,i,t[12],3873151461,11),i=Mr(i,o,r,n,t[15],530742520,16),r=Nr(r,n=Mr(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=Nr(o,r,n,i,t[7],1126891415,10),i=Nr(i,o,r,n,t[14],2878612391,15),n=Nr(n,i,o,r,t[5],4237533241,21),r=Nr(r,n,i,o,t[12],1700485571,6),o=Nr(o,r,n,i,t[3],2399980690,10),i=Nr(i,o,r,n,t[10],4293915773,15),n=Nr(n,i,o,r,t[1],2240044497,21),r=Nr(r,n,i,o,t[8],1873313359,6),o=Nr(o,r,n,i,t[15],4264355552,10),i=Nr(i,o,r,n,t[6],2734768916,15),n=Nr(n,i,o,r,t[13],1309151649,21),r=Nr(r,n,i,o,t[4],4149444226,6),o=Nr(o,r,n,i,t[11],3174756917,10),i=Nr(i,o,r,n,t[2],718787259,15),n=Nr(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},ef.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=k8.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};var r0=ef,ud=Se.Buffer,x8=ot.exports,Vv=qv,T8=new Array(16),Lu=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Fu=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Uu=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],zu=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ku=[0,1518500249,1859775393,2400959708,2840853838],qu=[1352829926,1548603684,1836072691,2053994217,0];function tf(){Vv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function ts(t,e){return t<<e|t>>>32-e}function Og(t,e,r,n,i,o,a,s){return ts(t+(e^r^n)+o+a|0,s)+i|0}function Pg(t,e,r,n,i,o,a,s){return ts(t+(e&r|~e&n)+o+a|0,s)+i|0}function Rg(t,e,r,n,i,o,a,s){return ts(t+((e|~r)^n)+o+a|0,s)+i|0}function Cg(t,e,r,n,i,o,a,s){return ts(t+(e&n|r&~n)+o+a|0,s)+i|0}function Mg(t,e,r,n,i,o,a,s){return ts(t+(e^(r|~n))+o+a|0,s)+i|0}x8(tf,Vv),tf.prototype._update=function(){for(var t=T8,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,s=0|this._a,c=0|this._b,f=0|this._c,h=0|this._d,y=0|this._e,g=0;g<80;g+=1){var _,E;g<16?(_=Og(r,n,i,o,a,t[Lu[g]],Ku[0],Uu[g]),E=Mg(s,c,f,h,y,t[Fu[g]],qu[0],zu[g])):g<32?(_=Pg(r,n,i,o,a,t[Lu[g]],Ku[1],Uu[g]),E=Cg(s,c,f,h,y,t[Fu[g]],qu[1],zu[g])):g<48?(_=Rg(r,n,i,o,a,t[Lu[g]],Ku[2],Uu[g]),E=Rg(s,c,f,h,y,t[Fu[g]],qu[2],zu[g])):g<64?(_=Cg(r,n,i,o,a,t[Lu[g]],Ku[3],Uu[g]),E=Pg(s,c,f,h,y,t[Fu[g]],qu[3],zu[g])):(_=Mg(r,n,i,o,a,t[Lu[g]],Ku[4],Uu[g]),E=Og(s,c,f,h,y,t[Fu[g]],qu[4],zu[g])),r=a,a=o,o=ts(i,10),i=n,n=_,s=y,y=h,h=ts(f,10),f=c,c=E}var O=this._b+i+h|0;this._b=this._c+o+y|0,this._c=this._d+a+s|0,this._d=this._e+r+c|0,this._e=this._a+n+f|0,this._a=O},tf.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=ud.alloc?ud.alloc(20):new ud(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};var n0=tf,ch={exports:{}},Wv=Ye.exports.Buffer;function rf(t,e){this._block=Wv.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}rf.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Wv.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,o=this._len,a=0;a<i;){for(var s=o%n,c=Math.min(i-a,n-s),f=0;f<c;f++)r[s+f]=t[a+f];a+=c,(o+=c)%n==0&&this._update(r)}return this._len+=i,this},rf.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},rf.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var vu=rf,O8=ot.exports,Jv=vu,P8=Ye.exports.Buffer,R8=[1518500249,1859775393,-1894007588,-899497514],C8=new Array(80);function tc(){this.init(),this._w=C8,Jv.call(this,64,56)}function M8(t){return t<<30|t>>>2}function N8(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}O8(tc,Jv),tc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},tc.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,c=0;c<16;++c)r[c]=t.readInt32BE(4*c);for(;c<80;++c)r[c]=r[c-3]^r[c-8]^r[c-14]^r[c-16];for(var f=0;f<80;++f){var h=~~(f/20),y=0|((e=n)<<5|e>>>27)+N8(h,i,o,a)+s+r[f]+R8[h];s=a,a=o,o=M8(i),i=n,n=y}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},tc.prototype._hash=function(){var t=P8.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var j8=tc,B8=ot.exports,Yv=vu,L8=Ye.exports.Buffer,F8=[1518500249,1859775393,-1894007588,-899497514],U8=new Array(80);function rc(){this.init(),this._w=U8,Yv.call(this,64,56)}function z8(t){return t<<5|t>>>27}function K8(t){return t<<30|t>>>2}function q8(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}B8(rc,Yv),rc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},rc.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,c=0;c<16;++c)r[c]=t.readInt32BE(4*c);for(;c<80;++c)r[c]=(e=r[c-3]^r[c-8]^r[c-14]^r[c-16])<<1|e>>>31;for(var f=0;f<80;++f){var h=~~(f/20),y=z8(n)+q8(h,i,o,a)+s+r[f]+F8[h]|0;s=a,a=o,o=K8(i),i=n,n=y}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},rc.prototype._hash=function(){var t=L8.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var H8=rc,V8=ot.exports,Zv=vu,W8=Ye.exports.Buffer,J8=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Y8=new Array(64);function nc(){this.init(),this._w=Y8,Zv.call(this,64,56)}function Z8(t,e,r){return r^t&(e^r)}function X8(t,e,r){return t&e|r&(t|e)}function G8(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function $8(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function Q8(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}V8(nc,Zv),nc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},nc.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,c=0|this._f,f=0|this._g,h=0|this._h,y=0;y<16;++y)r[y]=t.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((e=r[y-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[y-7]+Q8(r[y-15])+r[y-16];for(var g=0;g<64;++g){var _=h+$8(s)+Z8(s,c,f)+J8[g]+r[g]|0,E=G8(n)+X8(n,i,o)|0;h=f,f=c,c=s,s=a+_|0,a=o,o=i,i=n,n=_+E|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0,this._f=c+this._f|0,this._g=f+this._g|0,this._h=h+this._h|0},nc.prototype._hash=function(){var t=W8.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Xv=nc,e_=ot.exports,t_=Xv,r_=vu,n_=Ye.exports.Buffer,i_=new Array(64);function nf(){this.init(),this._w=i_,r_.call(this,64,56)}e_(nf,t_),nf.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},nf.prototype._hash=function(){var t=n_.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var o_=nf,a_=ot.exports,Gv=vu,s_=Ye.exports.Buffer,Ng=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u_=new Array(160);function ic(){this.init(),this._w=u_,Gv.call(this,128,112)}function jg(t,e,r){return r^t&(e^r)}function Bg(t,e,r){return t&e|r&(t|e)}function Lg(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Fg(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function c_(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function l_(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function f_(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function h_(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function mr(t,e){return t>>>0<e>>>0?1:0}a_(ic,Gv),ic.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},ic.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,s=0|this._fh,c=0|this._gh,f=0|this._hh,h=0|this._al,y=0|this._bl,g=0|this._cl,_=0|this._dl,E=0|this._el,O=0|this._fl,R=0|this._gl,L=0|this._hl,q=0;q<32;q+=2)e[q]=t.readInt32BE(4*q),e[q+1]=t.readInt32BE(4*q+4);for(;q<160;q+=2){var X=e[q-30],ne=e[q-30+1],W=c_(X,ne),H=l_(ne,X),Y=f_(X=e[q-4],ne=e[q-4+1]),T=h_(ne,X),te=e[q-14],v=e[q-14+1],D=e[q-32],w=e[q-32+1],k=H+v|0,A=W+te+mr(k,H)|0;A=(A=A+Y+mr(k=k+T|0,T)|0)+D+mr(k=k+w|0,w)|0,e[q]=A,e[q+1]=k}for(var b=0;b<160;b+=2){A=e[b],k=e[b+1];var P=Bg(r,n,i),V=Bg(h,y,g),Q=Lg(r,h),U=Lg(h,r),Z=Fg(a,E),fe=Fg(E,a),se=Ng[b],ue=Ng[b+1],ge=jg(a,s,c),me=jg(E,O,R),C=L+fe|0,j=f+Z+mr(C,L)|0;j=(j=(j=j+ge+mr(C=C+me|0,me)|0)+se+mr(C=C+ue|0,ue)|0)+A+mr(C=C+k|0,k)|0;var S=U+V|0,M=Q+P+mr(S,U)|0;f=c,L=R,c=s,R=O,s=a,O=E,a=o+j+mr(E=_+C|0,_)|0,o=i,_=g,i=n,g=y,n=r,y=h,r=j+M+mr(h=C+S|0,C)|0}this._al=this._al+h|0,this._bl=this._bl+y|0,this._cl=this._cl+g|0,this._dl=this._dl+_|0,this._el=this._el+E|0,this._fl=this._fl+O|0,this._gl=this._gl+R|0,this._hl=this._hl+L|0,this._ah=this._ah+r+mr(this._al,h)|0,this._bh=this._bh+n+mr(this._bl,y)|0,this._ch=this._ch+i+mr(this._cl,g)|0,this._dh=this._dh+o+mr(this._dl,_)|0,this._eh=this._eh+a+mr(this._el,E)|0,this._fh=this._fh+s+mr(this._fl,O)|0,this._gh=this._gh+c+mr(this._gl,R)|0,this._hh=this._hh+f+mr(this._hl,L)|0},ic.prototype._hash=function(){var t=s_.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var $v=ic,d_=ot.exports,p_=$v,y_=vu,g_=Ye.exports.Buffer,m_=new Array(160);function of(){this.init(),this._w=m_,y_.call(this,128,112)}d_(of,p_),of.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},of.prototype._hash=function(){var t=g_.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var b_=of,Ra=ch.exports=function(t){t=t.toLowerCase();var e=Ra[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};Ra.sha=j8,Ra.sha1=H8,Ra.sha224=o_,Ra.sha256=Xv,Ra.sha384=b_,Ra.sha512=$v;var Qv={},np=Ye.exports.Buffer,Ug=np.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Hu(t){var e;switch(this.encoding=function(r){var n=function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}}(r);if(typeof n!="string"&&(np.isEncoding===Ug||!Ug(r)))throw new Error("Unknown encoding: "+r);return n||r}(t),this.encoding){case"utf16le":this.text=w_,this.end=__,e=4;break;case"utf8":this.fillLast=v_,e=4;break;case"base64":this.text=S_,this.end=E_,e=3;break;default:return this.write=I_,void(this.end=A_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=np.allocUnsafe(e)}function cd(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function v_(t){var e=this.lastTotal-this.lastNeed,r=function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}}(this,t);return r!==void 0?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function w_(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function __(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function S_(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function E_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function I_(t){return t.toString(this.encoding)}function A_(t){return t&&t.length?this.write(t):""}Qv.StringDecoder=Hu,Hu.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if((e=this.fillLast(t))===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},Hu.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e},Hu.prototype.text=function(t,e){var r=function(i,o,a){var s=o.length-1;if(s<a)return 0;var c=cd(o[s]);return c>=0?(c>0&&(i.lastNeed=c-1),c):--s<a||c===-2?0:(c=cd(o[s]))>=0?(c>0&&(i.lastNeed=c-2),c):--s<a||c===-2?0:(c=cd(o[s]))>=0?(c>0&&(c===2?c=0:i.lastNeed=c-3),c):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},Hu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};var zg=Ye.exports.Buffer,e2=t0.Transform,k_=Qv.StringDecoder;function hi(t){e2.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}(0,ot.exports)(hi,e2),hi.prototype.update=function(t,e,r){typeof t=="string"&&(t=zg.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},hi.prototype.setAutoPadding=function(){},hi.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},hi.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},hi.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},hi.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}},hi.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)},hi.prototype._finalOrDigest=function(t){var e=this.__final()||zg.alloc(0);return t&&(e=this._toString(e,t,!0)),e},hi.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new k_(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var ua=hi,D_=ot.exports,x_=r0,T_=n0,O_=ch.exports,t2=ua;function af(t){t2.call(this,"digest"),this._hash=t}D_(af,t2),af.prototype._update=function(t){this._hash.update(t)},af.prototype._final=function(){return this._hash.digest()};var ss=function(t){return(t=t.toLowerCase())==="md5"?new x_:t==="rmd160"||t==="ripemd160"?new T_:new af(O_(t))},Jo=ss,P_=ot.exports,Ha=Ye.exports.Buffer,r2=ua,R_=Ha.alloc(128);function sf(t,e){r2.call(this,"digest"),typeof e=="string"&&(e=Ha.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=Ha.concat([e,R_],64));for(var r=this._ipad=Ha.allocUnsafe(64),n=this._opad=Ha.allocUnsafe(64),i=0;i<64;i++)r[i]=54^e[i],n[i]=92^e[i];this._hash=[r]}P_(sf,r2),sf.prototype._update=function(t){this._hash.push(t)},sf.prototype._final=function(){var t=this._alg(Ha.concat(this._hash));return this._alg(Ha.concat([this._opad,t]))};var C_=sf,M_=r0,n2=function(t){return new M_().update(t).digest()},N_=ot.exports,j_=C_,i2=ua,oc=Ye.exports.Buffer,B_=n2,ip=n0,op=ch.exports,L_=oc.alloc(128);function mc(t,e){i2.call(this,"digest"),typeof e=="string"&&(e=oc.from(e));var r=t==="sha512"||t==="sha384"?128:64;this._alg=t,this._key=e,e.length>r?e=(t==="rmd160"?new ip:op(t)).update(e).digest():e.length<r&&(e=oc.concat([e,L_],r));for(var n=this._ipad=oc.allocUnsafe(r),i=this._opad=oc.allocUnsafe(r),o=0;o<r;o++)n[o]=54^e[o],i[o]=92^e[o];this._hash=t==="rmd160"?new ip:op(t),this._hash.update(n)}N_(mc,i2),mc.prototype._update=function(t){this._hash.update(t)},mc.prototype._final=function(){var t=this._hash.digest();return(this._alg==="rmd160"?new ip:op(this._alg)).update(this._opad).update(t).digest()};var uf,o2=function(t,e){return(t=t.toLowerCase())==="rmd160"||t==="ripemd160"?new mc("rmd160",e):t==="md5"?new j_(B_,e):new mc(t,e)},a2={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},F_=a2,jc={},U_=Math.pow(2,30)-1,s2=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>U_||e!=e)throw new TypeError("Bad key length")};ae.process&&ae.process.browser?uf="utf-8":ae.process&&ae.process.version?uf=parseInt(Zt.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":uf="utf-8";var u2=uf,ld=Ye.exports.Buffer,c2=function(t,e,r){if(ld.isBuffer(t))return t;if(typeof t=="string")return ld.from(t,e);if(ArrayBuffer.isView(t))return ld.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")},z_=n2,K_=n0,q_=ch.exports,Va=Ye.exports.Buffer,H_=s2,Kg=u2,qg=c2,V_=Va.alloc(128),cf={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l2(t,e,r){var n=function(f){function h(g){return q_(f).update(g).digest()}function y(g){return new K_().update(g).digest()}return f==="rmd160"||f==="ripemd160"?y:f==="md5"?z_:h}(t),i=t==="sha512"||t==="sha384"?128:64;e.length>i?e=n(e):e.length<i&&(e=Va.concat([e,V_],i));for(var o=Va.allocUnsafe(i+cf[t]),a=Va.allocUnsafe(i+cf[t]),s=0;s<i;s++)o[s]=54^e[s],a[s]=92^e[s];var c=Va.allocUnsafe(i+r+4);o.copy(c,0,0,i),this.ipad1=c,this.ipad2=o,this.opad=a,this.alg=t,this.blocksize=i,this.hash=n,this.size=cf[t]}l2.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)};var fd,Hg,f2=function(t,e,r,n,i){H_(r,n);var o=new l2(i=i||"sha1",t=qg(t,Kg,"Password"),(e=qg(e,Kg,"Salt")).length),a=Va.allocUnsafe(n),s=Va.allocUnsafe(e.length+4);e.copy(s,0,0,e.length);for(var c=0,f=cf[i],h=Math.ceil(n/f),y=1;y<=h;y++){s.writeUInt32BE(y,e.length);for(var g=o.run(s,o.ipad1),_=g,E=1;E<r;E++){_=o.run(_,o.ipad2);for(var O=0;O<f;O++)g[O]^=_[O]}g.copy(a,c),c+=f}return a},h2=Ye.exports.Buffer,W_=s2,Vg=u2,Wg=f2,Jg=c2,bc=ae.crypto&&ae.crypto.subtle,J_={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},hd=[];function dd(){return Hg||(Hg=ae.process&&ae.process.nextTick?ae.process.nextTick:ae.queueMicrotask?ae.queueMicrotask:ae.setImmediate?ae.setImmediate:ae.setTimeout)}function Yg(t,e,r,n,i){return bc.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(o){return bc.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},o,n<<3)}).then(function(o){return h2.from(o)})}jc.pbkdf2=function(t,e,r,n,i,o){typeof i=="function"&&(o=i,i=void 0);var a=J_[(i=i||"sha1").toLowerCase()];if(a&&typeof ae.Promise=="function"){if(W_(r,n),t=Jg(t,Vg,"Password"),e=Jg(e,Vg,"Salt"),typeof o!="function")throw new Error("No callback provided to pbkdf2");(function(s,c){s.then(function(f){dd()(function(){c(null,f)})},function(f){dd()(function(){c(f)})})})(function(s){if(ae.process&&!ae.process.browser||!bc||!bc.importKey||!bc.deriveBits)return Promise.resolve(!1);if(hd[s]!==void 0)return hd[s];var c=Yg(fd=fd||h2.alloc(8),fd,10,128,s).then(function(){return!0}).catch(function(){return!1});return hd[s]=c,c}(a).then(function(s){return s?Yg(t,e,r,n,a):Wg(t,e,r,n,i)}),o)}else dd()(function(){var s;try{s=Wg(t,e,r,n,i)}catch(c){return o(c)}o(null,s)})},jc.pbkdf2Sync=f2;var di={},d2=ua,yo=Ba,Y_=ot.exports,Fa=Ye.exports.Buffer,ac={"des-ede3-cbc":yo.CBC.instantiate(yo.EDE),"des-ede3":yo.EDE,"des-ede-cbc":yo.CBC.instantiate(yo.EDE),"des-ede":yo.EDE,"des-cbc":yo.CBC.instantiate(yo.DES),"des-ecb":yo.DES};ac.des=ac["des-cbc"],ac.des3=ac["des-ede3-cbc"];var Z_=lf;function lf(t){d2.call(this);var e,r=t.mode.toLowerCase(),n=ac[r];e=t.decrypt?"decrypt":"encrypt";var i=t.key;Fa.isBuffer(i)||(i=Fa.from(i)),r!=="des-ede"&&r!=="des-ede-cbc"||(i=Fa.concat([i,i.slice(0,8)]));var o=t.iv;Fa.isBuffer(o)||(o=Fa.from(o)),this._des=n.create({key:i,iv:o,type:e})}Y_(lf,d2),lf.prototype._update=function(t){return Fa.from(this._des.update(t))},lf.prototype._final=function(){return Fa.from(this._des.final())};var En={},ap={},X_={encrypt:function(t,e){return t._cipher.encryptBlock(e)},decrypt:function(t,e){return t._cipher.decryptBlock(e)}},sp={},Yc=function(t,e){for(var r=Math.min(t.length,e.length),n=new ye(r),i=0;i<r;++i)n[i]=t[i]^e[i];return n},Zg=Yc;sp.encrypt=function(t,e){var r=Zg(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},sp.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return Zg(n,r)};var p2={},sc=Ye.exports.Buffer,G_=Yc;function Xg(t,e,r){var n=e.length,i=G_(e,t._cache);return t._cache=t._cache.slice(n),t._prev=sc.concat([t._prev,r?e:i]),i}p2.encrypt=function(t,e,r){for(var n,i=sc.allocUnsafe(0);e.length;){if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=sc.allocUnsafe(0)),!(t._cache.length<=e.length)){i=sc.concat([i,Xg(t,e,r)]);break}n=t._cache.length,i=sc.concat([i,Xg(t,e.slice(0,n),r)]),e=e.slice(n)}return i};var y2={},up=Ye.exports.Buffer;function $_(t,e,r){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=up.concat([t._prev.slice(1),up.from([r?e:n])]),n}y2.encrypt=function(t,e,r){for(var n=e.length,i=up.allocUnsafe(n),o=-1;++o<n;)i[o]=$_(t,e[o],r);return i};var g2={},ff=Ye.exports.Buffer;function Q_(t,e,r){for(var n,i,o=-1,a=0;++o<8;)n=e&1<<7-o?128:0,a+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>o%8,t._prev=eS(t._prev,r?n:i);return a}function eS(t,e){var r=t.length,n=-1,i=ff.allocUnsafe(t.length);for(t=ff.concat([t,ff.from([e])]);++n<r;)i[n]=t[n]<<1|t[n+1]>>7;return i}g2.encrypt=function(t,e,r){for(var n=e.length,i=ff.allocUnsafe(n),o=-1;++o<n;)i[o]=Q_(t,e[o],r);return i};var m2={},tS=Yc;function rS(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}m2.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=ye.concat([t._cache,rS(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),tS(e,r)};var cp={},b2=function(t){for(var e,r=t.length;r--;){if((e=t.readUInt8(r))!==255){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}},nS=Yc,Gg=Ye.exports.Buffer,iS=b2;function oS(t){var e=t._cipher.encryptBlockRaw(t._prev);return iS(t._prev),e}cp.encrypt=function(t,e){var r=Math.ceil(e.length/16),n=t._cache.length;t._cache=Gg.concat([t._cache,Gg.allocUnsafe(16*r)]);for(var i=0;i<r;i++){var o=oS(t),a=n+16*i;t._cache.writeUInt32BE(o[0],a+0),t._cache.writeUInt32BE(o[1],a+4),t._cache.writeUInt32BE(o[2],a+8),t._cache.writeUInt32BE(o[3],a+12)}var s=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),nS(e,s)};var v2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},aS={ECB:X_,CBC:sp,CFB:p2,CFB8:y2,CFB1:g2,OFB:m2,CTR:cp,GCM:cp},hf=v2;for(var $g in hf)hf[$g].module=aS[hf[$g].mode];var i0=hf,Zc={},Ff=Ye.exports.Buffer;function lp(t){Ff.isBuffer(t)||(t=Ff.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(4*n);return r}function pd(t){for(;0<t.length;t++)t[0]=0}function Qg(t,e,r,n,i){for(var o,a,s,c,f=r[0],h=r[1],y=r[2],g=r[3],_=t[0]^e[0],E=t[1]^e[1],O=t[2]^e[2],R=t[3]^e[3],L=4,q=1;q<i;q++)o=f[_>>>24]^h[E>>>16&255]^y[O>>>8&255]^g[255&R]^e[L++],a=f[E>>>24]^h[O>>>16&255]^y[R>>>8&255]^g[255&_]^e[L++],s=f[O>>>24]^h[R>>>16&255]^y[_>>>8&255]^g[255&E]^e[L++],c=f[R>>>24]^h[_>>>16&255]^y[E>>>8&255]^g[255&O]^e[L++],_=o,E=a,O=s,R=c;return o=(n[_>>>24]<<24|n[E>>>16&255]<<16|n[O>>>8&255]<<8|n[255&R])^e[L++],a=(n[E>>>24]<<24|n[O>>>16&255]<<16|n[R>>>8&255]<<8|n[255&_])^e[L++],s=(n[O>>>24]<<24|n[R>>>16&255]<<16|n[_>>>8&255]<<8|n[255&E])^e[L++],c=(n[R>>>24]<<24|n[_>>>16&255]<<16|n[E>>>8&255]<<8|n[255&O])^e[L++],[o>>>=0,a>>>=0,s>>>=0,c>>>=0]}var sS=[0,1,2,4,8,16,32,64,128,27,54],ur=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,c=0;c<256;++c){var f=s^s<<1^s<<2^s<<3^s<<4;f=f>>>8^255&f^99,r[a]=f,n[f]=a;var h=t[a],y=t[h],g=t[y],_=257*t[f]^16843008*f;i[0][a]=_<<24|_>>>8,i[1][a]=_<<16|_>>>16,i[2][a]=_<<8|_>>>24,i[3][a]=_,_=16843009*g^65537*y^257*h^16843008*a,o[0][f]=_<<24|_>>>8,o[1][f]=_<<16|_>>>16,o[2][f]=_<<8|_>>>24,o[3][f]=_,a===0?a=s=1:(a=h^t[t[t[g^h]]],s^=t[t[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function Fn(t){this._key=lp(t),this._reset()}Fn.blockSize=16,Fn.keySize=32,Fn.prototype.blockSize=Fn.blockSize,Fn.prototype.keySize=Fn.keySize,Fn.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=ur.SBOX[a>>>24]<<24|ur.SBOX[a>>>16&255]<<16|ur.SBOX[a>>>8&255]<<8|ur.SBOX[255&a],a^=sS[o/e|0]<<24):e>6&&o%e==4&&(a=ur.SBOX[a>>>24]<<24|ur.SBOX[a>>>16&255]<<16|ur.SBOX[a>>>8&255]<<8|ur.SBOX[255&a]),i[o]=i[o-e]^a}for(var s=[],c=0;c<n;c++){var f=n-c,h=i[f-(c%4?0:4)];s[c]=c<4||f<=4?h:ur.INV_SUB_MIX[0][ur.SBOX[h>>>24]]^ur.INV_SUB_MIX[1][ur.SBOX[h>>>16&255]]^ur.INV_SUB_MIX[2][ur.SBOX[h>>>8&255]]^ur.INV_SUB_MIX[3][ur.SBOX[255&h]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=s},Fn.prototype.encryptBlockRaw=function(t){return Qg(t=lp(t),this._keySchedule,ur.SUB_MIX,ur.SBOX,this._nRounds)},Fn.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=Ff.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},Fn.prototype.decryptBlock=function(t){var e=(t=lp(t))[1];t[1]=t[3],t[3]=e;var r=Qg(t,this._invKeySchedule,ur.INV_SUB_MIX,ur.INV_SBOX,this._nRounds),n=Ff.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n},Fn.prototype.scrub=function(){pd(this._keySchedule),pd(this._invKeySchedule),pd(this._key)},Zc.AES=Fn;var yu=Ye.exports.Buffer,uS=yu.alloc(16,0);function e1(t){var e=yu.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function uc(t){this.h=t,this.state=yu.alloc(16,0),this.cache=yu.allocUnsafe(0)}uc.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},uc.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],o=-1;++o<128;){for((this.state[~~(o/8)]&1<<7-o%8)!=0&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=(1&n[3])!=0,e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=e1(i)},uc.prototype.update=function(t){var e;for(this.cache=yu.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},uc.prototype.final=function(t,e){return this.cache.length&&this.ghash(yu.concat([this.cache,uS],16)),this.ghash(e1([0,t,0,e])),this.state};var cS=uc,lS=Zc,an=Ye.exports.Buffer,w2=ua,fS=ot.exports,t1=cS,hS=Yc,dS=b2;function Ca(t,e,r,n){w2.call(this);var i=an.alloc(4,0);this._cipher=new lS.AES(e);var o=this._cipher.encryptBlock(i);this._ghash=new t1(o),r=function(a,s,c){if(s.length===12)return a._finID=an.concat([s,an.from([0,0,0,1])]),an.concat([s,an.from([0,0,0,2])]);var f=new t1(c),h=s.length,y=h%16;f.update(s),y&&(y=16-y,f.update(an.alloc(y,0))),f.update(an.alloc(8,0));var g=8*h,_=an.alloc(8);_.writeUIntBE(g,0,8),f.update(_),a._finID=f.state;var E=an.from(a._finID);return dS(E),E}(this,r,o),this._prev=an.from(r),this._cache=an.allocUnsafe(0),this._secCache=an.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}fS(Ca,w2),Ca.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=an.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},Ca.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=hS(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,r){var n=0;e.length!==r.length&&n++;for(var i=Math.min(e.length,r.length),o=0;o<i;++o)n+=e[o]^r[o];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},Ca.prototype.getAuthTag=function(){if(this._decrypt||!an.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},Ca.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},Ca.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length};var _2=Ca,pS=Zc,yd=Ye.exports.Buffer,S2=ua;function df(t,e,r,n){S2.call(this),this._cipher=new pS.AES(e),this._prev=yd.from(r),this._cache=yd.allocUnsafe(0),this._secCache=yd.allocUnsafe(0),this._decrypt=n,this._mode=t}(0,ot.exports)(df,S2),df.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},df.prototype._final=function(){this._cipher.scrub()};var E2=df,ka=Ye.exports.Buffer,yS=r0,lh=function(t,e,r,n){if(ka.isBuffer(t)||(t=ka.from(t,"binary")),e&&(ka.isBuffer(e)||(e=ka.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var i=r/8,o=ka.alloc(i),a=ka.alloc(n||0),s=ka.alloc(0);i>0||n>0;){var c=new yS;c.update(s),c.update(t),e&&c.update(e),s=c.digest();var f=0;if(i>0){var h=o.length-i;f=Math.min(i,s.length),s.copy(o,h,0,f),i-=f}if(f<s.length&&n>0){var y=a.length-n,g=Math.min(n,s.length-f);s.copy(a,y,f,f+g),n-=g}}return s.fill(0),{key:o,iv:a}},I2=i0,gS=_2,To=Ye.exports.Buffer,mS=E2,A2=ua,bS=Zc,vS=lh;function Bc(t,e,r){A2.call(this),this._cache=new pf,this._cipher=new bS.AES(e),this._prev=To.from(r),this._mode=t,this._autopadding=!0}(0,ot.exports)(Bc,A2),Bc.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return To.concat(n)};var wS=To.alloc(16,16);function pf(){this.cache=To.allocUnsafe(0)}function r1(t,e,r){var n=I2[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=To.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if(typeof r=="string"&&(r=To.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return n.type==="stream"?new mS(n.module,e,r):n.type==="auth"?new gS(n.module,e,r):new Bc(n.module,e,r)}Bc.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(wS))throw this._cipher.scrub(),new Error("data not multiple of block length")},Bc.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},pf.prototype.add=function(t){this.cache=To.concat([this.cache,t])},pf.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},pf.prototype.flush=function(){for(var t=16-this.cache.length,e=To.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return To.concat([this.cache,e])},ap.createCipheriv=r1,ap.createCipher=function(t,e){var r=I2[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=vS(e,!1,r.key,r.iv);return r1(t,n.key,n.iv)};var fp={},_S=_2,gu=Ye.exports.Buffer,k2=i0,SS=E2,D2=ua,ES=Zc,IS=lh;function cc(t,e,r){D2.call(this),this._cache=new yf,this._last=void 0,this._cipher=new ES.AES(e),this._prev=gu.from(r),this._mode=t,this._autopadding=!0}function yf(){this.cache=gu.allocUnsafe(0)}function n1(t,e,r){var n=k2[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof r=="string"&&(r=gu.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if(typeof e=="string"&&(e=gu.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return n.type==="stream"?new SS(n.module,e,r,!0):n.type==="auth"?new _S(n.module,e,r,!0):new cc(n.module,e,r)}(0,ot.exports)(cc,D2),cc.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return gu.concat(n)},cc.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(e){var r=e[15];if(r<1||r>16)throw new Error("unable to decrypt data");for(var n=-1;++n<r;)if(e[n+(16-r)]!==r)throw new Error("unable to decrypt data");if(r!==16)return e.slice(0,16-r)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},cc.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},yf.prototype.add=function(t){this.cache=gu.concat([this.cache,t])},yf.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},yf.prototype.flush=function(){if(this.cache.length)return this.cache},fp.createDecipher=function(t,e){var r=k2[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=IS(e,!1,r.key,r.iv);return n1(t,n.key,n.iv)},fp.createDecipheriv=n1;var i1=ap,o1=fp,AS=v2;En.createCipher=En.Cipher=i1.createCipher,En.createCipheriv=En.Cipheriv=i1.createCipheriv,En.createDecipher=En.Decipher=o1.createDecipher,En.createDecipheriv=En.Decipheriv=o1.createDecipheriv,En.listCiphers=En.getCiphers=function(){return Object.keys(AS)};var x2={};(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(x2);var T2=Z_,o0=En,Yo=i0,wo=x2,a1=lh;function s1(t,e,r){if(t=t.toLowerCase(),Yo[t])return o0.createCipheriv(t,e,r);if(wo[t])return new T2({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function u1(t,e,r){if(t=t.toLowerCase(),Yo[t])return o0.createDecipheriv(t,e,r);if(wo[t])return new T2({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}di.createCipher=di.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),Yo[t])r=Yo[t].key,n=Yo[t].iv;else{if(!wo[t])throw new TypeError("invalid suite type");r=8*wo[t].key,n=wo[t].iv}var i=a1(e,!1,r,n);return s1(t,i.key,i.iv)},di.createCipheriv=di.Cipheriv=s1,di.createDecipher=di.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),Yo[t])r=Yo[t].key,n=Yo[t].iv;else{if(!wo[t])throw new TypeError("invalid suite type");r=8*wo[t].key,n=wo[t].iv}var i=a1(e,!1,r,n);return u1(t,i.key,i.iv)},di.createDecipheriv=di.Decipheriv=u1,di.listCiphers=di.getCiphers=function(){return Object.keys(wo).concat(o0.getCiphers())};var xs={},Da=Qt.exports,kS=Rc.exports;function Ma(t){this.rand=t||new kS.Rand}var O2=Ma;Ma.create=function(t){return new Ma(t)},Ma.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do var n=new Da(this.rand.generate(r));while(n.cmp(t)>=0);return n},Ma.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},Ma.prototype.test=function(t,e,r){var n=t.bitLength(),i=Da.mont(t),o=new Da(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var c=t.shrn(s),f=a.toRed(i);e>0;e--){var h=this._randrange(new Da(2),a);r&&r(h);var y=h.toRed(i).redPow(c);if(y.cmp(o)!==0&&y.cmp(f)!==0){for(var g=1;g<s;g++){if((y=y.redSqr()).cmp(o)===0)return!1;if(y.cmp(f)===0)break}if(g===s)return!1}}return!0},Ma.prototype.getDivisor=function(t,e){var r=t.bitLength(),n=Da.mont(t),i=new Da(1).toRed(n);e||(e=Math.max(1,r/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var s=t.shrn(a),c=o.toRed(n);e>0;e--){var f=this._randrange(new Da(2),o),h=t.gcd(f);if(h.cmpn(1)!==0)return h;var y=f.toRed(n).redPow(s);if(y.cmp(i)!==0&&y.cmp(c)!==0){for(var g=1;g<a;g++){if((y=y.redSqr()).cmp(i)===0)return y.fromRed().subn(1).gcd(t);if(y.cmp(c)===0)break}if(g===a)return(y=y.redSqr()).fromRed().subn(1).gcd(t)}}return!1};var DS=aa.exports,P2=yp;yp.simpleSieve=dp,yp.fermatTest=pp;var Ur=Qt.exports,xS=new Ur(24),c1=new O2,TS=new Ur(1),hp=new Ur(2),OS=new Ur(5);new Ur(16),new Ur(8);var PS=new Ur(10),RS=new Ur(3);new Ur(7);var CS=new Ur(11),l1=new Ur(4);new Ur(12);var gd=null;function dp(t){for(var e=function(){if(gd!==null)return gd;var n=[];n[0]=2;for(var i=1,o=3;o<1048576;o+=2){for(var a=Math.ceil(Math.sqrt(o)),s=0;s<i&&n[s]<=a&&o%n[s]!=0;s++);i!==s&&n[s]<=a||(n[i++]=o)}return gd=n,n}(),r=0;r<e.length;r++)if(t.modn(e[r])===0)return t.cmpn(e[r])===0;return!0}function pp(t){var e=Ur.mont(t);return hp.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)===0}function yp(t,e){if(t<16)return new Ur(e===2||e===5?[140,123]:[140,39]);var r,n;for(e=new Ur(e);;){for(r=new Ur(DS(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(TS),r.testn(1)||r.iadd(hp),e.cmp(hp)){if(!e.cmp(OS))for(;r.mod(PS).cmp(RS);)r.iadd(l1)}else for(;r.mod(xS).cmp(CS);)r.iadd(l1);if(dp(n=r.shrn(1))&&dp(r)&&pp(n)&&pp(r)&&c1.test(n)&&c1.test(r))return r}}var MS={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},ri=Qt.exports,f1=new O2,NS=new ri(24),jS=new ri(11),BS=new ri(10),LS=new ri(3),FS=new ri(7),h1=P2,US=aa.exports,zS=bo;function KS(t,e){return e=e||"utf8",kn(t)||(t=new ye(t,e)),this._pub=new ri(t),this}function qS(t,e){return e=e||"utf8",kn(t)||(t=new ye(t,e)),this._priv=new ri(t),this}var Sl={};function bo(t,e,r){this.setGenerator(e),this.__prime=new ri(t),this._prime=ri.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=KS,this.setPrivateKey=qS):this._primeCode=8}function El(t,e){var r=new ye(t.toArray());return e?r.toString(e):r}Object.defineProperty(bo.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in Sl)return Sl[n];var i,o=0;if(t.isEven()||!h1.simpleSieve||!h1.fermatTest(t)||!f1.test(t))return o+=1,o+=r==="02"||r==="05"?8:4,Sl[n]=o,o;switch(f1.test(t.shrn(1))||(o+=2),r){case"02":t.mod(NS).cmp(jS)&&(o+=8);break;case"05":(i=t.mod(BS)).cmp(LS)&&i.cmp(FS)&&(o+=8);break;default:o+=4}return Sl[n]=o,o}(this.__prime,this.__gen)),this._primeCode}}),bo.prototype.generateKeys=function(){return this._priv||(this._priv=new ri(US(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},bo.prototype.computeSecret=function(t){var e=new ye((t=(t=new ri(t)).toRed(this._prime)).redPow(this._priv).fromRed().toArray()),r=this.getPrime();if(e.length<r.length){var n=new ye(r.length-e.length);n.fill(0),e=ye.concat([n,e])}return e},bo.prototype.getPublicKey=function(t){return El(this._pub,t)},bo.prototype.getPrivateKey=function(t){return El(this._priv,t)},bo.prototype.getPrime=function(t){return El(this.__prime,t)},bo.prototype.getGenerator=function(t){return El(this._gen,t)},bo.prototype.setGenerator=function(t,e){return e=e||"utf8",kn(t)||(t=new ye(t,e)),this.__gen=t,this._gen=new ri(t),this};var HS=P2,d1=MS,md=zS,VS={binary:!0,hex:!0,base64:!0};xs.DiffieHellmanGroup=xs.createDiffieHellmanGroup=xs.getDiffieHellman=function(t){var e=new ye(d1[t].prime,"hex"),r=new ye(d1[t].gen,"hex");return new md(e,r)},xs.createDiffieHellman=xs.DiffieHellman=function t(e,r,n,i){return kn(r)||VS[r]===void 0?t(e,"binary",r,n):(r=r||"binary",i=i||"binary",kn(n=n||new ye([2]))||(n=new ye(n,i)),typeof e=="number"?new md(HS(e,n),n,!0):(kn(e)||(e=new ye(e,r)),new md(e,n,!0)))};var gf={exports:{}},Ts=Qt.exports,WS=aa.exports;function R2(t){var e,r=t.modulus.byteLength();do e=new Ts(WS(r));while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function C2(t,e){var r=function(_){var E=R2(_);return{blinder:E.toRed(Ts.mont(_.modulus)).redPow(new Ts(_.publicExponent)).fromRed(),unblinder:E.invm(_.modulus)}}(e),n=e.modulus.byteLength(),i=new Ts(t).mul(r.blinder).umod(e.modulus),o=i.toRed(Ts.mont(e.prime1)),a=i.toRed(Ts.mont(e.prime2)),s=e.coefficient,c=e.prime1,f=e.prime2,h=o.redPow(e.exponent1).fromRed(),y=a.redPow(e.exponent2).fromRed(),g=h.isub(y).imul(s).umod(c).imul(f);return y.iadd(g).imul(r.unblinder).umod(e.modulus).toArrayLike(ye,"be",n)}C2.getr=R2;var a0=C2,xi={},Ti=as,p1=Ti.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),JS=Ti.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s0=Ti.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),YS=Ti.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s0),this.key("subjectPublicKey").bitstr())}),ZS=Ti.define("RelativeDistinguishedName",function(){this.setof(JS)}),XS=Ti.define("RDNSequence",function(){this.seqof(ZS)}),y1=Ti.define("Name",function(){this.choice({rdnSequence:this.use(XS)})}),GS=Ti.define("Validity",function(){this.seq().obj(this.key("notBefore").use(p1),this.key("notAfter").use(p1))}),$S=Ti.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),QS=Ti.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s0),this.key("issuer").use(y1),this.key("validity").use(GS),this.key("subject").use(y1),this.key("subjectPublicKeyInfo").use(YS),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof($S).optional())}),eE=Ti.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(QS),this.key("signatureAlgorithm").use(s0),this.key("signatureValue").bitstr())}),Oi=as;xi.certificate=eE;var tE=Oi.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});xi.RSAPrivateKey=tE;var rE=Oi.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});xi.RSAPublicKey=rE;var nE=Oi.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(M2),this.key("subjectPublicKey").bitstr())});xi.PublicKey=nE;var M2=Oi.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),iE=Oi.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(M2),this.key("subjectPrivateKey").octstr())});xi.PrivateKey=iE;var oE=Oi.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});xi.EncryptedPrivateKey=oE;var aE=Oi.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});xi.DSAPrivateKey=aE,xi.DSAparam=Oi.define("DSAparam",function(){this.int()});var sE=Oi.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(uE),this.key("publicKey").optional().explicit(1).bitstr())});xi.ECPrivateKey=sE;var uE=Oi.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});xi.signature=Oi.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var cE=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,lE=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fE=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,hE=lh,dE=En,Il=Ye.exports.Buffer,on=xi,pE={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},yE=function(t,e){var r,n=t.toString(),i=n.match(cE);if(i){var o="aes"+i[1],a=Il.from(i[2],"hex"),s=Il.from(i[3].replace(/[\r\n]/g,""),"base64"),c=hE(e,a.slice(0,8),parseInt(i[1],10)).key,f=[],h=dE.createDecipheriv(o,c,a);f.push(h.update(s)),f.push(h.final()),r=Il.concat(f)}else{var y=n.match(fE);r=Il.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:n.match(lE)[1],data:r}},gE=En,mE=jc,bd=Ye.exports.Buffer,fh=N2;function N2(t){var e;typeof t!="object"||bd.isBuffer(t)||(e=t.passphrase,t=t.key),typeof t=="string"&&(t=bd.from(t));var r,n,i=yE(t,e),o=i.tag,a=i.data;switch(o){case"CERTIFICATE":n=on.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(n||(n=on.PublicKey.decode(a,"der")),r=n.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return on.RSAPublicKey.decode(n.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return n.subjectPrivateKey=n.subjectPublicKey,{type:"ec",data:n};case"1.2.840.10040.4.1":return n.algorithm.params.pub_key=on.DSAparam.decode(n.subjectPublicKey.data,"der"),{type:"dsa",data:n.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":a=function(s,c){var f=s.algorithm.decrypt.kde.kdeparams.salt,h=parseInt(s.algorithm.decrypt.kde.kdeparams.iters.toString(),10),y=pE[s.algorithm.decrypt.cipher.algo.join(".")],g=s.algorithm.decrypt.cipher.iv,_=s.subjectPrivateKey,E=parseInt(y.split("-")[1],10)/8,O=mE.pbkdf2Sync(c,f,h,E,"sha1"),R=gE.createDecipheriv(y,O,g),L=[];return L.push(R.update(_)),L.push(R.final()),bd.concat(L)}(a=on.EncryptedPrivateKey.decode(a,"der"),e);case"PRIVATE KEY":switch(r=(n=on.PrivateKey.decode(a,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return on.RSAPrivateKey.decode(n.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:n.algorithm.curve,privateKey:on.ECPrivateKey.decode(n.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return n.algorithm.params.priv_key=on.DSAparam.decode(n.subjectPrivateKey,"der"),{type:"dsa",params:n.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return on.RSAPublicKey.decode(a,"der");case"RSA PRIVATE KEY":return on.RSAPrivateKey.decode(a,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:on.DSAPrivateKey.decode(a,"der")};case"EC PRIVATE KEY":return{curve:(a=on.ECPrivateKey.decode(a,"der")).parameters.value,privateKey:a.privateKey};default:throw new Error("unknown key type "+o)}}N2.signature=on.signature;var j2={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},Lr=Ye.exports.Buffer,Wa=o2,bE=a0,vE=oa.ec,Uf=Qt.exports,wE=fh,_E=j2;function g1(t,e,r,n){if((t=Lr.from(t.toArray())).length<e.byteLength()){var i=Lr.alloc(e.byteLength()-t.length);t=Lr.concat([i,t])}var o=r.length,a=function(f,h){f=(f=u0(f,h)).mod(h);var y=Lr.from(f.toArray());if(y.length<h.byteLength()){var g=Lr.alloc(h.byteLength()-y.length);y=Lr.concat([g,y])}return y}(r,e),s=Lr.alloc(o);s.fill(1);var c=Lr.alloc(o);return c=Wa(n,c).update(s).update(Lr.from([0])).update(t).update(a).digest(),s=Wa(n,c).update(s).digest(),{k:c=Wa(n,c).update(s).update(Lr.from([1])).update(t).update(a).digest(),v:s=Wa(n,c).update(s).digest()}}function u0(t,e){var r=new Uf(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function m1(t,e,r){var n,i;do{for(n=Lr.alloc(0);8*n.length<t.bitLength();)e.v=Wa(r,e.k).update(e.v).digest(),n=Lr.concat([n,e.v]);i=u0(n,t),e.k=Wa(r,e.k).update(e.v).update(Lr.from([0])).digest(),e.v=Wa(r,e.k).update(e.v).digest()}while(i.cmp(t)!==-1);return i}function SE(t,e,r,n){return t.toRed(Uf.mont(r)).redPow(e).fromRed().mod(n)}gf.exports=function(t,e,r,n,i){var o=wE(e);if(o.curve){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");return function(f,h){var y=_E[h.curve.join(".")];if(!y)throw new Error("unknown curve "+h.curve.join("."));var g=new vE(y).keyFromPrivate(h.privateKey).sign(f);return Lr.from(g.toDER())}(t,o)}if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong private key type");return function(f,h,y){for(var g,_=h.params.priv_key,E=h.params.p,O=h.params.q,R=h.params.g,L=new Uf(0),q=u0(f,O).mod(O),X=!1,ne=g1(_,O,f,y);X===!1;)L=SE(R,g=m1(O,ne,y),E,O),(X=g.invm(O).imul(q.add(_.mul(L))).mod(O)).cmpn(0)===0&&(X=!1,L=new Uf(0));return function(W,H){W=W.toArray(),H=H.toArray(),128&W[0]&&(W=[0].concat(W)),128&H[0]&&(H=[0].concat(H));var Y=[48,W.length+H.length+4,2,W.length];return Y=Y.concat(W,[2,H.length],H),Lr.from(Y)}(L,X)}(t,o,r)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");t=Lr.concat([i,t]);for(var a=o.modulus.byteLength(),s=[0,1];t.length+s.length+1<a;)s.push(255);s.push(0);for(var c=-1;++c<t.length;)s.push(t[c]);return bE(s,o)},gf.exports.getKey=g1,gf.exports.makeKey=m1;var vd=Ye.exports.Buffer,Vu=Qt.exports,EE=oa.ec,b1=fh,IE=j2;function v1(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}var AE=function(t,e,r,n,i){var o=b1(r);if(o.type==="ec"){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");return function(g,_,E){var O=IE[E.data.algorithm.curve.join(".")];if(!O)throw new Error("unknown curve "+E.data.algorithm.curve.join("."));var R=new EE(O),L=E.data.subjectPrivateKey.data;return R.verify(_,g,L)}(t,e,o)}if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong public key type");return function(g,_,E){var O=E.data.p,R=E.data.q,L=E.data.g,q=E.data.pub_key,X=b1.signature.decode(g,"der"),ne=X.s,W=X.r;v1(ne,R),v1(W,R);var H=Vu.mont(O),Y=ne.invm(R);return L.toRed(H).redPow(new Vu(_).mul(Y).mod(R)).fromRed().mul(q.toRed(H).redPow(W.mul(Y).mod(R)).fromRed()).mod(O).mod(R).cmp(W)===0}(t,e,o)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");e=vd.concat([i,e]);for(var a=o.modulus.byteLength(),s=[1],c=0;e.length+s.length+2<a;)s.push(255),c++;s.push(0);for(var f=-1;++f<e.length;)s.push(e[f]);s=vd.from(s);var h=Vu.mont(o.modulus);t=(t=new Vu(t).toRed(h)).redPow(new Vu(o.publicExponent)),t=vd.from(t.fromRed().toArray());var y=c<8?1:0;for(a=Math.min(t.length,s.length),t.length!==s.length&&(y=1),f=-1;++f<a;)y|=t[f]^s[f];return y===0},Al=Ye.exports.Buffer,B2=ss,zf=t0,w1=ot.exports,kE=gf.exports,DE=AE,Ua=a2;function lc(t){zf.Writable.call(this);var e=Ua[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=B2(e.hash),this._tag=e.id,this._signType=e.sign}function fc(t){zf.Writable.call(this);var e=Ua[t];if(!e)throw new Error("Unknown message digest");this._hash=B2(e.hash),this._tag=e.id,this._signType=e.sign}function _1(t){return new lc(t)}function S1(t){return new fc(t)}Object.keys(Ua).forEach(function(t){Ua[t].id=Al.from(Ua[t].id,"hex"),Ua[t.toLowerCase()]=Ua[t]}),w1(lc,zf.Writable),lc.prototype._write=function(t,e,r){this._hash.update(t),r()},lc.prototype.update=function(t,e){return typeof t=="string"&&(t=Al.from(t,e)),this._hash.update(t),this},lc.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=kE(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},w1(fc,zf.Writable),fc.prototype._write=function(t,e,r){this._hash.update(t),r()},fc.prototype.update=function(t,e){return typeof t=="string"&&(t=Al.from(t,e)),this._hash.update(t),this},fc.prototype.verify=function(t,e,r){typeof e=="string"&&(e=Al.from(e,r)),this.end();var n=this._hash.digest();return DE(e,n,t,this._signType,this._tag)};var xE={Sign:_1,Verify:S1,createSign:_1,createVerify:S1},TE=oa,OE=Qt.exports,wn={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function Na(t){this.curveType=wn[t],this.curveType||(this.curveType={name:t}),this.curve=new TE.ec(this.curveType.name),this.keys=void 0}function wd(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new ye(t);if(r&&n.length<r){var i=new ye(r-n.length);i.fill(0),n=ye.concat([i,n])}return e?n.toString(e):n}wn.p224=wn.secp224r1,wn.p256=wn.secp256r1=wn.prime256v1,wn.p192=wn.secp192r1=wn.prime192v1,wn.p384=wn.secp384r1,wn.p521=wn.secp521r1,Na.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},Na.prototype.computeSecret=function(t,e,r){return e=e||"utf8",kn(t)||(t=new ye(t,e)),wd(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},Na.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic(e==="compressed",!0);return e==="hybrid"&&(r[r.length-1]%2?r[0]=7:r[0]=6),wd(r,t)},Na.prototype.getPrivateKey=function(t){return wd(this.keys.getPrivate(),t)},Na.prototype.setPublicKey=function(t,e){return e=e||"utf8",kn(t)||(t=new ye(t,e)),this.keys._importPublic(t),this},Na.prototype.setPrivateKey=function(t,e){e=e||"utf8",kn(t)||(t=new ye(t,e));var r=new OE(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this};var L2={},PE=ss,gp=Ye.exports.Buffer,F2=function(t,e){for(var r,n=gp.alloc(0),i=0;n.length<e;)r=RE(i++),n=gp.concat([n,PE("sha1").update(t).update(r).digest()]);return n.slice(0,e)};function RE(t){var e=gp.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var U2=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t},E1=Qt.exports,CE=Ye.exports.Buffer,z2=function(t,e){return CE.from(t.toRed(E1.mont(e.modulus)).redPow(new E1(e.publicExponent)).fromRed().toArray())},ME=fh,_d=aa.exports,NE=ss,I1=F2,A1=U2,Sd=Qt.exports,jE=z2,BE=a0,ui=Ye.exports.Buffer,LE=function(t,e,r){var n;n=t.padding?t.padding:r?1:4;var i,o=ME(t);if(n===4)i=function(a,s){var c=a.modulus.byteLength(),f=s.length,h=NE("sha1").update(ui.alloc(0)).digest(),y=h.length,g=2*y;if(f>c-g-2)throw new Error("message too long");var _=ui.alloc(c-f-g-2),E=c-y-1,O=_d(y),R=A1(ui.concat([h,_,ui.alloc(1,1),s],E),I1(O,E)),L=A1(O,I1(R,y));return new Sd(ui.concat([ui.alloc(1),L,R],c))}(o,e);else if(n===1)i=function(a,s,c){var f,h=s.length,y=a.modulus.byteLength();if(h>y-11)throw new Error("message too long");return f=c?ui.alloc(y-h-3,255):function(g){for(var _,E=ui.allocUnsafe(g),O=0,R=_d(2*g),L=0;O<g;)L===R.length&&(R=_d(2*g),L=0),(_=R[L++])&&(E[O++]=_);return E}(y-h-3),new Sd(ui.concat([ui.from([0,c?1:2]),f,ui.alloc(1),s],y))}(o,e,r);else{if(n!==3)throw new Error("unknown padding");if((i=new Sd(e)).cmp(o.modulus)>=0)throw new Error("data too long for modulus")}return r?BE(i,o):jE(i,o)},FE=fh,k1=F2,D1=U2,x1=Qt.exports,UE=a0,zE=ss,KE=z2,Wu=Ye.exports.Buffer,qE=function(t,e,r){var n;n=t.padding?t.padding:r?1:4;var i,o=FE(t),a=o.modulus.byteLength();if(e.length>a||new x1(e).cmp(o.modulus)>=0)throw new Error("decryption error");i=r?KE(new x1(e),o):UE(e,o);var s=Wu.alloc(a-i.length);if(i=Wu.concat([s,i],a),n===4)return function(c,f){var h=c.modulus.byteLength(),y=zE("sha1").update(Wu.alloc(0)).digest(),g=y.length;if(f[0]!==0)throw new Error("decryption error");var _=f.slice(1,g+1),E=f.slice(g+1),O=D1(_,k1(E,g)),R=D1(E,k1(O,h-g-1));if(function(q,X){q=Wu.from(q),X=Wu.from(X);var ne=0,W=q.length;q.length!==X.length&&(ne++,W=Math.min(q.length,X.length));for(var H=-1;++H<W;)ne+=q[H]^X[H];return ne}(y,R.slice(0,g)))throw new Error("decryption error");for(var L=g;R[L]===0;)L++;if(R[L++]!==1)throw new Error("decryption error");return R.slice(L)}(o,i);if(n===1)return function(c,f,h){for(var y=f.slice(0,2),g=2,_=0;f[g++]!==0;)if(g>=f.length){_++;break}var E=f.slice(2,g-1);if((y.toString("hex")!=="0002"&&!h||y.toString("hex")!=="0001"&&h)&&_++,E.length<8&&_++,_)throw new Error("decryption error");return f.slice(g)}(0,i,r);if(n===3)return i;throw new Error("unknown padding")};(function(t){t.publicEncrypt=LE,t.privateDecrypt=qE,t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)}})(L2);var hc={};function T1(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var K2=Ye.exports,O1=K2.Buffer,q2=K2.kMaxLength,mp=ae.crypto||ae.msCrypto,H2=Math.pow(2,32)-1;function P1(t,e){if(typeof t!="number"||t!=t)throw new TypeError("offset must be a number");if(t>H2||t<0)throw new TypeError("offset must be a uint32");if(t>q2||t>e)throw new RangeError("offset out of range")}function R1(t,e,r){if(typeof t!="number"||t!=t)throw new TypeError("size must be a number");if(t>H2||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>q2)throw new RangeError("buffer too small")}function C1(t,e,r,n){var i=t.buffer,o=new Uint8Array(i,e,r);return mp.getRandomValues(o),n?void xr(function(){n(null,t)}):t}mp&&mp.getRandomValues?(hc.randomFill=function(t,e,r,n){if(!(O1.isBuffer(t)||t instanceof ae.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")n=e,e=0,r=t.length;else if(typeof r=="function")n=r,r=t.length-e;else if(typeof n!="function")throw new TypeError('"cb" argument must be a function');return P1(e,t.length),R1(r,e,t.length),C1(t,e,r,n)},hc.randomFillSync=function(t,e,r){if(e===void 0&&(e=0),!(O1.isBuffer(t)||t instanceof ae.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return P1(e,t.length),r===void 0&&(r=t.length-e),R1(r,e,t.length),C1(t,e,r)}):(hc.randomFill=T1,hc.randomFillSync=T1);var HE=Ge.randomBytes=Ge.rng=Ge.pseudoRandomBytes=Ge.prng=aa.exports,M1=Ge.createHash=Ge.Hash=ss,N1=Ge.createHmac=Ge.Hmac=o2,VE=F_,WE=Object.keys(VE),JE=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(WE);Ge.getHashes=function(){return JE};var j1=jc;Ge.pbkdf2=j1.pbkdf2,Ge.pbkdf2Sync=j1.pbkdf2Sync;var Fi=di;Ge.Cipher=Fi.Cipher,Ge.createCipher=Fi.createCipher,Ge.Cipheriv=Fi.Cipheriv,Ge.createCipheriv=Fi.createCipheriv,Ge.Decipher=Fi.Decipher,Ge.createDecipher=Fi.createDecipher,Ge.Decipheriv=Fi.Decipheriv,Ge.createDecipheriv=Fi.createDecipheriv,Ge.getCiphers=Fi.getCiphers,Ge.listCiphers=Fi.listCiphers;var Ju=xs;Ge.DiffieHellmanGroup=Ju.DiffieHellmanGroup,Ge.createDiffieHellmanGroup=Ju.createDiffieHellmanGroup,Ge.getDiffieHellman=Ju.getDiffieHellman,Ge.createDiffieHellman=Ju.createDiffieHellman,Ge.DiffieHellman=Ju.DiffieHellman;var kl=xE;Ge.createSign=kl.createSign,Ge.Sign=kl.Sign,Ge.createVerify=kl.createVerify,Ge.Verify=kl.Verify,Ge.createECDH=function(t){return new Na(t)};var Dl=L2;Ge.publicEncrypt=Dl.publicEncrypt,Ge.privateEncrypt=Dl.privateEncrypt,Ge.publicDecrypt=Dl.publicDecrypt,Ge.privateDecrypt=Dl.privateDecrypt;var B1=hc;Ge.randomFill=B1.randomFill,Ge.randomFillSync=B1.randomFillSync,Ge.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},Ge.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var za=Ge;Object.defineProperty(cn,"__esModule",{value:!0}),cn.getCrypto=cn.getRootWebCrypto=cn.getWebCrypto=cn.getNodeCrypto=void 0;var c0=function(){return typeof window<"u"?void 0:Ge};cn.getNodeCrypto=c0;var l0=function(){if(typeof window<"u"&&window.crypto)return window.crypto.subtle};cn.getWebCrypto=l0;var V2=function(){if(typeof window<"u"&&window.crypto)return window.crypto};cn.getRootWebCrypto=V2;var L1=function(){var t=l0(),e=c0();return e!==void 0?{name:"nodeCrypto",crypto:e}:t!==void 0?{name:"webCrypto",crypto:t}:{name:void 0}};cn.getCrypto=L1,cn.default={getNodeCrypto:c0,getWebCrypto:l0,getRootWebCrypto:V2,getCrypto:L1};var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.default={hashes:{"SHA3-512":{nodeName:"sha3-512",hashSize:64},"SHA3-384":{nodeName:"sha3-384",hashSize:48},"SHA3-256":{nodeName:"sha3-256",hashSize:32},"SHA3-224":{nodeName:"sha3-224",hashSize:28},"SHA-256":{nodeName:"sha256",hashSize:32},"SHA-384":{nodeName:"sha384",hashSize:48},"SHA-512":{nodeName:"sha512",hashSize:64},"SHA-1":{nodeName:"sha1",hashSize:20},MD5:{nodeName:"md5",hashSize:16}}};var xl,Yu,W2={exports:{}},J2={exports:{}};xl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yu={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&Yu.rotl(t,8)|4278255360&Yu.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=Yu.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(xl.charAt(n>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,n=0;r<t.length;n=++r%4)n!=0&&e.push((xl.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|xl.indexOf(t.charAt(r))>>>6-2*n);return e}},J2.exports=Yu;var bp={utf8:{stringToBytes:function(t){return bp.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(bp.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}},F1=bp,YE=function(t){return t!=null&&(U1(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&U1(e.slice(0,0))}(t)||!!t._isBuffer)};function U1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}(function(){var t=J2.exports,e=F1.utf8,r=YE,n=F1.bin,i=function(o,a){o.constructor==String?o=a&&a.encoding==="binary"?n.stringToBytes(o):e.stringToBytes(o):r(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||o.constructor===Uint8Array||(o=o.toString());for(var s=t.bytesToWords(o),c=8*o.length,f=1732584193,h=-271733879,y=-1732584194,g=271733878,_=0;_<s.length;_++)s[_]=16711935&(s[_]<<8|s[_]>>>24)|4278255360&(s[_]<<24|s[_]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var E=i._ff,O=i._gg,R=i._hh,L=i._ii;for(_=0;_<s.length;_+=16){var q=f,X=h,ne=y,W=g;f=E(f,h,y,g,s[_+0],7,-680876936),g=E(g,f,h,y,s[_+1],12,-389564586),y=E(y,g,f,h,s[_+2],17,606105819),h=E(h,y,g,f,s[_+3],22,-1044525330),f=E(f,h,y,g,s[_+4],7,-176418897),g=E(g,f,h,y,s[_+5],12,1200080426),y=E(y,g,f,h,s[_+6],17,-1473231341),h=E(h,y,g,f,s[_+7],22,-45705983),f=E(f,h,y,g,s[_+8],7,1770035416),g=E(g,f,h,y,s[_+9],12,-1958414417),y=E(y,g,f,h,s[_+10],17,-42063),h=E(h,y,g,f,s[_+11],22,-1990404162),f=E(f,h,y,g,s[_+12],7,1804603682),g=E(g,f,h,y,s[_+13],12,-40341101),y=E(y,g,f,h,s[_+14],17,-1502002290),f=O(f,h=E(h,y,g,f,s[_+15],22,1236535329),y,g,s[_+1],5,-165796510),g=O(g,f,h,y,s[_+6],9,-1069501632),y=O(y,g,f,h,s[_+11],14,643717713),h=O(h,y,g,f,s[_+0],20,-373897302),f=O(f,h,y,g,s[_+5],5,-701558691),g=O(g,f,h,y,s[_+10],9,38016083),y=O(y,g,f,h,s[_+15],14,-660478335),h=O(h,y,g,f,s[_+4],20,-405537848),f=O(f,h,y,g,s[_+9],5,568446438),g=O(g,f,h,y,s[_+14],9,-1019803690),y=O(y,g,f,h,s[_+3],14,-187363961),h=O(h,y,g,f,s[_+8],20,1163531501),f=O(f,h,y,g,s[_+13],5,-1444681467),g=O(g,f,h,y,s[_+2],9,-51403784),y=O(y,g,f,h,s[_+7],14,1735328473),f=R(f,h=O(h,y,g,f,s[_+12],20,-1926607734),y,g,s[_+5],4,-378558),g=R(g,f,h,y,s[_+8],11,-2022574463),y=R(y,g,f,h,s[_+11],16,1839030562),h=R(h,y,g,f,s[_+14],23,-35309556),f=R(f,h,y,g,s[_+1],4,-1530992060),g=R(g,f,h,y,s[_+4],11,1272893353),y=R(y,g,f,h,s[_+7],16,-155497632),h=R(h,y,g,f,s[_+10],23,-1094730640),f=R(f,h,y,g,s[_+13],4,681279174),g=R(g,f,h,y,s[_+0],11,-358537222),y=R(y,g,f,h,s[_+3],16,-722521979),h=R(h,y,g,f,s[_+6],23,76029189),f=R(f,h,y,g,s[_+9],4,-640364487),g=R(g,f,h,y,s[_+12],11,-421815835),y=R(y,g,f,h,s[_+15],16,530742520),f=L(f,h=R(h,y,g,f,s[_+2],23,-995338651),y,g,s[_+0],6,-198630844),g=L(g,f,h,y,s[_+7],10,1126891415),y=L(y,g,f,h,s[_+14],15,-1416354905),h=L(h,y,g,f,s[_+5],21,-57434055),f=L(f,h,y,g,s[_+12],6,1700485571),g=L(g,f,h,y,s[_+3],10,-1894986606),y=L(y,g,f,h,s[_+10],15,-1051523),h=L(h,y,g,f,s[_+1],21,-2054922799),f=L(f,h,y,g,s[_+8],6,1873313359),g=L(g,f,h,y,s[_+15],10,-30611744),y=L(y,g,f,h,s[_+6],15,-1560198380),h=L(h,y,g,f,s[_+13],21,1309151649),f=L(f,h,y,g,s[_+4],6,-145523070),g=L(g,f,h,y,s[_+11],10,-1120210379),y=L(y,g,f,h,s[_+2],15,718787259),h=L(h,y,g,f,s[_+9],21,-343485551),f=f+q>>>0,h=h+X>>>0,y=y+ne>>>0,g=g+W>>>0}return t.endian([f,h,y,g])};i._ff=function(o,a,s,c,f,h,y){var g=o+(a&s|~a&c)+(f>>>0)+y;return(g<<h|g>>>32-h)+a},i._gg=function(o,a,s,c,f,h,y){var g=o+(a&c|s&~c)+(f>>>0)+y;return(g<<h|g>>>32-h)+a},i._hh=function(o,a,s,c,f,h,y){var g=o+(a^s^c)+(f>>>0)+y;return(g<<h|g>>>32-h)+a},i._ii=function(o,a,s,c,f,h,y){var g=o+(s^(a|~c))+(f>>>0)+y;return(g<<h|g>>>32-h)+a},i._blocksize=16,i._digestsize=16,W2.exports=function(o,a){if(o==null)throw new Error("Illegal argument "+o);var s=t.wordsToBytes(i(o,a));return a&&a.asBytes?s:a&&a.asString?n.bytesToString(s):t.bytesToHex(s)}})();var Y2={},z1={},K1={},Z2={},h0=function(t,e){return function(r,n){var i=2*n,o=2*e;r[i]=t[o],r[i+1]=t[o+1]}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=h0)&&e.__esModule?e:{default:e},n=function(i){for(var o=i.A,a=i.C,s=0;s<25;s+=5){for(var c=0;c<5;c++)(0,r.default)(o,s+c)(a,c);for(var f=0;f<5;f++){var h=2*(s+f),y=(f+1)%5*2,g=(f+2)%5*2;o[h]^=~a[y]&a[g],o[h+1]^=~a[y+1]&a[g+1]}}};t.default=n})(Z2);var X2={},q1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);t.default=e})(q1),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=q1)&&e.__esModule?e:{default:e},n=function(i){var o=i.A,a=2*i.roundIndex;o[0]^=r.default[a],o[1]^=r.default[a+1]};t.default=n}(X2);var G2={},$2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];t.default=e})($2);var H1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44];t.default=e})(H1),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i($2),r=i(H1),n=i(h0);function i(a){return a&&a.__esModule?a:{default:a}}var o=function(a){var s=a.A,c=a.C,f=a.W;(0,n.default)(s,1)(f,0);for(var h=0,y=0,g=0,_=32,E=0;E<24;E++){var O=e.default[E],R=r.default[E];(0,n.default)(s,O)(c,0),h=f[0],y=f[1],_=32-R,f[g=R<32?0:1]=h<<R|y>>>_,f[(g+1)%2]=y<<R|h>>>_,(0,n.default)(f,0)(s,O),(0,n.default)(c,0)(f,0)}};t.default=o}(G2);var V1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=h0)&&e.__esModule?e:{default:e},n=function(i){for(var o=i.A,a=i.C,s=i.D,c=i.W,f=0,h=0,y=0;y<5;y++){var g=2*y,_=2*(y+5),E=2*(y+10),O=2*(y+15),R=2*(y+20);a[g]=o[g]^o[_]^o[E]^o[O]^o[R],a[g+1]=o[g+1]^o[_+1]^o[E+1]^o[O+1]^o[R+1]}for(var L=0;L<5;L++){(0,r.default)(a,(L+1)%5)(c,0),f=c[0],h=c[1],c[0]=f<<1|h>>>31,c[1]=h<<1|f>>>31,s[2*L]=a[(L+4)%5*2]^c[0],s[2*L+1]=a[(L+4)%5*2+1]^c[1];for(var q=0;q<25;q+=5)o[2*(q+L)]^=s[2*L],o[2*(q+L)+1]^=s[2*L+1]}};t.default=n})(V1),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(Z2),r=o(X2),n=o(G2),i=o(V1);function o(s){return s&&s.__esModule?s:{default:s}}var a=function(){var s=new Uint32Array(10),c=new Uint32Array(10),f=new Uint32Array(2);return function(h){for(var y=0;y<24;y++)(0,i.default)({A:h,C:s,D:c,W:f}),(0,n.default)({A:h,C:s,W:f}),(0,e.default)({A:h,C:s}),(0,r.default)({A:h,roundIndex:y});s.fill(0),c.fill(0),f.fill(0)}};t.default=a}(K1),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=Se,n=(e=K1)&&e.__esModule?e:{default:e},i=function(s,c){for(var f=0;f<s.length;f+=8){var h=f/4;c[h]^=s[f+7]<<24|s[f+6]<<16|s[f+5]<<8|s[f+4],c[h+1]^=s[f+3]<<24|s[f+2]<<16|s[f+1]<<8|s[f]}return c},o=function(s,c){for(var f=0;f<c.length;f+=8){var h=f/4;c[f]=s[h+1],c[f+1]=s[h+1]>>>8,c[f+2]=s[h+1]>>>16,c[f+3]=s[h+1]>>>24,c[f+4]=s[h],c[f+5]=s[h]>>>8,c[f+6]=s[h]>>>16,c[f+7]=s[h]>>>24}return c},a=function(s){var c=this,f=s.capacity,h=s.padding,y=(0,n.default)(),g=f/8,_=200-f/4,E=0,O=new Uint32Array(50),R=r.Buffer.allocUnsafe(_);return this.absorb=function(L){for(var q=0;q<L.length;q++)R[E]=L[q],(E+=1)>=_&&(i(R,O),y(O),E=0);return c},this.squeeze=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q={buffer:L.buffer||r.Buffer.allocUnsafe(g),padding:L.padding||h,queue:r.Buffer.allocUnsafe(R.length),state:new Uint32Array(O.length)};R.copy(q.queue);for(var X=0;X<O.length;X++)q.state[X]=O[X];q.queue.fill(0,E),q.queue[E]|=q.padding,q.queue[_-1]|=128,i(q.queue,q.state);for(var ne=0;ne<q.buffer.length;ne+=_)y(q.state),o(q.state,q.buffer.slice(ne,ne+_));return q.buffer},this.reset=function(){return R.fill(0),O.fill(0),E=0,c},this};t.default=a}(z1),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHAKE=t.SHA3Hash=t.SHA3=t.Keccak=void 0;var e,r=Se,n=(e=z1)&&e.__esModule?e:{default:e},i=function(h){var y=h.allowedSizes,g=h.defaultSize,_=h.padding;return function E(){var O=this,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;if(!this||this.constructor!==E)return new E(R);if(y&&!y.includes(R))throw new Error("Unsupported hash length");var L=new n.default({capacity:R});return this.update=function(q){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(r.Buffer.isBuffer(q))return L.absorb(q),O;if(typeof q=="string")return O.update(r.Buffer.from(q,X));throw new TypeError("Not a string or buffer")},this.digest=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",X=typeof q=="string"?{format:q}:q,ne=L.squeeze({buffer:X.buffer,padding:X.padding||_});return X.format&&X.format!=="binary"?ne.toString(X.format):ne},this.reset=function(){return L.reset(),O},this}},o=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});t.Keccak=o;var a=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});t.SHA3=a;var s=i({allowedSizes:[128,256],defaultSize:256,padding:31});t.SHAKE=s;var c=o;t.SHA3Hash=c,a.SHA3Hash=c;var f=a;t.default=f}(Y2);var ZE=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XE=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Q2=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZE(e,t,r);return XE(e,t),e},GE=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},$E=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},ew=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.compute=void 0;var QE=Q2(cn),vp=ew(f0),e7=ew(W2.exports),t7=Y2,r7=Q2(Wc);Bf.compute=function(t,e){return e===void 0&&(e="SHA-256"),GE(void 0,void 0,void 0,function(){var r,n,i,o,a;return $E(this,function(s){switch(s.label){case 0:r=QE.getCrypto(),o=!0,s.label=1;case 1:return s.trys.push([1,5,,6]),r.name!=="webCrypto"||typeof r.crypto.digest!="function"?[3,3]:[4,r.crypto.digest(e,t)];case 2:return n=s.sent(),[3,4];case 3:r.name==="nodeCrypto"?n=n7(e,t,r.crypto):o=!1,s.label=4;case 4:return[3,6];case 5:return(a=s.sent())instanceof Error&&(i=a.message),o=!1,[3,6];case 6:if(!o)try{n=i7(e,t)}catch(c){throw c instanceof Error?(i=(i===void 0?"":i)+" => "+c.message,new Error("UnsupportedEnvironment: "+i)):new Error("UnsupportedEnvironment")}return[2,new Uint8Array(n)]}})})};var n7=function(t,e,r){var n=vp.default.hashes[t].nodeName,i=r.createHash(n);return i.update(e),i.digest()},i7=function(t,e){var r;if(t==="MD5")r=(0,e7.default)(Array.from(e),{asBytes:!0});else if(["SHA3-512","SHA3-384","SHA3-256","SHA3-224"].indexOf(t)>=0){var n=8*vp.default.hashes[t].hashSize,i=new t7.SHA3(n),o=Se.Buffer;i.update(o.from(e)),r=i.digest("binary")}else r=r7[vp.default.hashes[t].nodeName]().update(e).digest();return new Uint8Array(r)};(function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.compute=void 0;var i=n(Bf);t.compute=i.compute,t.default={compute:t.compute}})(sh);var tw={},W1={},wp={};Object.defineProperty(wp,"__esModule",{value:!0});wp.default={hashes:{"SHA3-512":{nodeName:"sha3-512",hashSize:64,blockSize:72},"SHA3-384":{nodeName:"sha3-384",hashSize:48,blockSize:104},"SHA3-256":{nodeName:"sha3-256",hashSize:32,blockSize:136},"SHA3-224":{nodeName:"sha3-224",hashSize:28,blockSize:144},"SHA-256":{nodeName:"sha256",hashSize:32,blockSize:64},"SHA-384":{nodeName:"sha384",hashSize:48,blockSize:128},"SHA-512":{nodeName:"sha512",hashSize:64,blockSize:128},"SHA-1":{nodeName:"sha1",hashSize:20,blockSize:64},MD5:{nodeName:"md5",hashSize:16,blockSize:64}}},function(t){var e=ae&&ae.__createBinding||(Object.create?function(y,g,_,E){E===void 0&&(E=_),Object.defineProperty(y,E,{enumerable:!0,get:function(){return g[_]}})}:function(y,g,_,E){E===void 0&&(E=_),y[E]=g[_]}),r=ae&&ae.__setModuleDefault||(Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g}),n=ae&&ae.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var _ in y)_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)&&e(g,y,_);return r(g,y),g},i=ae&&ae.__awaiter||function(y,g,_,E){return new(_||(_=Promise))(function(O,R){function L(ne){try{X(E.next(ne))}catch(W){R(W)}}function q(ne){try{X(E.throw(ne))}catch(W){R(W)}}function X(ne){var W;ne.done?O(ne.value):(W=ne.value,W instanceof _?W:new _(function(H){H(W)})).then(L,q)}X((E=E.apply(y,g||[])).next())})},o=ae&&ae.__generator||function(y,g){var _,E,O,R,L={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return R={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function q(X){return function(ne){return function(W){if(_)throw new TypeError("Generator is already executing.");for(;L;)try{if(_=1,E&&(O=2&W[0]?E.return:W[0]?E.throw||((O=E.return)&&O.call(E),0):E.next)&&!(O=O.call(E,W[1])).done)return O;switch(E=0,O&&(W=[2&W[0],O.value]),W[0]){case 0:case 1:O=W;break;case 4:return L.label++,{value:W[1],done:!1};case 5:L.label++,E=W[1],W=[0];continue;case 7:W=L.ops.pop(),L.trys.pop();continue;default:if(O=L.trys,!((O=O.length>0&&O[O.length-1])||W[0]!==6&&W[0]!==2)){L=0;continue}if(W[0]===3&&(!O||W[1]>O[0]&&W[1]<O[3])){L.label=W[1];break}if(W[0]===6&&L.label<O[1]){L.label=O[1],O=W;break}if(O&&L.label<O[2]){L.label=O[2],L.ops.push(W);break}O[2]&&L.ops.pop(),L.trys.pop();continue}W=g.call(y,L)}catch(H){W=[6,H],E=0}finally{_=O=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([X,ne])}}},a=ae&&ae.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.compute=void 0;var s=a(wp),c=n(cn),f=a(sh);t.compute=function(y,g,_){return _===void 0&&(_="SHA-256"),i(void 0,void 0,void 0,function(){var E,O,R,L,q,X,ne,W;return o(this,function(H){switch(H.label){case 0:E=c.getCrypto(),L=!0,H.label=1;case 1:return H.trys.push([1,6,,7]),E.name!=="webCrypto"||typeof E.crypto.importKey!="function"||typeof E.crypto.sign!="function"?[3,4]:[4,E.crypto.importKey("raw",y,{name:"HMAC",hash:{name:_}},!1,["sign","verify"])];case 2:return q=H.sent(),[4,E.crypto.sign({name:"HMAC",hash:{name:_}},q,g)];case 3:return O=H.sent(),[3,5];case 4:E.name==="nodeCrypto"?(X=E.crypto.createHmac(s.default.hashes[_].nodeName,y),O=X.update(g).digest()):L=!1,H.label=5;case 5:return[3,7];case 6:return(ne=H.sent())instanceof Error&&(R=ne.message),L=!1,[3,7];case 7:if(L)return[3,11];H.label=8;case 8:return H.trys.push([8,10,,11]),[4,h(y,g,_)];case 9:return O=H.sent(),[3,11];case 10:throw(W=H.sent())instanceof Error?(R=R+" => "+W.message,new Error("UnsupportedEnvironments: "+R)):new Error("UnsupportedEnvironments");case 11:return[2,new Uint8Array(O)]}})})};var h=function(y,g,_){return i(void 0,void 0,void 0,function(){var E,O,R,L,q,X,ne,W;return o(this,function(H){switch(H.label){case 0:return E=s.default.hashes[_].blockSize,O=s.default.hashes[_].hashSize,y.length>E?[4,f.default.compute(y,_)]:[3,2];case 1:y=H.sent(),H.label=2;case 2:return(R=new Uint8Array(E)).set(y),L=R.map(function(Y){return 255&(54^Y)}),q=R.map(function(Y){return 255&(92^Y)}),(X=new Uint8Array(E+g.length)).set(L),X.set(g,E),[4,f.default.compute(X,_)];case 3:return ne=H.sent(),(W=new Uint8Array(E+O)).set(q),W.set(ne,E),[2,f.default.compute(W,_)]}})})};t.verify=function(y,g,_,E){return E===void 0&&(E="SHA-256"),i(void 0,void 0,void 0,function(){var O;return o(this,function(R){switch(R.label){case 0:return[4,(0,t.compute)(y,g,E)];case 1:return O=R.sent(),[2,_.toString()===O.toString()]}})})}}(W1),function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.compute=void 0;var i=n(W1);t.compute=i.compute,t.verify=i.verify,t.default={compute:t.compute,verify:t.verify}}(tw);var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.default={hashes:{"SHA3-512":{hashSize:64},"SHA3-384":{hashSize:48},"SHA3-256":{hashSize:32},"SHA3-224":{hashSize:28},"SHA-256":{hashSize:32},"SHA-384":{hashSize:48},"SHA-512":{hashSize:64},"SHA-1":{hashSize:20},MD5:{hashSize:16}}};var _p=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},Sp=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},hh=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0}),eu.pbkdf1=eu.pbkdf2=void 0;var rw=hh(Po),o7=hh(sh),J1=hh(tw),nw=hh(d0);eu.pbkdf2=function(t,e,r,n,i){return _p(void 0,void 0,void 0,function(){var o,a,s,c,f,h,y,g;return Sp(this,function(_){switch(_.label){case 0:if(r<=0)throw new Error("InvalidIterationCount");if(n<=0)throw new Error("InvalidDerivedKeyLength");if(o=typeof t=="string"?rw.default.encoder.stringToArrayBuffer(t):t,a=nw.default.hashes[i].hashSize,n>(Math.pow(2,32)-1)*a)throw new Error("DerivedKeyTooLong");for(s=Math.ceil(n/a),c=n-(s-1)*a,f=function(E){return _p(void 0,void 0,void 0,function(){var O,R,L,q;return Sp(this,function(X){switch(X.label){case 0:return(O=new Uint8Array(e.length+4)).set(e),O.set(a7(E+1,4),e.length),[4,J1.default.compute(o,O,i)];case 1:R=X.sent(),L=new Uint8Array(R),q=1,X.label=2;case 2:return q<r?[4,J1.default.compute(o,R,i)]:[3,5];case 3:R=X.sent(),L=R.map(function(ne,W){return ne^L[W]}),X.label=4;case 4:return q++,[3,2];case 5:return[2,{index:E,value:L}]}})})},h=[],y=new Uint8Array(n),g=0;g<s;g++)h.push(f(g));return[4,Promise.all(h)];case 1:return _.sent().forEach(function(E){E.index!==s-1?y.set(E.value,E.index*a):y.set(E.value.slice(0,c),E.index*a)}),[2,y]}})})};var a7=function(t,e){for(var r=new Uint8Array(e),n=0;n<e;n++)r[n]=t>>8*(e-n-1);return r};eu.pbkdf1=function(t,e,r,n,i){return _p(void 0,void 0,void 0,function(){var o,a;return Sp(this,function(s){switch(s.label){case 0:if(r<=0)throw new Error("InvalidIterationCount");if(n<=0)throw new Error("InvalidDerivedKeyLength");if(typeof t=="string"&&(t=rw.default.encoder.stringToArrayBuffer(t)),n>nw.default.hashes[i].hashSize)throw new Error("DerivedKeyTooLong");(o=new Uint8Array(t.length+e.length)).set(t),o.set(e,t.length),a=0,s.label=1;case 1:return a<r?[4,o7.default.compute(o,i)]:[3,4];case 2:o=s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return[2,o.slice(0,n)]}})})},function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf1=t.pbkdf2=void 0;var i=n(eu);t.pbkdf2=i.pbkdf2,t.pbkdf1=i.pbkdf1,t.default={pbkdf2:t.pbkdf2,pbkdf1:t.pbkdf1}}(Rv);var iw={},$i={},ow={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});var s7={"AES-KW":{nodePrefix:"id-aes",nodeSuffix:"-wrap",ivLength:8,staticIvLength:!0,defaultIv:new Uint8Array([166,166,166,166,166,166,166,166])}};Kf.default={ciphers:{"AES-GCM":{nodePrefix:"aes-",nodeSuffix:"-gcm",ivLength:12,tagLength:16,staticIvLength:!0},"AES-CBC":{nodePrefix:"aes-",nodeSuffix:"-cbc",ivLength:16,staticIvLength:!0},"AES-CTR":{nodePrefix:"aes-",nodeSuffix:"-ctr",ivLength:12,staticIvLength:!1}},wrapKeys:s7},function(t){var e=ae&&ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=t.unwrapKey=t.wrapKey=void 0;var r=e(Kf);t.wrapKey=function(i,o,a,s){var c=a.name,f=a.iv;return(0,t.encrypt)(i,o,{name:c,iv:f},s,!0)},t.unwrapKey=function(i,o,a,s){var c=a.name,f=a.iv;return(0,t.decrypt)(i,o,{name:c,iv:f},s,!0)},t.encrypt=function(i,o,a,s,c){var f=a.name,h=a.iv,y=a.additionalData,g=a.tagLength;c===void 0&&(c=!1);var _,E,O,R,L=n(f,o.byteLength,c?r.default.wrapKeys:r.default.ciphers);switch(f){case"AES-GCM":(_=s.createCipheriv(L,o,h,{authTagLength:g})).setAAD(y);break;case"AES-CTR":if(h.length===0||h.length>16)throw new Error("InvalidIVLength");var q=new Uint8Array(16);q.set(h),q[15]+=1,_=s.createCipheriv(L,o,q);break;default:_=s.createCipheriv(L,o,h)}try{E=new Uint8Array(_.update(i)),O=new Uint8Array(_.final()),R=new Uint8Array([]),f==="AES-GCM"&&(R=new Uint8Array(_.getAuthTag()))}catch{throw new Error("NodeCrypto_EncryptionFailure")}var X=new Uint8Array(E.length+O.length+R.length);return X.set(E),X.set(O,E.length),X.set(R,E.length+O.length),X},t.decrypt=function(i,o,a,s,c){var f=a.name,h=a.iv,y=a.additionalData,g=a.tagLength;c===void 0&&(c=!1);var _,E,O,R,L=n(f,o.byteLength,c?r.default.wrapKeys:r.default.ciphers);switch(f){case"AES-GCM":(_=s.createDecipheriv(L,o,h,{authTagLength:g})).setAAD(y),E=i.slice(0,i.length-g);var q=i.slice(i.length-g);_.setAuthTag(q);break;case"AES-CTR":if(h.length===0||h.length>16)throw new Error("InvalidIVLength");var X=new Uint8Array(16);X.set(h),X[15]+=1,_=s.createDecipheriv(L,o,X),E=i;break;default:_=s.createDecipheriv(L,o,h),E=i}try{O=_.update(E),R=_.final()}catch{throw new Error("NodeCrypto_DecryptionFailure")}var ne=new Uint8Array(R.length+O.length);return ne.set(O),ne.set(R,O.length),ne};var n=function(i,o,a){var s=a[i].nodePrefix;return(s=""+s+(8*o).toString())+a[i].nodeSuffix}}(ow);var Qi={},dh=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},ph=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.decrypt=Qi.encrypt=Qi.unwrapKey=Qi.wrapKey=void 0;Qi.wrapKey=function(t,e,r,n){var i=r.name,o=r.iv;return dh(void 0,void 0,void 0,function(){var a,s,c,f;return ph(this,function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),[4,n.importKey("raw",e,{name:i},!1,["wrapKey","unwrapKey"])];case 1:return a=h.sent(),[4,n.importKey("raw",t,{name:i},!0,["wrapKey","unwrapKey"])];case 2:return s=h.sent(),[4,n.wrapKey("raw",s,a,{name:i,iv:o})];case 3:return c=h.sent(),[2,new Uint8Array(c)];case 4:throw(f=h.sent())instanceof Error?new Error("WebCrypto_FailedToWrapKey - "+f.message):new Error("WebCrypto_FailedToWrapKey");case 5:return[2]}})})};Qi.unwrapKey=function(t,e,r,n){var i=r.name,o=r.iv;return dh(void 0,void 0,void 0,function(){var a,s,c,f;return ph(this,function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),[4,n.importKey("raw",e,{name:i},!1,["wrapKey","unwrapKey"])];case 1:return a=h.sent(),[4,n.unwrapKey("raw",t,a,{name:i,iv:o},{name:"AES-GCM"},!0,["encrypt","decrypt"])];case 2:return s=h.sent(),c=Uint8Array.bind,[4,n.exportKey("raw",s)];case 3:return[2,new(c.apply(Uint8Array,[void 0,h.sent()]))];case 4:throw(f=h.sent())instanceof Error?new Error("WebCrypto_FailedToUnwrapKey - "+f.message):new Error("WebCrypto_FailedToUnwrapKey");case 5:return[2]}})})};Qi.encrypt=function(t,e,r,n){var i=r.name,o=i===void 0?"AES-GCM":i,a=r.iv,s=r.additionalData,c=r.tagLength;return dh(void 0,void 0,void 0,function(){var f,h,y,g;return ph(this,function(_){switch(_.label){case 0:f=aw({name:o,iv:a,additionalData:s,tagLength:c}),_.label=1;case 1:return _.trys.push([1,4,,5]),[4,n.importKey("raw",e,f,!1,["encrypt","decrypt"])];case 2:return h=_.sent(),[4,n.encrypt(f,h,t)];case 3:return y=_.sent(),[2,new Uint8Array(y)];case 4:throw(g=_.sent())instanceof Error?new Error("WebCrypto_EncryptionFailure: "+g.message):new Error("WebCrypto_EncryptionFailure");case 5:return[2]}})})};Qi.decrypt=function(t,e,r,n){var i=r.name,o=r.iv,a=r.additionalData,s=r.tagLength;return dh(void 0,void 0,void 0,function(){var c,f,h,y;return ph(this,function(g){switch(g.label){case 0:c=aw({name:i,iv:o,additionalData:a,tagLength:s}),g.label=1;case 1:return g.trys.push([1,4,,5]),[4,n.importKey("raw",e,c,!1,["encrypt","decrypt"])];case 2:return f=g.sent(),[4,n.decrypt(c,f,t)];case 3:return h=g.sent(),[2,new Uint8Array(h)];case 4:throw(y=g.sent())instanceof Error?new Error("WebCrypto_DecryptionFailure: "+y.message):new Error("WebCrypto_DecryptionFailure");case 5:return[2]}})})};var aw=function(t){var e=t.name,r=t.iv,n=t.additionalData,i=t.tagLength,o={name:e,iv:r,additionalData:n,tagLength:i};switch(e){case"AES-GCM":o.tagLength=8*i;break;case"AES-CBC":break;case"AES-CTR":if(r.length===0||r.length>16)throw new Error("InvalidIVLength");o.counter=new Uint8Array(16),o.counter.set(r),o.counter[15]+=1,o.length=128}return o},u7=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),c7=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),p0=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u7(e,t,r);return c7(e,t),e},yh=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},gh=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},l7=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($i,"__esModule",{value:!0}),$i.unwrapKey=$i.wrapKey=$i.decrypt=$i.encrypt=void 0;var mh=p0(cn),bh=p0(ow),vh=p0(Qi),to=l7(Kf),sw=function(t){var e=t.name,r=t.iv,n=t.tagLength;if(to.default.ciphers[e].ivLength){if(!(r instanceof Uint8Array))throw new Error("InvalidArguments");if(r.byteLength<2||r.byteLength>16)throw new Error("InvalidIVLength");if(to.default.ciphers[e].staticIvLength&&to.default.ciphers[e].ivLength!==r.byteLength)throw new Error("InvalidIVLength")}if(to.default.ciphers[e].tagLength&&n){if(!Number.isInteger(n))throw new Error("InvalidArguments");if(n<4||n>16)throw new Error("InvalidTagLength")}};$i.encrypt=function(t,e,r){var n=r.name,i=n===void 0?"AES-GCM":n,o=r.iv,a=r.additionalData,s=a===void 0?new Uint8Array([]):a,c=r.tagLength;return yh(void 0,void 0,void 0,function(){var f;return gh(this,function(h){if(sw({name:i,iv:o,tagLength:c}),to.default.ciphers[i].tagLength&&!c&&(c=to.default.ciphers[i].tagLength),(f=mh.getCrypto()).name==="webCrypto"){if(typeof f.crypto.importKey!="function"||typeof f.crypto.encrypt!="function")throw new Error("UnsupportedWebCrypto");return[2,vh.encrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:c},f.crypto)]}if(f.name==="nodeCrypto")return[2,bh.encrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:c},f.crypto)];throw new Error("UnsupportedEnvironment")})})};$i.decrypt=function(t,e,r){var n=r.name,i=n===void 0?"AES-GCM":n,o=r.iv,a=r.additionalData,s=a===void 0?new Uint8Array([]):a,c=r.tagLength;return yh(void 0,void 0,void 0,function(){var f;return gh(this,function(h){if(sw({name:i,iv:o,tagLength:c}),to.default.ciphers[i].tagLength&&!c&&(c=to.default.ciphers[i].tagLength),(f=mh.getCrypto()).name==="webCrypto"){if(typeof f.crypto.importKey!="function"||typeof f.crypto.decrypt!="function")throw new Error("UnsupportedWebCrypto");return[2,vh.decrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:c},f.crypto)]}if(f.name==="nodeCrypto")return[2,bh.decrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:c},f.crypto)];throw new Error("UnsupportedEnvironment")})})};$i.wrapKey=function(t,e,r){var n=r.name;return yh(void 0,void 0,void 0,function(){var i,o;return gh(this,function(a){if(t.length%8>0)throw new Error("WrappedKeyMustBeMultipleOf8");if(i=mh.getCrypto(),o=to.default.wrapKeys["AES-KW"].defaultIv,i.name==="webCrypto"){if(typeof i.crypto.importKey!="function"||typeof i.crypto.wrapKey!="function")throw new Error("UnsupportedWebCrypto");return[2,vh.wrapKey(t,e,{name:n,iv:o},i.crypto)]}if(i.name==="nodeCrypto")return[2,bh.wrapKey(t,e,{name:n,iv:o},i.crypto)];throw new Error("UnsupportedEnvironment")})})};$i.unwrapKey=function(t,e,r){var n=r.name;return yh(void 0,void 0,void 0,function(){var i,o;return gh(this,function(a){if(i=mh.getCrypto(),o=to.default.wrapKeys["AES-KW"].defaultIv,i.name==="webCrypto"){if(typeof i.crypto.importKey!="function"||typeof i.crypto.unwrapKey!="function")throw new Error("UnsupportedWebCrypto");return[2,vh.unwrapKey(t,e,{name:n,iv:o},i.crypto)]}if(i.name==="nodeCrypto")return[2,bh.unwrapKey(t,e,{name:n,iv:o},i.crypto)];throw new Error("UnsupportedEnvironment")})})},function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapKey=t.wrapKey=t.decrypt=t.encrypt=void 0;var i=n($i);t.encrypt=i.encrypt,t.decrypt=i.decrypt,t.wrapKey=i.wrapKey,t.unwrapKey=i.unwrapKey,t.default={encrypt:t.encrypt,decrypt:t.decrypt,wrapKey:t.wrapKey,unwrapKey:t.unwrapKey}}(iw);var uw={},Y1={};(function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomBytes=t.getRandomSampledString=t.getRandomAsciiString=t.getRandomString=void 0;var i=n(cn);t.getRandomString=function(o){for(var a=(0,t.getRandomBytes)(o),s=(0,t.getRandomBytes)(o),c="",f=0;f<o;f++)s[f]=s[f]%3,a[f]=s[f]===0?a[f]%10+48:a[f]%26+(s[f]===1?65:97),c+=String.fromCharCode(a[f]);return c},t.getRandomAsciiString=function(o){for(var a=(0,t.getRandomBytes)(o),s="",c=0;c<o;c++)a[c]=a[c]%94+32,s+=String.fromCharCode(a[c]);return s},t.getRandomSampledString=function(o,a){var s=a.length;if(s===0)return"";for(var c=(0,t.getRandomBytes)(o),f="",h=0;h<o;h++)f+=a[c[h]%s];return f},t.getRandomBytes=function(o){var a=i.getRootWebCrypto(),s=i.getNodeCrypto();if(a!==void 0&&typeof a.getRandomValues=="function"){var c=new Uint8Array(o);return a.getRandomValues(c),c}if(s!==void 0)return new Uint8Array(s.randomBytes(o));throw new Error("UnsupportedEnvironment")}})(Y1),function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomSampledString=t.getRandomString=t.getRandomAsciiString=t.getRandomBytes=void 0;var i=n(Y1);t.getRandomBytes=i.getRandomBytes,t.getRandomAsciiString=i.getRandomAsciiString,t.getRandomString=i.getRandomString,t.getRandomSampledString=i.getRandomSampledString,t.default={getRandomBytes:t.getRandomBytes,getRandomAsciiString:t.getRandomAsciiString,getRandomString:t.getRandomString,getRandomSampledString:t.getRandomSampledString}}(uw);var f7=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h7=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cw=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&f7(e,t,r);return h7(e,t),e},wu=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},_u=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},Su=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.decryptEncryptedPrivateKeyInfo=Qs.encryptEncryptedPrivateKeyInfo=void 0;var Xt=cw(Kt),ln=Nf,sa=Su(Ba),d7=cw(Se),p7=Su(as),wh=Su(Po),_h=Su(Rv),lw=Su(iw),mf=Su(uw),Jn=d7.Buffer,fw=p7.default.bignum;Qs.encryptEncryptedPrivateKeyInfo=function(t,e){return e===void 0&&(e={passphrase:""}),wu(void 0,void 0,void 0,function(){var r,n;return _u(this,function(i){switch(i.label){case 0:return e.algorithm===void 0&&(e.algorithm="pbes2"),e.iterationCount===void 0&&(e.iterationCount=2048),e.algorithm!=="pbes2"?[3,2]:(e.cipher===void 0&&(e.cipher="aes256-cbc"),e.prf===void 0&&(e.prf="hmacWithSHA256"),[4,m7(t,e.passphrase,"pbkdf2",e.prf,e.iterationCount,e.cipher)]);case 1:return r=i.sent(),[2,y7(r)];case 2:return[4,v7(t,e.passphrase,e.algorithm,e.iterationCount)];case 3:return(n=i.sent()).encryptionAlgorithm.algorithm=Xt.passwordBasedEncryptionSchemes[n.encryptionAlgorithm.algorithm].oid,n.encryptionAlgorithm.parameters=ln.PBEParameter.encode(n.encryptionAlgorithm.parameters,"der"),[2,ln.EncryptedPrivateKeyInfo.encode(n,"der")]}})})};Qs.decryptEncryptedPrivateKeyInfo=function(t,e){return wu(void 0,void 0,void 0,function(){var r;return _u(this,function(n){switch(n.label){case 0:return(r={}).encryptionAlgorithm={algorithm:Xt.getAlgorithmFromOidStrict(t.encryptionAlgorithm.algorithm,Xt.passwordBasedEncryptionSchemes)},r.encryptionAlgorithm.algorithm==="pbes2"?r.encryptionAlgorithm.parameters=g7(t.encryptionAlgorithm.parameters):r.encryptionAlgorithm.parameters=ln.PBEParameter.decode(t.encryptionAlgorithm.parameters,"der"),r.encryptedData=t.encryptedData,r.encryptionAlgorithm.algorithm!=="pbes2"?[3,2]:[4,b7(r,e)];case 1:case 3:return[2,n.sent()];case 2:return[4,w7(r,e)]}})})};var y7=function(t){var e={encryptionAlgorithm:{}};e.encryptionAlgorithm.algorithm=Xt.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].oid;var r=t.encryptionAlgorithm.parameters.keyDerivationFunc;if(r.algorithm!=="pbkdf2")throw new Error("UnsupportedKDF");r.parameters.prf.algorithm=Xt.pbkdf2Prfs[r.parameters.prf.algorithm].oid,r.parameters=ln.PBKDF2Params.encode(r.parameters,"der"),r.algorithm=Xt.keyDerivationFunctions[r.algorithm].oid;var n=t.encryptionAlgorithm.parameters.encryptionScheme;if(!(Object.keys(ln.PBES2ESParams).indexOf(n.algorithm)>=0))throw new Error("UnsupportedCipher");return n.parameters=ln.PBES2ESParams[n.algorithm].encode(n.parameters,"der"),n.algorithm=Xt.encryptionSchemes[n.algorithm].oid,e.encryptionAlgorithm.parameters=ln.PBES2Params.encode({keyDerivationFunc:r,encryptionScheme:n},"der"),e.encryptedData=t.encryptedData,ln.EncryptedPrivateKeyInfo.encode(e,"der")},g7=function(t){var e,r,n,i=ln.PBES2Params.decode(t,"der"),o=Xt.getAlgorithmFromOidStrict(i.keyDerivationFunc.algorithm,Xt.keyDerivationFunctions);if(o!=="pbkdf2")throw new Error("UnsupportedKDF");var a=ln.PBKDF2Params.decode(i.keyDerivationFunc.parameters,"der");n={algorithm:Xt.getAlgorithmFromOidStrict(a.prf.algorithm,Xt.pbkdf2Prfs),parameters:a.prf.parameters},e=a.iterationCount,r={type:a.salt.type,value:a.salt.value};var s=Xt.getAlgorithmFromOidStrict(i.encryptionScheme.algorithm,Xt.encryptionSchemes);if(!(Object.keys(ln.PBES2ESParams).indexOf(s)>=0))throw new Error("UnsupportedCipher");return{keyDerivationFunc:{algorithm:o,parameters:{salt:r,iterationCount:e,prf:n}},encryptionScheme:{algorithm:s,parameters:ln.PBES2ESParams[s].decode(i.encryptionScheme.parameters,"der")}}},m7=function(t,e,r,n,i,o){return wu(void 0,void 0,void 0,function(){var a,s,c,f,h,y,g,_,E,O,R,L;return _u(this,function(q){switch(q.label){case 0:return a=wh.default.encoder.stringToArrayBuffer(e),[4,mf.default.getRandomBytes(Xt.keyDerivationFunctions[r].defaultSaltLen)];case 1:return s=q.sent(),c=Xt.encryptionSchemes[o].keyLength,r!=="pbkdf2"?[3,3]:[4,_h.default.pbkdf2(a,s,i,c,Xt.pbkdf2Prfs[n].hash)];case 2:return f=q.sent(),[3,4];case 3:throw new Error("UnsupportedKDF");case 4:return o!=="des-ede3-cbc"?[3,6]:(_=(g=Jn).from,[4,mf.default.getRandomBytes(Xt.encryptionSchemes[o].ivLength)]);case 5:return h=_.apply(g,[q.sent()]),E=sa.default.CBC.instantiate(sa.default.EDE),O=E.create({type:"encrypt",key:Jn.from(f),iv:h}),y=Jn.from(O.update(t).concat(O.final())),[3,10];case 6:return o!=="aes128-cbc"&&o!=="aes192-cbc"&&o!=="aes256-cbc"?[3,9]:[4,mf.default.getRandomBytes(Xt.encryptionSchemes[o].ivLength)];case 7:return h=q.sent(),L=(R=Jn).from,[4,lw.default.encrypt(new Uint8Array(t),f,{name:"AES-CBC",iv:h})];case 8:return y=L.apply(R,[q.sent()]),h=Jn.from(h),[3,10];case 9:throw new Error("UnsupportedCipher");case 10:return[2,{encryptedData:y,encryptionAlgorithm:{algorithm:"pbes2",parameters:{keyDerivationFunc:{algorithm:r,parameters:{salt:{type:"specified",value:Jn.from(s)},iterationCount:new fw(i),prf:{algorithm:n,parameters:Jn.from([5,0])}}},encryptionScheme:{algorithm:o,parameters:h}}}}]}})})},b7=function(t,e){return wu(void 0,void 0,void 0,function(){var r,n,i,o,a,s,c,f,h,y,g,_,E,O;return _u(this,function(R){switch(R.label){case 0:if(r=t.encryptionAlgorithm.parameters.keyDerivationFunc,n=t.encryptionAlgorithm.parameters.encryptionScheme,i=Xt.encryptionSchemes[n.algorithm].keyLength,r.algorithm!=="pbkdf2")return[3,2];if(a=wh.default.encoder.stringToArrayBuffer(e),r.parameters.salt.type!=="specified")throw new Error("UnsupportedSaltSource");return s=new Uint8Array(r.parameters.salt.value),c=r.parameters.iterationCount.toNumber(),f=r.parameters.prf.algorithm,[4,_h.default.pbkdf2(a,s,c,i,Xt.pbkdf2Prfs[f].hash)];case 1:return o=R.sent(),[3,3];case 2:throw new Error("UnsupportedKDF");case 3:return n.algorithm!=="des-ede3-cbc"?[3,4]:(_=n.parameters,y=sa.default.CBC.instantiate(sa.default.EDE),g=y.create({type:"decrypt",key:o,iv:_}),h=Jn.from(g.update(t.encryptedData).concat(g.final())),[3,7]);case 4:return n.algorithm!=="aes128-cbc"&&n.algorithm!=="aes192-cbc"&&n.algorithm!=="aes256-cbc"?[3,6]:(_=new Uint8Array(n.parameters),O=(E=Jn).from,[4,lw.default.decrypt(new Uint8Array(t.encryptedData),o,{name:"AES-CBC",iv:_})]);case 5:return h=O.apply(E,[R.sent()]),[3,7];case 6:throw new Error("UnsupportedEncryptionAlgorithm");case 7:return[2,ln.OneAsymmetricKey.decode(h,"der")]}})})},v7=function(t,e,r,n){return wu(void 0,void 0,void 0,function(){var i,o,a,s,c,f,h,y,g;return _u(this,function(_){switch(_.label){case 0:return i=wh.default.encoder.stringToArrayBuffer(e),[4,mf.default.getRandomBytes(8)];case 1:return o=_.sent(),a=Xt.passwordBasedEncryptionSchemes[r].hash,[4,_h.default.pbkdf1(i,o,n,16,a)];case 2:if(s=_.sent(),c=s.slice(0,8),f=s.slice(8,16),Xt.passwordBasedEncryptionSchemes[r].encrypt!=="DES-CBC")throw new Error("UnsupportedEncryptionAlgorithm");return y=sa.default.CBC.instantiate(sa.default.DES),g=y.create({type:"encrypt",key:c,iv:f}),h=Jn.from(g.update(t).concat(g.final())),[2,{encryptionAlgorithm:{algorithm:r,parameters:{salt:Jn.from(o),iterationCount:new fw(n)}},encryptedData:h}]}})})},w7=function(t,e){return wu(void 0,void 0,void 0,function(){var r,n,i,o,a,s,c,f,h,y;return _u(this,function(g){switch(g.label){case 0:return r=wh.default.encoder.stringToArrayBuffer(e),n=new Uint8Array(t.encryptionAlgorithm.parameters.salt),i=Xt.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].hash,o=t.encryptionAlgorithm.parameters.iterationCount.toNumber(),[4,_h.default.pbkdf1(r,n,o,16,i)];case 1:if(a=g.sent(),s=a.slice(0,8),c=a.slice(8,16),Xt.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].encrypt!=="DES-CBC")throw new Error("UnsupportedEncryptionAlgorithm");return h=sa.default.CBC.instantiate(sa.default.DES),y=h.create({type:"decrypt",key:s,iv:c}),f=Jn.from(y.update(t.encryptedData).concat(y.final())),[2,ln.OneAsymmetricKey.decode(f,"der")]}})})},_7=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),S7=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),y0=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_7(e,t,r);return S7(e,t),e},hw=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},dw=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},E7=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.toJwk=Ws.fromJwk=void 0;var pw=y0(Js),yw=y0($s),Z1=Kt,gw=E7(Po),I7=y0(Se),Ep=Nf,mw=Qs,A7=Jc,k7=I7.Buffer;Ws.fromJwk=function(t,e,r){var n=r.outputPublic,i=r.compact,o=i!==void 0&&i,a=r.encOptions;return hw(void 0,void 0,void 0,function(){var s,c,f,h;return dw(this,function(y){switch(y.label){case 0:return s=(0,A7.getJwkType)(t),c=typeof n=="boolean"&&n?"public":s,t.kty==="EC"?f=pw.fromJWK(t,c,o):t.kty==="RSA"&&(f=yw.fromJwk(t,c)),c!=="public"?[3,1]:(h=Ep.SubjectPublicKeyInfo.encode(f,"der"),[3,3]);case 1:return h=Ep.OneAsymmetricKey.encode(f,"der"),a!==void 0&&a.passphrase!==void 0&&a.passphrase.length>0?[4,(0,mw.encryptEncryptedPrivateKeyInfo)(h,a)]:[3,3];case 2:h=y.sent(),c="encryptedPrivate",y.label=3;case 3:return h=new Uint8Array(h),[2,e==="pem"?gw.default.formatter.binToPem(h,c):h]}})})};Ws.toJwk=function(t,e,r){var n=r.outputPublic,i=r.passphrase;return hw(void 0,void 0,void 0,function(){var o,a,s,c;return dw(this,function(f){switch(f.label){case 0:o=e==="pem"?gw.default.formatter.pemToBin(t):t;try{a=Ep.KeyStructure.decode(k7.from(o),"der")}catch{throw new Error("FailedToDecodeKey")}return a.type!=="subjectPublicKeyInfo"?[3,1]:(s="public",a=a.value,[3,4]);case 1:return s=typeof n=="boolean"&&n?"public":"private",a.type!=="encryptedPrivateKeyInfo"?[3,3]:[4,(0,mw.decryptEncryptedPrivateKeyInfo)(a.value,i)];case 2:return a=f.sent(),[3,4];case 3:if(a.type!=="oneAsymmetricKey")throw new Error("UnsupportedKeyStructure");a=a.value,f.label=4;case 4:if((c=(0,Z1.getAlgorithmFromOid)(s==="public"?a.algorithm.algorithm:a.privateKeyAlgorithm.algorithm,Z1.publicKeyAlgorithms)).length<1)throw new Error("UnsupportedKey");if(c[0]==="EC")return[2,pw.toJWK(a,s)];if(c[0]==="RSA")return[2,yw.toJwk(a,s)];throw new Error("InvalidKeyType")}})})};var D7=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),x7=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bw=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&D7(e,t,r);return x7(e,t),e},vw=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},ww=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.toJwkFrom=Vs.fromJwkTo=void 0;var _w=bw(Ws),Sw=bw(Ga);Vs.fromJwkTo=function(t,e,r){return t===void 0&&(t="pem"),r===void 0&&(r={}),vw(void 0,void 0,void 0,function(){return ww(this,function(n){switch(n.label){case 0:if(e.kty!=="EC"&&e.kty!=="RSA")throw new Error("UnsupportedKeyType");return e.kty==="EC"&&r.compact===void 0&&(r.compact=!1),t==="oct"&&r.output!=="string"&&(r.output="binary"),r.encryptParams===void 0&&(r.encryptParams={passphrase:""}),t!=="der"&&t!=="pem"||r.encryptParams.passphrase!==void 0||(r.encryptParams.passphrase=""),t!=="der"&&t!=="pem"?[3,2]:[4,_w.fromJwk(e,t,{outputPublic:r.outputPublic,compact:r.compact,encOptions:r.encryptParams})];case 1:return[2,n.sent()];case 2:if(t==="oct"&&e.kty==="EC")return[2,Sw.fromJwk(e,{outputPublic:r.outputPublic,outputFormat:r.output,compact:r.compact})];throw new Error("UnsupportedConversion");case 3:return[2]}})})};Vs.toJwkFrom=function(t,e,r){return r===void 0&&(r={}),vw(void 0,void 0,void 0,function(){return ww(this,function(n){switch(n.label){case 0:if(t==="oct"&&!r.namedCurve)throw new Error("InappropriateOptions");return t!=="der"&&t!=="pem"||r.passphrase!==void 0||(r.passphrase=""),t!=="der"&&t!=="pem"?[3,2]:[4,_w.toJwk(e,t,{outputPublic:r.outputPublic,passphrase:r.passphrase})];case 1:return[2,n.sent()];case 2:if(t==="oct")return[2,Sw.toJwk(e,r.namedCurve,{outputPublic:r.outputPublic})];throw new Error("UnsupportedConversion");case 3:return[2]}})})};var qf={},T7=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),O7=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),P7=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&T7(e,t,r);return O7(e,t),e},R7=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},C7=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},Ew=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qf,"__esModule",{value:!0}),qf.getJwkThumbprint=void 0;var X1=Ew(Po),M7=Ew(sh),N7=P7(Se).Buffer;qf.getJwkThumbprint=function(t,e,r){return e===void 0&&(e="SHA-256"),r===void 0&&(r="binary"),R7(void 0,void 0,void 0,function(){var n,i,o;return C7(this,function(a){switch(a.label){case 0:if(["hex","binary"].indexOf(r)<0)throw new Error("UnsupportedOutputFormat");if(t.kty==="EC")n=JSON.stringify({crv:t.crv,kty:t.kty,x:t.x,y:t.y});else{if(t.kty!=="RSA")throw new Error("UnsupportedKeyType");n=JSON.stringify({e:t.e,kty:t.kty,n:t.n})}return i=new Uint8Array(N7.from(n,"utf8")),[4,M7.default.compute(i,e)];case 1:return o=a.sent(),r==="hex"?[2,X1.default.encoder.arrayBufferToHexString(o)]:r==="base64"?[2,X1.default.encoder.encodeBase64(o)]:[2,o]}})})};var Ip={exports:{}};(function(t,e){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Boolean]",a="[object Date]",s="[object Function]",c="[object GeneratorFunction]",f="[object Map]",h="[object Number]",y="[object Object]",g="[object Promise]",_="[object RegExp]",E="[object Set]",O="[object String]",R="[object Symbol]",L="[object WeakMap]",q="[object ArrayBuffer]",X="[object DataView]",ne="[object Float32Array]",W="[object Float64Array]",H="[object Int8Array]",Y="[object Int16Array]",T="[object Int32Array]",te="[object Uint8Array]",v="[object Uint8ClampedArray]",D="[object Uint16Array]",w="[object Uint32Array]",k=/\w*$/,A=/^\[object .+?Constructor\]$/,b=/^(?:0|[1-9]\d*)$/,P={};P[i]=P["[object Array]"]=P[q]=P[X]=P[o]=P[a]=P[ne]=P[W]=P[H]=P[Y]=P[T]=P[f]=P[h]=P[y]=P[_]=P[E]=P[O]=P[R]=P[te]=P[v]=P[D]=P[w]=!0,P["[object Error]"]=P[s]=P[L]=!1;var V=typeof ae=="object"&&ae&&ae.Object===Object&&ae,Q=typeof self=="object"&&self&&self.Object===Object&&self,U=V||Q||Function("return this")(),Z=e&&!e.nodeType&&e,fe=Z&&t&&!t.nodeType&&t,se=fe&&fe.exports===Z;function ue(le,be){return le.set(be[0],be[1]),le}function ge(le,be){return le.add(be),le}function me(le,be,ke,Be){var Ut=-1,rr=le?le.length:0;for(Be&&rr&&(ke=le[++Ut]);++Ut<rr;)ke=be(ke,le[Ut],Ut,le);return ke}function C(le){var be=!1;if(le!=null&&typeof le.toString!="function")try{be=!!(le+"")}catch{}return be}function j(le){var be=-1,ke=Array(le.size);return le.forEach(function(Be,Ut){ke[++be]=[Ut,Be]}),ke}function S(le,be){return function(ke){return le(be(ke))}}function M(le){var be=-1,ke=Array(le.size);return le.forEach(function(Be){ke[++be]=Be}),ke}var B,z=Array.prototype,x=Function.prototype,K=Object.prototype,ee=U["__core-js_shared__"],G=(B=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",J=x.toString,re=K.hasOwnProperty,de=K.toString,pe=RegExp("^"+J.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=se?U.Buffer:void 0,Ee=U.Symbol,Ie=U.Uint8Array,we=S(Object.getPrototypeOf,Object),Re=Object.create,Fe=K.propertyIsEnumerable,Ce=z.splice,Ht=Object.getOwnPropertySymbols,mt=ce?ce.isBuffer:void 0,rt=S(Object.keys,Object),Tr=St(U,"DataView"),Ue=St(U,"Map"),at=St(U,"Promise"),hn=St(U,"Set"),et=St(U,"WeakMap"),lt=St(Object,"create"),Pi=dn(Tr),kt=dn(Ue),Tt=dn(at),Ri=dn(hn),bt=dn(et),vt=Ee?Ee.prototype:void 0,ca=vt?vt.valueOf:void 0;function wt(le){var be=-1,ke=le?le.length:0;for(this.clear();++be<ke;){var Be=le[be];this.set(Be[0],Be[1])}}function st(le){var be=-1,ke=le?le.length:0;for(this.clear();++be<ke;){var Be=le[be];this.set(Be[0],Be[1])}}function Pn(le){var be=-1,ke=le?le.length:0;for(this.clear();++be<ke;){var Be=le[be];this.set(Be[0],Be[1])}}function _t(le){this.__data__=new st(le)}function Vt(le,be){var ke=so(le)||function(Rt){return function(Ze){return function(zr){return!!zr&&typeof zr=="object"}(Ze)&&Co(Ze)}(Rt)&&re.call(Rt,"callee")&&(!Fe.call(Rt,"callee")||de.call(Rt)==i)}(le)?function(Rt,Ze){for(var zr=-1,dr=Array(Rt);++zr<Rt;)dr[zr]=Ze(zr);return dr}(le.length,String):[],Be=ke.length,Ut=!!Be;for(var rr in le)!be&&!re.call(le,rr)||Ut&&(rr=="length"||Wt(rr,Be))||ke.push(rr);return ke}function la(le,be,ke){var Be=le[be];re.call(le,be)&&Ro(Be,ke)&&(ke!==void 0||be in le)||(le[be]=ke)}function Ot(le,be){for(var ke=le.length;ke--;)if(Ro(le[ke][0],be))return ke;return-1}function Ke(le,be,ke,Be,Ut,rr,Rt){var Ze;if(Be&&(Ze=rr?Be(le,Ut,rr,Rt):Be(le)),Ze!==void 0)return Ze;if(!oi(le))return le;var zr=so(le);if(zr){if(Ze=function(Le){var ft=Le.length,nr=Le.constructor(ft);return ft&&typeof Le[0]=="string"&&re.call(Le,"index")&&(nr.index=Le.index,nr.input=Le.input),nr}(le),!be)return function(Le,ft){var nr=-1,$r=Le.length;for(ft||(ft=Array($r));++nr<$r;)ft[nr]=Le[nr];return ft}(le,Ze)}else{var dr=Rn(le),Et=dr==s||dr==c;if(ha(le))return function(Le,ft){if(ft)return Le.slice();var nr=new Le.constructor(Le.length);return Le.copy(nr),nr}(le,be);if(dr==y||dr==i||Et&&!rr){if(C(le))return rr?le:{};if(Ze=function(Le){return typeof Le.constructor!="function"||Ft(Le)?{}:function(ft){return oi(ft)?Re(ft):{}}(we(Le))}(Et?{}:le),!be)return function(Le,ft){return Nt(Le,jt(Le),ft)}(le,function(Le,ft){return Le&&Nt(ft,uo(ft),Le)}(Ze,le))}else{if(!P[dr])return rr?le:{};Ze=function(Le,ft,nr,$r){var Ct=Le.constructor;switch(ft){case q:return Pt(Le);case o:case a:return new Ct(+Le);case X:return function(Qe,Or){var Qr=Or?Pt(Qe.buffer):Qe.buffer;return new Qe.constructor(Qr,Qe.byteOffset,Qe.byteLength)}(Le,$r);case ne:case W:case H:case Y:case T:case te:case v:case D:case w:return function(Qe,Or){var Qr=Or?Pt(Qe.buffer):Qe.buffer;return new Qe.constructor(Qr,Qe.byteOffset,Qe.length)}(Le,$r);case f:return function(Qe,Or,Qr){return me(Or?Qr(j(Qe),!0):j(Qe),ue,new Qe.constructor)}(Le,$r,nr);case h:case O:return new Ct(Le);case _:return function(Qe){var Or=new Qe.constructor(Qe.source,k.exec(Qe));return Or.lastIndex=Qe.lastIndex,Or}(Le);case E:return function(Qe,Or,Qr){return me(Or?Qr(M(Qe),!0):M(Qe),ge,new Qe.constructor)}(Le,$r,nr);case R:return Ci=Le,ca?Object(ca.call(Ci)):{}}var Ci}(le,dr,Ke,be)}}Rt||(Rt=new _t);var $c=Rt.get(le);if($c)return $c;if(Rt.set(le,Ze),!zr)var da=ke?function(Le){return function(ft,nr,$r){var Ct=nr(ft);return so(ft)?Ct:function(Ci,Qe){for(var Or=-1,Qr=Qe.length,Pr=Ci.length;++Or<Qr;)Ci[Pr+Or]=Qe[Or];return Ci}(Ct,$r(ft))}(Le,uo,jt)}(le):uo(le);return function(Le,ft){for(var nr=-1,$r=Le?Le.length:0;++nr<$r&&ft(Le[nr],nr,Le)!==!1;);}(da||le,function(Le,ft){da&&(Le=le[ft=Le]),la(Ze,ft,Ke(Le,be,ke,Be,ft,le,Rt))}),Ze}function fa(le){return!(!oi(le)||(be=le,G&&G in be))&&(Mo(le)||C(le)?pe:A).test(dn(le));var be}function Pt(le){var be=new le.constructor(le.byteLength);return new Ie(be).set(new Ie(le)),be}function Nt(le,be,ke,Be){ke||(ke={});for(var Ut=-1,rr=be.length;++Ut<rr;){var Rt=be[Ut],Ze=Be?Be(ke[Rt],le[Rt],Rt,ke,le):void 0;la(ke,Rt,Ze===void 0?le[Rt]:Ze)}return ke}function ii(le,be){var ke,Be,Ut=le.__data__;return((Be=typeof(ke=be))=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ke!=="__proto__":ke===null)?Ut[typeof be=="string"?"string":"hash"]:Ut.map}function St(le,be){var ke=function(Be,Ut){return Be==null?void 0:Be[Ut]}(le,be);return fa(ke)?ke:void 0}wt.prototype.clear=function(){this.__data__=lt?lt(null):{}},wt.prototype.delete=function(le){return this.has(le)&&delete this.__data__[le]},wt.prototype.get=function(le){var be=this.__data__;if(lt){var ke=be[le];return ke===r?void 0:ke}return re.call(be,le)?be[le]:void 0},wt.prototype.has=function(le){var be=this.__data__;return lt?be[le]!==void 0:re.call(be,le)},wt.prototype.set=function(le,be){return this.__data__[le]=lt&&be===void 0?r:be,this},st.prototype.clear=function(){this.__data__=[]},st.prototype.delete=function(le){var be=this.__data__,ke=Ot(be,le);return!(ke<0)&&(ke==be.length-1?be.pop():Ce.call(be,ke,1),!0)},st.prototype.get=function(le){var be=this.__data__,ke=Ot(be,le);return ke<0?void 0:be[ke][1]},st.prototype.has=function(le){return Ot(this.__data__,le)>-1},st.prototype.set=function(le,be){var ke=this.__data__,Be=Ot(ke,le);return Be<0?ke.push([le,be]):ke[Be][1]=be,this},Pn.prototype.clear=function(){this.__data__={hash:new wt,map:new(Ue||st),string:new wt}},Pn.prototype.delete=function(le){return ii(this,le).delete(le)},Pn.prototype.get=function(le){return ii(this,le).get(le)},Pn.prototype.has=function(le){return ii(this,le).has(le)},Pn.prototype.set=function(le,be){return ii(this,le).set(le,be),this},_t.prototype.clear=function(){this.__data__=new st},_t.prototype.delete=function(le){return this.__data__.delete(le)},_t.prototype.get=function(le){return this.__data__.get(le)},_t.prototype.has=function(le){return this.__data__.has(le)},_t.prototype.set=function(le,be){var ke=this.__data__;if(ke instanceof st){var Be=ke.__data__;if(!Ue||Be.length<199)return Be.push([le,be]),this;ke=this.__data__=new Pn(Be)}return ke.set(le,be),this};var jt=Ht?S(Ht,Object):function(){return[]},Rn=function(le){return de.call(le)};function Wt(le,be){return!!(be=be==null?n:be)&&(typeof le=="number"||b.test(le))&&le>-1&&le%1==0&&le<be}function Ft(le){var be=le&&le.constructor;return le===(typeof be=="function"&&be.prototype||K)}function dn(le){if(le!=null){try{return J.call(le)}catch{}try{return le+""}catch{}}return""}function Ro(le,be){return le===be||le!=le&&be!=be}(Tr&&Rn(new Tr(new ArrayBuffer(1)))!=X||Ue&&Rn(new Ue)!=f||at&&Rn(at.resolve())!=g||hn&&Rn(new hn)!=E||et&&Rn(new et)!=L)&&(Rn=function(le){var be=de.call(le),ke=be==y?le.constructor:void 0,Be=ke?dn(ke):void 0;if(Be)switch(Be){case Pi:return X;case kt:return f;case Tt:return g;case Ri:return E;case bt:return L}return be});var so=Array.isArray;function Co(le){return le!=null&&function(be){return typeof be=="number"&&be>-1&&be%1==0&&be<=n}(le.length)&&!Mo(le)}var ha=mt||function(){return!1};function Mo(le){var be=oi(le)?de.call(le):"";return be==s||be==c}function oi(le){var be=typeof le;return!!le&&(be=="object"||be=="function")}function uo(le){return Co(le)?Vt(le):function(be){if(!Ft(be))return rt(be);var ke=[];for(var Be in Object(be))re.call(be,Be)&&Be!="constructor"&&ke.push(Be);return ke}(le)}t.exports=function(le){return Ke(le,!0,!0)}})(Ip,Ip.exports);var Tl=ae&&ae.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(f){try{c(n.next(f))}catch(h){o(h)}}function s(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){var h;f.done?i(f.value):(h=f.value,h instanceof r?h:new r(function(y){y(h)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},Ol=ae&&ae.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&h[0]?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=e.call(t,a)}catch(y){h=[6,y],n=0}finally{r=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}},j7=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.Key=void 0;var Zu=Vs,B7=qf,G1=j7(Po),Pl=Jc,$1=Ip.exports,L7=function(){function t(e,r,n){n===void 0&&(n={});var i=$1(r),o=$1(n);if(this._type=null,this._jwk=null,this._der=null,this._oct={},this._isEncrypted=!1,this._current={jwk:!1,der:!1,oct:!1},e==="jwk")this._setJwk(i);else if(e==="der"||e==="pem"){if(e==="der"&&!(i instanceof Uint8Array))throw new Error("DerKeyMustBeUint8Array");if(e==="pem"&&typeof i!="string")throw new Error("PemKeyMustBeString");this._setAsn1(i,e)}else{if(e!=="oct")throw new Error("UnsupportedType");if(typeof o.namedCurve!="string")throw new Error("namedCurveMustBeSpecified");if(!(i instanceof Uint8Array))throw new Error("OctetKeyMustBeUint8Array");this._setSec1(i,o.namedCurve)}}return t.prototype._setJwk=function(e){this._type=(0,Pl.getJwkType)(e),this._jwk=e,this._isEncrypted&&(this._der=null),this._isEncrypted=!1,this._setCurrentStatus()},t.prototype._setAsn1=function(e,r){this._type=(0,Pl.isAsn1Public)(e,r)?"public":"private",this._isEncrypted=(0,Pl.isAsn1Encrypted)(e,r),this._der=r==="pem"?G1.default.formatter.pemToBin(e):e,this._isEncrypted&&(this._jwk=null,this._oct={}),this._setCurrentStatus()},t.prototype._setSec1=function(e,r){this._type=(0,Pl.getSec1KeyType)(e,r),this._oct={namedCurve:r,key:e},this._isEncrypted&&(this._der=null),this._isEncrypted=!1,this._setCurrentStatus()},t.prototype._setCurrentStatus=function(){this._current.jwk=this._jwk!==null&&(this._jwk.kty==="RSA"||this._jwk.kty==="EC"),this._current.der=this._der!==null&&this._der.length>0,this._current.oct=this._oct.key!==void 0&&this._oct.namedCurve!==void 0&&this._oct.key.length>0},t.prototype.export=function(e,r){return e===void 0&&(e="jwk"),r===void 0&&(r={}),Tl(this,void 0,void 0,function(){var n;return Ol(this,function(i){switch(i.label){case 0:if(this._isEncrypted&&this._type==="private"){if(e!=="der"&&e!=="pem"||Object.keys(r).length!==0||!this._current.der)throw new Error("DecryptionRequired");return[2,e==="pem"?G1.default.formatter.binToPem(this._der,"encryptedPrivate"):this._der]}return this._current.jwk?(n=this._jwk,[3,6]):[3,1];case 1:return this._current.oct?[4,(0,Zu.toJwkFrom)("oct",this._oct.key,{namedCurve:this._oct.namedCurve})]:[3,3];case 2:case 4:return n=i.sent(),[3,6];case 3:return this._current.der?[4,(0,Zu.toJwkFrom)("der",this._der)]:[3,5];case 5:throw new Error("InvalidStatus");case 6:return this._setJwk(n),e!=="der"&&e!=="pem"?[3,8]:[4,(0,Zu.fromJwkTo)(e,n,{outputPublic:r.outputPublic,compact:r.compact,encryptParams:r.encryptParams})];case 7:case 9:return[2,i.sent()];case 8:return e!=="oct"?[3,10]:[4,(0,Zu.fromJwkTo)(e,n,{outputPublic:r.outputPublic,output:r.output,compact:r.compact})];case 10:return[2,n]}})})},t.prototype.encrypt=function(e){return Tl(this,void 0,void 0,function(){var r,n;return Ol(this,function(i){switch(i.label){case 0:if(this._isEncrypted)throw new Error("AlreadyEncrypted");return r={encryptParams:{passphrase:e}},n=this._setAsn1,[4,this.export("der",r)];case 1:return n.apply(this,[i.sent(),"der"]),[2,!0]}})})},t.prototype.decrypt=function(e){return Tl(this,void 0,void 0,function(){var r;return Ol(this,function(n){switch(n.label){case 0:if(!this._isEncrypted)throw new Error("NotEncrypted");return this._current.der?[4,(0,Zu.toJwkFrom)("der",this._der,{passphrase:e})]:[3,2];case 1:return r=n.sent(),[3,3];case 2:throw new Error("FailedToDecrypt");case 3:return this._setJwk(r),[2,!0]}})})},t.prototype.getJwkThumbprint=function(e,r){return e===void 0&&(e="SHA-256"),r===void 0&&(r="binary"),Tl(this,void 0,void 0,function(){var n;return Ol(this,function(i){switch(i.label){case 0:if(this._isEncrypted)throw new Error("DecryptionRequired");return n=B7.getJwkThumbprint,[4,this.export("jwk")];case 1:return[4,n.apply(void 0,[i.sent(),e,r])];case 2:return[2,i.sent()]}})})},Object.defineProperty(t.prototype,"keyType",{get:function(){var e=this;if(this._isEncrypted)throw new Error("DecryptionRequired");return new Promise(function(r,n){e.export("jwk").then(function(i){r(i.kty)}).catch(function(i){n(i)})})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jwkThumbprint",{get:function(){return this.getJwkThumbprint()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEncrypted",{get:function(){return this._isEncrypted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrivate",{get:function(){return this._type==="private"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"der",{get:function(){return this.export("der")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pem",{get:function(){return this.export("pem")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jwk",{get:function(){return this.export("jwk")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oct",{get:function(){return this.export("oct",{output:"string"})},enumerable:!1,configurable:!0}),t}();Pf.Key=L7,function(t){var e=ae&&ae.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=ae&&ae.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=ae&&ae.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&e(a,o,s);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Key=void 0;var i=n(Pf);t.Key=i.Key,t.default={Key:t.Key}}(Lb);var Q1=wb(Lb);class Xc{static sort(e){e.sort((r,n)=>typeof r=="string"?r<n?-1:r>n?1:0:r.compareTo(n))}}class dt extends Map{get(e){for(let r of this.entries())if(r[0].equals(e))return r[1];return null}delete(e){for(let r of this.entries())if(r[0].equals(e))return super.delete(r[0]);return!1}has(e){for(let r of this.entries())if(r[0].equals(e))return!0;return!1}valuesAsSortedArray(){let e=Array.from(this.keys());return Xc.sort(e),e.map(r=>this.get(r))}}const em=new We("DIDDocument");class Ne extends Pe{constructor(e){super(),this.subject=e}static clone(e,r){let n=new Ne(e.subject);return n.context=e.context,n.controllers=e.controllers,n.controllerDocs=e.controllerDocs,n.effectiveController=e.effectiveController,n.multisig=e.multisig,n.publicKeys=e.publicKeys,n.authenticationKeys=e.authenticationKeys,n.authorizationKeys=e.authorizationKeys,n.defaultPublicKey=e.defaultPublicKey,n.credentials=e.credentials,n.services=e.services,n.expires=e.expires,r&&(n.proofs=e.proofs),n.metadata=e.metadata,n}getSubject(){return this.subject}canonicalId(e){return typeof e=="string"?Je.from(e,this.getSubject()):e==null||e.getDid()!=null?e:Je.from(e,this.getSubject())}checkAttachedStore(){if(!this.getMetadata().attachedStore())throw new kc("Not attach with did store")}checkIsPrimitive(){if(this.isCustomizedDid())throw new ja(this.getSubject().toString()+"is a customized did")}checkIsCustomized(){if(!this.isCustomizedDid())throw new Ks(this.getSubject().toString()+"isn't a customized did")}checkHasEffectiveController(){if(this.getEffectiveController()==null)throw new gi("No effective controller of "+this.getSubject().toString())}isCustomizedDid(){return this.defaultPublicKey==null}getControllers(){return this.controllers}getControllerCount(){return this.controllers.length}getController(){return this.controllers.length==1?this.controllers[0]:null}hasController(e=null){return e?this.controllers.find(r=>r.equals(e))!==void 0:this.controllers.length!=0}getControllerDocument(e){return this.controllerDocs.get(e)}getEffectiveController(){return this.effectiveController}getEffectiveControllerDocument(){return this.effectiveController==null?null:this.getControllerDocument(this.effectiveController)}setEffectiveController(e){if(this.checkIsCustomized(),e!=null){if(!this.hasController(e))throw new Go("Not contoller for target DID");this.effectiveController=e;let r=this.getControllerDocument(this.effectiveController);r.getMetadata().attachedStore()||r.getMetadata().attachStore(this.getMetadata().getStore())}else this.effectiveController=e}isMultiSignature(){return this.multisig!=null}getMultiSignature(){return this.multisig}getPublicKeyCount(){let e=this.publicKeys.size;if(this.hasController())for(let r of this.controllerDocs.values())e+=r.getAuthenticationKeyCount();return e}getPublicKeys(){let e=Array.from(this.publicKeys.values());if(this.hasController())for(let r of this.controllerDocs.values())e.push(...r.getAuthenticationKeys());return e}selectPublicKeys(e,r){oe(e!=null||r!=null,"Invalid select args"),e=this.canonicalId(e);let n=[];for(let i of this.publicKeys.values())(e==null||i.getId().equals(e))&&(r!=null&&i.getType()!==r||n.push(i));if(this.hasController())for(let i of this.controllerDocs.values())n.push(...i.selectAuthenticationKeys(e,r));return n}getPublicKey(e){oe(e!=null,"Invalid publicKey id"),e=this.canonicalId(e);let r=this.publicKeys.get(e);if(r==null&&this.hasController()){let n=this.getControllerDocument(e.getDid());n!=null&&(r=n.getAuthenticationKey(e))}return r}hasPublicKey(e){return this.getPublicKey(this.canonicalId(e))!=null}hasPrivateKey(e){return typeof e=="string"&&(e=this.canonicalId(e)),oe(e!=null,"Invalid publicKey id"),!(!this.hasPublicKey(e)||!this.getMetadata().attachedStore())&&this.getMetadata().getStore().containsPrivateKey(e)}getDefaultPublicKeyId(){let e=this.getDefaultPublicKey();return e!=null?e.getId():null}getDefaultPublicKey(){return this.defaultPublicKey!=null?this.defaultPublicKey:this.effectiveController!=null?this.getControllerDocument(this.effectiveController).getDefaultPublicKey():null}derive(e,r){return ve(this,void 0,void 0,function*(){return oe(r!=null&&r!=="","Invalid storepass"),this.checkAttachedStore(),this.checkIsPrimitive(),qe.deserialize(yield this.getMetadata().getStore().loadPrivateKey(this.getDefaultPublicKeyId(),r)).deriveWithIndex(e).serializeBase58()})}mapToDerivePath(e,r){let n=In.encodeToBuffer(Se.Buffer.from(e,"utf-8")),i="m/",o=Lc.wrap(n);for(;o.hasRemaining();){let a=o.readInt();i=a>=0?i.concat(a.toString()):i.concat((2147483647&a).toString()).concat("'"),i=i.concat("/")}return i=r>=0?i.concat(r.toString()):i.concat((2147483647&r).toString()).concat("'"),i}deriveFromIdentifier(e,r,n){return ve(this,void 0,void 0,function*(){oe(e&&e!=null,"Invalid identifier"),this.checkAttachedStore(),this.checkIsPrimitive();let i=qe.deserialize(yield this.getMetadata().getStore().loadPrivateKey(this.getDefaultPublicKeyId(),n)),o=this.mapToDerivePath(e,r);return i.deriveWithPath(o).serializeBase58()})}getAuthenticationKeyCount(){let e=this.authenticationKeys.size;if(this.hasController())for(let r of this.controllerDocs.values())e+=r.getAuthenticationKeyCount();return e}getAuthenticationKeys(){let e=Array.from(this.authenticationKeys.values());if(this.hasController())for(let r of this.controllerDocs.values())e.push(...r.getAuthenticationKeys());return e}selectAuthenticationKeys(e,r){oe(e!=null||r!=null,"Invalid select args"),e=this.canonicalId(e);let n=[];for(let i of this.authenticationKeys.values())(e==null||i.getId().equals(e))&&(r!=null&&i.getType()!==r||n.push(i));if(this.hasController())for(let i of this.controllerDocs.values())n.push(...i.selectAuthenticationKeys(e,r));return n}getAuthenticationKey(e){oe(e!=null,"Invalid publicKey id"),e=this.canonicalId(e);let r=this.authenticationKeys.get(e);if(r!=null)return r;if(this.hasController()){let n=this.controllerDocs.get(e.getDid());if(n!=null)return n.getAuthenticationKey(e)}return null}isAuthenticationKey(e){return this.getAuthenticationKey(this.canonicalId(e))!=null}getAuthorizationKeyCount(){return this.authorizationKeys.size}getAuthorizationKeys(){return Array.from(this.authorizationKeys.values())}selectAuthorizationKeys(e,r){oe(e!=null||r!=null,"Invalid select args"),e=this.canonicalId(e);let n=[];for(let i of this.authorizationKeys.values())(e==null||i.getId().equals(e))&&(r!=null&&i.getType()!==r||n.push(i));return n}getAuthorizationKey(e){return oe(e!=null,"Invalid publicKey id"),this.authorizationKeys.get(this.canonicalId(e))}isAuthorizationKey(e){return this.getAuthorizationKey(e)!=null}getCredentialCount(){return this.credentials.size}getCredentials(){return Array.from(this.credentials.values())}selectCredentials(e,r){oe(e!=null||r!=null,"Invalid select args"),e=this.canonicalId(e);let n=[];for(let i of this.credentials.values())(e==null||i.getId().equals(e))&&(r!=null&&i.getType().indexOf(r)<0||n.push(i));return n}getCredential(e){return oe(e!=null,"Invalid Credential id"),this.credentials.get(this.canonicalId(e))}getServiceCount(){return this.services.size}getServices(){return Array.from(this.services.values())}selectServices(e,r){oe(e!=null||r!=null,"Invalid select args"),e=this.canonicalId(e);let n=[];for(let i of this.services.values())(e==null||i.getId().equals(e))&&(r!=null&&i.getType()!==r||n.push(i));return n}getService(e){return oe(e!=null,"Invalid service id"),this.services.get(this.canonicalId(e))}getExpires(){return this.expires}getLastModified(){return this.getProof().getCreated()}getSignature(){return this.getProof().getSignature()}getProof(){return this.getProofs()[0]}getProofs(){return this.proofs.valuesAsSortedArray()}getSerializeContextDid(){return this.getSubject()}toJSON(e=null){let r=e?new Oe(e):null,n={};if(this.context.length>0&&(n["@context"]=Array.from(this.context)),n.id=this.subject.toString(),this.controllers.length>0&&(n.controller=this.controllers.length==1?this.controllers[0].toString():Array.from(this.controllers,i=>i.toString())),this.multisig&&(n.multisig=this.multisig.toString()),this.publicKeys.size>0&&(n.publicKey=Array.from(this.publicKeys.valuesAsSortedArray(),i=>i.toJSON(e))),this.authenticationKeys.size>0&&(n.authentication=Array.from(this.authenticationKeys.valuesAsSortedArray(),i=>i.getId().toString(r))),this.authorizationKeys.size>0&&(n.authorization=Array.from(this.authorizationKeys.valuesAsSortedArray(),i=>i.getId().toString(r))),this.credentials.size>0&&(n.verifiableCredential=Array.from(this.credentials.valuesAsSortedArray(),i=>i.toJSON(e))),this.services.size>0&&(n.service=Array.from(this.services.valuesAsSortedArray(),i=>i.toJSON(e))),this.expires&&(n.expires=this.dateToString(this.expires)),this.proofs&&this.proofs.size>0){let i=this.proofs.valuesAsSortedArray();i.length==1?n.proof=i[0].toJSON(e):n.proof=Array.from(i,o=>o.toJSON(e))}return n}fromJSON(e,r=null){return ve(this,void 0,void 0,function*(){this.fromJSONOnly(e,r),this.controllers.length>0&&(yield this.resolveControllers())})}resolveControllers(){return ve(this,void 0,void 0,function*(){if(this.controllerDocs.size===this.controllers.length)return;let e=[];for(let r of this.controllers){let n=r.resolve().then(i=>{if(i==null)throw new $e("Can not resolve controller: "+r);if(this.controllerDocs.has(r))throw new $e("Duplicated controller: "+r);this.controllerDocs.set(r,i)});e.push(n)}try{yield Promise.all(e)}catch(r){throw new $e("Can not resolve the controller's DID: "+r,r)}})}fromJSONOnly(e,r=null){this.context=this.getContext("@context",e["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.subject=this.getDid("id",e.id,{mandatory:!0,nullable:!1,defaultValue:null}),r=this.subject,this.controllers=this.getDids("controller",e.controller,{mandatory:!1,nullable:!1,defaultValue:[]});let n=this.getString("multisig",e.multisig,{mandatory:!1,nullable:!1});if(n&&(this.multisig=Ne.MultiSignature.fromString(n)),this.controllerDocs=new dt,this.controllers.length<=1){if(this.multisig)throw new $e("Invalid multisig property")}else{if(this.multisig==null)throw new $e("Missing multisig property");if(this.multisig.n()!=this.controllers.length)throw new $e("Invalid multisig property")}if(this.publicKeys=new dt,e.publicKey){if(!Array.isArray(e.publicKey))throw new $e("Invalid property: publicKey, type error.");for(let i of e.publicKey){let o,a=i;try{o=Ne.PublicKey.deserialize(a,Ne.PublicKey,r)}catch(s){throw new $e("Invalid publicKey: "+a.id,s)}if(this.publicKeys.has(o.getId()))throw new $e("Duplicated publicKey: "+o.getId());this.publicKeys.set(o.getId(),o)}}if(this.authenticationKeys=new dt,e.authentication){if(!Array.isArray(e.authentication))throw new $e("Invalid property: authentication, type error.");for(let i of e.authentication){let o;if(typeof i=="string"){let a=new Je(i,r);if(!this.publicKeys.has(a))throw new $e("Not exists publicKey reference: "+a);o=this.publicKeys.get(a)}else{let a=i;try{o=Ne.PublicKey.deserialize(a,Ne.PublicKey,r)}catch(s){throw new $e("Invalid publicKey: "+a.id,s)}if(this.publicKeys.has(o.getId()))throw new $e("Duplicated publicKey: "+o.getId());this.publicKeys.set(o.getId(),o)}if(!o.getController().equals(r))throw new $e("Invalid authentication key: "+o.getId());this.authenticationKeys.set(o.getId(),o)}}if(this.authorizationKeys=new dt,e.authorization){if(!Array.isArray(e.authorization))throw new $e("Invalid property: authorization, type error.");for(let i of e.authorization){let o;if(typeof i=="string"){let a=new Je(i,r);if(!this.publicKeys.has(a))throw new $e("Not exists publicKey reference: "+a);o=this.publicKeys.get(a)}else{let a=i;try{o=Ne.PublicKey.deserialize(a,Ne.PublicKey,r)}catch(s){throw new $e("Invalid publicKey: "+a.id,s)}if(this.publicKeys.has(o.getId()))throw new $e("Duplicated publicKey: "+o.getId());this.publicKeys.set(o.getId(),o)}if(o.getController().equals(r))throw new $e("Invalid authorization key: "+o.getId());this.authorizationKeys.set(o.getId(),o)}}if(this.controllers.length>0)this.controllers.length==1&&(this.effectiveController=this.controllers[0]);else{if(!this.publicKeys||this.publicKeys.size==0)throw new $e("Missing publicKeys");for(let i of this.publicKeys.values())if(i.getController().equals(this.subject)&&qe.toAddress(i.getPublicKeyBytes())===this.subject.getMethodSpecificId()){this.defaultPublicKey=i,this.authenticationKeys.has(i.getId())||this.authenticationKeys.set(i.getId(),i);break}if(!this.defaultPublicKey)throw new $e("Missing default public key")}if(this.credentials=new dt,e.verifiableCredential){if(!Array.isArray(e.verifiableCredential))throw new $e("Invalid property: verifiableCredential, type error.");for(let i of e.verifiableCredential){let o,a=i;try{o=gt.deserialize(a,gt,r)}catch(s){throw new $e("Invalid verifiableCredential: "+a.id,s)}if(this.credentials.has(o.getId()))throw new $e("Duplicated verifiableCredential: "+o.getId());this.credentials.set(o.getId(),o)}}if(this.services=new dt,e.service){if(!Array.isArray(e.service))throw new $e("Invalid property: service, type error.");for(let i of e.service){let o,a=i;try{o=Ne.Service.deserialize(a,Ne.Service,r)}catch(s){throw new $e("Invalid service: "+a.id,s)}if(this.services.has(o.getId()))throw new $e("Duplicated service: "+o.getId());this.services.set(o.getId(),o)}}if(this.expires=this.getDate("expires",e.expires,{mandatory:!0,nullable:!1}),!e.proof)throw new $e("Missing property: proof");if(this.proofs=new dt,Array.isArray(e.proof))for(let i of e.proof){let o=i,a=Ne.Proof.deserialize(o,Ne.Proof,r);if(a.getCreator().getDid()==null)throw new $e("Invalid proof creater: "+a.getCreator());if(this.proofs.has(a.getCreator().getDid()))throw new $e("Aleady exist proof from "+a.getCreator().getDid());this.proofs.set(a.getCreator().getDid(),a)}else{let i=e.proof;this.isCustomizedDid()||i.creator||(i.creator=this.getDefaultPublicKeyId().toString());let o=Ne.Proof.deserialize(i,Ne.Proof,r);if(o.getCreator().getDid()==null)throw new $e("Invalid proof creater: "+o.getCreator());this.proofs.set(o.getCreator().getDid(),o)}}setMetadata(e){this.metadata=e,this.subject.setMetadata(e)}getMetadata(){return this.metadata==null&&(this.metadata=new ct(this.getSubject())),this.metadata}getStore(){return this.getMetadata().getStore()}isExpired(){return ei().isAfter(ei(this.expires))}isGenuine(e=null){let r=this.multisig==null?1:this.multisig.m();if(this.proofs.size!=r)return e!=null&&(e.failed(this,"{}: proof size not matched with multisig, {} expected, actual is {}",this.getSubject(),this.multisig.m(),this.proofs.size),e.failed(this,"{}: is not genuine",this.getSubject())),!1;let n=Ne.clone(this,!1).serialize(!0),i=vc.sha256Digest(Se.Buffer.from(n,"utf-8"));if(this.isCustomizedDid()){for(let o of this.proofs.values()){if(o.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"{}: key type '{}' for proof is not supported",this.getSubject(),o.getType()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;let a=this.getControllerDocument(o.getCreator().getDid());if(a==null)return e!=null&&(e.failed(this,"{}: can not resolve the document for controller '{}' to verify the proof",this.getSubject(),o.getCreator().getDid()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!a.isGenuine(e))return e!=null&&(e.failed(this,"{}: controller '{}' is not genuine, failed to verify the proof",this.getSubject(),o.getCreator().getDid()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!o.getCreator().equals(a.getDefaultPublicKeyId()))return e!=null&&(e.failed(this,"{}: key '{}' for proof is not default key of '{}'",this.getSubject(),o.getCreator(),o.getCreator().getDid()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!a.verifyDigest(o.getCreator(),o.getSignature(),i))return e!=null&&(e.failed(this,"{}: proof '{}' is invalid, signature mismatch",this.getSubject(),o.getCreator()),e.failed(this,"{}: is not genuine",this.getSubject())),!1}return e!=null&&e.succeeded(this,"{}: is genuine",this.getSubject()),!0}{let o=this.getProof();if(o.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"{}: key type '{}' for proof is not supported",this.getSubject(),o.getType()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!o.getCreator().equals(this.getDefaultPublicKeyId()))return e!=null&&(e.failed(this,"{}: key '{}' for proof is not default key",this.getSubject(),o.getCreator()),e.failed(this,"{}: is not genuine",this.getSubject())),!1;let a=this.verifyDigest(o.getCreator(),o.getSignature(),i);return e!=null&&(a?e.succeeded(this,"{}: is genuine",this.getSubject()):(e.failed(this,"{}: can not verify the signature",this.getSubject()),e.failed(this,"{}: is not genuine",this.getSubject()))),a}}isDeactivated(){return ve(this,void 0,void 0,function*(){if(this.getMetadata().isDeactivated())return!0;let e=yield yt.getInstance().resolveDidBiography(this.getSubject());if(e==null)return!1;let r=e.getStatus()==_r.DEACTIVATED;return r&&this.getMetadata().setDeactivated(r),r})}isQualified(){return this.proofs!=null&&this.proofs.size!=0&&this.proofs.size==(this.multisig==null?1:this.multisig.m())}isValid(e=null){return ve(this,void 0,void 0,function*(){if(yield this.isDeactivated())return e!=null&&(e.failed(this,"{}: is deactivated",this.getSubject()),e.failed(this,"{}: is invalid",this.getSubject())),!1;if(this.isExpired())return e!=null&&(e.failed(this,"{}: is expired",this.getSubject()),e.failed(this,"{}: is invalid",this.getSubject())),!1;if(!this.isGenuine(e))return e!=null&&e.failed(this,"{}: is invalid",this.getSubject()),!1;if(this.hasController())for(let r of this.controllerDocs.values()){if(yield r.isDeactivated())return e!=null&&(e.failed(this,"{}: controller '{}' is deactivated",this.getSubject(),r.getSubject()),e.failed(this,"{}: is invalid",this.getSubject())),!1;if(!r.isGenuine(e))return e!=null&&(e.failed(this,"{}: controller '{}' is not genuine",this.getSubject(),r.getSubject()),e.failed(this,"{}: is invalid",this.getSubject())),!1}return e!=null&&e.succeeded(this,"{}: is valid",this.getSubject()),!0})}copy(){let e=new Ne(this.subject);e.context=this.context==null?null:Array.from(this.context),e.controllers=Array.from(this.controllers),e.controllerDocs=new dt(this.controllerDocs),this.multisig!=null&&(e.multisig=Ne.MultiSignature.newFromMultiSignature(this.multisig)),e.effectiveController=this.effectiveController,e.publicKeys=new dt(this.publicKeys),e.authenticationKeys=new dt(this.authenticationKeys),e.authorizationKeys=new dt(this.authorizationKeys),e.defaultPublicKey=this.defaultPublicKey,e.credentials=new dt(this.credentials),e.services=new dt(this.services),e.expires=this.expires,e.proofs=new dt(this.proofs);let r=this.getMetadata().clone();return e.setMetadata(r),e}clone(){let e=new Ne(this.subject);return e.context=this.context,e.controllers=this.controllers,e.controllerDocs=this.controllerDocs,e.effectiveController=this.effectiveController,e.multisig=this.multisig,e.publicKeys=this.publicKeys,e.authenticationKeys=this.authenticationKeys,e.authorizationKeys=this.authorizationKeys,e.defaultPublicKey=this.defaultPublicKey,e.credentials=this.credentials,e.services=this.services,e.expires=this.expires,e.proofs=this.proofs,e.metadata=this.getMetadata().clone(),e}signWithId(e,r,...n){let i;oe(r&&r!=null,"Invalid storepass"),oe(n!=null&&n.length>0,"Invalid input data"),this.checkAttachedStore(),i=typeof e=="string"?this.canonicalId(e):e;let o=In.encodeToBuffer(...n);return this.signDigest(i,r,o)}signWithStorePass(e,...r){return this.signWithId(null,e,...r)}signWithTicket(e,r){return ve(this,void 0,void 0,function*(){return oe(e!=null,"Invalid ticket"),oe(r&&r!=null,"Invalid storepass"),this.checkAttachedStore(),yield e.seal(this,r),e})}signWithDocument(e,r){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid document"),oe(r&&r!=null,"Invalid storepass"),this.checkAttachedStore(),!e.isCustomizedDid())throw new Ks(e.getSubject().toString()+"isn't a customized did");if(!e.hasController(this.getSubject()))throw new Go(this.getSubject()+" isn't the controller of "+e.getSubject().toString());if(this.isCustomizedDid()){if(this.getEffectiveController()==null)throw new gi("no effective controller of "+this.getSubject().toString())}else if(!e.hasController(this.getSubject()))throw new Go(this.getSubject().toString()+" isn't the controller of "+e.getSubject().toString());if(e.proofs.has(this.getSubject()))throw new $f(this.getSubject().toString()+" already signed");let n=Ne.Builder.newFromDocument(e).edit(this);try{return yield n.seal(r)}catch(i){throw new Jr(i)}})}signDigest(e,r,n){oe(r&&r!=null,"Invalid storepass"),oe(n!=null&&n.length>0,"Invalid digest"),this.checkAttachedStore(),typeof e=="string"&&(e=this.canonicalId(e));let i=e!=null?this.getPublicKey(e):this.getDefaultPublicKey();if(i==null)throw e!=null?new It(e.toString()+" is a invalid key"):new gi("No effective controller of "+this.getSubject().toString());return this.getMetadata().getStore().sign(i.getId(),r,n)}verify(e,r,...n){oe(r&&r!=null,"Invalid signature"),oe(n!=null&&n.length>0,"Invalid digest");let i=vc.sha256Digest(...n);return this.verifyDigest(e,r,i)}verifyDigest(e,r,n){oe(r&&r!=null,"Invalid signature"),oe(n!=null&&n.length>0,"Invalid digest"),typeof e=="string"&&(e=this.canonicalId(e));let i=e!=null?this.getPublicKey(e):this.getDefaultPublicKey();if(i==null)throw new It(e!=null?e.toString()+"is a invalide key":"No explicit publicKey");let o=i.getPublicKeyBytes(),a=Se.Buffer.from((s=r,Zr.decode(s)),"hex");var s;return vc.verify(o,a,n)}getKeyProvider(){let e=this;return new class{getPublicKey(r=null){return ve(this,void 0,void 0,function*(){let n;if(n=r==null?e.getDefaultPublicKeyId():e.canonicalId(r),!e.hasPublicKey(n))return null;let i=e.getPublicKey(n).getPublicKeyBytes(),a=yield new Q1.Key("oct",i,{namedCurve:"P-256"}).export("jwk"),s=Object.assign({},a);return yield xy(s,"ES256",!0)})}getPrivateKey(r=null,n){return ve(this,void 0,void 0,function*(){let i;i=r==null?e.getDefaultPublicKeyId():e.canonicalId(r);let o=e.getMetadata().getStore();if(!o.containsPrivateKey(i))return null;let a=qe.deserialize(yield o.loadPrivateKey(i,n)),c=yield new Q1.Key("oct",a.getPrivateKeyBytes(),{namedCurve:"P-256"}).export("jwk"),f=Object.assign({},c);return yield xy(f,"ES256",!0)})}}}jwtBuilder(){return new b3(this.getSubject(),this.getKeyProvider()).setIssuer(this.getSubject().toString())}jwtParserBuilder(){let e=Up.newWithKeyProvider(this.getKeyProvider());return e.requireIssuer(this.getSubject().toString()),e}newCustomized(e,r,n){return this.newCustomizedDidWithController(e,[],1,r,n)}newCustomizedDidWithController(e,r,n,i,o){return ve(this,void 0,void 0,function*(){oe(e&&e!=null,"Invalid DID"),oe(i&&i!=null,"Invalid storepass"),this.checkAttachedStore();let a=Oe.from(e),s=[];r&&r.length&&r.forEach(h=>{let y=Oe.from(h);y.equals(this.getSubject())||s.includes(h)||s.push(y)}),oe(n>=0&&n<=s.length+1,"Invalid multisig"),Ne.log.info("Creating new DID {} with controller {}...",a,this.getSubject());let c=null;if(!o&&(c=yield a.resolve(!0),c))throw new Rs(a.toString()+" already exist");Ne.log.info("Creating new DID {} with controller {}...",a,this.getSubject());let f=Ne.Builder.newFromDID(a,this.getStore(),this);for(let h of s)yield f.addController(h);f.setMultiSignature(n);try{return c=yield f.seal(i),yield this.getStore().storeDid(c),c}catch(h){throw new Jr(h)}})}createTransferTicket(e,r,n){return ve(this,void 0,void 0,function*(){oe(e&&e!=null,"Invalid to"),oe(r&&r!=null,"Invalid storepass");let i=n?yield n.resolve(!0):this;if(n){if(this.checkIsPrimitive(),this.checkAttachedStore(),!i)throw new Qn(n.toString()+" isn't found in the chain");if(yield i.isDeactivated())throw new Hr(n.toString()+" is deactived");if(!i.isCustomizedDid())throw new Ks(n.toString()+" isn't a customized did");if(!i.hasController(this.getSubject()))throw new Go(this.getSubject().toString()+" isn't the controller of did")}else this.checkIsCustomized(),this.checkAttachedStore(),this.checkHasEffectiveController();let o=yield qr.newForDIDDocument(i,e);return yield o.seal(this,r),o})}publishWithTicket(e,r,n,i=null){return ve(this,void 0,void 0,function*(){oe(yield e.isValid(),"Invalid ticket"),oe(e.getSubject().equals(this.getSubject()),"Ticket mismatch with current DID"),oe(n&&n!=null,"Invalid storepass"),this.checkIsCustomized(),oe(this.proofs.has(e.getTo()),"Document not signed by: "+e.getTo()),this.checkAttachedStore();let o=typeof r=="string"?this.canonicalId(r):r;if(o==null&&this.getDefaultPublicKeyId()==null)throw new gi("no effective controller of "+this.getSubject().toString());let a=this.getSubject(),s=yield a.resolve(!0);if(s==null)throw new Qn(a.toString()+" isn't found in the chain");if(yield s.isDeactivated())throw new Hr(a.toString()+" is deactivated");if(o==null){if(o=this.getDefaultPublicKeyId(),o==null)throw new It("No sign key.")}else if(this.getAuthenticationKey(o)==null)throw new It(o.toString()+" is a invalid key");yield yt.getInstance().transferDid(this,e,o,n,i)})}publish(e,r=null,n=!1,i=null){return ve(this,void 0,void 0,function*(){oe(e&&e!=null,"Invalid storepass"),this.checkAttachedStore();let o=typeof r=="string"?this.canonicalId(r):r;if(o==null&&this.getDefaultPublicKeyId()==null)throw new gi("No effective controller of "+this.getSubject().toString());if(Ne.log.info("Publishing DID {}, force={}...",this.getSubject(),n),!this.isGenuine())throw Ne.log.error("Publish failed because document is not genuine."),new xc(this.getSubject().toString()+" isn't genuine");if(yield this.isDeactivated())throw Ne.log.error("Publish failed because DID is deactivated."),new Hr(this.getSubject().toString()+" is deactivated");if(this.isExpired()&&!n)throw Ne.log.error("Publish failed because document is expired."),Ne.log.info("You can publish the expired document using force mode."),new Tc(this.getSubject().toString()+" is expired");let a=null,s=null,c=yield this.getSubject().resolve(!0);if(c!=null){if(yield c.isDeactivated())throw this.getMetadata().setDeactivated(!0),Ne.log.error("Publish failed because DID is deactivated."),new Hr(this.getSubject().toString()+" is deactivated");if(this.isCustomizedDid()){let f=this.getMultiSignature()==null?Ne.MultiSignature.ONE_OF_ONE:this.getMultiSignature(),h=c.getMultiSignature()==null?Ne.MultiSignature.ONE_OF_ONE:c.getMultiSignature();if(!f.equals(h))throw new Jl("Multisig is changed");let y=c.getControllers(),g=this.getControllers();if(y.length!=g.length)throw new Jl("Controllrs count is changed");y.sort(),g.sort();for(let _=0;_<y.length;_++)if(!y[_].equals(g[_]))throw new Jl("Controllers are changed")}if(s=c.getProof().getSignature(),!n){let f=this.getMetadata().getPreviousSignature(),h=this.getMetadata().getSignature();if(f==null&&h==null)throw Ne.log.error("Trying to publish over an existing document, but signatures information is missing. DID SDK doesn't know how to handle it, use force mode to ignore checks."),new Vl(this.getSubject().toString()+" signatures information is missing");if(f==null||h==null){if((f!=null?f:h)!==s)throw Ne.log.error("Current copy not based on the latest on-chain copy, signature mismatch."),new Vl(this.getSubject().toString()+" signature mismatch")}else if(h!==s&&f!==s)throw Ne.log.error("Current copy not based on the latest on-chain copy, signature mismatch."),new Vl(this.getSubject().toString()+" signature mismatch")}a=c.getMetadata().getTransactionId()}if(o==null)o=this.getDefaultPublicKeyId();else if(this.getAuthenticationKey(o)==null)throw new It(o.toString()+" is a invalid key");a&&a!=null?(Ne.log.info("Try to publish[update] {}...",this.getSubject()),yield yt.getInstance().updateDid(this,a,o,e,i)):(Ne.log.info("Try to publish[create] {}...",this.getSubject()),yield yt.getInstance().createDid(this,o,e,i)),s!=null&&this.getMetadata().setPreviousSignature(s),this.getMetadata().setSignature(this.getProof().getSignature())})}publishUntrusted(e,r,n=null){return ve(this,void 0,void 0,function*(){if(oe(r!=null&&r!="","Invalid storepass"),this.checkIsPrimitive(),this.checkAttachedStore(),e==null&&this.getDefaultPublicKeyId()==null)throw new gi("No effective controller of "+this.getSubject().toString());if(Ne.log.info("Publishing untrusted DID {}...",this.getSubject()),!this.isGenuine())throw Ne.log.error("Publish failed because document is not genuine."),new xc(this.getSubject().toString()+" isn't genuine");if(yield this.isDeactivated())throw Ne.log.error("Publish failed because DID is deactivated."),new Hr(this.getSubject().toString()+" is deactivated");if(this.isExpired())throw Ne.log.error("Publish failed because document is expired."),new Tc(this.getSubject().toString()+" is expired");let i=null,o=null,a=yield yt.getInstance().resolveUntrustedDid(this.getSubject(),!0);if(a!=null){if(yield a.isDeactivated())throw this.getMetadata().setDeactivated(!0),Ne.log.error("Publish failed because DID is deactivated."),new Hr(this.getSubject().toString()+" is deactivated");o=a.getProof().getSignature(),i=a.getMetadata().getTransactionId()}if(e==null)e=this.getDefaultPublicKeyId();else if(this.getAuthenticationKey(e)==null)throw new It(e.toString()+" is a invalid key");i&&i!=null?(Ne.log.info("Try to publish[update] {}...",this.getSubject()),yield yt.getInstance().updateDid(this,i,e,r,n)):(Ne.log.info("Try to publish[create] {}...",this.getSubject()),yield yt.getInstance().createDid(this,e,r,n)),o!=null&&this.getMetadata().setPreviousSignature(o),this.getMetadata().setSignature(this.getProof().getSignature())})}deactivate(e=null,r,n=null){return ve(this,void 0,void 0,function*(){if(oe(r&&r!=null,"Invalid storepass"),this.checkAttachedStore(),e==null&&this.getDefaultPublicKeyId()==null)throw new gi("No effective controller of "+this.getSubject().toString());let i=yield this.getSubject().resolve(!0);if(i==null)throw new Qn(this.getSubject().toString()+" isn't found in the chain");if(yield i.isDeactivated())throw new Hr(this.getSubject().toString()+" is deactivated");if(i.getMetadata().attachStore(this.getStore()),i.effectiveController=this.effectiveController,e==null)e=i.getDefaultPublicKeyId();else if(i.isCustomizedDid()){let o=this.getControllerDocument(e.getDid());if(o==null||!e.equals(o.getDefaultPublicKeyId()))throw new It(e.toString()+" is a invalid key")}else if(!e.equals(i.getDefaultPublicKeyId())&&i.getAuthorizationKey(e)==null)throw new It(e.toString()+" is a invalid key");yield yt.getInstance().deactivateDid(i,e,r,n)})}deactivateTargetDID(e,r=null,n,i=null){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid target DID"),oe(n&&n!=null,"Invalid storepass"),this.checkAttachedStore(),r==null&&this.getDefaultPublicKeyId()==null)throw new gi("No effective controller of "+this.getSubject().toString());let o=yield e.resolve(!0);if(o==null)throw new Qn(e.toString()+" isn't found in the chain");if(yield o.isDeactivated())throw new Hr(e.toString()+" is deactivated");if(o.getMetadata().attachStore(this.getStore()),o.isCustomizedDid()){if(!o.hasController(this.getSubject()))throw new Go(this.getSubject().toString()+" isn't the controller of "+o.getSubject().toString());if(r==null)r=this.getDefaultPublicKeyId();else if(!r.equals(this.getDefaultPublicKeyId()))throw new It(r.toString()+" isn't the default key");yield yt.getInstance().deactivateDid(o,r,n,i)}else{if(o.getAuthorizationKeyCount()==0)throw new It("No authorization key from: "+e);let a=null;if(r==null)a=this.getAuthenticationKeys();else{let f=this.getAuthenticationKey(r);if(f==null)throw new It(r.toString()+" isn't an authentication key");a=[],a.push(f)}let s=null,c=null;e:for(let f of a)for(let h of o.getAuthorizationKeys())if(h.getController().equals(this.getSubject())&&h.getPublicKeyBase58()===f.getPublicKeyBase58()){s=f.getId(),c=h.getId();break e}if(s==null||c==null)throw new It("No matched authorization key.");yield yt.getInstance().deactivateTargetDid(o,c,this,s,n,i)}})}static parseAsync(e){return ve(this,void 0,void 0,function*(){try{return yield Pe.deserializeAsync(e,Ne)}catch(r){throw r instanceof $e?r:new $e(r)}})}static _parseOnly(e){oe(e&&e!=="","Invalid JSON content");try{let r;r=typeof e=="string"?JSON.parse(e):e;let n=new Ne;return n.fromJSONOnly(r),n}catch(r){throw r instanceof $e?r:new $e(r)}}}Ne.log=new We("DIDDocument"),Ne.W3C_DID_CONTEXT="https://www.w3.org/ns/did/v1",Ne.ELASTOS_DID_CONTEXT="https://ns.elastos.org/did/v1",Ne.W3ID_SECURITY_CONTEXT="https://w3id.org/security/v1",function(t){class e extends Pe{constructor(a=null,s=null,c=null,f=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.id=a,this.type=f!=null?f:tt.DEFAULT_PUBLICKEY_TYPE,this.controller=s,this.publicKeyBase58=c}getId(){return this.id}getType(){return this.type}getController(){return this.controller}getPublicKeyBase58(){return this.publicKeyBase58}getPublicKeyBytes(){return Sn.decode(this.publicKeyBase58)}equals(a){return this==a||this.getId().equals(a.getId())&&this.getType()===a.getType()&&this.getController().equals(a.getController())&&this.getPublicKeyBase58()===a.getPublicKeyBase58()}compareTo(a){let s=this.id.compareTo(a.id);return s!=0?s:(s=this.publicKeyBase58.localeCompare(a.publicKeyBase58),s!=0?s:(s=this.type.localeCompare(a.type),s!=0?s:this.controller.compareTo(a.controller)))}toJSON(a=null){let s=a?new Oe(a):null,c={};return c.id=this.id.toString(s),s&&this.type===tt.DEFAULT_PUBLICKEY_TYPE||(c.type=this.type),s&&this.controller.equals(s)||(c.controller=this.controller.toString()),c.publicKeyBase58=this.publicKeyBase58,c}fromJSON(a,s=null){this.id=this.getDidUrl("publicKey.id",a.id,{mandatory:!0,nullable:!1,context:s}),this.type=this.getString("publicKey.type",a.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE}),this.controller=this.getDid("publicKey.controller",a.controller,{mandatory:!1,nullable:!1,defaultValue:s}),this.publicKeyBase58=this.getString("publicKey.publicKeyBase58",a.publicKeyBase58,{mandatory:!0,nullable:!1})}}t.PublicKey=e,t.Service=class extends Pe{constructor(o=null,a=null,s=null,c){super(),this.id=o,this.type=a,this.serviceEndpoint=s,this.properties=c?ea(c):{},Object.keys(this.properties).length>0&&(delete this.properties.id,delete this.properties.type,delete this.properties.serviceEndpoint)}getId(){return this.id}getType(){return this.type}getServiceEndpoint(){return this.serviceEndpoint}getProperties(){return Object.keys(this.properties).length>0?this.properties:null}equals(o){return this==o||this.getId().equals(o.getId())&&this.getType()===o.getType()&&this.getServiceEndpoint()===o.getServiceEndpoint()}compareTo(o){let a=this.id.compareTo(o.id);return a!=0?a:(a=this.type.localeCompare(o.type),a!=0?a:this.serviceEndpoint.localeCompare(o.serviceEndpoint))}toJSON(o=null){let a=o?new Oe(o):null,s={};return s.id=this.id.toString(a),s.type=this.type,s.serviceEndpoint=this.serviceEndpoint,Object.assign(Object.assign({},s),this.properties)}fromJSON(o,a=null){this.id=this.getDidUrl("service.id",o.id,{mandatory:!0,nullable:!1,context:a}),this.type=this.getString("service.type",o.type,{mandatory:!0,nullable:!1}),this.serviceEndpoint=this.getString("service.serviceEndpoint",o.serviceEndpoint,{mandatory:!0,nullable:!1}),Object.keys(o).length>3&&(this.properties=ea(o),delete this.properties.id,delete this.properties.type,delete this.properties.serviceEndpoint)}};class r extends Pe{constructor(a=null,s=null,c=new Date,f=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.type=f||tt.DEFAULT_PUBLICKEY_TYPE,this.created=c===void 0?new Date:c!==null?new Date(c):null,this.created&&this.created.setMilliseconds(0),this.creator=a,this.signature=s}equals(a){return this.compareTo(a)==0}getType(){return this.type}getCreated(){return this.created}getCreator(){return this.creator}getSignature(){return this.signature}compareTo(a){let s=this.created.getTime()-a.created.getTime();return s==0&&(s=this.creator.compareTo(a.creator)),s}toJSON(a=null){let s=a?new Oe(a):null,c={};return s&&this.type===tt.DEFAULT_PUBLICKEY_TYPE||(c.type=this.type),this.created&&(c.created=this.dateToString(this.created)),c.creator=this.creator.toString(s),c.signatureValue=this.signature,c}fromJSON(a,s=null){this.type=this.getString("proof.type",a.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",a.created,{mandatory:!1}),this.creator=this.getDidUrl("proof.creator",a.creator,{mandatory:!0,nullable:!1,context:s}),this.signature=this.getString("proof.signatureValue",a.signatureValue,{mandatory:!0,nullable:!1})}}t.Proof=r;class n{constructor(a,s){this.apply(a,s)}static fromString(a){if(!a||a==null)throw new ti("Invalid multisig spec");let s=a.split(":");if(s==null||s.length!=2)throw new ti("Invalid multisig spec");return new n(Number.parseInt(s[0]),Number.parseInt(s[1]))}static newFromMultiSignature(a){return new n(a.m(),a.n())}apply(a,s){oe(s>0,"Invalid multisig spec: n should > 0"),oe(a>0&&a<=s,"Invalid multisig spec: m should > 0 and <= n"),this.mv=a,this.nv=s}m(){return this.mv}n(){return this.nv}equals(a){return this==a||this.mv==a.mv&&this.nv==a.nv}toString(){return this.mv.toString()+":"+this.nv.toString()}}n.ONE_OF_ONE=new n(1,1),t.MultiSignature=n;class i{constructor(){}static newFromDID(a,s,c){let f=new i;if(f.document=new t(a),ta.isEnabledJsonLdContext()&&f.addDefaultContexts(),f.sourceDocument=f.document,c!==void 0)f.document.controllers=[],f.document.controllerDocs=new dt,f.document.controllers.push(c.getSubject()),f.document.controllerDocs.set(c.getSubject(),c),f.document.effectiveController=c.getSubject(),f.document.setMetadata(new ct(a,s)),f.controllerDoc=c;else{let h=new ct(a,s);f.document.setMetadata(h)}return f}static newFromDocument(a,s){let c=new i;return c.sourceDocument=a,c.document=a.copy(),s!==void 0&&(c.document.effectiveController=s.getSubject(),c.controllerDoc=s),c}edit(a){if(a!==void 0){if(this.document.checkIsCustomized(),!this.document.getMetadata().attachedStore()&&!a.getMetadata().attachedStore())throw new kc("Not attach with did store");if(a.getMetadata().attachedStore()?this.document.getMetadata().attachStore(a.getMetadata().getStore()):a.getMetadata().attachStore(this.document.getMetadata().getStore()),!this.sourceDocument.hasController(a.getSubject()))throw new Go(a.getSubject().toString()+" isn't the controller of "+this.sourceDocument.getSubject().toString());return this.document.effectiveController=a.getSubject(),this.controllerDoc=a,this}if(this.document.isCustomizedDid()){if(this.sourceDocument.getEffectiveController()==null)throw new gi("Unable to edit a customized DIDDocument without effective controller");return this.edit(this.sourceDocument.getEffectiveControllerDocument())}return this.document.checkAttachedStore(),this}canonicalId(a){return typeof a=="string"?Je.from(a,this.getSubject()):a==null||a.getDid()!=null?a:Je.from(a,this.getSubject())}invalidateProof(){this.document.proofs!=null&&this.document.proofs.size!=0&&this.document.proofs.clear()}checkNotSealed(){if(this.document==null)throw new Dc(this.getSubject().toString()+" is already sealed")}checkIsCustomized(){if(!this.document.isCustomizedDid())throw new Ks(this.document.getSubject().toString()+"isn't a customized did")}addDefaultContexts(){return ta.isEnabledJsonLdContext()?(this.document.context==null&&(this.document.context=[]),this.document.context.includes(t.W3C_DID_CONTEXT)||this.document.context.push(t.W3C_DID_CONTEXT),this.document.context.includes(t.ELASTOS_DID_CONTEXT)||this.document.context.push(t.ELASTOS_DID_CONTEXT),this.document.context.includes(t.W3ID_SECURITY_CONTEXT)||this.document.context.push(t.W3ID_SECURITY_CONTEXT)):em.warn("JSON-LD context support not enabled"),this}addContext(a){return ta.isEnabledJsonLdContext()?(this.document.context==null&&(this.document.context=[]),this.document.context.includes(a)||this.document.context.push(a)):em.warn("JSON-LD context support not enabled"),this}getSubject(){return this.checkNotSealed(),this.document.getSubject()}addController(a){return ve(this,void 0,void 0,function*(){oe(a!=null,"Invalid controller"),typeof a=="string"&&(a=Oe.from(a)),this.checkNotSealed(),this.checkIsCustomized(),oe(!this.document.controllers.includes(a),"Controller already exists");let s=yield a.resolve(!0);if(s==null)throw new Qn(a.toString()+" isn't found in the chain");if(yield s.isDeactivated())throw new Hr(a.toString()+" is deactivated");if(s.isExpired())throw new Tc(a.toString()+" is expired");if(!s.isGenuine())throw new xc(a.toString()+" isn't genuine");if(s.isCustomizedDid())throw new ja(a.toString()+"is a customized did");return this.document.controllers.push(a),this.document.controllerDocs.set(a,s),this.document.multisig=null,this.invalidateProof(),this})}removeController(a){if(oe(a!=null,"Invalid controller"),typeof a=="string"&&(a=Oe.from(a)),this.checkNotSealed(),this.checkIsCustomized(),a.equals(this.controllerDoc.getSubject()))throw new pb(a.toString());let s=this.document.controllers.findIndex(c=>c.equals(a));return s!=-1&&(this.document.controllers.splice(s,1),this.document.controllerDocs.delete(a),this.document.multisig=null,this.invalidateProof()),this}setMultiSignature(a){this.checkNotSealed(),this.checkIsCustomized(),oe(a>=1,"Invalid signature count");let s=this.document.controllers.length;oe(a<=s,"Signature count exceeds the upper limit");let c=null;return s>1&&(c=new n(a,s)),this.document.multisig==null&&c==null||this.document.multisig!=null&&c!=null&&this.document.multisig.equals(c)||(this.document.multisig=new n(a,s),this.invalidateProof()),this}addPublicKey(a){if(this.document.publicKeys==null)this.document.publicKeys=new dt,this.document.authenticationKeys=new dt,this.document.authorizationKeys=new dt;else for(let s of this.document.publicKeys.values()){if(s.getId().equals(a.getId()))throw new Cs("PublicKey id '"+a.getId()+"' already exist.");if(s.getPublicKeyBase58()===a.getPublicKeyBase58())throw new Cs("PublicKey '"+a.getPublicKeyBase58()+"' already exist.")}this.document.publicKeys.set(a.getId(),a),this.document.defaultPublicKey==null&&qe.toAddress(a.getPublicKeyBytes())===this.getSubject().getMethodSpecificId()&&(this.document.defaultPublicKey=a,this.document.authenticationKeys.set(a.getId(),a)),this.invalidateProof()}createAndAddPublicKey(a,s,c,f="ECDSAsecp256r1"){return this.checkNotSealed(),typeof a=="string"&&(a=this.canonicalId(a)),c===void 0?c=null:typeof c=="string"&&(c=Oe.from(c)),oe(a!=null&&(a.getDid()==null||a.getDid().equals(this.getSubject())),"Invalid publicKey id"),oe(s&&s!=null,"Invalid publicKey"),c==null&&(c=this.getSubject()),this.addPublicKey(new e(this.canonicalId(a),c,s,f)),this}removePublicKey(a,s=!1){if(this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),this.document.publicKeys==null||this.document.publicKeys.size==0)throw new hr(this.getSubject().toString()+" has no any publickey");a=this.canonicalId(a);let c=this.document.publicKeys.get(a);if(c==null)throw new hr("No key "+a.toString());if(this.document.defaultPublicKey!=null&&this.document.defaultPublicKey.getId().equals(a))throw new Wl(a.toString()+"is default key");if(!s&&(this.document.authenticationKeys.has(c.getId())||this.document.authorizationKeys.has(c.getId())))throw new Wl(a.toString());if(this.document.publicKeys.delete(a)){this.document.authenticationKeys.delete(a),this.document.authorizationKeys.delete(a);try{this.document.getMetadata().attachedStore()&&this.document.getMetadata().getStore().deletePrivateKey(a)}catch(f){i.log.error("INTERNAL - Remove private key",f)}this.invalidateProof()}return this}addExistingAuthenticationKey(a){if(oe(a!=null,"Invalid publicKey id"),this.document.publicKeys==null||this.document.publicKeys.size==0)throw new hr(this.getSubject().toString()+" has no any publickey");a=this.canonicalId(a);let s=this.document.publicKeys.get(a);if(s==null)throw new hr("No key "+a.toString());if(!s.getController().equals(this.getSubject()))throw new Ms(a.toString()+" isn't the self key, so it can't to be authentaication key");return this.document.authenticationKeys.has(a)||(this.document.authenticationKeys.set(a,s),this.invalidateProof()),this}addAuthenticationKey(a,s){this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),typeof a=="string"&&(a=this.canonicalId(a)),oe(a!=null&&(a.getDid()==null||a.getDid().equals(this.getSubject())),"Invalid publicKey id"),oe(s&&s!=null,"Invalid publicKey");let c=new e(this.canonicalId(a),this.getSubject(),s);return this.addPublicKey(c),this.document.authenticationKeys.set(a,c),this}removeAuthenticationKey(a){if(this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),this.document.publicKeys==null||this.document.publicKeys.size==0)throw new hr(this.getSubject().toString()+" has no any publickey");a=this.canonicalId(a);let s=this.document.publicKeys.get(a);if(s==null||!this.document.authenticationKeys.has(s.getId()))throw new hr("No key "+a.toString());if(this.document.defaultPublicKey!=null&&this.document.defaultPublicKey.getId().equals(a))throw new Wl("Cannot remove the default PublicKey from authentication.");if(!this.document.authenticationKeys.has(a))throw new hr("No key "+a.toString());return this.document.authenticationKeys.delete(a),this.invalidateProof(),this}addExistingAuthorizationKey(a){if(this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),this.document.isCustomizedDid())throw new ja(this.getSubject().toString()+"is a customized did");if(this.document.publicKeys==null||this.document.publicKeys.size==0)throw new hr(this.getSubject().toString()+" has no any publickey");a=this.canonicalId(a);let s=this.document.publicKeys.get(a);if(s==null)throw new hr("No key "+a.toString());if(s.getController().equals(this.getSubject()))throw new Ms("Self key can't be authorization key");return this.document.authorizationKeys.has(a)||(this.document.authorizationKeys.set(a,s),this.invalidateProof()),this}addAuthorizationKey(a,s,c){if(this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),typeof a=="string"&&(a=this.canonicalId(a)),typeof s=="string"&&(s=Oe.from(s)),oe(a.getDid()==null||a.getDid().equals(this.getSubject()),"Invalid publicKey id"),oe(c&&c!=null,"Invalid publicKey"),this.document.isCustomizedDid())throw new ja(this.getSubject().toString()+"is a customized did");if(s.equals(this.getSubject()))throw new Ms("Key's controller is self.");let f=new e(this.canonicalId(a),s,c);return this.addPublicKey(f),this.document.authorizationKeys.set(a,f),this}authorizeDid(a,s,c){return ve(this,void 0,void 0,function*(){if(this.checkNotSealed(),oe(a!=null&&(a.getDid()==null||a.getDid().equals(this.getSubject())),"Invalid publicKey id"),oe(s!=null&&!s.equals(this.getSubject()),"Invalid controller"),this.document.isCustomizedDid())throw new ja(this.getSubject().toString()+"is a customized did");let f=yield s.resolve();if(f==null)throw new Qn(a.toString()+" isn't found in the chain");if(yield f.isDeactivated())throw new Hr(s.toString()+" is deactivated");if(f.isExpired())throw new Tc(s.toString()+" is expired");if(!f.isGenuine())throw new xc(s.toString()+" isn't genuine");if(f.isCustomizedDid())throw new ja(s.toString()+"is a customized did");c==null&&(c=f.getDefaultPublicKeyId());let h=f.getAuthenticationKey(c);if(h==null)throw new hr("No authentication key "+c.toString());let y=new e(this.canonicalId(a),s,h.getPublicKeyBase58(),h.getType());return this.addPublicKey(y),this.document.authorizationKeys.set(a,y),this})}removeAuthorizationKey(a){this.checkNotSealed(),oe(a!=null,"Invalid publicKey id");let s=typeof a=="string"?this.canonicalId(a):a;if(this.document.publicKeys==null||this.document.publicKeys.size==0)throw new hr(this.getSubject().toString()+" has no any publickey");if(s=this.canonicalId(s),this.document.publicKeys.get(s)==null)throw new hr("No key "+s.toString());if(!this.document.authorizationKeys.has(s))throw new hr("No authorization key "+s.toString());return this.document.authorizationKeys.delete(s),this.invalidateProof(),this}addCredential(a){return ve(this,void 0,void 0,function*(){if(this.checkNotSealed(),oe(a!=null,"Invalid credential"),!a.getSubject().getId().equals(this.getSubject()))throw new Ms("Credential "+a.getSubject().getId().toString()+" doesn't belong to DID"+this.getSubject().toString());if(!(a.isSelfProclaimed()?yield(()=>ve(this,void 0,void 0,function*(){return new Promise((s,c)=>{s(a.isGenuineInternal(this.document))})}))():yield a.isGenuine()))throw new _o(a.getId().toString());return this.addCredentialUncheck(a)})}addCredentialUncheck(a){if(this.document.credentials==null)this.document.credentials=new dt;else if(this.document.credentials.has(a.getId()))throw new Cs("Credential "+a.getId().toString()+"already exists in the document");return this.document.credentials.set(a.getId(),a),this.invalidateProof(),this}createAndAddCredential(a,s,c=null,f=[],h=null){return ve(this,void 0,void 0,function*(){this.checkNotSealed(),oe(s!=null,"Invalid publicKey id"),typeof s=="string"&&(s=this.canonicalId(s)),oe(s!=null,"Invalid publicKey id"),oe(s.getDid()==null||s.getDid().equals(this.getSubject()),"Invalid publicKey id"),oe(a&&a!=null,"Invalid storepass");let y=new Us(this.document).issueFor(this.document.getSubject());h==null&&(h=this.document.getExpires());try{let g=yield y.id(this.canonicalId(s)).types(...f).properties(c).expirationDate(h).seal(a);return this.addCredentialUncheck(g)}catch(g){throw new Jr(g)}})}removeCredential(a){if(this.checkNotSealed(),oe(a!=null,"Invalid credential id"),this.document.credentials==null||this.document.credentials.size==0)throw new hr(this.getSubject().toString()+" has no any credential");if(!this.document.credentials.delete(this.canonicalId(a)))throw new hr("No credential "+a.toString());return this.invalidateProof(),this}addService(a,s,c,f){this.checkNotSealed(),oe(a!=null,"Invalid publicKey id"),typeof a=="string"&&(a=this.canonicalId(a)),oe(a!=null&&(a.getDid()==null||a.getDid().equals(this.getSubject())),"Invalid publicKey id"),oe(s&&s!=null,"Invalid type"),oe(c&&c!=null,"Invalid endpoint");let h=new t.Service(this.canonicalId(a),s,c,f);if(this.document.services==null)this.document.services=new dt;else if(this.document.services.has(h.getId()))throw new Cs("Service '"+h.getId()+"' already exist.");return this.document.services.set(h.getId(),h),this.invalidateProof(),this}removeService(a){if(this.checkNotSealed(),oe(a!=null,"Invalid credential id"),typeof a=="string"&&(a=this.canonicalId(a)),this.document.services==null||this.document.services.size==0)throw new hr(a.toString()+" has no any service");if(!this.document.services.delete(this.canonicalId(a)))throw new hr("No service "+a.toString());return this.invalidateProof(),this}getMaxExpires(){return ei().add(tt.MAX_VALID_YEARS,"years").toDate()}setDefaultExpires(){return this.checkNotSealed(),this.document.expires=this.getMaxExpires(),this.document.expires&&this.document.expires.setMilliseconds(0),this.invalidateProof(),this}setExpires(a){if(this.checkNotSealed(),oe(a!=null,"Invalid expires"),a.setMilliseconds(0),ei(a).isAfter(this.getMaxExpires()))throw new ti("Invalid expires, out of range.");return this.document.expires=a,this.invalidateProof(),this}removeProof(a){if(this.checkNotSealed(),oe(a!=null,"Invalid controller"),this.document.proofs==null||this.document.proofs.size==0)return this;if(this.document.proofs.delete(a)==null)throw new hr("No proof signed by: "+a);return this}sanitize(){if(this.document.isCustomizedDid()){if(this.document.controllers==null||this.document.controllers.length==0)throw new $e("Missing controllers");if(this.document.controllers.length>1){if(this.document.multisig==null)throw new $e("Missing multisig");if(this.document.multisig.n()!=this.document.controllers.length)throw new $e("Invalid multisig, not matched with controllers")}else if(this.document.multisig!=null)throw new $e("Invalid multisig")}this.document.context!=null&&this.document.context.length!=0||(this.document.context=[]);let a=this.document.multisig==null?1:this.document.multisig.m();if(this.document.proofs!=null&&this.document.proofs.size==a)throw new Dc(this.getSubject().toString()+" is already sealed");this.document.controllers==null||this.document.controllers.length==0?(this.document.controllers=[],this.document.controllerDocs=new dt):Xc.sort(this.document.controllers),this.document.publicKeys!=null&&this.document.publicKeys.size!=0||(this.document.publicKeys=new dt,this.document.authenticationKeys=new dt,this.document.authorizationKeys=new dt),this.document.credentials==null&&(this.document.credentials=new dt),this.document.services==null&&(this.document.services=new dt),this.document.proofs!=null&&this.document.proofs.size!=0||this.document.getExpires()==null&&this.setDefaultExpires(),this.document.proofs==null&&(this.document.proofs=new dt)}seal(a){return ve(this,void 0,void 0,function*(){this.checkNotSealed(),oe(a&&a!=null,"Invalid storepass"),this.sanitize();let s=this.document.isCustomizedDid()?this.controllerDoc:this.document,c=s.getDefaultPublicKeyId();if(this.document.proofs.has(s.getSubject()))throw new $f(s.getSubject().toString()+" already signed");let f=this.document.proofs;this.document.proofs=null;let h=this.document.serialize(!0);this.document.proofs=f;let y=yield this.document.signWithId(c,a,Se.Buffer.from(h)),g=new r(c,y);this.document.proofs.set(g.getCreator().getDid(),g);let _=this.document;return this.document=null,_})}}i.log=new We("DIDDocumentBuilder"),t.Builder=i}(Ne||(Ne={}));const _n=new We("RootIdentity");class Dr{constructor(){}static newFromMnemonic(e,r){let n=new Dr;return n.mnemonic=e,r==null&&(r=""),n.rootPrivateKey=qe.newWithMnemonic(e,r),n.preDerivedPublicKey=n.rootPrivateKey.deriveWithPath(qe.PRE_DERIVED_PUBLICKEY_PATH),n.index=0,n}static newFromPrivateKey(e){let r=new Dr;return r.rootPrivateKey=e,r.preDerivedPublicKey=e.deriveWithPath(qe.PRE_DERIVED_PUBLICKEY_PATH),r.index=0,r}static newFromPreDerivedPublicKey(e,r){let n=new Dr;return n.preDerivedPublicKey=e,n.index=r,n}static getIdFromMnemonic(e,r){return this.newFromMnemonic(e,r).getId()}static createFromMnemonic(e,r,n,i,o=!1){oe(e!=null&&e!=="","Invalid mnemonic"),oe(n!=null,"Invalid DID store"),oe(i!=null&&i!=="","Invalid storepass");try{oe(Lt.checkIsValid(e),"Invalid mnemonic.")}catch(s){throw new ti(s)}r==null&&(r="");let a=Dr.newFromMnemonic(e,r);if(n.containsRootIdentity(a.getId())&&!o)throw new Kd(a.getId()+" already exist");return a.setMetadata(new Dr.Metadata(a.getId(),n)),n.storeRootIdentity(a,i),a.wipe(),a}static createFromPrivateKey(e,r,n,i=!1){oe(e!=null&&e!=="","Invalid extended private key"),oe(r!=null,"Invalid DID store"),oe(n!=null&&n!=="","Invalid storepass");let o=qe.deserializeBase58(e),a=Dr.newFromPrivateKey(o);if(r.containsRootIdentity(a.getId())&&!i)throw new Kd(a.getId()+" already exist");return a.setMetadata(new Dr.Metadata(a.getId(),r)),r.storeRootIdentity(a,n),a.wipe(),a}static createFromPreDerivedPublicKey(e,r){let n=e==null?null:qe.deserializeBase58(e);return Dr.newFromPreDerivedPublicKey(n,r)}wipe(){this.rootPrivateKey.wipe(),this.mnemonic=null,this.rootPrivateKey=null}getStore(){return this.metadata.getStore()}setMetadata(e){this.metadata=e}static getId(e){return oe(e!=null&&e.length>0,"Invalid key bytes"),za.createHash("md5").update(e.toString("hex"),"hex").digest("hex")}getId(){return this.id==null&&(this.id=Dr.getId(this.preDerivedPublicKey.serializePublicKey())),this.id}getAlias(){return this.metadata.getAlias()}setAlias(e){this.metadata.setAlias(e)}setAsDefault(){this.getStore().setDefaultRootIdentity(this)}getDefaultDid(){let e=this.metadata.getDefaultDid();return e==null?this.getDid(0):e}setDefaultDid(e){e instanceof Oe?this.metadata.setDefaultDid(e):this.metadata.setDefaultDid(Oe.from(e))}setDefaultDidByIndex(e){oe(e>=0,"Invalid index"),this.metadata.setDefaultDid(this.getDid(e))}getMnemonic(){return this.mnemonic}getRootPrivateKey(){return this.rootPrivateKey}getPreDerivedPublicKey(){return this.preDerivedPublicKey}getIndex(){return this.index}setIndex(e){this.index=e,this.getStore().storeRootIdentity(this)}incrementIndex(){let e=++this.index;return this.getStore().storeRootIdentity(this),e}getDid(e){oe(e>=0,"Invalid index");let r=this.preDerivedPublicKey.deriveWithIndex(0).deriveWithIndex(e);return new Oe(Oe.METHOD,r.getAddress())}getDidFromIdentifier(e,r=0){let n=this.preDerivedPublicKey.deriveWithPath(this.mapToDerivePath(e,r,!0));return new Oe(Oe.METHOD,n.getAddress())}static lazyCreateDidPrivateKey(e,r,n){return ve(this,void 0,void 0,function*(){let i=yield r.loadDid(e.getDid());if(i==null)throw _n.error("INTERNAL - Missing document for DID: {}",e.getDid()),new vr("Missing document for DID: "+e.getDid());let o=i.getMetadata().getRootIdentityId();if(o==null)return null;let a=r.derive(o,qe.DERIVE_PATH_PREFIX+i.getMetadata().getIndex(),n),s=i.getPublicKey(e);if(s==null)throw _n.error("INTERNAL - Invalid public key: {}",e),new vr("Invalid public key: "+e);if(a.getPublicKeyBase58()!==s.getPublicKeyBase58())throw _n.error("INTERNAL - Invalid DID metadata: {}",e.getDid()),new vr("Invalid DID metadata: "+e.getDid());let c=a.serialize();return r.storePrivateKey(e,c,n),c})}mapToDerivePath(e,r,n=!1){let i,o=In.encodeToBuffer(Buffer.from(e,"utf-8")),a=Lc.wrap(o);for(i=n?"m/":"";a.hasRemaining();){let s=a.readInt();i=i.concat((2147483647&s).toString()).concat("/")}return i=i.concat((2147483647&r).toString()),i}newDid(e,r,n=!1){return ve(this,void 0,void 0,function*(){oe(e!=null&&e!=="","Invalid storepass");let i=!1;r===void 0&&(r=this.getIndex(),i=!0),oe(r>=0,"Invalid index");let o=this.getDid(r),a=yield this.getStore().loadDid(o);if(a!=null){if(yield a.isDeactivated())throw new Hr(o.toString()+" is deactivated");if(!n)throw new Rs("DID already exists in the store.")}try{if(a=yield o.resolve(),a!=null){if(yield a.isDeactivated())throw new Hr(o.toString()+" is deactivated");if(!n)throw new Rs("DID already published.")}}catch(c){if(c instanceof Mt&&!n)throw c}_n.debug("Creating new DID {} at index {}...",o.toString(),r);let s=this.getStore().derive(this.getId(),qe.DERIVE_PATH_PREFIX+r,e);try{let c=Je.from("#primary",o);this.getStore().storePrivateKey(c,s.serialize(),e);let f=Ne.Builder.newFromDID(o,this.getStore());return f.addAuthenticationKey(c,s.getPublicKeyBase58()),a=yield f.seal(e),a.getMetadata().setRootIdentityId(this.getId()),a.getMetadata().setIndex(r),a.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(a),i&&this.incrementIndex(),a}catch(c){throw new Jr(c)}finally{s.wipe()}})}newDidFromIdentifier(e,r,n=0,i=!1){return ve(this,void 0,void 0,function*(){oe(e!=null&&e!=="","Invalid storepass"),oe(r!=null&&r!=="","Invalid identifier");let o=qe.PRE_DERIVED_PUBLICKEY_PATH+"/"+this.mapToDerivePath(r,n),a=this.getStore().derive(this.getId(),o,e),s=new Oe(Oe.METHOD,a.getAddress()),c=yield this.getStore().loadDid(s);if(c!=null){if(yield c.isDeactivated())throw new Hr(s.toString()+" is deactivated");if(!i)throw new Rs("DID already exists in the store.")}try{if(c=yield s.resolve(),c!=null){if(yield c.isDeactivated())throw new Hr(s.toString()+" is deactivated");if(!i)throw new Rs("DID already published.")}}catch(f){if(f instanceof Mt&&!i)throw f}_n.debug("Creating new DID {} with iden {}...",s.toString(),n);try{let f=Je.from("#primary",s);this.getStore().storePrivateKey(f,a.serialize(),e);let h=Ne.Builder.newFromDID(s,this.getStore());return h.addAuthenticationKey(f,a.getPublicKeyBase58()),c=yield h.seal(e),c.getMetadata().setRootIdentityId(this.getId()),c.getMetadata().setExtra("application",r),c.getMetadata().setExtra("securityCode",n),c.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(c),c}catch(f){throw new Jr(f)}finally{a.wipe()}})}hasMnemonic(){return this.getStore().containsRootIdentityMnemonic(this.getId())}exportMnemonic(e){return oe(e!=null&&e!=="","Invalid storepass"),this.getStore().exportRootIdentityMnemonic(this.getId(),e)}synchronizeIndex(e,r=null){return ve(this,void 0,void 0,function*(){oe(e>=0,"Invalid index"),r==null&&(r=Ya.getInstance());let n=this.getDid(e);_n.info("Synchronize {}/{}...",n.toString(),e);let i=yield n.resolve(!0);if(i==null)return _n.info("Synchronize {}/{}...not exists",n.toString(),e),!1;_n.debug("Synchronize {}/{}..exists, got the on-chain copy.",n.toString(),e);let o=i,a=yield this.getStore().loadDid(n);if(a!=null)if(a.getMetadata().detachStore(),a.getSignature()===i.getSignature()||a.getMetadata().getSignature()!=null&&a.getProof().getSignature()===a.getMetadata().getSignature())o.getMetadata().merge(a.getMetadata());else{if(_n.debug("{} on-chain copy conflict with local copy.",n.toString()),o=r.merge(i,a),o==null||!o.getSubject().equals(n))throw _n.error("Conflict handle merge the DIDDocument error."),new vr("deal with local modification error.");_n.debug("Conflict handle return the final copy.")}let s=o.getMetadata();return s.setPublished(i.getMetadata().getPublished()),s.setSignature(i.getProof().getSignature()),i.getMetadata().isDeactivated()&&s.setDeactivated(!0),s.setRootIdentityId(this.getId()),s.setIndex(e),a!=null&&a.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(o),this.getStore().storeLazyPrivateKey(o.getDefaultPublicKeyId()),!0})}synchronize(e=null){return ve(this,void 0,void 0,function*(){_n.info("Synchronize root identity {}...",this.getId());let r=this.getIndex()-1,n=0,i=0;for(;i<r||n<20;)(yield this.synchronizeIndex(i,e))?(i>r&&(r=i),n=0):i>r&&n++,i++;r>=this.getIndex()&&this.setIndex(r+1)})}}(function(t){class e extends Vr{constructor(n=null,i=null){super(i),this.id=n}setId(n){this.id=n}setDefaultDid(n){this.put(e.DEFAULT_DID,n.toString())}getDefaultDid(){return Oe.from(this.get(e.DEFAULT_DID))}save(){if(this.attachedStore())try{this.getStore().storeRootIdentityMetadata(this.id,this)}catch(n){throw n instanceof vr&&_n.error("INTERNAL - error store metadata for credential {}",this.id),n}}static parse(n,i=null){try{return Pe.deserialize(n,e,i)}catch(o){throw o instanceof Oo?o:new Oo(o)}}}e.DEFAULT_DID="defaultDid",t.Metadata=e})(Dr||(Dr={}));const Fo=new We("FileSystemStorage");class xe{constructor(e){this.storeRoot=new Xe(e),this.currentDataDir=xe.DATA_DIR}init(){return ve(this,void 0,void 0,function*(){this.storeRoot.exists()?yield this.checkStore():this.initializeStore()})}initializeStore(){try{Fo.debug("Initializing DID store at {}",this.storeRoot.getAbsolutePath()),this.storeRoot.createDirectory();let e=new qt;this.getFile(!0,this.currentDataDir,xe.METADATA).writeText(e.serialize())}catch(e){throw Fo.error("Initialize DID store error",e),new At('Initialize DIDStore "'+this.storeRoot.getAbsolutePath()+'" error.',e)}}checkStore(){if(Fo.debug("Checking DID store at {}",this.storeRoot.getAbsolutePath()),this.storeRoot.isFile())throw Fo.error("Path {} not a directory",this.storeRoot.getAbsolutePath()),new At('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');this.postOperations();let e=this.getDir(this.currentDataDir);if(!e.exists()){let n=this.storeRoot.list();if(n==null||n.length==0)return void this.initializeStore();throw Fo.error("Path {} cannot be initialized as DID Store because it's not empty",this.storeRoot.getAbsolutePath()),new At(`Path cannot be initialized as DID Store because it's not empty "`+this.storeRoot.getAbsolutePath()+'".')}if(!e.isDirectory())throw Fo.error("Path {} is not a DID store, missing data directory",this.storeRoot.getAbsolutePath()),new At('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');let r=this.getFile(!1,this.currentDataDir,xe.METADATA);if(!r.exists()||!r.isFile())throw Fo.error("Path {} not a DID store, missing store metadata",this.storeRoot.getAbsolutePath()),new At('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');try{let n=r.readText(),i=qt.parse(n);if(i.getType()!==qt.DID_STORE_TYPE)throw new At("Unknown DIDStore type");if(i.getVersion()!=qt.DID_STORE_VERSION)throw new At("Unsupported DIDStore version")}catch(n){throw Fo.error("Check DID store error, failed load store metadata",n),new At("Can not check the store metadata",n)}}static toPath(e){return e.toString(e.getDid()).replace(";","+").replace("/","~").replace("?","!")}static toDIDURL(e,r){return r=r.replace("+",";").replace("~","/").replace("!","?"),Je.from(r,e)}static copyFile(e,r){r.writeText(e.readText())}getFile(e,...r){let n=null,i=this.storeRoot.getAbsolutePath();for(let o of r)i+=Xe.SEPARATOR+o;return n=new Xe(i),e&&n.getParentDirectory().createDirectory(),n}getDir(...e){let r=this.storeRoot.getAbsolutePath()+Xe.SEPARATOR+e.join(Xe.SEPARATOR);return new Xe(r)}getLocation(){return this.storeRoot.toString()}getStoreRoot(){return this.storeRoot}storeMetadata(e){try{let r=this.getFile(!0,this.currentDataDir,xe.METADATA);e==null||e.isEmpty()?r.delete():r.writeText(e.serialize())}catch(r){throw new At("Store DIDStore metadata error",r)}}loadMetadata(){try{let e=this.getFile(!1,this.currentDataDir,xe.METADATA),r=null;return e.exists()&&(r=qt.parse(e.readText())),r}catch(e){throw new At("Load DIDStore metadata error",e)}}getRootIdentityFile(e,r,n){return this.getFile(n,this.currentDataDir,xe.ROOT_IDENTITIES_DIR,e,r)}getRootIdentityDir(e){return this.getDir(this.currentDataDir,xe.ROOT_IDENTITIES_DIR,e)}storeRootIdentityMetadata(e,r){try{let n=this.getRootIdentityFile(e,xe.METADATA,!0);r==null||r.isEmpty()?n.delete():n.writeText(r.serialize())}catch(n){throw new At("Store root identity metadata error: "+e,n)}}loadRootIdentityMetadata(e){try{let r=this.getRootIdentityFile(e,xe.METADATA,!1),n=null;return r.exists()&&(n=Dr.Metadata.parse(r.readText())),n}catch(r){throw new At("Load root identity metadata error: "+e,r)}}storeRootIdentity(e,r,n,i,o){try{let a;r!=null&&(a=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_MNEMONIC_FILE,!0),a.writeText(r)),n!=null&&(a=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_PRIVATEKEY_FILE,!0),a.writeText(n)),i!=null&&(a=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_PUBLICKEY_FILE,!0),a.writeText(i)),a=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_INDEX_FILE,!0),a.writeText(o.toFixed())}catch(a){throw new At("Store root identity error: "+e,a)}}loadRootIdentity(e){try{let r=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_PUBLICKEY_FILE,!1);if(!r.exists())return null;let n=r.readText();r=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_INDEX_FILE,!1);let i=Number.parseInt(r.readText());return Dr.createFromPreDerivedPublicKey(n,i)}catch(r){throw new At("Load public key for identity error: "+e,r)}}containsRootIdentity(e){return this.getRootIdentityDir(e).exists()}updateRootIdentityIndex(e,r){try{this.getRootIdentityFile(e,xe.ROOT_IDENTITY_INDEX_FILE,!1).writeText(""+r)}catch(n){throw new At("Update index for indentiy error: "+e,n)}}loadRootIdentityPrivateKey(e){try{let r=this.getRootIdentityFile(e,xe.ROOT_IDENTITY_PRIVATEKEY_FILE,!1);return r.exists()?r.readText():null}catch(r){throw new At("Load private key for identity error: "+e,r)}}deleteRootIdentity(e){let r=this.getRootIdentityDir(e);return!!r.exists()&&(r.delete(),!0)}listRootIdentities(){let e=this.getDir(this.currentDataDir,xe.ROOT_IDENTITIES_DIR);if(!e.exists())return[];let r=e.listFiles().filter(i=>{if(!i.isDirectory())return!1;let o=new Xe(i,xe.ROOT_IDENTITY_PRIVATEKEY_FILE);return o.exists()&&o.isFile()});if(r==null||r.length==0)return[];let n=[];for(let i of r){let o=this.loadRootIdentity(i.getName());n.push(o)}return n}containsRootIdenities(){let e=this.getDir(this.currentDataDir,xe.ROOT_IDENTITIES_DIR);if(!e.exists())return!1;let r=e.listFiles().filter(n=>n.isDirectory());return r!=null&&r.length>0}loadRootIdentityMnemonic(e){try{return this.getRootIdentityFile(e,xe.ROOT_IDENTITY_MNEMONIC_FILE,!1).readText()}catch(r){throw new At("Load mnemonic for identity error: "+e,r)}}getDidFile(e,r){return this.getFile(r,this.currentDataDir,xe.DID_DIR,e.getMethodSpecificId(),xe.DOCUMENT_FILE)}getDidMetadataFile(e,r){return this.getFile(r,this.currentDataDir,xe.DID_DIR,e.getMethodSpecificId(),xe.METADATA)}getDidDir(e){return this.getDir(this.currentDataDir,xe.DID_DIR,e.getMethodSpecificId())}storeDidMetadata(e,r){try{let n=this.getDidMetadataFile(e,!0);r==null||r.isEmpty()?n.delete():n.writeText(r.serialize())}catch(n){throw new At("Store DID metadata error: "+e,n)}}loadDidMetadata(e){try{let r=this.getDidMetadataFile(e,!1),n=null;return r.exists()&&(n=ct.parse(r.readText())),n}catch(r){throw new At("Load DID metadata error: "+e,r)}}storeDid(e){try{this.getDidFile(e.getSubject(),!0).writeText(e.serialize(!0))}catch(r){throw new At("Store DID document error: "+e.getSubject(),r)}}loadDid(e){return ve(this,void 0,void 0,function*(){try{let r=this.getDidFile(e,!1);return r.exists()?yield Ne.parseAsync(r.readText()):null}catch(r){throw new At("Load DID document error: "+e,r)}})}deleteDid(e){let r=this.getDidDir(e);return!!r.exists()&&(r.delete(),!0)}listDids(){let e=this.getDir(this.currentDataDir,xe.DID_DIR);if(!e.exists())return[];let r=e.listFiles().filter(i=>{if(!i.isDirectory())return!1;let o=new Xe(i,xe.DOCUMENT_FILE);return o.exists()&&o.isFile()});if(r==null||r.length==0)return[];let n=[];for(let i of r){let o=new Oe(Oe.METHOD,i.getName());n.push(o)}return n}containsDid(e){return this.getDidDir(e).exists()}containsDids(){let e=this.getDir(this.currentDataDir,xe.DID_DIR);if(!e.exists())return!1;let r=e.listFiles().filter(n=>n.isDirectory());return r!=null&&r.length>0}getCredentialFile(e,r){return this.getFile(r,this.currentDataDir,xe.DID_DIR,e.getDid().getMethodSpecificId(),xe.CREDENTIALS_DIR,xe.toPath(e),xe.CREDENTIAL_FILE)}getCredentialMetadataFile(e,r){return this.getFile(r,this.currentDataDir,xe.DID_DIR,e.getDid().getMethodSpecificId(),xe.CREDENTIALS_DIR,xe.toPath(e),xe.METADATA)}getCredentialDir(e){return this.getDir(this.currentDataDir,xe.DID_DIR,e.getDid().getMethodSpecificId(),xe.CREDENTIALS_DIR,xe.toPath(e))}getCredentialsDir(e){return this.getDir(this.currentDataDir,xe.DID_DIR,e.getMethodSpecificId(),xe.CREDENTIALS_DIR)}storeCredentialMetadata(e,r){try{let n=this.getCredentialMetadataFile(e,!0);r==null||r.isEmpty()?n.delete():n.writeText(r.serialize())}catch(n){throw new At("Store credential metadata error: "+e,n)}}loadCredentialMetadata(e){try{let r=this.getCredentialMetadataFile(e,!1);return r.exists()?lr.parse(r.readText()):null}catch(r){throw new At("Load credential metadata error: "+e,r)}}storeCredential(e){try{this.getCredentialFile(e.getId(),!0).writeText(e.serialize(!0))}catch(r){throw new At("Store credential error: "+e.getId(),r)}}loadCredential(e){try{let r=this.getCredentialFile(e,!1);return r.exists()?gt.parse(r.readText()):null}catch(r){throw new At("Load credential error: "+e,r)}}containsCredential(e){return this.getCredentialDir(e).exists()}containsCredentials(e){let r=this.getCredentialsDir(e);if(!r.exists())return!1;let n=r.listFiles().filter(i=>i.isDirectory());return n!=null&&n.length>0}deleteCredential(e){let r=this.getCredentialDir(e);return!!r.exists()&&(r.delete(),r=this.getCredentialsDir(e.getDid()),r.list().length==0&&r.delete(),!0)}listCredentials(e){let r=this.getCredentialsDir(e);if(!r.exists())return[];let n=r.listFiles().filter(o=>{if(!o.isDirectory())return!1;let a=new Xe(o,xe.CREDENTIAL_FILE);return a.exists()&&a.isFile()});if(n==null||n.length==0)return[];let i=[];for(let o of n)i.push(xe.toDIDURL(e,o.getName()));return i}getPrivateKeyFile(e,r){return this.getFile(r,this.currentDataDir,xe.DID_DIR,e.getDid().getMethodSpecificId(),xe.PRIVATEKEYS_DIR,xe.toPath(e))}getPrivateKeysDir(e){return this.getDir(this.currentDataDir,xe.DID_DIR,e.getMethodSpecificId(),xe.PRIVATEKEYS_DIR)}containsPrivateKey(e){return this.getPrivateKeyFile(e,!1).exists()}storePrivateKey(e,r){try{this.getPrivateKeyFile(e,!0).writeText(r)}catch(n){throw new At("Store private key error: "+e,n)}}loadPrivateKey(e){try{let r=this.getPrivateKeyFile(e,!1);return r.exists()?r.readText():null}catch(r){throw new At("Load private key error: "+e,r)}}containsPrivateKeys(e){let r=this.getPrivateKeysDir(e);if(!r.exists())return!1;let n=r.listFiles().filter(i=>i.isFile());return n!=null&&n.length>0}deletePrivateKey(e){let r=this.getPrivateKeyFile(e,!1);if(r.exists()){r.delete();let n=this.getPrivateKeysDir(e.getDid());return n.list().length==0&&n.delete(),!0}return!1}listPrivateKeys(e){let r=this.getPrivateKeysDir(e);if(!r.exists())return[];let n=r.listFiles().filter(o=>o.isFile());if(n==null||n.length==0)return[];let i=[];for(let o of n)i.push(xe.toDIDURL(e,o.getName()));return i}needReencrypt(e){let r=["(.+)\\"+Xe.SEPARATOR+xe.DATA_DIR+"\\"+Xe.SEPARATOR+xe.ROOT_IDENTITIES_DIR+"\\"+Xe.SEPARATOR+"(.+)\\"+Xe.SEPARATOR+xe.ROOT_IDENTITY_PRIVATEKEY_FILE,"(.+)\\"+Xe.SEPARATOR+xe.DATA_DIR+"\\"+Xe.SEPARATOR+xe.ROOT_IDENTITIES_DIR+"\\"+Xe.SEPARATOR+"(.+)\\"+Xe.SEPARATOR+xe.ROOT_IDENTITY_MNEMONIC_FILE,"(.+)\\"+Xe.SEPARATOR+xe.DATA_DIR+"\\"+Xe.SEPARATOR+xe.DID_DIR+"\\"+Xe.SEPARATOR+"(.+)\\"+Xe.SEPARATOR+xe.PRIVATEKEYS_DIR+"\\"+Xe.SEPARATOR+"(.+)"],n=e.getAbsolutePath();for(let i of r)if(n.match(i))return!0;return!1}copy(e,r,n){if(e.isDirectory()){let i=e;r.exists()||r.createDirectory();let o=i.list();for(let a of o){let s=new Xe(i,a),c=new Xe(r,a);this.copy(s,c,n)}}else if(this.needReencrypt(e)){let i=e.readText();r.writeText(n.reEncrypt(i))}else xe.copyFile(e,r)}postChangePassword(){let e=this.getDir(xe.DATA_DIR),r=this.getDir(xe.DATA_DIR+xe.JOURNAL_SUFFIX),n=new Date().getTime()/1e3,i=this.getDir(xe.DATA_DIR+"_"+n),o=this.getFile(!1,"postChangePassword");o.exists()?(r.exists()&&(e.exists()&&e.rename(i.getAbsolutePath()),r.rename(e.getAbsolutePath())),o.delete()):r.exists()&&r.delete()}changePassword(e){try{let r=this.getDir(xe.DATA_DIR),n=this.getDir(xe.DATA_DIR+xe.JOURNAL_SUFFIX);this.copy(r,n,e),this.getFile(!0,"postChangePassword").createFile()}catch(r){throw r instanceof Ps?r:new At("Change store password failed.")}finally{this.postChangePassword()}}postOperations(){this.getFile(!1,"postChangePassword").exists()&&this.postChangePassword()}}xe.DATA_DIR="data",xe.ROOT_IDENTITIES_DIR="roots",xe.ROOT_IDENTITY_MNEMONIC_FILE="mnemonic",xe.ROOT_IDENTITY_PRIVATEKEY_FILE="private",xe.ROOT_IDENTITY_PUBLICKEY_FILE="public",xe.ROOT_IDENTITY_INDEX_FILE="index",xe.DID_DIR="ids",xe.DOCUMENT_FILE="document",xe.CREDENTIALS_DIR="credentials",xe.CREDENTIAL_FILE="credential",xe.PRIVATEKEYS_DIR="privatekeys",xe.METADATA=".metadata",xe.JOURNAL_SUFFIX=".journal";class qr extends Pe{constructor(e=null,r=null,n=null){super(),this.id=e,this.to=r,this.txid=n}static newForDIDDocument(e,r){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid target DID document"),oe(r!=null,"Invalid to DID"),!e.isCustomizedDid())throw new Ks(e.getSubject().toString()+"isn't a customized did");let n=yield e.getSubject().resolve();e.getMetadata().setTransactionId(n.getMetadata().getTransactionId());let i=new qr(e.getSubject(),r,e.getMetadata().getTransactionId());return i.doc=e,i})}static newWithTicket(e,r){let n=new qr(e.id,e.to,e.txid);return n.doc=e.doc,r&&(n.proofs=e.proofs),n}getSubject(){return this.id}getTo(){return this.to}getTransactionId(){return this.txid}getProof(){return this.getProofs()[0]}getProofs(){return this.proofs.valuesAsSortedArray()}getDocument(){return ve(this,void 0,void 0,function*(){return this.doc==null&&(this.doc=yield this.id.resolve()),this.doc})}isGenuine(e=null){return ve(this,void 0,void 0,function*(){let r=yield this.getDocument();if(r==null)return e!=null&&(e.failed(this,"Ticket {}: can not resolve the owner document",this.getSubject()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!r.isGenuine(e))return e!=null&&(e.failed(this,"Ticket {}: the owner document is not genuine",this.getSubject()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(r.getControllerCount()>1&&this.proofs.size!=r.getMultiSignature().m()||r.getControllerCount()<=1&&this.proofs.size!=1)return e!=null&&(e.failed(this,"Ticket {}: proof size not matched with multisig, {} expected, actual is {}",this.getSubject(),r.getMultiSignature().m(),r.proofs.size),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;let n=qr.newWithTicket(this,!1).serialize(!0),i=vc.sha256Digest(Se.Buffer.from(n,"utf-8"));for(let o of this.proofs.values()){if(o.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"Ticket {}: key type '{}' for proof is not supported",this.getSubject(),o.getType()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;let a=r.getControllerDocument(o.getVerificationMethod().getDid());if(a==null)return e!=null&&(e.failed(this,"Ticket {}: can not resolve the document for controller '{}' to verify the proof",this.getSubject(),o.getVerificationMethod().getDid()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!(yield a.isValid(e)))return e!=null&&(e.failed(this,"Ticket {}: controller '{}' is invalid, failed to verify the proof",this.getSubject(),o.getVerificationMethod().getDid()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!o.getVerificationMethod().equals(a.getDefaultPublicKeyId()))return e!=null&&(e.failed(this,"Ticket {}: key '{}' for proof is not default key of '{}'",this.getSubject(),o.getVerificationMethod(),o.getVerificationMethod().getDid()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!r.verifyDigest(o.getVerificationMethod(),o.getSignature(),i))return e!=null&&(e.failed(this,"Ticket {}: proof '{}' is invalid, signature mismatch",this.getSubject(),o.getVerificationMethod()),e.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1}return e!=null&&e.succeeded(this,"Ticket {}: is genuine",this.getSubject()),!0})}isValid(e=null){return ve(this,void 0,void 0,function*(){let r=yield this.getDocument();return r==null?(e!=null&&(e.failed(this,"Ticket {}: can not resolve the owners document",this.getSubject()),e.failed(this,"Ticket {}: is not valid",this.getSubject())),!1):(yield r.isValid(e))?(yield this.isGenuine(e))?this.txid!==r.getMetadata().getTransactionId()?(e!=null&&(e.failed(this,"Ticket {}: the transaction id already out date",this.getSubject()),e.failed(this,"Ticket {}: is not valid",this.getSubject())),!1):(e!=null&&e.succeeded(this,"Ticket {}: is valid",this.getSubject()),!0):(e!=null&&e.failed(this,"Ticket {}: is not valid",this.getSubject()),!1):(e!=null&&(e.failed(this,"Ticket {}: the owners document is not valid",this.getSubject()),e.failed(this,"Ticket {}: is not valid",this.getSubject())),!1)})}isQualified(){return ve(this,void 0,void 0,function*(){if(this.proofs==null||this.proofs.size==0)return!1;let e=(yield this.getDocument()).getMultiSignature();return this.proofs.size==(e==null?1:e.m())})}toJSON(e=null){let r={};if(r.id=this.id.toString(),r.to=this.to.toString(),r.txid=this.txid,this.proofs){let n=this.proofs.valuesAsSortedArray();n.length==1?r.proof=n[0].toJSON(e):r.proof=Array.from(n,i=>i.toJSON(e))}return r}fromJSON(e,r=null){if(this.id=this.getDid("id",e.id,{mandatory:!0,nullable:!1}),this.to=this.getDid("to",e.to,{mandatory:!0,nullable:!1}),this.txid=this.getString("txid",e.txid,{mandatory:!0,nullable:!1}),!e.proof)throw new Ta("Missing property: proof");if(this.proofs=new dt,Array.isArray(e.proof))for(let n of e.proof){let i=n,o=qr.Proof.deserialize(i,qr.Proof,this.id);if(o.getVerificationMethod().getDid()==null)throw new Ta("Invalid verification method: "+o.getVerificationMethod());if(this.proofs.has(o.getVerificationMethod().getDid()))throw new Ta("Aleady exist proof from "+o.getVerificationMethod().getDid());this.proofs.set(o.getVerificationMethod().getDid(),o)}else{let n=e.proof,i=qr.Proof.deserialize(n,qr.Proof,this.id);if(i.getVerificationMethod().getDid()==null)throw new Ta("Invalid verification method: "+i.getVerificationMethod());this.proofs.set(i.getVerificationMethod().getDid(),i)}}seal(e,r){return ve(this,void 0,void 0,function*(){try{if(yield this.isQualified())return;if(e.isCustomizedDid()){if(e.getEffectiveController()==null)throw new gi("No effective controller of "+this.getSubject().toString())}else try{if(!(yield this.getDocument()).hasController(e.getSubject()))throw new Go(e.getSubject().toString()+" isn't the controller")}catch(s){throw new Jr(s)}}catch(s){throw new Jr(s)}let n=e.getDefaultPublicKeyId();if(this.proofs==null)this.proofs=new dt;else if(this.proofs.has(n.getDid()))throw new $f(n.getDid().toString()+" already signed");let i=qr.newWithTicket(this,!1).serialize(!0),o=yield e.signWithStorePass(r,Se.Buffer.from(i)),a=new qr.Proof(n,o);this.proofs.set(a.getVerificationMethod().getDid(),a)})}static parse(e){try{return Pe.deserialize(e,qr)}catch(r){throw r instanceof Ta?r:new Ta(r)}}}(function(t){t.Proof=class extends Pe{constructor(e=null,r=null,n=new Date,i=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.type=i!=null?i:tt.DEFAULT_PUBLICKEY_TYPE,this.created=n==null?new Date:n,this.created&&this.created.setMilliseconds(0),this.verificationMethod=e,this.signature=r}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}getCreated(){return this.created}getSignature(){return this.signature}equals(e){return this.compareTo(e)===0}compareTo(e){let r=this.created.getTime()-e.created.getTime();return r==0&&(r=this.verificationMethod.compareTo(e.verificationMethod)),r}toJSON(e=null){let r=e?new Oe(e):null,n={};return r&&this.type===tt.DEFAULT_PUBLICKEY_TYPE||(n.type=this.type),this.created&&(n.created=this.dateToString(this.created)),n.verificationMethod=this.verificationMethod.toString(r),n.signature=this.signature,n}fromJSON(e,r=null){this.type=this.getString("proof.type",e.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",e.created,{mandatory:!1}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",e.verificationMethod,{mandatory:!0,nullable:!1,context:r}),this.signature=this.getString("proof.signature",e.signature,{mandatory:!0,nullable:!1})}}})(qr||(qr={}));const F7=new We("VerifiableCredential");class Wn extends Pe{constructor(e){super(),this.holder=e,this.credentials=new dt}static newFromPresentation(e,r){let n=new Wn;return n.context=e.context,n.id=e.id,n.type=e.type,n.holder=e.holder,n.created=e.created,n.credentials=e.credentials,r&&(n.proof=e.proof),n}getId(){return this.id?this.id:null}getType(){return this.type}getHolder(){return this.holder!=null?this.holder:this.proof.getVerificationMethod().getDid()}getCreated(){return this.proof.getCreated()!=null?this.proof.getCreated():this.created}getCredentialCount(){return this.credentials.size}getCredentials(){return this.credentials.valuesAsSortedArray()}getCredential(e){return oe(e!=null,"Invalid credential id"),(typeof e=="string"||e.getDid()==null)&&(e=Je.from(e,this.getHolder())),this.credentials.get(e)}getProof(){return this.proof}isGenuine(e=null){return ve(this,void 0,void 0,function*(){let r=yield this.getHolder().resolve();if(r==null)return e!=null&&(e.failed(this,"VP {}: can not resolve the holder's document",this.getId()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!r.isGenuine(e))return e!=null&&(e.failed(this,"VP {}: holder's document is not genuine",this.getId()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;if(this.proof.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"VP {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!r.isAuthenticationKey(this.proof.getVerificationMethod()))return e!=null&&(e.failed(this,"VP {}: Key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;for(let o of this.credentials.values()){if(!o.getSubject().getId().equals(this.getHolder()))return e!=null&&(e.failed(this,"VP {}: credential '{}' not owned by the holder '{}'",this.getId(),o.getId(),this.getHolder()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!(yield o.isGenuine(e)))return e!=null&&(e.failed(this,"VP {}: credential '{}' is not genuine",this.getId(),o.getId()),e.failed(this,"VP {}: is not genuine",this.getId())),!1}let n=Wn.newFromPresentation(this,!1).serialize(!0),i=r.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),Se.Buffer.from(n),Se.Buffer.from(this.proof.getRealm()),Se.Buffer.from(this.proof.getNonce()));return e!=null&&(i?e.succeeded(this,"VP {}: is genuine",this.getId()):(e.failed(this,"VP {}: proof is invalid, signature mismatch",this.getId()),e.failed(this,"VP {}: is not genuine",this.getId()))),i})}isValid(e=null){return ve(this,void 0,void 0,function*(){let r=yield this.getHolder().resolve();if(r==null)return e!=null&&(e.failed(this,"VP {}: can not resolve the holder's document",this.getId()),e.failed(this,"VP {}: is invalid",this.getId())),!1;if(yield r.isDeactivated())return e!=null&&(e.failed(this,"VP {}: holder's document is deactivate",this.getId()),e.failed(this,"VP {}: is invalid",this.getId())),!1;if(!r.isGenuine(e))return e!=null&&(e.failed(this,"VP {}: holder's document is genuine",this.getId()),e.failed(this,"VP {}: is invalid",this.getId())),!1;if(this.proof.getType()!==tt.DEFAULT_PUBLICKEY_TYPE)return e!=null&&(e.failed(this,"VP {}: Key type '{}' for proof is not supported",this.getId(),this.proof.getType()),e.failed(this,"VP {}: is invalid",this.getId())),!1;if(!r.isAuthenticationKey(this.proof.getVerificationMethod()))return e!=null&&(e.failed(this,"VP {}: Key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),e.failed(this,"VP {}: is invalid",this.getId())),!1;let n=Wn.newFromPresentation(this,!1).serialize(!0);if(!r.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),Se.Buffer.from(n),Se.Buffer.from(this.proof.getRealm()),Se.Buffer.from(this.proof.getNonce())))return e!=null&&(e.failed(this,"VP {}: proof is invalid, signature mismatch",this.getId()),e.failed(this,"VP {}: is invalid",this.getId())),!1;for(let i of this.credentials.values()){if(!i.getSubject().getId().equals(this.getHolder()))return e!=null&&(e.failed(this,"VP {}: credential '{}' not owned by the holder '{}'",this.getId(),i.getId(),this.getHolder()),e.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!(yield i.isValid(e)))return e!=null&&(e.failed(this,"VP {}: credential '{}' is invalid",this.getId(),i.getId()),e.failed(this,"VP {}: is invalid",this.getId())),!1}return e!=null&&e.succeeded(this,"VP %s: is valid",this.getId()),!0})}toJSON(e=null){let r={};return this.context!=null&&this.context.length>0&&(r["@context"]=Array.from(this.context)),this.id&&(r.id=this.id.toString()),r.type=this.type.length==1?this.type[0]:this.type,this.holder&&(r.holder=this.holder.toString()),this.created&&(r.created=this.dateToString(this.created)),r.verifiableCredential=Array.from(this.credentials.valuesAsSortedArray(),n=>n.toJSON()),this.proof&&(r.proof=this.proof.toJSON()),r}fromJSON(e,r=null){if(this.context=this.getContext("@context",e["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.holder=this.getDid("holder",e.holder,{mandatory:!1,nullable:!1,defaultValue:null}),this.id=this.getDidUrl("id",e.id,{mandatory:!1,nullable:!1,context:this.holder,defaultValue:null}),this.type=this.getStrings("type",e.type,{mandatory:!0,nullable:!1,defaultValue:[Wn.DEFAULT_PRESENTATION_TYPE]}),this.created=this.getDate("created",e.created,{mandatory:!1,nullable:!0}),!e.proof)throw new vo("Missing property: proof");let n=e.proof;if(this.proof=Wn.Proof.deserialize(n,Wn.Proof,this.holder),this.created==null&&this.proof.getCreated()==null)throw new vo("Missing presentation create timestamp");if(this.credentials=new dt,e.verifiableCredential){if(!Array.isArray(e.verifiableCredential))throw new vo("Invalid property: verifiableCredential, type error.");for(let i of e.verifiableCredential){let o,a=i;try{o=gt.deserialize(a,gt,this.holder)}catch(s){throw new vo("credential invalid: "+a.id,s)}if(this.credentials.has(o.getId()))throw new vo("Duplicated credential id: "+o.getId());this.credentials.set(o.getId(),o)}}}static parse(e){try{return Pe.deserialize(e,Wn)}catch(r){throw r instanceof vo?r:new vo(r)}}static createFor(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid did"),oe(n!=null,"Invalid store"),typeof e=="string"&&(e=Oe.from(e)),typeof r=="string"&&(r=Je.from(r,e));let i=yield n.loadDid(e);if(i==null)throw new Qn(e.toString()+" isn't found in the chain");if(r==null)r=i.getDefaultPublicKeyId();else if(!i.isAuthenticationKey(r))throw new It(r.toString()+" isn't the authencation key");if(!i.hasPrivateKey(r))throw new It("No private key: "+r);return new Wn.Builder(i,r)})}}Wn.DEFAULT_PRESENTATION_TYPE="VerifiablePresentation",function(t){t.Builder=class{constructor(r,n){this.holder=r,this.signKey=n,this.presentation=new t(r.getSubject()),this.setDefaultType()}checkNotSealed(){if(this.presentation==null)throw new Dc("Presentation "+this.id.toString()+" is already sealed")}id(r){return this.checkNotSealed(),oe(r!=null,"Invalid id"),typeof r=="string"&&(r=Je.from(r,this.holder.getSubject())),oe(r!=null&&(r.getDid()==null||r.getDid().equals(this.holder.getSubject())),"Invalid id"),this.presentation.id=Je.from(r,this.holder.getSubject()),this}setDefaultType(){this.checkNotSealed(),ta.isEnabledJsonLdContext()&&(this.presentation.context==null&&(this.presentation.context=[]),this.presentation.context.includes(gt.W3C_CREDENTIAL_CONTEXT)||this.presentation.context.push(gt.W3C_CREDENTIAL_CONTEXT),this.presentation.context.includes(gt.ELASTOS_CREDENTIAL_CONTEXT)||this.presentation.context.push(gt.ELASTOS_CREDENTIAL_CONTEXT)),this.presentation.type==null&&(this.presentation.type=[]),this.presentation.type.includes(t.DEFAULT_PRESENTATION_TYPE)||this.presentation.type.push(t.DEFAULT_PRESENTATION_TYPE)}typeWithContext(r,n){return this.checkNotSealed(),xo(r,"Invalid type: "+r),ta.isEnabledJsonLdContext()?(xo(n,"Invalid context: "+n),this.presentation.context==null&&(this.presentation.context=[]),this.presentation.context.includes(n)||this.presentation.context.push(n)):F7.warn("JSON-LD context support not enabled"),this.presentation.type==null&&(this.presentation.type=[]),this.presentation.type.includes(r)||this.presentation.type.push(r),this}type(r){if(this.checkNotSealed(),xo(r,"Invalid type: "+r),r.indexOf("#")<0)return this.typeWithContext(r,null);{let n=r.split("#",2);return this.typeWithContext(n[1],n[0])}}types(r){return this.checkNotSealed(),oe(r!=null&&r.length>0,"Invalid types"),this.presentation.type=Array.from(r),this}credentials(...r){this.checkNotSealed();for(let n of r){if(!n.getSubject().getId().equals(this.holder.getSubject()))throw new Ms("Credential "+n.getId().toString()+" doesn't belong to the holder of presentation");if(this.presentation.credentials.has(n.getId()))throw new Cs(n.getId().toString()+" already exist in the presentation");this.presentation.credentials.set(n.getId(),n)}return this}realm(r){return this.checkNotSealed(),oe(r&&r!=null,"Invalid realm"),this._realm=r,this}nonce(r){return this.checkNotSealed(),oe(r&&r!=null,"Invalid nonce"),this._nonce=r,this}seal(r){return ve(this,void 0,void 0,function*(){if(this.checkNotSealed(),oe(r&&r!=null,"Invalid storepass"),this.presentation.type==null||this.presentation.type.length==0)throw new vo("Missing presentation type");Xc.sort(this.presentation.type),this.presentation.created=new Date,this.presentation.created&&this.presentation.created.setMilliseconds(0);let n=this.presentation.serialize(!0),i=yield this.holder.signWithId(this.signKey,r,Se.Buffer.from(n),Se.Buffer.from(this._realm),Se.Buffer.from(this._nonce)),o=new e(this.presentation.created,this.signKey,this._realm,this._nonce,i);this.presentation.proof=o;let a=this.presentation;return this.presentation=null,a})}};class e extends Pe{constructor(n=null,i=null,o=null,a=null,s=null,c=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.type=c!=null?c:tt.DEFAULT_PUBLICKEY_TYPE,n==null?(this.created=new Date,this.created&&this.created.setMilliseconds(0)):this.created=n,this.verificationMethod=i,this.realm=o,this.nonce=a,this.signature=s}getType(){return this.type}getCreated(){return this.created}getVerificationMethod(){return this.verificationMethod}getRealm(){return this.realm}getNonce(){return this.nonce}getSignature(){return this.signature}toJSON(n=null){n&&new Oe(n);let i={};return i.type=this.type,this.created&&(i.created=this.dateToString(this.created)),i.verificationMethod=this.verificationMethod.toString(),i.realm=this.realm,i.nonce=this.nonce,i.signature=this.signature,i}fromJSON(n,i=null){this.type=this.getString("proof.type",n.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("created",n.created,{mandatory:!1,nullable:!0}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",n.verificationMethod,{mandatory:!0,nullable:!1,context:i}),this.realm=this.getString("proof.realm",n.realm,{mandatory:!0,nullable:!1}),this.nonce=this.getString("proof.nonce",n.nonce,{mandatory:!0,nullable:!1}),this.signature=this.getString("proof.signature",n.signature,{mandatory:!0,nullable:!1})}}t.Proof=e}(Wn||(Wn={}));var tm,rm=function t(e,r,n){function i(s,c){if(!r[s]){if(!e[s]){if(!c&&zh)return zh(s);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(y){return i(e[s][1][y]||y)},h,h.exports,t,e,r,n)}return r[s].exports}for(var o=zh,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(a){for(var s,c,f,h,y,g,_,E=[],O=0,R=a.length,L=R,q=n.getTypeOf(a)!=="string";O<a.length;)L=R-O,f=q?(s=a[O++],c=O<R?a[O++]:0,O<R?a[O++]:0):(s=a.charCodeAt(O++),c=O<R?a.charCodeAt(O++):0,O<R?a.charCodeAt(O++):0),h=s>>2,y=(3&s)<<4|c>>4,g=1<L?(15&c)<<2|f>>6:64,_=2<L?63&f:64,E.push(o.charAt(h)+o.charAt(y)+o.charAt(g)+o.charAt(_));return E.join("")},r.decode=function(a){var s,c,f,h,y,g,_=0,E=0,O="data:";if(a.substr(0,O.length)===O)throw new Error("Invalid base64 input, it looks like a data url.");var R,L=3*(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(a.charAt(a.length-1)===o.charAt(64)&&L--,a.charAt(a.length-2)===o.charAt(64)&&L--,L%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=i.uint8array?new Uint8Array(0|L):new Array(0|L);_<a.length;)s=o.indexOf(a.charAt(_++))<<2|(h=o.indexOf(a.charAt(_++)))>>4,c=(15&h)<<4|(y=o.indexOf(a.charAt(_++)))>>2,f=(3&y)<<6|(g=o.indexOf(a.charAt(_++))),R[E++]=s,y!==64&&(R[E++]=c),g!==64&&(R[E++]=f);return R}},{"./support":30,"./utils":32}],2:[function(t,e,r){var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(c,f,h,y,g){this.compressedSize=c,this.uncompressedSize=f,this.crc32=h,this.compression=y,this.compressedContent=g}s.prototype={getContentWorker:function(){var c=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(c,f,h){return c.pipe(new o).pipe(new a("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new a("compressedSize")).withStreamInfo("compression",f)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(i){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){var n=t("./utils"),i=function(){for(var o,a=[],s=0;s<256;s++){o=s;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[s]=o}return a}();e.exports=function(o,a){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(s,c,f,h){var y=i,g=h+f;s^=-1;for(var _=h;_<g;_++)s=s>>>8^y[255&(s^c[_])];return-1^s}(0|a,o,o.length,0):function(s,c,f,h){var y=i,g=h+f;s^=-1;for(var _=h;_<g;_++)s=s>>>8^y[255&(s^c.charCodeAt(_))];return-1^s}(0|a,o,o.length,0):0}},{"./utils":32}],5:[function(t,e,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){var n=null;n=typeof Promise<"u"?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=n?"uint8array":"array";function c(f,h){a.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}r.magic="\b\0",o.inherits(c,a),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(s,f.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},r.compressWorker=function(f){return new c("Deflate",f)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){function n(y,g){var _,E="";for(_=0;_<g;_++)E+=String.fromCharCode(255&y),y>>>=8;return E}function i(y,g,_,E,O,R){var L,q,X=y.file,ne=y.compression,W=R!==s.utf8encode,H=o.transformTo("string",R(X.name)),Y=o.transformTo("string",s.utf8encode(X.name)),T=X.comment,te=o.transformTo("string",R(T)),v=o.transformTo("string",s.utf8encode(T)),D=Y.length!==X.name.length,w=v.length!==T.length,k="",A="",b="",P=X.dir,V=X.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};g&&!_||(Q.crc32=y.crc32,Q.compressedSize=y.compressedSize,Q.uncompressedSize=y.uncompressedSize);var U=0;g&&(U|=8),W||!D&&!w||(U|=2048);var Z=0,fe=0;P&&(Z|=16),O==="UNIX"?(fe=798,Z|=function(ue,ge){var me=ue;return ue||(me=ge?16893:33204),(65535&me)<<16}(X.unixPermissions,P)):(fe=20,Z|=function(ue){return 63&(ue||0)}(X.dosPermissions)),L=V.getUTCHours(),L<<=6,L|=V.getUTCMinutes(),L<<=5,L|=V.getUTCSeconds()/2,q=V.getUTCFullYear()-1980,q<<=4,q|=V.getUTCMonth()+1,q<<=5,q|=V.getUTCDate(),D&&(A=n(1,1)+n(c(H),4)+Y,k+="up"+n(A.length,2)+A),w&&(b=n(1,1)+n(c(te),4)+v,k+="uc"+n(b.length,2)+b);var se="";return se+=`
\0`,se+=n(U,2),se+=ne.magic,se+=n(L,2),se+=n(q,2),se+=n(Q.crc32,4),se+=n(Q.compressedSize,4),se+=n(Q.uncompressedSize,4),se+=n(H.length,2),se+=n(k.length,2),{fileRecord:f.LOCAL_FILE_HEADER+se+H+k,dirRecord:f.CENTRAL_FILE_HEADER+n(fe,2)+se+n(te.length,2)+"\0\0\0\0"+n(Z,4)+n(E,4)+H+k+te}}var o=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),c=t("../crc32"),f=t("../signature");function h(y,g,_,E){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=_,this.encodeFileName=E,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,a),h.prototype.push=function(y){var g=y.meta.percent||0,_=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,a.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:_?(g+100*(_-E-1))/_:100}}))},h.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var g=this.streamFiles&&!y.file.dir;if(g){var _=i(y,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(y){this.accumulate=!1;var g=this.streamFiles&&!y.file.dir,_=i(y,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),g)this.push({data:function(E){return f.DATA_DESCRIPTOR+n(E.crc32,4)+n(E.compressedSize,4)+n(E.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var y=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var _=this.bytesWritten-y,E=function(O,R,L,q,X){var ne=o.transformTo("string",X(q));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(O,2)+n(O,2)+n(R,4)+n(L,4)+n(ne.length,2)+ne}(this.dirRecords.length,_,y,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(y){this._sources.push(y);var g=this;return y.on("data",function(_){g.processChunk(_)}),y.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),y.on("error",function(_){g.error(_)}),this},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(y){var g=this._sources;if(!a.prototype.error.call(this,y))return!1;for(var _=0;_<g.length;_++)try{g[_].error(y)}catch{}return!0},h.prototype.lock=function(){a.prototype.lock.call(this);for(var y=this._sources,g=0;g<y.length;g++)y[g].lock()},e.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(o,a,s){var c=new i(a.streamFiles,s,a.platform,a.encodeFileName),f=0;try{o.forEach(function(h,y){f++;var g=function(R,L){var q=R||L,X=n[q];if(!X)throw new Error(q+" is not a valid compression method !");return X}(y.options.compression,a.compression),_=y.options.compressionOptions||a.compressionOptions||{},E=y.dir,O=y.date;y._compressWorker(g,_).withStreamInfo("file",{name:h,dir:E,date:O,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(i,o){return new n().loadAsync(i,o)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){var n=t("./utils"),i=t("./external"),o=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function f(h){return new i.Promise(function(y,g){var _=h.decompressed.getContentWorker().pipe(new s);_.on("error",function(E){g(E)}).on("end",function(){_.streamInfo.crc32!==h.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}e.exports=function(h,y){var g=this;return y=n.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(h)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",h,!0,y.optimizedBinaryString,y.base64).then(function(_){var E=new a(y);return E.load(_),E}).then(function(_){var E=[i.Promise.resolve(_)],O=_.files;if(y.checkCRC32)for(var R=0;R<O.length;R++)E.push(f(O[R]));return i.Promise.all(E)}).then(function(_){for(var E=_.shift(),O=E.files,R=0;R<O.length;R++){var L=O[R];g.file(L.fileNameStr,L.decompressed,{binary:!0,optimizedBinaryString:!0,date:L.date,dir:L.dir,comment:L.fileCommentStr.length?L.fileCommentStr:null,unixPermissions:L.unixPermissions,dosPermissions:L.dosPermissions,createFolders:y.createFolders})}return E.zipComment.length&&(g.comment=E.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){var n=t("../utils"),i=t("../stream/GenericWorker");function o(a,s){i.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(s)}n.inherits(o,i),o.prototype._bindStream=function(a){var s=this;(this._stream=a).pause(),a.on("data",function(c){s.push({data:c,meta:{percent:0}})}).on("error",function(c){s.isPaused?this.generatedError=c:s.error(c)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){var n=t("readable-stream").Readable;function i(o,a,s){n.call(this,a),this._helper=o;var c=this;o.on("data",function(f,h){c.push(f)||c._helper.pause(),s&&s(h)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){e.exports={isNode:!0,newBufferFrom:function(n,i){if(ye.from&&ye.from!==Uint8Array.from)return ye.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new ye(n,i)},allocBuffer:function(n){if(ye.alloc)return ye.alloc(n);var i=new ye(n);return i.fill(0),i},isBuffer:function(n){return kn(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,e,r){function n(X,ne,W){var H,Y=o.getTypeOf(ne),T=o.extend(W||{},c);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(X=O(X)),T.createFolders&&(H=E(X))&&R.call(this,H,!0);var te=Y==="string"&&T.binary===!1&&T.base64===!1;W&&W.binary!==void 0||(T.binary=!te),(ne instanceof f&&ne.uncompressedSize===0||T.dir||!ne||ne.length===0)&&(T.base64=!1,T.binary=!0,ne="",T.compression="STORE",Y="string");var v=null;v=ne instanceof f||ne instanceof a?ne:g.isNode&&g.isStream(ne)?new _(X,ne):o.prepareContent(X,ne,T.binary,T.optimizedBinaryString,T.base64);var D=new h(X,v,T);this.files[X]=D}var i=t("./utf8"),o=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),c=t("./defaults"),f=t("./compressedObject"),h=t("./zipObject"),y=t("./generate"),g=t("./nodejsUtils"),_=t("./nodejs/NodejsStreamInputAdapter"),E=function(X){X.slice(-1)==="/"&&(X=X.substring(0,X.length-1));var ne=X.lastIndexOf("/");return 0<ne?X.substring(0,ne):""},O=function(X){return X.slice(-1)!=="/"&&(X+="/"),X},R=function(X,ne){return ne=ne!==void 0?ne:c.createFolders,X=O(X),this.files[X]||n.call(this,X,null,{dir:!0,createFolders:ne}),this.files[X]};function L(X){return Object.prototype.toString.call(X)==="[object RegExp]"}var q={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(X){var ne,W,H;for(ne in this.files)H=this.files[ne],(W=ne.slice(this.root.length,ne.length))&&ne.slice(0,this.root.length)===this.root&&X(W,H)},filter:function(X){var ne=[];return this.forEach(function(W,H){X(W,H)&&ne.push(H)}),ne},file:function(X,ne,W){if(arguments.length!==1)return X=this.root+X,n.call(this,X,ne,W),this;if(L(X)){var H=X;return this.filter(function(T,te){return!te.dir&&H.test(T)})}var Y=this.files[this.root+X];return Y&&!Y.dir?Y:null},folder:function(X){if(!X)return this;if(L(X))return this.filter(function(Y,T){return T.dir&&X.test(Y)});var ne=this.root+X,W=R.call(this,ne),H=this.clone();return H.root=W.name,H},remove:function(X){X=this.root+X;var ne=this.files[X];if(ne||(X.slice(-1)!=="/"&&(X+="/"),ne=this.files[X]),ne&&!ne.dir)delete this.files[X];else for(var W=this.filter(function(Y,T){return T.name.slice(0,X.length)===X}),H=0;H<W.length;H++)delete this.files[W[H].name];return this},generate:function(X){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(X){var ne,W={};try{if((W=o.extend(X||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=W.type.toLowerCase(),W.compression=W.compression.toUpperCase(),W.type==="binarystring"&&(W.type="string"),!W.type)throw new Error("No output type specified.");o.checkSupport(W.type),W.platform!=="darwin"&&W.platform!=="freebsd"&&W.platform!=="linux"&&W.platform!=="sunos"||(W.platform="UNIX"),W.platform==="win32"&&(W.platform="DOS");var H=W.comment||this.comment||"";ne=y.generateWorker(this,W,H)}catch(Y){(ne=new a("error")).error(Y)}return new s(ne,W.type||"string",W.mimeType)},generateAsync:function(X,ne){return this.generateInternalStream(X).accumulate(ne)},generateNodeStream:function(X,ne){return(X=X||{}).type||(X.type="nodebuffer"),this.generateInternalStream(X).toNodejsStream(ne)}};e.exports=q},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){var n=t("./DataReader");function i(o){n.call(this,o);for(var a=0;a<this.data.length;a++)o[a]=255&o[a]}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var a=o.charCodeAt(0),s=o.charCodeAt(1),c=o.charCodeAt(2),f=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===a&&this.data[h+1]===s&&this.data[h+2]===c&&this.data[h+3]===f)return h-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var a=o.charCodeAt(0),s=o.charCodeAt(1),c=o.charCodeAt(2),f=o.charCodeAt(3),h=this.readData(4);return a===h[0]&&s===h[1]&&c===h[2]&&f===h[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){var n=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(o){},readInt:function(o){var a,s=0;for(this.checkOffset(o),a=this.index+o-1;a>=this.index;a--)s=(s<<8)+this.byteAt(a);return this.index+=o,s},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(o){},lastIndexOfSignature:function(o){},readAndCheckSignature:function(o){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){var n=t("./Uint8ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){var n=t("./DataReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){var n=t("./ArrayReader");function i(o){n.call(this,o)}t("../utils").inherits(i,n),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(f){var h=n.getTypeOf(f);return n.checkSupport(h),h!=="string"||i.uint8array?h==="nodebuffer"?new s(f):i.uint8array?new c(n.transformTo("uint8array",f)):new o(n.transformTo("array",f)):new a(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,r){var n=t("./GenericWorker"),i=t("../utils");function o(a){n.call(this,"ConvertWorker to "+a),this.destType=a}i.inherits(o,n),o.prototype.processChunk=function(a){this.push({data:i.transformTo(this.destType,a.data),meta:a.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(a){this.streamInfo.crc32=i(a.data,this.streamInfo.crc32||0),this.push(a)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker");function o(a){i.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}n.inherits(o,i),o.prototype.processChunk=function(a){if(a){var s=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=s+a.data.length}i.prototype.processChunk.call(this,a)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker");function o(a){i.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(c){s.dataIsReady=!0,s.data=c,s.max=c&&c.length||0,s.type=n.getTypeOf(c),s.isPaused||s._tickAndRepeat()},function(c){s.error(c)})}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,s);break;case"uint8array":a=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":a=this.data.slice(this.index,s)}return this.index=s,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var a=0;a<this._listeners[i].length;a++)this._listeners[i][a].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(a){o.processChunk(a)}),i.on("end",function(){o.end()}),i.on("error",function(a){o.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=n},{}],29:[function(t,e,r){var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),c=t("../external"),f=null;if(s.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,_){return new c.Promise(function(E,O){var R=[],L=g._internalType,q=g._outputType,X=g._mimeType;g.on("data",function(ne,W){R.push(ne),_&&_(W)}).on("error",function(ne){R=[],O(ne)}).on("end",function(){try{var ne=function(W,H,Y){switch(W){case"blob":return n.newBlob(n.transformTo("arraybuffer",H),Y);case"base64":return a.encode(H);default:return n.transformTo(W,H)}}(q,function(W,H){var Y,T=0,te=null,v=0;for(Y=0;Y<H.length;Y++)v+=H[Y].length;switch(W){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(te=new Uint8Array(v),Y=0;Y<H.length;Y++)te.set(H[Y],T),T+=H[Y].length;return te;case"nodebuffer":return ye.concat(H);default:throw new Error("concat : unsupported type '"+W+"'")}}(L,R),X);E(ne)}catch(W){O(W)}R=[]}).resume()})}function y(g,_,E){var O=_;switch(_){case"blob":case"arraybuffer":O="uint8array";break;case"base64":O="string"}try{this._internalType=O,this._outputType=_,this._mimeType=E,n.checkSupport(O),this._worker=g.pipe(new i(O)),g.lock()}catch(R){this._worker=new o("error"),this._worker.error(R)}}y.prototype={accumulate:function(g){return h(this,g)},on:function(g,_){var E=this;return g==="data"?this._worker.on(g,function(O){_.call(E,O.data,O.meta)}):this._worker.on(g,function(){n.delay(_,arguments,E)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},e.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=!0,r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(){a.call(this,"utf-8 decode"),this.leftOver=null}function h(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(y){return i.nodebuffer?o.newBufferFrom(y,"utf-8"):function(g){var _,E,O,R,L,q=g.length,X=0;for(R=0;R<q;R++)(64512&(E=g.charCodeAt(R)))==55296&&R+1<q&&(64512&(O=g.charCodeAt(R+1)))==56320&&(E=65536+(E-55296<<10)+(O-56320),R++),X+=E<128?1:E<2048?2:E<65536?3:4;for(_=i.uint8array?new Uint8Array(X):new Array(X),R=L=0;L<X;R++)(64512&(E=g.charCodeAt(R)))==55296&&R+1<q&&(64512&(O=g.charCodeAt(R+1)))==56320&&(E=65536+(E-55296<<10)+(O-56320),R++),E<128?_[L++]=E:(E<2048?_[L++]=192|E>>>6:(E<65536?_[L++]=224|E>>>12:(_[L++]=240|E>>>18,_[L++]=128|E>>>12&63),_[L++]=128|E>>>6&63),_[L++]=128|63&E);return _}(y)},r.utf8decode=function(y){return i.nodebuffer?n.transformTo("nodebuffer",y).toString("utf-8"):function(g){var _,E,O,R,L=g.length,q=new Array(2*L);for(_=E=0;_<L;)if((O=g[_++])<128)q[E++]=O;else if(4<(R=s[O]))q[E++]=65533,_+=R-1;else{for(O&=R===2?31:R===3?15:7;1<R&&_<L;)O=O<<6|63&g[_++],R--;1<R?q[E++]=65533:O<65536?q[E++]=O:(O-=65536,q[E++]=55296|O>>10&1023,q[E++]=56320|1023&O)}return q.length!==E&&(q.subarray?q=q.subarray(0,E):q.length=E),n.applyFromCharCode(q)}(y=n.transformTo(i.uint8array?"uint8array":"array",y))},n.inherits(f,a),f.prototype.processChunk=function(y){var g=n.transformTo(i.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var _=g;(g=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),g.set(_,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var E=function(R,L){var q;for((L=L||R.length)>R.length&&(L=R.length),q=L-1;0<=q&&(192&R[q])==128;)q--;return q<0||q===0?L:q+s[R[q]]>L?q:L}(g),O=g;E!==g.length&&(i.uint8array?(O=g.subarray(0,E),this.leftOver=g.subarray(E,g.length)):(O=g.slice(0,E),this.leftOver=g.slice(E,g.length))),this.push({data:r.utf8decode(O),meta:y.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=f,n.inherits(h,a),h.prototype.processChunk=function(y){this.push({data:r.utf8encode(y.data),meta:y.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),a=t("set-immediate-shim"),s=t("./external");function c(E){return E}function f(E,O){for(var R=0;R<E.length;++R)O[R]=255&E.charCodeAt(R);return O}r.newBlob=function(E,O){r.checkSupport("blob");try{return new Blob([E],{type:O})}catch{try{var R=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return R.append(E),R.getBlob(O)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(E,O,R){var L=[],q=0,X=E.length;if(X<=R)return String.fromCharCode.apply(null,E);for(;q<X;)O==="array"||O==="nodebuffer"?L.push(String.fromCharCode.apply(null,E.slice(q,Math.min(q+R,X)))):L.push(String.fromCharCode.apply(null,E.subarray(q,Math.min(q+R,X)))),q+=R;return L.join("")},stringifyByChar:function(E){for(var O="",R=0;R<E.length;R++)O+=String.fromCharCode(E[R]);return O},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function y(E){var O=65536,R=r.getTypeOf(E),L=!0;if(R==="uint8array"?L=h.applyCanBeUsed.uint8array:R==="nodebuffer"&&(L=h.applyCanBeUsed.nodebuffer),L)for(;1<O;)try{return h.stringifyByChunk(E,R,O)}catch{O=Math.floor(O/2)}return h.stringifyByChar(E)}function g(E,O){for(var R=0;R<E.length;R++)O[R]=E[R];return O}r.applyFromCharCode=y;var _={};_.string={string:c,array:function(E){return f(E,new Array(E.length))},arraybuffer:function(E){return _.string.uint8array(E).buffer},uint8array:function(E){return f(E,new Uint8Array(E.length))},nodebuffer:function(E){return f(E,o.allocBuffer(E.length))}},_.array={string:y,array:c,arraybuffer:function(E){return new Uint8Array(E).buffer},uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return o.newBufferFrom(E)}},_.arraybuffer={string:function(E){return y(new Uint8Array(E))},array:function(E){return g(new Uint8Array(E),new Array(E.byteLength))},arraybuffer:c,uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return o.newBufferFrom(new Uint8Array(E))}},_.uint8array={string:y,array:function(E){return g(E,new Array(E.length))},arraybuffer:function(E){return E.buffer},uint8array:c,nodebuffer:function(E){return o.newBufferFrom(E)}},_.nodebuffer={string:y,array:function(E){return g(E,new Array(E.length))},arraybuffer:function(E){return _.nodebuffer.uint8array(E).buffer},uint8array:function(E){return g(E,new Uint8Array(E.length))},nodebuffer:c},r.transformTo=function(E,O){if(O=O||"",!E)return O;r.checkSupport(E);var R=r.getTypeOf(O);return _[R][E](O)},r.getTypeOf=function(E){return typeof E=="string"?"string":Object.prototype.toString.call(E)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(E)?"nodebuffer":n.uint8array&&E instanceof Uint8Array?"uint8array":n.arraybuffer&&E instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(E){if(!n[E.toLowerCase()])throw new Error(E+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(E){var O,R,L="";for(R=0;R<(E||"").length;R++)L+="\\x"+((O=E.charCodeAt(R))<16?"0":"")+O.toString(16).toUpperCase();return L},r.delay=function(E,O,R){a(function(){E.apply(R||null,O||[])})},r.inherits=function(E,O){function R(){}R.prototype=O.prototype,E.prototype=new R},r.extend=function(){var E,O,R={};for(E=0;E<arguments.length;E++)for(O in arguments[E])arguments[E].hasOwnProperty(O)&&R[O]===void 0&&(R[O]=arguments[E][O]);return R},r.prepareContent=function(E,O,R,L,q){return s.Promise.resolve(O).then(function(X){return n.blob&&(X instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(X))!==-1)&&typeof FileReader<"u"?new s.Promise(function(ne,W){var H=new FileReader;H.onload=function(Y){ne(Y.target.result)},H.onerror=function(Y){W(Y.target.error)},H.readAsArrayBuffer(X)}):X}).then(function(X){var ne=r.getTypeOf(X);return ne?(ne==="arraybuffer"?X=r.transformTo("uint8array",X):ne==="string"&&(q?X=i.decode(X):R&&L!==!0&&(X=function(W){return f(W,n.uint8array?new Uint8Array(W.length):new Array(W.length))}(X))),X):s.Promise.reject(new Error("Can't read the data of '"+E+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(h)+", expected "+i.pretty(f)+")")}},isSignature:function(f,h){var y=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===h;return this.reader.setIndex(y),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=s.uint8array?"uint8array":"array",y=i.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,y,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),h=this.reader.readInt(4),y=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var g=h-y;if(0<g)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=n(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),c=t("./compressions"),f=t("./support");function h(y,g){this.options=y,this.loadOptions=g}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var g,_;if(y.skip(22),this.fileNameLength=y.readInt(2),_=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(E){for(var O in c)if(c.hasOwnProperty(O)&&c[O].magic===E)return c[O];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var g=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(g),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(y){if(this.extraFields[1]){var g=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(y){var g,_,E,O=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<O;)g=y.readInt(2),_=y.readInt(2),E=y.readData(_),this.extraFields[g]={id:g,length:_,value:E};y.setIndex(O)},handleUTF8:function(){var y=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var _=i.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var O=i.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(O)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var g=n(y.value);return g.readInt(1)!==1||a(this.fileName)!==g.readInt(4)?null:s.utf8decode(g.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var g=n(y.value);return g.readInt(1)!==1||a(this.fileComment)!==g.readInt(4)?null:s.utf8decode(g.readData(y.length-5))}return null}},e.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){function n(g,_,E){this.name=g,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=_,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),c=t("./stream/GenericWorker");n.prototype={internalStream:function(g){var _=null,E="string";try{if(!g)throw new Error("No output type specified.");var O=(E=g.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),_=this._decompressWorker();var R=!this._dataBinary;R&&!O&&(_=_.pipe(new a.Utf8EncodeWorker)),!R&&O&&(_=_.pipe(new a.Utf8DecodeWorker))}catch(L){(_=new c("error")).error(L)}return new i(_,E,"")},async:function(g,_){return this.internalStream(g).accumulate(_)},nodeStream:function(g,_){return this.internalStream(g||"nodebuffer").toNodejsStream(_)},_compressWorker:function(g,_){if(this._data instanceof s&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(E,g,_)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<f.length;y++)n.prototype[f[y]]=h;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(n){var i,o,a=n.MutationObserver||n.WebKitMutationObserver;if(a){var s=0,c=new a(g),f=n.document.createTextNode("");c.observe(f,{characterData:!0}),i=function(){f.data=s=++s%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var _=n.document.createElement("script");_.onreadystatechange=function(){g(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},n.document.documentElement.appendChild(_)}:function(){setTimeout(g,0)};else{var h=new n.MessageChannel;h.port1.onmessage=g,i=function(){h.port2.postMessage(0)}}var y=[];function g(){var _,E;o=!0;for(var O=y.length;O;){for(E=y,y=[],_=-1;++_<O;)E[_]();O=y.length}o=!1}e.exports=function(_){y.push(_)!==1||o||i()}}).call(this,ae!==void 0?ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,e,r){var n=t("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function f(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,O!==i&&_(this,O)}function h(O,R,L){this.promise=O,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}function y(O,R,L){n(function(){var q;try{q=R(L)}catch(X){return o.reject(O,X)}q===O?o.reject(O,new TypeError("Cannot resolve promise with itself")):o.resolve(O,q)})}function g(O){var R=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof R=="function")return function(){R.apply(O,arguments)}}function _(O,R){var L=!1;function q(W){L||(L=!0,o.reject(O,W))}function X(W){L||(L=!0,o.resolve(O,W))}var ne=E(function(){R(X,q)});ne.status==="error"&&q(ne.value)}function E(O,R){var L={};try{L.value=O(R),L.status="success"}catch(q){L.status="error",L.value=q}return L}(e.exports=f).prototype.finally=function(O){if(typeof O!="function")return this;var R=this.constructor;return this.then(function(L){return R.resolve(O()).then(function(){return L})},function(L){return R.resolve(O()).then(function(){throw L})})},f.prototype.catch=function(O){return this.then(null,O)},f.prototype.then=function(O,R){if(typeof O!="function"&&this.state===s||typeof R!="function"&&this.state===a)return this;var L=new this.constructor(i);return this.state!==c?y(L,this.state===s?O:R,this.outcome):this.queue.push(new h(L,O,R)),L},h.prototype.callFulfilled=function(O){o.resolve(this.promise,O)},h.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},h.prototype.callRejected=function(O){o.reject(this.promise,O)},h.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)},o.resolve=function(O,R){var L=E(g,R);if(L.status==="error")return o.reject(O,L.value);var q=L.value;if(q)_(O,q);else{O.state=s,O.outcome=R;for(var X=-1,ne=O.queue.length;++X<ne;)O.queue[X].callFulfilled(R)}return O},o.reject=function(O,R){O.state=a,O.outcome=R;for(var L=-1,q=O.queue.length;++L<q;)O.queue[L].callRejected(R);return O},f.resolve=function(O){return O instanceof this?O:o.resolve(new this(i),O)},f.reject=function(O){var R=new this(i);return o.reject(R,O)},f.all=function(O){var R=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=O.length,q=!1;if(!L)return this.resolve([]);for(var X=new Array(L),ne=0,W=-1,H=new this(i);++W<L;)Y(O[W],W);return H;function Y(T,te){R.resolve(T).then(function(v){X[te]=v,++ne!==L||q||(q=!0,o.resolve(H,X))},function(v){q||(q=!0,o.reject(H,v))})}},f.race=function(O){var R=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=O.length,q=!1;if(!L)return this.resolve([]);for(var X,ne=-1,W=new this(i);++ne<L;)X=O[ne],R.resolve(X).then(function(H){q||(q=!0,o.resolve(W,H))},function(H){q||(q=!0,o.reject(W,H))});return W}},{immediate:36}],38:[function(t,e,r){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),c=Object.prototype.toString,f=0,h=-1,y=0,g=8;function _(O){if(!(this instanceof _))return new _(O);this.options=i.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},O||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var L=n.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(L!==f)throw new Error(a[L]);if(R.header&&n.deflateSetHeader(this.strm,R.header),R.dictionary){var q;if(q=typeof R.dictionary=="string"?o.string2buf(R.dictionary):c.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(L=n.deflateSetDictionary(this.strm,q))!==f)throw new Error(a[L]);this._dict_set=!0}}function E(O,R){var L=new _(R);if(L.push(O,!0),L.err)throw L.msg||a[L.err];return L.result}_.prototype.push=function(O,R){var L,q,X=this.strm,ne=this.options.chunkSize;if(this.ended)return!1;q=R===~~R?R:R===!0?4:0,typeof O=="string"?X.input=o.string2buf(O):c.call(O)==="[object ArrayBuffer]"?X.input=new Uint8Array(O):X.input=O,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new i.Buf8(ne),X.next_out=0,X.avail_out=ne),(L=n.deflate(X,q))!==1&&L!==f)return this.onEnd(L),!(this.ended=!0);X.avail_out!==0&&(X.avail_in!==0||q!==4&&q!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(X.output,X.next_out))):this.onData(i.shrinkBuf(X.output,X.next_out)))}while((0<X.avail_in||X.avail_out===0)&&L!==1);return q===4?(L=n.deflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===f):q!==2||(this.onEnd(f),!(X.avail_out=0))},_.prototype.onData=function(O){this.chunks.push(O)},_.prototype.onEnd=function(O){O===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},r.Deflate=_,r.deflate=E,r.deflateRaw=function(O,R){return(R=R||{}).raw=!0,E(O,R)},r.gzip=function(O,R){return(R=R||{}).gzip=!0,E(O,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString;function y(_){if(!(this instanceof y))return new y(_);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},_||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||_&&_.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var O=n.inflateInit2(this.strm,E.windowBits);if(O!==a.Z_OK)throw new Error(s[O]);this.header=new f,n.inflateGetHeader(this.strm,this.header)}function g(_,E){var O=new y(E);if(O.push(_,!0),O.err)throw O.msg||s[O.err];return O.result}y.prototype.push=function(_,E){var O,R,L,q,X,ne,W=this.strm,H=this.options.chunkSize,Y=this.options.dictionary,T=!1;if(this.ended)return!1;R=E===~~E?E:E===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof _=="string"?W.input=o.binstring2buf(_):h.call(_)==="[object ArrayBuffer]"?W.input=new Uint8Array(_):W.input=_,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new i.Buf8(H),W.next_out=0,W.avail_out=H),(O=n.inflate(W,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&Y&&(ne=typeof Y=="string"?o.string2buf(Y):h.call(Y)==="[object ArrayBuffer]"?new Uint8Array(Y):Y,O=n.inflateSetDictionary(this.strm,ne)),O===a.Z_BUF_ERROR&&T===!0&&(O=a.Z_OK,T=!1),O!==a.Z_STREAM_END&&O!==a.Z_OK)return this.onEnd(O),!(this.ended=!0);W.next_out&&(W.avail_out!==0&&O!==a.Z_STREAM_END&&(W.avail_in!==0||R!==a.Z_FINISH&&R!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(L=o.utf8border(W.output,W.next_out),q=W.next_out-L,X=o.buf2string(W.output,L),W.next_out=q,W.avail_out=H-q,q&&i.arraySet(W.output,W.output,L,q,0),this.onData(X)):this.onData(i.shrinkBuf(W.output,W.next_out)))),W.avail_in===0&&W.avail_out===0&&(T=!0)}while((0<W.avail_in||W.avail_out===0)&&O!==a.Z_STREAM_END);return O===a.Z_STREAM_END&&(R=a.Z_FINISH),R===a.Z_FINISH?(O=n.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===a.Z_OK):R!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(W.avail_out=0))},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},r.Inflate=y,r.inflate=g,r.inflateRaw=function(_,E){return(E=E||{}).raw=!0,g(_,E)},r.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(a){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var c=s.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])}}return a},r.shrinkBuf=function(a,s){return a.length===s?a:a.subarray?a.subarray(0,s):(a.length=s,a)};var i={arraySet:function(a,s,c,f,h){if(s.subarray&&a.subarray)a.set(s.subarray(c,c+f),h);else for(var y=0;y<f;y++)a[h+y]=s[c+y]},flattenChunks:function(a){var s,c,f,h,y,g;for(s=f=0,c=a.length;s<c;s++)f+=a[s].length;for(g=new Uint8Array(f),s=h=0,c=a.length;s<c;s++)y=a[s],g.set(y,h),h+=y.length;return g}},o={arraySet:function(a,s,c,f,h){for(var y=0;y<f;y++)a[h+y]=s[c+y]},flattenChunks:function(a){return[].concat.apply([],a)}};r.setTyped=function(a){a?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(t,e,r){var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(f,h){if(h<65537&&(f.subarray&&o||!f.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(f,h));for(var y="",g=0;g<h;g++)y+=String.fromCharCode(f[g]);return y}a[254]=a[254]=1,r.string2buf=function(f){var h,y,g,_,E,O=f.length,R=0;for(_=0;_<O;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<O&&(64512&(g=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),R+=y<128?1:y<2048?2:y<65536?3:4;for(h=new n.Buf8(R),_=E=0;E<R;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<O&&(64512&(g=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),y<128?h[E++]=y:(y<2048?h[E++]=192|y>>>6:(y<65536?h[E++]=224|y>>>12:(h[E++]=240|y>>>18,h[E++]=128|y>>>12&63),h[E++]=128|y>>>6&63),h[E++]=128|63&y);return h},r.buf2binstring=function(f){return c(f,f.length)},r.binstring2buf=function(f){for(var h=new n.Buf8(f.length),y=0,g=h.length;y<g;y++)h[y]=f.charCodeAt(y);return h},r.buf2string=function(f,h){var y,g,_,E,O=h||f.length,R=new Array(2*O);for(y=g=0;y<O;)if((_=f[y++])<128)R[g++]=_;else if(4<(E=a[_]))R[g++]=65533,y+=E-1;else{for(_&=E===2?31:E===3?15:7;1<E&&y<O;)_=_<<6|63&f[y++],E--;1<E?R[g++]=65533:_<65536?R[g++]=_:(_-=65536,R[g++]=55296|_>>10&1023,R[g++]=56320|1023&_)}return c(R,g)},r.utf8border=function(f,h){var y;for((h=h||f.length)>f.length&&(h=f.length),y=h-1;0<=y&&(192&f[y])==128;)y--;return y<0||y===0?h:y+a[f[y]]>h?y:h}},{"./common":41}],43:[function(t,e,r){e.exports=function(n,i,o,a){for(var s=65535&n|0,c=n>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;c=c+(s=s+i[a++]|0)|0,--f;);s%=65521,c%=65521}return s|c<<16|0}},{}],44:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){var n=function(){for(var i,o=[],a=0;a<256;a++){i=a;for(var s=0;s<8;s++)i=1&i?3988292384^i>>>1:i>>>1;o[a]=i}return o}();e.exports=function(i,o,a,s){var c=n,f=s+a;i^=-1;for(var h=s;h<f;h++)i=i>>>8^c[255&(i^o[h])];return-1^i}},{}],46:[function(t,e,r){var n,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),c=t("./messages"),f=0,h=4,y=0,g=-2,_=-1,E=4,O=2,R=8,L=9,q=286,X=30,ne=19,W=2*q+1,H=15,Y=3,T=258,te=T+Y+1,v=42,D=113,w=1,k=2,A=3,b=4;function P(x,K){return x.msg=c[K],K}function V(x){return(x<<1)-(4<x?9:0)}function Q(x){for(var K=x.length;0<=--K;)x[K]=0}function U(x){var K=x.state,ee=K.pending;ee>x.avail_out&&(ee=x.avail_out),ee!==0&&(i.arraySet(x.output,K.pending_buf,K.pending_out,ee,x.next_out),x.next_out+=ee,K.pending_out+=ee,x.total_out+=ee,x.avail_out-=ee,K.pending-=ee,K.pending===0&&(K.pending_out=0))}function Z(x,K){o._tr_flush_block(x,0<=x.block_start?x.block_start:-1,x.strstart-x.block_start,K),x.block_start=x.strstart,U(x.strm)}function fe(x,K){x.pending_buf[x.pending++]=K}function se(x,K){x.pending_buf[x.pending++]=K>>>8&255,x.pending_buf[x.pending++]=255&K}function ue(x,K){var ee,G,J=x.max_chain_length,re=x.strstart,de=x.prev_length,pe=x.nice_match,ce=x.strstart>x.w_size-te?x.strstart-(x.w_size-te):0,Ee=x.window,Ie=x.w_mask,we=x.prev,Re=x.strstart+T,Fe=Ee[re+de-1],Ce=Ee[re+de];x.prev_length>=x.good_match&&(J>>=2),pe>x.lookahead&&(pe=x.lookahead);do if(Ee[(ee=K)+de]===Ce&&Ee[ee+de-1]===Fe&&Ee[ee]===Ee[re]&&Ee[++ee]===Ee[re+1]){re+=2,ee++;do;while(Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&Ee[++re]===Ee[++ee]&&re<Re);if(G=T-(Re-re),re=Re-T,de<G){if(x.match_start=K,pe<=(de=G))break;Fe=Ee[re+de-1],Ce=Ee[re+de]}}while((K=we[K&Ie])>ce&&--J!=0);return de<=x.lookahead?de:x.lookahead}function ge(x){var K,ee,G,J,re,de,pe,ce,Ee,Ie,we=x.w_size;do{if(J=x.window_size-x.lookahead-x.strstart,x.strstart>=we+(we-te)){for(i.arraySet(x.window,x.window,we,we,0),x.match_start-=we,x.strstart-=we,x.block_start-=we,K=ee=x.hash_size;G=x.head[--K],x.head[K]=we<=G?G-we:0,--ee;);for(K=ee=we;G=x.prev[--K],x.prev[K]=we<=G?G-we:0,--ee;);J+=we}if(x.strm.avail_in===0)break;if(de=x.strm,pe=x.window,ce=x.strstart+x.lookahead,Ie=void 0,(Ee=J)<(Ie=de.avail_in)&&(Ie=Ee),ee=Ie===0?0:(de.avail_in-=Ie,i.arraySet(pe,de.input,de.next_in,Ie,ce),de.state.wrap===1?de.adler=a(de.adler,pe,Ie,ce):de.state.wrap===2&&(de.adler=s(de.adler,pe,Ie,ce)),de.next_in+=Ie,de.total_in+=Ie,Ie),x.lookahead+=ee,x.lookahead+x.insert>=Y)for(re=x.strstart-x.insert,x.ins_h=x.window[re],x.ins_h=(x.ins_h<<x.hash_shift^x.window[re+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[re+Y-1])&x.hash_mask,x.prev[re&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=re,re++,x.insert--,!(x.lookahead+x.insert<Y)););}while(x.lookahead<te&&x.strm.avail_in!==0)}function me(x,K){for(var ee,G;;){if(x.lookahead<te){if(ge(x),x.lookahead<te&&K===f)return w;if(x.lookahead===0)break}if(ee=0,x.lookahead>=Y&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+Y-1])&x.hash_mask,ee=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),ee!==0&&x.strstart-ee<=x.w_size-te&&(x.match_length=ue(x,ee)),x.match_length>=Y)if(G=o._tr_tally(x,x.strstart-x.match_start,x.match_length-Y),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=Y){for(x.match_length--;x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+Y-1])&x.hash_mask,ee=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart,--x.match_length!=0;);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else G=o._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(G&&(Z(x,!1),x.strm.avail_out===0))return w}return x.insert=x.strstart<Y-1?x.strstart:Y-1,K===h?(Z(x,!0),x.strm.avail_out===0?A:b):x.last_lit&&(Z(x,!1),x.strm.avail_out===0)?w:k}function C(x,K){for(var ee,G,J;;){if(x.lookahead<te){if(ge(x),x.lookahead<te&&K===f)return w;if(x.lookahead===0)break}if(ee=0,x.lookahead>=Y&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+Y-1])&x.hash_mask,ee=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=Y-1,ee!==0&&x.prev_length<x.max_lazy_match&&x.strstart-ee<=x.w_size-te&&(x.match_length=ue(x,ee),x.match_length<=5&&(x.strategy===1||x.match_length===Y&&4096<x.strstart-x.match_start)&&(x.match_length=Y-1)),x.prev_length>=Y&&x.match_length<=x.prev_length){for(J=x.strstart+x.lookahead-Y,G=o._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-Y),x.lookahead-=x.prev_length-1,x.prev_length-=2;++x.strstart<=J&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+Y-1])&x.hash_mask,ee=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),--x.prev_length!=0;);if(x.match_available=0,x.match_length=Y-1,x.strstart++,G&&(Z(x,!1),x.strm.avail_out===0))return w}else if(x.match_available){if((G=o._tr_tally(x,0,x.window[x.strstart-1]))&&Z(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return w}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(G=o._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<Y-1?x.strstart:Y-1,K===h?(Z(x,!0),x.strm.avail_out===0?A:b):x.last_lit&&(Z(x,!1),x.strm.avail_out===0)?w:k}function j(x,K,ee,G,J){this.good_length=x,this.max_lazy=K,this.nice_length=ee,this.max_chain=G,this.func=J}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*W),this.dyn_dtree=new i.Buf16(2*(2*X+1)),this.bl_tree=new i.Buf16(2*(2*ne+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(H+1),this.heap=new i.Buf16(2*q+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*q+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(x){var K;return x&&x.state?(x.total_in=x.total_out=0,x.data_type=O,(K=x.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?v:D,x.adler=K.wrap===2?0:1,K.last_flush=f,o._tr_init(K),y):P(x,g)}function B(x){var K=M(x);return K===y&&function(ee){ee.window_size=2*ee.w_size,Q(ee.head),ee.max_lazy_match=n[ee.level].max_lazy,ee.good_match=n[ee.level].good_length,ee.nice_match=n[ee.level].nice_length,ee.max_chain_length=n[ee.level].max_chain,ee.strstart=0,ee.block_start=0,ee.lookahead=0,ee.insert=0,ee.match_length=ee.prev_length=Y-1,ee.match_available=0,ee.ins_h=0}(x.state),K}function z(x,K,ee,G,J,re){if(!x)return g;var de=1;if(K===_&&(K=6),G<0?(de=0,G=-G):15<G&&(de=2,G-=16),J<1||L<J||ee!==R||G<8||15<G||K<0||9<K||re<0||E<re)return P(x,g);G===8&&(G=9);var pe=new S;return(x.state=pe).strm=x,pe.wrap=de,pe.gzhead=null,pe.w_bits=G,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=J+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+Y-1)/Y),pe.window=new i.Buf8(2*pe.w_size),pe.head=new i.Buf16(pe.hash_size),pe.prev=new i.Buf16(pe.w_size),pe.lit_bufsize=1<<J+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new i.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=K,pe.strategy=re,pe.method=ee,B(x)}n=[new j(0,0,0,0,function(x,K){var ee=65535;for(ee>x.pending_buf_size-5&&(ee=x.pending_buf_size-5);;){if(x.lookahead<=1){if(ge(x),x.lookahead===0&&K===f)return w;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var G=x.block_start+ee;if((x.strstart===0||x.strstart>=G)&&(x.lookahead=x.strstart-G,x.strstart=G,Z(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-te&&(Z(x,!1),x.strm.avail_out===0))return w}return x.insert=0,K===h?(Z(x,!0),x.strm.avail_out===0?A:b):(x.strstart>x.block_start&&(Z(x,!1),x.strm.avail_out),w)}),new j(4,4,8,4,me),new j(4,5,16,8,me),new j(4,6,32,32,me),new j(4,4,16,16,C),new j(8,16,32,32,C),new j(8,16,128,128,C),new j(8,32,128,256,C),new j(32,128,258,1024,C),new j(32,258,258,4096,C)],r.deflateInit=function(x,K){return z(x,K,R,15,8,0)},r.deflateInit2=z,r.deflateReset=B,r.deflateResetKeep=M,r.deflateSetHeader=function(x,K){return x&&x.state?x.state.wrap!==2?g:(x.state.gzhead=K,y):g},r.deflate=function(x,K){var ee,G,J,re;if(!x||!x.state||5<K||K<0)return x?P(x,g):g;if(G=x.state,!x.output||!x.input&&x.avail_in!==0||G.status===666&&K!==h)return P(x,x.avail_out===0?-5:g);if(G.strm=x,ee=G.last_flush,G.last_flush=K,G.status===v)if(G.wrap===2)x.adler=0,fe(G,31),fe(G,139),fe(G,8),G.gzhead?(fe(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),fe(G,255&G.gzhead.time),fe(G,G.gzhead.time>>8&255),fe(G,G.gzhead.time>>16&255),fe(G,G.gzhead.time>>24&255),fe(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),fe(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(fe(G,255&G.gzhead.extra.length),fe(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(x.adler=s(x.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(fe(G,0),fe(G,0),fe(G,0),fe(G,0),fe(G,0),fe(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),fe(G,3),G.status=D);else{var de=R+(G.w_bits-8<<4)<<8;de|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(de|=32),de+=31-de%31,G.status=D,se(G,de),G.strstart!==0&&(se(G,x.adler>>>16),se(G,65535&x.adler)),x.adler=1}if(G.status===69)if(G.gzhead.extra){for(J=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),U(x),J=G.pending,G.pending!==G.pending_buf_size));)fe(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){J=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),U(x),J=G.pending,G.pending===G.pending_buf_size)){re=1;break}re=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,fe(G,re)}while(re!==0);G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),re===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){J=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),U(x),J=G.pending,G.pending===G.pending_buf_size)){re=1;break}re=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,fe(G,re)}while(re!==0);G.gzhead.hcrc&&G.pending>J&&(x.adler=s(x.adler,G.pending_buf,G.pending-J,J)),re===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&U(x),G.pending+2<=G.pending_buf_size&&(fe(G,255&x.adler),fe(G,x.adler>>8&255),x.adler=0,G.status=D)):G.status=D),G.pending!==0){if(U(x),x.avail_out===0)return G.last_flush=-1,y}else if(x.avail_in===0&&V(K)<=V(ee)&&K!==h)return P(x,-5);if(G.status===666&&x.avail_in!==0)return P(x,-5);if(x.avail_in!==0||G.lookahead!==0||K!==f&&G.status!==666){var pe=G.strategy===2?function(ce,Ee){for(var Ie;;){if(ce.lookahead===0&&(ge(ce),ce.lookahead===0)){if(Ee===f)return w;break}if(ce.match_length=0,Ie=o._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,Ie&&(Z(ce,!1),ce.strm.avail_out===0))return w}return ce.insert=0,Ee===h?(Z(ce,!0),ce.strm.avail_out===0?A:b):ce.last_lit&&(Z(ce,!1),ce.strm.avail_out===0)?w:k}(G,K):G.strategy===3?function(ce,Ee){for(var Ie,we,Re,Fe,Ce=ce.window;;){if(ce.lookahead<=T){if(ge(ce),ce.lookahead<=T&&Ee===f)return w;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=Y&&0<ce.strstart&&(we=Ce[Re=ce.strstart-1])===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]){Fe=ce.strstart+T;do;while(we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&we===Ce[++Re]&&Re<Fe);ce.match_length=T-(Fe-Re),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=Y?(Ie=o._tr_tally(ce,1,ce.match_length-Y),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(Ie=o._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),Ie&&(Z(ce,!1),ce.strm.avail_out===0))return w}return ce.insert=0,Ee===h?(Z(ce,!0),ce.strm.avail_out===0?A:b):ce.last_lit&&(Z(ce,!1),ce.strm.avail_out===0)?w:k}(G,K):n[G.level].func(G,K);if(pe!==A&&pe!==b||(G.status=666),pe===w||pe===A)return x.avail_out===0&&(G.last_flush=-1),y;if(pe===k&&(K===1?o._tr_align(G):K!==5&&(o._tr_stored_block(G,0,0,!1),K===3&&(Q(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),U(x),x.avail_out===0))return G.last_flush=-1,y}return K!==h?y:G.wrap<=0?1:(G.wrap===2?(fe(G,255&x.adler),fe(G,x.adler>>8&255),fe(G,x.adler>>16&255),fe(G,x.adler>>24&255),fe(G,255&x.total_in),fe(G,x.total_in>>8&255),fe(G,x.total_in>>16&255),fe(G,x.total_in>>24&255)):(se(G,x.adler>>>16),se(G,65535&x.adler)),U(x),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?y:1)},r.deflateEnd=function(x){var K;return x&&x.state?(K=x.state.status)!==v&&K!==69&&K!==73&&K!==91&&K!==103&&K!==D&&K!==666?P(x,g):(x.state=null,K===D?P(x,-3):y):g},r.deflateSetDictionary=function(x,K){var ee,G,J,re,de,pe,ce,Ee,Ie=K.length;if(!x||!x.state||(re=(ee=x.state).wrap)===2||re===1&&ee.status!==v||ee.lookahead)return g;for(re===1&&(x.adler=a(x.adler,K,Ie,0)),ee.wrap=0,Ie>=ee.w_size&&(re===0&&(Q(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),Ee=new i.Buf8(ee.w_size),i.arraySet(Ee,K,Ie-ee.w_size,ee.w_size,0),K=Ee,Ie=ee.w_size),de=x.avail_in,pe=x.next_in,ce=x.input,x.avail_in=Ie,x.next_in=0,x.input=K,ge(ee);ee.lookahead>=Y;){for(G=ee.strstart,J=ee.lookahead-(Y-1);ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[G+Y-1])&ee.hash_mask,ee.prev[G&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=G,G++,--J;);ee.strstart=G,ee.lookahead=Y-1,ge(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=Y-1,ee.match_available=0,x.next_in=pe,x.input=ce,x.avail_in=de,ee.wrap=re,y},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){e.exports=function(n,i){var o,a,s,c,f,h,y,g,_,E,O,R,L,q,X,ne,W,H,Y,T,te,v,D,w,k;o=n.state,a=n.next_in,w=n.input,s=a+(n.avail_in-5),c=n.next_out,k=n.output,f=c-(i-n.avail_out),h=c+(n.avail_out-257),y=o.dmax,g=o.wsize,_=o.whave,E=o.wnext,O=o.window,R=o.hold,L=o.bits,q=o.lencode,X=o.distcode,ne=(1<<o.lenbits)-1,W=(1<<o.distbits)-1;e:do{L<15&&(R+=w[a++]<<L,L+=8,R+=w[a++]<<L,L+=8),H=q[R&ne];t:for(;;){if(R>>>=Y=H>>>24,L-=Y,(Y=H>>>16&255)==0)k[c++]=65535&H;else{if(!(16&Y)){if((64&Y)==0){H=q[(65535&H)+(R&(1<<Y)-1)];continue t}if(32&Y){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}T=65535&H,(Y&=15)&&(L<Y&&(R+=w[a++]<<L,L+=8),T+=R&(1<<Y)-1,R>>>=Y,L-=Y),L<15&&(R+=w[a++]<<L,L+=8,R+=w[a++]<<L,L+=8),H=X[R&W];r:for(;;){if(R>>>=Y=H>>>24,L-=Y,!(16&(Y=H>>>16&255))){if((64&Y)==0){H=X[(65535&H)+(R&(1<<Y)-1)];continue r}n.msg="invalid distance code",o.mode=30;break e}if(te=65535&H,L<(Y&=15)&&(R+=w[a++]<<L,(L+=8)<Y&&(R+=w[a++]<<L,L+=8)),y<(te+=R&(1<<Y)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(R>>>=Y,L-=Y,(Y=c-f)<te){if(_<(Y=te-Y)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if(D=O,(v=0)===E){if(v+=g-Y,Y<T){for(T-=Y;k[c++]=O[v++],--Y;);v=c-te,D=k}}else if(E<Y){if(v+=g+E-Y,(Y-=E)<T){for(T-=Y;k[c++]=O[v++],--Y;);if(v=0,E<T){for(T-=Y=E;k[c++]=O[v++],--Y;);v=c-te,D=k}}}else if(v+=E-Y,Y<T){for(T-=Y;k[c++]=O[v++],--Y;);v=c-te,D=k}for(;2<T;)k[c++]=D[v++],k[c++]=D[v++],k[c++]=D[v++],T-=3;T&&(k[c++]=D[v++],1<T&&(k[c++]=D[v++]))}else{for(v=c-te;k[c++]=k[v++],k[c++]=k[v++],k[c++]=k[v++],2<(T-=3););T&&(k[c++]=k[v++],1<T&&(k[c++]=k[v++]))}break}}break}}while(a<s&&c<h);a-=T=L>>3,R&=(1<<(L-=T<<3))-1,n.next_in=a,n.next_out=c,n.avail_in=a<s?s-a+5:5-(a-s),n.avail_out=c<h?h-c+257:257-(c-h),o.hold=R,o.bits=L}},{}],49:[function(t,e,r){var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),c=1,f=2,h=0,y=-2,g=1,_=852,E=592;function O(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(v){var D;return v&&v.state?(D=v.state,v.total_in=v.total_out=D.total=0,v.msg="",D.wrap&&(v.adler=1&D.wrap),D.mode=g,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new n.Buf32(_),D.distcode=D.distdyn=new n.Buf32(E),D.sane=1,D.back=-1,h):y}function q(v){var D;return v&&v.state?((D=v.state).wsize=0,D.whave=0,D.wnext=0,L(v)):y}function X(v,D){var w,k;return v&&v.state?(k=v.state,D<0?(w=0,D=-D):(w=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(k.window!==null&&k.wbits!==D&&(k.window=null),k.wrap=w,k.wbits=D,q(v))):y}function ne(v,D){var w,k;return v?(k=new R,(v.state=k).window=null,(w=X(v,D))!==h&&(v.state=null),w):y}var W,H,Y=!0;function T(v){if(Y){var D;for(W=new n.Buf32(512),H=new n.Buf32(32),D=0;D<144;)v.lens[D++]=8;for(;D<256;)v.lens[D++]=9;for(;D<280;)v.lens[D++]=7;for(;D<288;)v.lens[D++]=8;for(s(c,v.lens,0,288,W,0,v.work,{bits:9}),D=0;D<32;)v.lens[D++]=5;s(f,v.lens,0,32,H,0,v.work,{bits:5}),Y=!1}v.lencode=W,v.lenbits=9,v.distcode=H,v.distbits=5}function te(v,D,w,k){var A,b=v.state;return b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new n.Buf8(b.wsize)),k>=b.wsize?(n.arraySet(b.window,D,w-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(k<(A=b.wsize-b.wnext)&&(A=k),n.arraySet(b.window,D,w-k,A,b.wnext),(k-=A)?(n.arraySet(b.window,D,w-k,k,0),b.wnext=k,b.whave=b.wsize):(b.wnext+=A,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=A))),0}r.inflateReset=q,r.inflateReset2=X,r.inflateResetKeep=L,r.inflateInit=function(v){return ne(v,15)},r.inflateInit2=ne,r.inflate=function(v,D){var w,k,A,b,P,V,Q,U,Z,fe,se,ue,ge,me,C,j,S,M,B,z,x,K,ee,G,J=0,re=new n.Buf8(4),de=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return y;(w=v.state).mode===12&&(w.mode=13),P=v.next_out,A=v.output,Q=v.avail_out,b=v.next_in,k=v.input,V=v.avail_in,U=w.hold,Z=w.bits,fe=V,se=Q,K=h;e:for(;;)switch(w.mode){case g:if(w.wrap===0){w.mode=13;break}for(;Z<16;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(2&w.wrap&&U===35615){re[w.check=0]=255&U,re[1]=U>>>8&255,w.check=o(w.check,re,2,0),Z=U=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&U)<<8)+(U>>8))%31){v.msg="incorrect header check",w.mode=30;break}if((15&U)!=8){v.msg="unknown compression method",w.mode=30;break}if(Z-=4,x=8+(15&(U>>>=4)),w.wbits===0)w.wbits=x;else if(x>w.wbits){v.msg="invalid window size",w.mode=30;break}w.dmax=1<<x,v.adler=w.check=1,w.mode=512&U?10:12,Z=U=0;break;case 2:for(;Z<16;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(w.flags=U,(255&w.flags)!=8){v.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){v.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=U>>8&1),512&w.flags&&(re[0]=255&U,re[1]=U>>>8&255,w.check=o(w.check,re,2,0)),Z=U=0,w.mode=3;case 3:for(;Z<32;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.head&&(w.head.time=U),512&w.flags&&(re[0]=255&U,re[1]=U>>>8&255,re[2]=U>>>16&255,re[3]=U>>>24&255,w.check=o(w.check,re,4,0)),Z=U=0,w.mode=4;case 4:for(;Z<16;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.head&&(w.head.xflags=255&U,w.head.os=U>>8),512&w.flags&&(re[0]=255&U,re[1]=U>>>8&255,w.check=o(w.check,re,2,0)),Z=U=0,w.mode=5;case 5:if(1024&w.flags){for(;Z<16;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.length=U,w.head&&(w.head.extra_len=U),512&w.flags&&(re[0]=255&U,re[1]=U>>>8&255,w.check=o(w.check,re,2,0)),Z=U=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(V<(ue=w.length)&&(ue=V),ue&&(w.head&&(x=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),n.arraySet(w.head.extra,k,b,ue,x)),512&w.flags&&(w.check=o(w.check,k,ue,b)),V-=ue,b+=ue,w.length-=ue),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(V===0)break e;for(ue=0;x=k[b+ue++],w.head&&x&&w.length<65536&&(w.head.name+=String.fromCharCode(x)),x&&ue<V;);if(512&w.flags&&(w.check=o(w.check,k,ue,b)),V-=ue,b+=ue,x)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(V===0)break e;for(ue=0;x=k[b+ue++],w.head&&x&&w.length<65536&&(w.head.comment+=String.fromCharCode(x)),x&&ue<V;);if(512&w.flags&&(w.check=o(w.check,k,ue,b)),V-=ue,b+=ue,x)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;Z<16;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(U!==(65535&w.check)){v.msg="header crc mismatch",w.mode=30;break}Z=U=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),v.adler=w.check=0,w.mode=12;break;case 10:for(;Z<32;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}v.adler=w.check=O(U),Z=U=0,w.mode=11;case 11:if(w.havedict===0)return v.next_out=P,v.avail_out=Q,v.next_in=b,v.avail_in=V,w.hold=U,w.bits=Z,2;v.adler=w.check=1,w.mode=12;case 12:if(D===5||D===6)break e;case 13:if(w.last){U>>>=7&Z,Z-=7&Z,w.mode=27;break}for(;Z<3;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}switch(w.last=1&U,Z-=1,3&(U>>>=1)){case 0:w.mode=14;break;case 1:if(T(w),w.mode=20,D!==6)break;U>>>=2,Z-=2;break e;case 2:w.mode=17;break;case 3:v.msg="invalid block type",w.mode=30}U>>>=2,Z-=2;break;case 14:for(U>>>=7&Z,Z-=7&Z;Z<32;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if((65535&U)!=(U>>>16^65535)){v.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&U,Z=U=0,w.mode=15,D===6)break e;case 15:w.mode=16;case 16:if(ue=w.length){if(V<ue&&(ue=V),Q<ue&&(ue=Q),ue===0)break e;n.arraySet(A,k,b,ue,P),V-=ue,b+=ue,Q-=ue,P+=ue,w.length-=ue;break}w.mode=12;break;case 17:for(;Z<14;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(w.nlen=257+(31&U),U>>>=5,Z-=5,w.ndist=1+(31&U),U>>>=5,Z-=5,w.ncode=4+(15&U),U>>>=4,Z-=4,286<w.nlen||30<w.ndist){v.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;Z<3;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.lens[de[w.have++]]=7&U,U>>>=3,Z-=3}for(;w.have<19;)w.lens[de[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,ee={bits:w.lenbits},K=s(0,w.lens,0,19,w.lencode,0,w.work,ee),w.lenbits=ee.bits,K){v.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;j=(J=w.lencode[U&(1<<w.lenbits)-1])>>>16&255,S=65535&J,!((C=J>>>24)<=Z);){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(S<16)U>>>=C,Z-=C,w.lens[w.have++]=S;else{if(S===16){for(G=C+2;Z<G;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(U>>>=C,Z-=C,w.have===0){v.msg="invalid bit length repeat",w.mode=30;break}x=w.lens[w.have-1],ue=3+(3&U),U>>>=2,Z-=2}else if(S===17){for(G=C+3;Z<G;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}Z-=C,x=0,ue=3+(7&(U>>>=C)),U>>>=3,Z-=3}else{for(G=C+7;Z<G;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}Z-=C,x=0,ue=11+(127&(U>>>=C)),U>>>=7,Z-=7}if(w.have+ue>w.nlen+w.ndist){v.msg="invalid bit length repeat",w.mode=30;break}for(;ue--;)w.lens[w.have++]=x}}if(w.mode===30)break;if(w.lens[256]===0){v.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,ee={bits:w.lenbits},K=s(c,w.lens,0,w.nlen,w.lencode,0,w.work,ee),w.lenbits=ee.bits,K){v.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,ee={bits:w.distbits},K=s(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,ee),w.distbits=ee.bits,K){v.msg="invalid distances set",w.mode=30;break}if(w.mode=20,D===6)break e;case 20:w.mode=21;case 21:if(6<=V&&258<=Q){v.next_out=P,v.avail_out=Q,v.next_in=b,v.avail_in=V,w.hold=U,w.bits=Z,a(v,se),P=v.next_out,A=v.output,Q=v.avail_out,b=v.next_in,k=v.input,V=v.avail_in,U=w.hold,Z=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;j=(J=w.lencode[U&(1<<w.lenbits)-1])>>>16&255,S=65535&J,!((C=J>>>24)<=Z);){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(j&&(240&j)==0){for(M=C,B=j,z=S;j=(J=w.lencode[z+((U&(1<<M+B)-1)>>M)])>>>16&255,S=65535&J,!(M+(C=J>>>24)<=Z);){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}U>>>=M,Z-=M,w.back+=M}if(U>>>=C,Z-=C,w.back+=C,w.length=S,j===0){w.mode=26;break}if(32&j){w.back=-1,w.mode=12;break}if(64&j){v.msg="invalid literal/length code",w.mode=30;break}w.extra=15&j,w.mode=22;case 22:if(w.extra){for(G=w.extra;Z<G;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.length+=U&(1<<w.extra)-1,U>>>=w.extra,Z-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;j=(J=w.distcode[U&(1<<w.distbits)-1])>>>16&255,S=65535&J,!((C=J>>>24)<=Z);){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if((240&j)==0){for(M=C,B=j,z=S;j=(J=w.distcode[z+((U&(1<<M+B)-1)>>M)])>>>16&255,S=65535&J,!(M+(C=J>>>24)<=Z);){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}U>>>=M,Z-=M,w.back+=M}if(U>>>=C,Z-=C,w.back+=C,64&j){v.msg="invalid distance code",w.mode=30;break}w.offset=S,w.extra=15&j,w.mode=24;case 24:if(w.extra){for(G=w.extra;Z<G;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}w.offset+=U&(1<<w.extra)-1,U>>>=w.extra,Z-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){v.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(Q===0)break e;if(ue=se-Q,w.offset>ue){if((ue=w.offset-ue)>w.whave&&w.sane){v.msg="invalid distance too far back",w.mode=30;break}ge=ue>w.wnext?(ue-=w.wnext,w.wsize-ue):w.wnext-ue,ue>w.length&&(ue=w.length),me=w.window}else me=A,ge=P-w.offset,ue=w.length;for(Q<ue&&(ue=Q),Q-=ue,w.length-=ue;A[P++]=me[ge++],--ue;);w.length===0&&(w.mode=21);break;case 26:if(Q===0)break e;A[P++]=w.length,Q--,w.mode=21;break;case 27:if(w.wrap){for(;Z<32;){if(V===0)break e;V--,U|=k[b++]<<Z,Z+=8}if(se-=Q,v.total_out+=se,w.total+=se,se&&(v.adler=w.check=w.flags?o(w.check,A,se,P-se):i(w.check,A,se,P-se)),se=Q,(w.flags?U:O(U))!==w.check){v.msg="incorrect data check",w.mode=30;break}Z=U=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;Z<32;){if(V===0)break e;V--,U+=k[b++]<<Z,Z+=8}if(U!==(4294967295&w.total)){v.msg="incorrect length check",w.mode=30;break}Z=U=0}w.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;default:return y}return v.next_out=P,v.avail_out=Q,v.next_in=b,v.avail_in=V,w.hold=U,w.bits=Z,(w.wsize||se!==v.avail_out&&w.mode<30&&(w.mode<27||D!==4))&&te(v,v.output,v.next_out,se-v.avail_out)?(w.mode=31,-4):(fe-=v.avail_in,se-=v.avail_out,v.total_in+=fe,v.total_out+=se,w.total+=se,w.wrap&&se&&(v.adler=w.check=w.flags?o(w.check,A,se,v.next_out-se):i(w.check,A,se,v.next_out-se)),v.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(fe==0&&se===0||D===4)&&K===h&&(K=-5),K)},r.inflateEnd=function(v){if(!v||!v.state)return y;var D=v.state;return D.window&&(D.window=null),v.state=null,h},r.inflateGetHeader=function(v,D){var w;return v&&v.state?(2&(w=v.state).wrap)==0?y:((w.head=D).done=!1,h):y},r.inflateSetDictionary=function(v,D){var w,k=D.length;return v&&v.state?(w=v.state).wrap!==0&&w.mode!==11?y:w.mode===11&&i(1,D,k,0)!==w.check?-3:te(v,D,k,k)?(w.mode=31,-4):(w.havedict=1,h):y},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(c,f,h,y,g,_,E,O){var R,L,q,X,ne,W,H,Y,T,te=O.bits,v=0,D=0,w=0,k=0,A=0,b=0,P=0,V=0,Q=0,U=0,Z=null,fe=0,se=new n.Buf16(16),ue=new n.Buf16(16),ge=null,me=0;for(v=0;v<=15;v++)se[v]=0;for(D=0;D<y;D++)se[f[h+D]]++;for(A=te,k=15;1<=k&&se[k]===0;k--);if(k<A&&(A=k),k===0)return g[_++]=20971520,g[_++]=20971520,O.bits=1,0;for(w=1;w<k&&se[w]===0;w++);for(A<w&&(A=w),v=V=1;v<=15;v++)if(V<<=1,(V-=se[v])<0)return-1;if(0<V&&(c===0||k!==1))return-1;for(ue[1]=0,v=1;v<15;v++)ue[v+1]=ue[v]+se[v];for(D=0;D<y;D++)f[h+D]!==0&&(E[ue[f[h+D]]++]=D);if(W=c===0?(Z=ge=E,19):c===1?(Z=i,fe-=257,ge=o,me-=257,256):(Z=a,ge=s,-1),v=w,ne=_,P=D=U=0,q=-1,X=(Q=1<<(b=A))-1,c===1&&852<Q||c===2&&592<Q)return 1;for(;;){for(H=v-P,T=E[D]<W?(Y=0,E[D]):E[D]>W?(Y=ge[me+E[D]],Z[fe+E[D]]):(Y=96,0),R=1<<v-P,w=L=1<<b;g[ne+(U>>P)+(L-=R)]=H<<24|Y<<16|T|0,L!==0;);for(R=1<<v-1;U&R;)R>>=1;if(R!==0?(U&=R-1,U+=R):U=0,D++,--se[v]==0){if(v===k)break;v=f[h+E[D]]}if(A<v&&(U&X)!==q){for(P===0&&(P=A),ne+=w,V=1<<(b=v-P);b+P<k&&!((V-=se[b+P])<=0);)b++,V<<=1;if(Q+=1<<b,c===1&&852<Q||c===2&&592<Q)return 1;g[q=U&X]=A<<24|b<<16|ne-_|0}}return U!==0&&(g[ne+U]=v-P<<24|64<<16|0),O.bits=A,0}},{"../utils/common":41}],51:[function(t,e,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){var n=t("../utils/common"),i=0,o=1;function a(J){for(var re=J.length;0<=--re;)J[re]=0}var s=0,c=29,f=256,h=f+1+c,y=30,g=19,_=2*h+1,E=15,O=16,R=7,L=256,q=16,X=17,ne=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=new Array(2*(h+2));a(te);var v=new Array(2*y);a(v);var D=new Array(512);a(D);var w=new Array(256);a(w);var k=new Array(c);a(k);var A,b,P,V=new Array(y);function Q(J,re,de,pe,ce){this.static_tree=J,this.extra_bits=re,this.extra_base=de,this.elems=pe,this.max_length=ce,this.has_stree=J&&J.length}function U(J,re){this.dyn_tree=J,this.max_code=0,this.stat_desc=re}function Z(J){return J<256?D[J]:D[256+(J>>>7)]}function fe(J,re){J.pending_buf[J.pending++]=255&re,J.pending_buf[J.pending++]=re>>>8&255}function se(J,re,de){J.bi_valid>O-de?(J.bi_buf|=re<<J.bi_valid&65535,fe(J,J.bi_buf),J.bi_buf=re>>O-J.bi_valid,J.bi_valid+=de-O):(J.bi_buf|=re<<J.bi_valid&65535,J.bi_valid+=de)}function ue(J,re,de){se(J,de[2*re],de[2*re+1])}function ge(J,re){for(var de=0;de|=1&J,J>>>=1,de<<=1,0<--re;);return de>>>1}function me(J,re,de){var pe,ce,Ee=new Array(E+1),Ie=0;for(pe=1;pe<=E;pe++)Ee[pe]=Ie=Ie+de[pe-1]<<1;for(ce=0;ce<=re;ce++){var we=J[2*ce+1];we!==0&&(J[2*ce]=ge(Ee[we]++,we))}}function C(J){var re;for(re=0;re<h;re++)J.dyn_ltree[2*re]=0;for(re=0;re<y;re++)J.dyn_dtree[2*re]=0;for(re=0;re<g;re++)J.bl_tree[2*re]=0;J.dyn_ltree[2*L]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0}function j(J){8<J.bi_valid?fe(J,J.bi_buf):0<J.bi_valid&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0}function S(J,re,de,pe){var ce=2*re,Ee=2*de;return J[ce]<J[Ee]||J[ce]===J[Ee]&&pe[re]<=pe[de]}function M(J,re,de){for(var pe=J.heap[de],ce=de<<1;ce<=J.heap_len&&(ce<J.heap_len&&S(re,J.heap[ce+1],J.heap[ce],J.depth)&&ce++,!S(re,pe,J.heap[ce],J.depth));)J.heap[de]=J.heap[ce],de=ce,ce<<=1;J.heap[de]=pe}function B(J,re,de){var pe,ce,Ee,Ie,we=0;if(J.last_lit!==0)for(;pe=J.pending_buf[J.d_buf+2*we]<<8|J.pending_buf[J.d_buf+2*we+1],ce=J.pending_buf[J.l_buf+we],we++,pe===0?ue(J,ce,re):(ue(J,(Ee=w[ce])+f+1,re),(Ie=W[Ee])!==0&&se(J,ce-=k[Ee],Ie),ue(J,Ee=Z(--pe),de),(Ie=H[Ee])!==0&&se(J,pe-=V[Ee],Ie)),we<J.last_lit;);ue(J,L,re)}function z(J,re){var de,pe,ce,Ee=re.dyn_tree,Ie=re.stat_desc.static_tree,we=re.stat_desc.has_stree,Re=re.stat_desc.elems,Fe=-1;for(J.heap_len=0,J.heap_max=_,de=0;de<Re;de++)Ee[2*de]!==0?(J.heap[++J.heap_len]=Fe=de,J.depth[de]=0):Ee[2*de+1]=0;for(;J.heap_len<2;)Ee[2*(ce=J.heap[++J.heap_len]=Fe<2?++Fe:0)]=1,J.depth[ce]=0,J.opt_len--,we&&(J.static_len-=Ie[2*ce+1]);for(re.max_code=Fe,de=J.heap_len>>1;1<=de;de--)M(J,Ee,de);for(ce=Re;de=J.heap[1],J.heap[1]=J.heap[J.heap_len--],M(J,Ee,1),pe=J.heap[1],J.heap[--J.heap_max]=de,J.heap[--J.heap_max]=pe,Ee[2*ce]=Ee[2*de]+Ee[2*pe],J.depth[ce]=(J.depth[de]>=J.depth[pe]?J.depth[de]:J.depth[pe])+1,Ee[2*de+1]=Ee[2*pe+1]=ce,J.heap[1]=ce++,M(J,Ee,1),2<=J.heap_len;);J.heap[--J.heap_max]=J.heap[1],function(Ce,Ht){var mt,rt,Tr,Ue,at,hn,et=Ht.dyn_tree,lt=Ht.max_code,Pi=Ht.stat_desc.static_tree,kt=Ht.stat_desc.has_stree,Tt=Ht.stat_desc.extra_bits,Ri=Ht.stat_desc.extra_base,bt=Ht.stat_desc.max_length,vt=0;for(Ue=0;Ue<=E;Ue++)Ce.bl_count[Ue]=0;for(et[2*Ce.heap[Ce.heap_max]+1]=0,mt=Ce.heap_max+1;mt<_;mt++)bt<(Ue=et[2*et[2*(rt=Ce.heap[mt])+1]+1]+1)&&(Ue=bt,vt++),et[2*rt+1]=Ue,lt<rt||(Ce.bl_count[Ue]++,at=0,Ri<=rt&&(at=Tt[rt-Ri]),hn=et[2*rt],Ce.opt_len+=hn*(Ue+at),kt&&(Ce.static_len+=hn*(Pi[2*rt+1]+at)));if(vt!==0){do{for(Ue=bt-1;Ce.bl_count[Ue]===0;)Ue--;Ce.bl_count[Ue]--,Ce.bl_count[Ue+1]+=2,Ce.bl_count[bt]--,vt-=2}while(0<vt);for(Ue=bt;Ue!==0;Ue--)for(rt=Ce.bl_count[Ue];rt!==0;)lt<(Tr=Ce.heap[--mt])||(et[2*Tr+1]!==Ue&&(Ce.opt_len+=(Ue-et[2*Tr+1])*et[2*Tr],et[2*Tr+1]=Ue),rt--)}}(J,re),me(Ee,Fe,J.bl_count)}function x(J,re,de){var pe,ce,Ee=-1,Ie=re[1],we=0,Re=7,Fe=4;for(Ie===0&&(Re=138,Fe=3),re[2*(de+1)+1]=65535,pe=0;pe<=de;pe++)ce=Ie,Ie=re[2*(pe+1)+1],++we<Re&&ce===Ie||(we<Fe?J.bl_tree[2*ce]+=we:ce!==0?(ce!==Ee&&J.bl_tree[2*ce]++,J.bl_tree[2*q]++):we<=10?J.bl_tree[2*X]++:J.bl_tree[2*ne]++,Ee=ce,Fe=(we=0)===Ie?(Re=138,3):ce===Ie?(Re=6,3):(Re=7,4))}function K(J,re,de){var pe,ce,Ee=-1,Ie=re[1],we=0,Re=7,Fe=4;for(Ie===0&&(Re=138,Fe=3),pe=0;pe<=de;pe++)if(ce=Ie,Ie=re[2*(pe+1)+1],!(++we<Re&&ce===Ie)){if(we<Fe)for(;ue(J,ce,J.bl_tree),--we!=0;);else ce!==0?(ce!==Ee&&(ue(J,ce,J.bl_tree),we--),ue(J,q,J.bl_tree),se(J,we-3,2)):we<=10?(ue(J,X,J.bl_tree),se(J,we-3,3)):(ue(J,ne,J.bl_tree),se(J,we-11,7));Ee=ce,Fe=(we=0)===Ie?(Re=138,3):ce===Ie?(Re=6,3):(Re=7,4)}}a(V);var ee=!1;function G(J,re,de,pe){se(J,(s<<1)+(pe?1:0),3),function(ce,Ee,Ie,we){j(ce),we&&(fe(ce,Ie),fe(ce,~Ie)),n.arraySet(ce.pending_buf,ce.window,Ee,Ie,ce.pending),ce.pending+=Ie}(J,re,de,!0)}r._tr_init=function(J){ee||(function(){var re,de,pe,ce,Ee,Ie=new Array(E+1);for(ce=pe=0;ce<c-1;ce++)for(k[ce]=pe,re=0;re<1<<W[ce];re++)w[pe++]=ce;for(w[pe-1]=ce,ce=Ee=0;ce<16;ce++)for(V[ce]=Ee,re=0;re<1<<H[ce];re++)D[Ee++]=ce;for(Ee>>=7;ce<y;ce++)for(V[ce]=Ee<<7,re=0;re<1<<H[ce]-7;re++)D[256+Ee++]=ce;for(de=0;de<=E;de++)Ie[de]=0;for(re=0;re<=143;)te[2*re+1]=8,re++,Ie[8]++;for(;re<=255;)te[2*re+1]=9,re++,Ie[9]++;for(;re<=279;)te[2*re+1]=7,re++,Ie[7]++;for(;re<=287;)te[2*re+1]=8,re++,Ie[8]++;for(me(te,h+1,Ie),re=0;re<y;re++)v[2*re+1]=5,v[2*re]=ge(re,5);A=new Q(te,W,f+1,h,E),b=new Q(v,H,0,y,E),P=new Q(new Array(0),Y,0,g,R)}(),ee=!0),J.l_desc=new U(J.dyn_ltree,A),J.d_desc=new U(J.dyn_dtree,b),J.bl_desc=new U(J.bl_tree,P),J.bi_buf=0,J.bi_valid=0,C(J)},r._tr_stored_block=G,r._tr_flush_block=function(J,re,de,pe){var ce,Ee,Ie=0;0<J.level?(J.strm.data_type===2&&(J.strm.data_type=function(we){var Re,Fe=4093624447;for(Re=0;Re<=31;Re++,Fe>>>=1)if(1&Fe&&we.dyn_ltree[2*Re]!==0)return i;if(we.dyn_ltree[18]!==0||we.dyn_ltree[20]!==0||we.dyn_ltree[26]!==0)return o;for(Re=32;Re<f;Re++)if(we.dyn_ltree[2*Re]!==0)return o;return i}(J)),z(J,J.l_desc),z(J,J.d_desc),Ie=function(we){var Re;for(x(we,we.dyn_ltree,we.l_desc.max_code),x(we,we.dyn_dtree,we.d_desc.max_code),z(we,we.bl_desc),Re=g-1;3<=Re&&we.bl_tree[2*T[Re]+1]===0;Re--);return we.opt_len+=3*(Re+1)+5+5+4,Re}(J),ce=J.opt_len+3+7>>>3,(Ee=J.static_len+3+7>>>3)<=ce&&(ce=Ee)):ce=Ee=de+5,de+4<=ce&&re!==-1?G(J,re,de,pe):J.strategy===4||Ee===ce?(se(J,2+(pe?1:0),3),B(J,te,v)):(se(J,4+(pe?1:0),3),function(we,Re,Fe,Ce){var Ht;for(se(we,Re-257,5),se(we,Fe-1,5),se(we,Ce-4,4),Ht=0;Ht<Ce;Ht++)se(we,we.bl_tree[2*T[Ht]+1],3);K(we,we.dyn_ltree,Re-1),K(we,we.dyn_dtree,Fe-1)}(J,J.l_desc.max_code+1,J.d_desc.max_code+1,Ie+1),B(J,J.dyn_ltree,J.dyn_dtree)),C(J),pe&&j(J)},r._tr_tally=function(J,re,de){return J.pending_buf[J.d_buf+2*J.last_lit]=re>>>8&255,J.pending_buf[J.d_buf+2*J.last_lit+1]=255&re,J.pending_buf[J.l_buf+J.last_lit]=255&de,J.last_lit++,re===0?J.dyn_ltree[2*de]++:(J.matches++,re--,J.dyn_ltree[2*(w[de]+f+1)]++,J.dyn_dtree[2*Z(re)]++),J.last_lit===J.lit_bufsize-1},r._tr_align=function(J){se(J,2,3),ue(J,L,te),function(re){re.bi_valid===16?(fe(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(J)}},{"../utils/common":41}],53:[function(t,e,r){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){e.exports=typeof setImmediate=="function"?setImmediate:function(){var n=[].slice.apply(arguments);n.splice(1,0,0),setTimeout.apply(null,n)}},{}]},{},[10])(10),g0={exports:{}};tm=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){(function(n,i,o,a){Object.defineProperty(e,"__esModule",{value:!0});var s,c=r(2),f=r(9);(function(d){d[d.EPERM=1]="EPERM",d[d.ENOENT=2]="ENOENT",d[d.EIO=5]="EIO",d[d.EBADF=9]="EBADF",d[d.EACCES=13]="EACCES",d[d.EBUSY=16]="EBUSY",d[d.EEXIST=17]="EEXIST",d[d.ENOTDIR=20]="ENOTDIR",d[d.EISDIR=21]="EISDIR",d[d.EINVAL=22]="EINVAL",d[d.EFBIG=27]="EFBIG",d[d.ENOSPC=28]="ENOSPC",d[d.EROFS=30]="EROFS",d[d.ENOTEMPTY=39]="ENOTEMPTY",d[d.ENOTSUP=95]="ENOTSUP"})(s||(s={}));var h={};h[s.EPERM]="Operation not permitted.",h[s.ENOENT]="No such file or directory.",h[s.EIO]="Input/output error.",h[s.EBADF]="Bad file descriptor.",h[s.EACCES]="Permission denied.",h[s.EBUSY]="Resource busy or locked.",h[s.EEXIST]="File exists.",h[s.ENOTDIR]="File is not a directory.",h[s.EISDIR]="File is a directory.",h[s.EINVAL]="Invalid argument.",h[s.EFBIG]="File is too big.",h[s.ENOSPC]="No space left on disk.",h[s.EROFS]="Cannot modify a read-only file system.",h[s.ENOTEMPTY]="Directory is not empty.",h[s.ENOTSUP]="Operation is not supported.";var y,g=function(d){function l(u,p,m){p===void 0&&(p=h[u]),d.call(this,p),this.syscall="",this.errno=u,this.code=s[u],this.path=m,this.stack=new d().stack,this.message="Error: "+this.code+": "+p+(this.path?", '"+this.path+"'":"")}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.fromJSON=function(u){var p=new l(0);return p.errno=u.errno,p.code=u.code,p.path=u.path,p.stack=u.stack,p.message=u.message,p},l.fromBuffer=function(u,p){return p===void 0&&(p=0),l.fromJSON(JSON.parse(u.toString("utf8",p+4,p+4+u.readUInt32LE(p))))},l.FileError=function(u,p){return new l(u,h[u],p)},l.ENOENT=function(u){return this.FileError(s.ENOENT,u)},l.EEXIST=function(u){return this.FileError(s.EEXIST,u)},l.EISDIR=function(u){return this.FileError(s.EISDIR,u)},l.ENOTDIR=function(u){return this.FileError(s.ENOTDIR,u)},l.EPERM=function(u){return this.FileError(s.EPERM,u)},l.ENOTEMPTY=function(u){return this.FileError(s.ENOTEMPTY,u)},l.prototype.toString=function(){return this.message},l.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},l.prototype.writeToBuffer=function(u,p){u===void 0&&(u=n.alloc(this.bufferSize())),p===void 0&&(p=0);var m=u.write(JSON.stringify(this.toJSON()),p+4);return u.writeUInt32LE(m,p),u},l.prototype.bufferSize=function(){return 4+n.byteLength(JSON.stringify(this.toJSON()))},l}(Error),_=Object.freeze({get ErrorCode(){return s},ErrorStrings:h,ApiError:g});(function(d){d[d.NOP=0]="NOP",d[d.THROW_EXCEPTION=1]="THROW_EXCEPTION",d[d.TRUNCATE_FILE=2]="TRUNCATE_FILE",d[d.CREATE_FILE=3]="CREATE_FILE"})(y||(y={}));var E,O=function d(l){if(this.flagStr=l,d.validFlagStrs.indexOf(l)<0)throw new g(s.EINVAL,"Invalid flag: "+l)};O.getFileFlag=function(d){return O.flagCache.hasOwnProperty(d)?O.flagCache[d]:O.flagCache[d]=new O(d)},O.prototype.getFlagString=function(){return this.flagStr},O.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},O.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},O.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},O.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},O.prototype.pathExistsAction=function(){return this.isExclusive()?y.THROW_EXCEPTION:this.isTruncating()?y.TRUNCATE_FILE:y.NOP},O.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?y.CREATE_FILE:y.THROW_EXCEPTION},O.flagCache={},O.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(d){d[d.FILE=32768]="FILE",d[d.DIRECTORY=16384]="DIRECTORY",d[d.SYMLINK=40960]="SYMLINK"}(E||(E={}));var R=function(d,l,u,p,m,I){if(p===void 0&&(p=new Date),m===void 0&&(m=new Date),I===void 0&&(I=new Date),this.size=l,this.atime=p,this.mtime=m,this.ctime=I,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,u)this.mode=u;else switch(d){case E.FILE:this.mode=420;break;case E.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(l/512),this.mode<4096&&(this.mode|=d)};R.fromBuffer=function(d){var l=d.readUInt32LE(0),u=d.readUInt32LE(4),p=d.readDoubleLE(8),m=d.readDoubleLE(16),I=d.readDoubleLE(24);return new R(61440&u,l,4095&u,new Date(p),new Date(m),new Date(I))},R.prototype.toBuffer=function(){var d=n.alloc(32);return d.writeUInt32LE(this.size,0),d.writeUInt32LE(this.mode,4),d.writeDoubleLE(this.atime.getTime(),8),d.writeDoubleLE(this.mtime.getTime(),16),d.writeDoubleLE(this.ctime.getTime(),24),d},R.prototype.clone=function(){return new R(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},R.prototype.isFile=function(){return(61440&this.mode)===E.FILE},R.prototype.isDirectory=function(){return(61440&this.mode)===E.DIRECTORY},R.prototype.isSymbolicLink=function(){return(61440&this.mode)===E.SYMLINK},R.prototype.chmod=function(d){this.mode=61440&this.mode|d},R.prototype.isSocket=function(){return!1},R.prototype.isBlockDevice=function(){return!1},R.prototype.isCharacterDevice=function(){return!1},R.prototype.isFIFO=function(){return!1};var L=function(d,l){return d};function q(d){if(d)return d;throw new g(s.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function X(d,l){switch(typeof d){case"number":return d;case"string":var u=parseInt(d,8);return isNaN(u)?l:u;default:return l}}function ne(d){if(d instanceof Date)return d;if(typeof d=="number")return new Date(1e3*d);throw new g(s.EINVAL,"Invalid time.")}function W(d){if(d.indexOf("\0")>=0)throw new g(s.EINVAL,"Path must be a string without null bytes.");if(d==="")throw new g(s.EINVAL,"Path must not be empty.");return f.resolve(d)}function H(d,l,u,p){switch(typeof d){case"object":return{encoding:d.encoding!==void 0?d.encoding:l,flag:d.flag!==void 0?d.flag:u,mode:X(d.mode,p)};case"string":return{encoding:d,flag:u,mode:p};default:return{encoding:l,flag:u,mode:p}}}function Y(){}var T=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};T.prototype.initialize=function(d){if(!d.constructor.isAvailable())throw new g(s.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=d},T.prototype._toUnixTimestamp=function(d){if(typeof d=="number")return d;if(d instanceof Date)return d.getTime()/1e3;throw new Error("Cannot parse time: "+d)},T.prototype.getRootFS=function(){return this.root?this.root:null},T.prototype.rename=function(d,l,u){u===void 0&&(u=Y);var p=L(u,1);try{q(this.root).rename(W(d),W(l),p)}catch(m){p(m)}},T.prototype.renameSync=function(d,l){q(this.root).renameSync(W(d),W(l))},T.prototype.exists=function(d,l){l===void 0&&(l=Y);var u=L(l,1);try{return q(this.root).exists(W(d),u)}catch{return u(!1)}},T.prototype.existsSync=function(d){try{return q(this.root).existsSync(W(d))}catch{return!1}},T.prototype.stat=function(d,l){l===void 0&&(l=Y);var u=L(l,2);try{return q(this.root).stat(W(d),!1,u)}catch(p){return u(p)}},T.prototype.statSync=function(d){return q(this.root).statSync(W(d),!1)},T.prototype.lstat=function(d,l){l===void 0&&(l=Y);var u=L(l,2);try{return q(this.root).stat(W(d),!0,u)}catch(p){return u(p)}},T.prototype.lstatSync=function(d){return q(this.root).statSync(W(d),!0)},T.prototype.truncate=function(d,l,u){l===void 0&&(l=0),u===void 0&&(u=Y);var p=0;typeof l=="function"?u=l:typeof l=="number"&&(p=l);var m=L(u,1);try{if(p<0)throw new g(s.EINVAL);return q(this.root).truncate(W(d),p,m)}catch(I){return m(I)}},T.prototype.truncateSync=function(d,l){if(l===void 0&&(l=0),l<0)throw new g(s.EINVAL);return q(this.root).truncateSync(W(d),l)},T.prototype.unlink=function(d,l){l===void 0&&(l=Y);var u=L(l,1);try{return q(this.root).unlink(W(d),u)}catch(p){return u(p)}},T.prototype.unlinkSync=function(d){return q(this.root).unlinkSync(W(d))},T.prototype.open=function(d,l,u,p){var m=this;p===void 0&&(p=Y);var I=X(u,420),N=L(p=typeof u=="function"?u:p,2);try{q(this.root).open(W(d),O.getFileFlag(l),I,function(F,$){$?N(F,m.getFdForFile($)):N(F)})}catch(F){N(F)}},T.prototype.openSync=function(d,l,u){return u===void 0&&(u=420),this.getFdForFile(q(this.root).openSync(W(d),O.getFileFlag(l),X(u,420)))},T.prototype.readFile=function(d,l,u){l===void 0&&(l={}),u===void 0&&(u=Y);var p=H(l,null,"r",null),m=L(u=typeof l=="function"?l:u,2);try{var I=O.getFileFlag(p.flag);return I.isReadable()?q(this.root).readFile(W(d),p.encoding,I,m):m(new g(s.EINVAL,"Flag passed to readFile must allow for reading."))}catch(N){return m(N)}},T.prototype.readFileSync=function(d,l){l===void 0&&(l={});var u=H(l,null,"r",null),p=O.getFileFlag(u.flag);if(!p.isReadable())throw new g(s.EINVAL,"Flag passed to readFile must allow for reading.");return q(this.root).readFileSync(W(d),u.encoding,p)},T.prototype.writeFile=function(d,l,u,p){u===void 0&&(u={}),p===void 0&&(p=Y);var m=H(u,"utf8","w",420),I=L(p=typeof u=="function"?u:p,1);try{var N=O.getFileFlag(m.flag);return N.isWriteable()?q(this.root).writeFile(W(d),l,m.encoding,N,m.mode,I):I(new g(s.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(F){return I(F)}},T.prototype.writeFileSync=function(d,l,u){var p=H(u,"utf8","w",420),m=O.getFileFlag(p.flag);if(!m.isWriteable())throw new g(s.EINVAL,"Flag passed to writeFile must allow for writing.");return q(this.root).writeFileSync(W(d),l,p.encoding,m,p.mode)},T.prototype.appendFile=function(d,l,u,p){p===void 0&&(p=Y);var m=H(u,"utf8","a",420),I=L(p=typeof u=="function"?u:p,1);try{var N=O.getFileFlag(m.flag);if(!N.isAppendable())return I(new g(s.EINVAL,"Flag passed to appendFile must allow for appending."));q(this.root).appendFile(W(d),l,m.encoding,N,m.mode,I)}catch(F){I(F)}},T.prototype.appendFileSync=function(d,l,u){var p=H(u,"utf8","a",420),m=O.getFileFlag(p.flag);if(!m.isAppendable())throw new g(s.EINVAL,"Flag passed to appendFile must allow for appending.");return q(this.root).appendFileSync(W(d),l,p.encoding,m,p.mode)},T.prototype.fstat=function(d,l){l===void 0&&(l=Y);var u=L(l,2);try{this.fd2file(d).stat(u)}catch(p){u(p)}},T.prototype.fstatSync=function(d){return this.fd2file(d).statSync()},T.prototype.close=function(d,l){var u=this;l===void 0&&(l=Y);var p=L(l,1);try{this.fd2file(d).close(function(m){m||u.closeFd(d),p(m)})}catch(m){p(m)}},T.prototype.closeSync=function(d){this.fd2file(d).closeSync(),this.closeFd(d)},T.prototype.ftruncate=function(d,l,u){u===void 0&&(u=Y);var p=typeof l=="number"?l:0,m=L(u=typeof l=="function"?l:u,1);try{var I=this.fd2file(d);if(p<0)throw new g(s.EINVAL);I.truncate(p,m)}catch(N){m(N)}},T.prototype.ftruncateSync=function(d,l){l===void 0&&(l=0);var u=this.fd2file(d);if(l<0)throw new g(s.EINVAL);u.truncateSync(l)},T.prototype.fsync=function(d,l){l===void 0&&(l=Y);var u=L(l,1);try{this.fd2file(d).sync(u)}catch(p){u(p)}},T.prototype.fsyncSync=function(d){this.fd2file(d).syncSync()},T.prototype.fdatasync=function(d,l){l===void 0&&(l=Y);var u=L(l,1);try{this.fd2file(d).datasync(u)}catch(p){u(p)}},T.prototype.fdatasyncSync=function(d){this.fd2file(d).datasyncSync()},T.prototype.write=function(d,l,u,p,m,I){I===void 0&&(I=Y);var N,F,$,ie=null;if(typeof l=="string"){var he="utf8";switch(typeof u){case"function":I=u;break;case"number":ie=u,he=typeof p=="string"?p:"utf8",I=typeof m=="function"?m:I;break;default:return(I=typeof p=="function"?p:typeof m=="function"?m:I)(new g(s.EINVAL,"Invalid arguments."))}F=0,$=(N=n.from(l,he)).length}else N=l,F=u,$=p,ie=typeof m=="number"?m:null,I=typeof m=="function"?m:I;var _e=L(I,3);try{var Ae=this.fd2file(d);ie==null&&(ie=Ae.getPos()),Ae.write(N,F,$,ie,_e)}catch(De){_e(De)}},T.prototype.writeSync=function(d,l,u,p,m){var I,N,F,$=0;if(typeof l=="string"){F=typeof u=="number"?u:null;var ie=typeof p=="string"?p:"utf8";$=0,N=(I=n.from(l,ie)).length}else I=l,$=u,N=p,F=typeof m=="number"?m:null;var he=this.fd2file(d);return F==null&&(F=he.getPos()),he.writeSync(I,$,N,F)},T.prototype.read=function(d,l,u,p,m,I){var N,F,$,ie,he;if(I===void 0&&(I=Y),typeof l=="number"){$=l,N=u;var _e=p;I=typeof m=="function"?m:I,F=0,ie=n.alloc($),he=L(function(De,Te,ze){if(De)return I(De);I(De,ze.toString(_e),Te)},3)}else ie=l,F=u,$=p,N=m,he=L(I,3);try{var Ae=this.fd2file(d);N==null&&(N=Ae.getPos()),Ae.read(ie,F,$,N,he)}catch(De){he(De)}},T.prototype.readSync=function(d,l,u,p,m){var I,N,F,$,ie=!1,he="utf8";typeof l=="number"?(F=l,$=u,he=p,N=0,I=n.alloc(F),ie=!0):(I=l,N=u,F=p,$=m);var _e=this.fd2file(d);$==null&&($=_e.getPos());var Ae=_e.readSync(I,N,F,$);return ie?[I.toString(he),Ae]:Ae},T.prototype.fchown=function(d,l,u,p){p===void 0&&(p=Y);var m=L(p,1);try{this.fd2file(d).chown(l,u,m)}catch(I){m(I)}},T.prototype.fchownSync=function(d,l,u){this.fd2file(d).chownSync(l,u)},T.prototype.fchmod=function(d,l,u){var p=L(u,1);try{var m=typeof l=="string"?parseInt(l,8):l;this.fd2file(d).chmod(m,p)}catch(I){p(I)}},T.prototype.fchmodSync=function(d,l){var u=typeof l=="string"?parseInt(l,8):l;this.fd2file(d).chmodSync(u)},T.prototype.futimes=function(d,l,u,p){p===void 0&&(p=Y);var m=L(p,1);try{var I=this.fd2file(d);typeof l=="number"&&(l=new Date(1e3*l)),typeof u=="number"&&(u=new Date(1e3*u)),I.utimes(l,u,m)}catch(N){m(N)}},T.prototype.futimesSync=function(d,l,u){this.fd2file(d).utimesSync(ne(l),ne(u))},T.prototype.rmdir=function(d,l){l===void 0&&(l=Y);var u=L(l,1);try{d=W(d),q(this.root).rmdir(d,u)}catch(p){u(p)}},T.prototype.rmdirSync=function(d){return d=W(d),q(this.root).rmdirSync(d)},T.prototype.mkdir=function(d,l,u){u===void 0&&(u=Y),typeof l=="function"&&(u=l,l=511);var p=L(u,1);try{d=W(d),q(this.root).mkdir(d,l,p)}catch(m){p(m)}},T.prototype.mkdirSync=function(d,l){q(this.root).mkdirSync(W(d),X(l,511))},T.prototype.readdir=function(d,l){l===void 0&&(l=Y);var u=L(l,2);try{d=W(d),q(this.root).readdir(d,u)}catch(p){u(p)}},T.prototype.readdirSync=function(d){return d=W(d),q(this.root).readdirSync(d)},T.prototype.link=function(d,l,u){u===void 0&&(u=Y);var p=L(u,1);try{d=W(d),l=W(l),q(this.root).link(d,l,p)}catch(m){p(m)}},T.prototype.linkSync=function(d,l){return d=W(d),l=W(l),q(this.root).linkSync(d,l)},T.prototype.symlink=function(d,l,u,p){p===void 0&&(p=Y);var m=typeof u=="string"?u:"file",I=L(p=typeof u=="function"?u:p,1);try{if(m!=="file"&&m!=="dir")return I(new g(s.EINVAL,"Invalid type: "+m));d=W(d),l=W(l),q(this.root).symlink(d,l,m,I)}catch(N){I(N)}},T.prototype.symlinkSync=function(d,l,u){if(u){if(u!=="file"&&u!=="dir")throw new g(s.EINVAL,"Invalid type: "+u)}else u="file";return d=W(d),l=W(l),q(this.root).symlinkSync(d,l,u)},T.prototype.readlink=function(d,l){l===void 0&&(l=Y);var u=L(l,2);try{d=W(d),q(this.root).readlink(d,u)}catch(p){u(p)}},T.prototype.readlinkSync=function(d){return d=W(d),q(this.root).readlinkSync(d)},T.prototype.chown=function(d,l,u,p){p===void 0&&(p=Y);var m=L(p,1);try{d=W(d),q(this.root).chown(d,!1,l,u,m)}catch(I){m(I)}},T.prototype.chownSync=function(d,l,u){d=W(d),q(this.root).chownSync(d,!1,l,u)},T.prototype.lchown=function(d,l,u,p){p===void 0&&(p=Y);var m=L(p,1);try{d=W(d),q(this.root).chown(d,!0,l,u,m)}catch(I){m(I)}},T.prototype.lchownSync=function(d,l,u){d=W(d),q(this.root).chownSync(d,!0,l,u)},T.prototype.chmod=function(d,l,u){u===void 0&&(u=Y);var p=L(u,1);try{var m=X(l,-1);if(m<0)throw new g(s.EINVAL,"Invalid mode.");q(this.root).chmod(W(d),!1,m,p)}catch(I){p(I)}},T.prototype.chmodSync=function(d,l){var u=X(l,-1);if(u<0)throw new g(s.EINVAL,"Invalid mode.");d=W(d),q(this.root).chmodSync(d,!1,u)},T.prototype.lchmod=function(d,l,u){u===void 0&&(u=Y);var p=L(u,1);try{var m=X(l,-1);if(m<0)throw new g(s.EINVAL,"Invalid mode.");q(this.root).chmod(W(d),!0,m,p)}catch(I){p(I)}},T.prototype.lchmodSync=function(d,l){var u=X(l,-1);if(u<1)throw new g(s.EINVAL,"Invalid mode.");q(this.root).chmodSync(W(d),!0,u)},T.prototype.utimes=function(d,l,u,p){p===void 0&&(p=Y);var m=L(p,1);try{q(this.root).utimes(W(d),ne(l),ne(u),m)}catch(I){m(I)}},T.prototype.utimesSync=function(d,l,u){q(this.root).utimesSync(W(d),ne(l),ne(u))},T.prototype.realpath=function(d,l,u){var p=typeof l=="object"?l:{},m=L(typeof l=="function"?l:Y,2);try{d=W(d),q(this.root).realpath(d,p,m)}catch(I){m(I)}},T.prototype.realpathSync=function(d,l){return l===void 0&&(l={}),d=W(d),q(this.root).realpathSync(d,l)},T.prototype.watchFile=function(d,l,u){throw new g(s.ENOTSUP)},T.prototype.unwatchFile=function(d,l){throw new g(s.ENOTSUP)},T.prototype.watch=function(d,l,u){throw new g(s.ENOTSUP)},T.prototype.access=function(d,l,u){throw new g(s.ENOTSUP)},T.prototype.accessSync=function(d,l){throw new g(s.ENOTSUP)},T.prototype.createReadStream=function(d,l){throw new g(s.ENOTSUP)},T.prototype.createWriteStream=function(d,l){throw new g(s.ENOTSUP)},T.prototype.wrapCallbacks=function(d){L=d},T.prototype.getFdForFile=function(d){var l=this.nextFd++;return this.fdMap[l]=d,l},T.prototype.fd2file=function(d){var l=this.fdMap[d];if(l)return l;throw new g(s.EBADF,"Invalid file descriptor.")},T.prototype.closeFd=function(d){delete this.fdMap[d]},T.Stats=R;var te=new T,v={},D=T.prototype;function w(d,l,u,p,m){return d<l||u<l?d>u?u+1:d+1:p===m?l:l+1}function k(d,l){if(d===l)return 0;if(d.length>l.length){var u=d;d=l,l=u}for(var p=d.length,m=l.length;p>0&&d.charCodeAt(p-1)===l.charCodeAt(m-1);)p--,m--;for(var I=0;I<p&&d.charCodeAt(I)===l.charCodeAt(I);)I++;if(m-=I,(p-=I)==0||m===1)return m;for(var N,F,$,ie,he,_e=new Array(p<<1),Ae=0;Ae<p;)_e[p+Ae]=d.charCodeAt(I+Ae),_e[Ae]=++Ae;for(N=0;N+3<m;)for(var De=l.charCodeAt(I+(F=N)),Te=l.charCodeAt(I+($=N+1)),ze=l.charCodeAt(I+(ie=N+2)),ht=l.charCodeAt(I+(he=N+3)),or=N+=4,ai=0;ai<p;){var mn=_e[p+ai],ps=_e[ai];F=w(ps,F,$,De,mn),$=w(F,$,ie,Te,mn),ie=w($,ie,he,ze,mn),or=w(ie,he,or,ht,mn),_e[ai++]=or,he=ie,ie=$,$=F,F=ps}for(var rn=0;N<m;){var Fh=l.charCodeAt(I+(F=N));rn=++N;for(var _a=0;_a<p;_a++){var Sa=_e[_a];_e[_a]=rn=Sa<F||rn<F?Sa>rn?rn+1:Sa+1:Fh===_e[p+_a]?F:F+1,F=Sa}}return rn}function A(d,l,u){d&&console.warn("["+l+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+l+".Create("+JSON.stringify(u)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(D).forEach(function(d){typeof te[d]=="function"?v[d]=function(){return te[d].apply(te,arguments)}:v[d]=te[d]}),v.changeFSModule=function(d){te=d},v.getFSModule=function(){return te},v.FS=T;var b=typeof navigator<"u"&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&navigator.userAgent.indexOf("Trident")===-1),P=typeof window>"u";function V(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function Q(d,l,u){u.existsSync(d)||(Q(f.dirname(d),l,u),u.mkdirSync(d,l))}function U(d){var l=Z(d),u=l.byteOffset,p=l.byteLength;return u===0&&p===l.buffer.byteLength?l.buffer:l.buffer.slice(u,u+p)}function Z(d){return d instanceof Uint8Array?d:new Uint8Array(d)}function fe(d){return d instanceof n?d:d instanceof Uint8Array?se(d):n.from(d)}function se(d){return d instanceof n?d:d.byteOffset===0&&d.byteLength===d.buffer.byteLength?ue(d.buffer):n.from(d.buffer,d.byteOffset,d.byteLength)}function ue(d){return n.from(d)}function ge(d,l,u){if(l===void 0&&(l=0),u===void 0&&(u=d.length),l<0||u<0||u>d.length||l>u)throw new TypeError("Invalid slice bounds on buffer of length "+d.length+": ["+l+", "+u+"]");if(d.length===0)return C();var p=Z(d),m=d[0],I=(m+1)%255;return d[0]=I,p[0]===I?(p[0]=m,se(p.slice(l,u))):(d[0]=m,se(p.subarray(l,u)))}var me=null;function C(){return me||(me=n.alloc(0))}function j(d,l){n.isBuffer(d)?l():l(new g(s.EINVAL,"option must be a Buffer."))}function S(d,l,u){var p=d.Options,m=d.Name,I=0,N=!1,F=!1;function $(Ae){N||(Ae&&(N=!0,u(Ae)),--I==0&&F&&u())}var ie=function(Ae){if(p.hasOwnProperty(Ae)){var De=p[Ae],Te=l[Ae];if(Te==null){if(!De.optional){var ze=Object.keys(l).filter(function(ht){return!(ht in p)}).map(function(ht){return{str:ht,distance:k(Ae,ht)}}).filter(function(ht){return ht.distance<5}).sort(function(ht,or){return ht.distance-or.distance});return N?{}:(N=!0,{v:u(new g(s.EINVAL,"["+m+"] Required option '"+Ae+"' not provided."+(ze.length>0?" You provided unrecognized option '"+ze[0].str+"'; perhaps you meant to type '"+Ae+"'.":"")+`
Option description: `+De.description))})}}else{if(!(Array.isArray(De.type)?De.type.indexOf(typeof Te)!==-1:typeof Te===De.type))return N?{}:(N=!0,{v:u(new g(s.EINVAL,"["+m+"] Value provided for option "+Ae+" is not the proper type. Expected "+(Array.isArray(De.type)?"one of {"+De.type.join(", ")+"}":De.type)+", but received "+typeof Te+`
Option description: `+De.description))});De.validator&&(I++,De.validator(Te,$))}}};for(var he in p){var _e=ie(he);if(_e)return _e.v}F=!0,I!==0||N||u()}var M=Object.freeze({deprecationMessage:A,isIE:b,isWebWorker:P,fail:V,mkdirpSync:Q,buffer2ArrayBuffer:U,buffer2Uint8array:Z,arrayish2Buffer:fe,uint8Array2Buffer:se,arrayBuffer2Buffer:ue,copyingSlice:ge,emptyBuffer:C,bufferValidator:j,checkOptions:S}),B=function(d){this.fs=d,this.nodefs=d.getNodeFS(),this.FS=d.getFS(),this.PATH=d.getPATH(),this.ERRNO_CODES=d.getERRNO_CODES()};B.prototype.open=function(d){var l=this.fs.realPath(d.node),u=this.FS;try{u.isFile(d.node.mode)&&(d.nfd=this.nodefs.openSync(l,this.fs.flagsToPermissionString(d.flags)))}catch(p){throw p.code?new u.ErrnoError(this.ERRNO_CODES[p.code]):p}},B.prototype.close=function(d){var l=this.FS;try{l.isFile(d.node.mode)&&d.nfd&&this.nodefs.closeSync(d.nfd)}catch(u){throw u.code?new l.ErrnoError(this.ERRNO_CODES[u.code]):u}},B.prototype.read=function(d,l,u,p,m){try{return this.nodefs.readSync(d.nfd,se(l),u,p,m)}catch(I){throw new this.FS.ErrnoError(this.ERRNO_CODES[I.code])}},B.prototype.write=function(d,l,u,p,m){try{return this.nodefs.writeSync(d.nfd,se(l),u,p,m)}catch(I){throw new this.FS.ErrnoError(this.ERRNO_CODES[I.code])}},B.prototype.llseek=function(d,l,u){var p=l;if(u===1)p+=d.position;else if(u===2&&this.FS.isFile(d.node.mode))try{p+=this.nodefs.fstatSync(d.nfd).size}catch(m){throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code])}if(p<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return d.position=p,p};var z=function(d){this.fs=d,this.nodefs=d.getNodeFS(),this.FS=d.getFS(),this.PATH=d.getPATH(),this.ERRNO_CODES=d.getERRNO_CODES()};z.prototype.getattr=function(d){var l,u=this.fs.realPath(d);try{l=this.nodefs.lstatSync(u)}catch(p){throw p.code?new this.FS.ErrnoError(this.ERRNO_CODES[p.code]):p}return{dev:l.dev,ino:l.ino,mode:l.mode,nlink:l.nlink,uid:l.uid,gid:l.gid,rdev:l.rdev,size:l.size,atime:l.atime,mtime:l.mtime,ctime:l.ctime,blksize:l.blksize,blocks:l.blocks}},z.prototype.setattr=function(d,l){var u=this.fs.realPath(d);try{if(l.mode!==void 0&&(this.nodefs.chmodSync(u,l.mode),d.mode=l.mode),l.timestamp!==void 0){var p=new Date(l.timestamp);this.nodefs.utimesSync(u,p,p)}}catch(m){if(!m.code)throw m;if(m.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code])}if(l.size!==void 0)try{this.nodefs.truncateSync(u,l.size)}catch(m){throw m.code?new this.FS.ErrnoError(this.ERRNO_CODES[m.code]):m}},z.prototype.lookup=function(d,l){var u=this.PATH.join2(this.fs.realPath(d),l),p=this.fs.getMode(u);return this.fs.createNode(d,l,p)},z.prototype.mknod=function(d,l,u,p){var m=this.fs.createNode(d,l,u,p),I=this.fs.realPath(m);try{this.FS.isDir(m.mode)?this.nodefs.mkdirSync(I,m.mode):this.nodefs.writeFileSync(I,"",{mode:m.mode})}catch(N){throw N.code?new this.FS.ErrnoError(this.ERRNO_CODES[N.code]):N}return m},z.prototype.rename=function(d,l,u){var p=this.fs.realPath(d),m=this.PATH.join2(this.fs.realPath(l),u);try{this.nodefs.renameSync(p,m),d.name=u,d.parent=l}catch(I){throw I.code?new this.FS.ErrnoError(this.ERRNO_CODES[I.code]):I}},z.prototype.unlink=function(d,l){var u=this.PATH.join2(this.fs.realPath(d),l);try{this.nodefs.unlinkSync(u)}catch(p){throw p.code?new this.FS.ErrnoError(this.ERRNO_CODES[p.code]):p}},z.prototype.rmdir=function(d,l){var u=this.PATH.join2(this.fs.realPath(d),l);try{this.nodefs.rmdirSync(u)}catch(p){throw p.code?new this.FS.ErrnoError(this.ERRNO_CODES[p.code]):p}},z.prototype.readdir=function(d){var l=this.fs.realPath(d);try{var u=this.nodefs.readdirSync(l);return u.push(".",".."),u}catch(p){throw p.code?new this.FS.ErrnoError(this.ERRNO_CODES[p.code]):p}},z.prototype.symlink=function(d,l,u){var p=this.PATH.join2(this.fs.realPath(d),l);try{this.nodefs.symlinkSync(u,p)}catch(m){throw m.code?new this.FS.ErrnoError(this.ERRNO_CODES[m.code]):m}},z.prototype.readlink=function(d){var l=this.fs.realPath(d);try{return this.nodefs.readlinkSync(l)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}};var x=function(d,l,u,p){d===void 0&&(d=self.FS),l===void 0&&(l=self.PATH),u===void 0&&(u=self.ERRNO_CODES),p===void 0&&(p=v),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=p,this.FS=d,this.PATH=l,this.ERRNO_CODES=u,this.node_ops=new z(this),this.stream_ops=new B(this)};x.prototype.mount=function(d){return this.createNode(null,"/",this.getMode(d.opts.root),0)},x.prototype.createNode=function(d,l,u,p){var m=this.FS;if(!m.isDir(u)&&!m.isFile(u)&&!m.isLink(u))throw new m.ErrnoError(this.ERRNO_CODES.EINVAL);var I=m.createNode(d,l,u);return I.node_ops=this.node_ops,I.stream_ops=this.stream_ops,I},x.prototype.getMode=function(d){var l;try{l=this.nodefs.lstatSync(d)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return l.mode},x.prototype.realPath=function(d){for(var l=[];d.parent!==d;)l.push(d.name),d=d.parent;return l.push(d.mount.opts.root),l.reverse(),this.PATH.join.apply(null,l)},x.prototype.flagsToPermissionString=function(d){var l=typeof d=="string"?parseInt(d,10):d;return(l&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[l]:d},x.prototype.getNodeFS=function(){return this.nodefs},x.prototype.getFS=function(){return this.FS},x.prototype.getPATH=function(){return this.PATH},x.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(d,l){l(0,0)},K.prototype.openFile=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.createFile=function(d,l,u,p){throw new g(s.ENOTSUP)},K.prototype.open=function(d,l,u,p){var m=this;this.stat(d,!1,function(I,N){if(I)switch(l.pathNotExistsAction()){case y.CREATE_FILE:return m.stat(f.dirname(d),!1,function(F,$){F?p(F):$&&!$.isDirectory()?p(g.ENOTDIR(f.dirname(d))):m.createFile(d,l,u,p)});case y.THROW_EXCEPTION:return p(g.ENOENT(d));default:return p(new g(s.EINVAL,"Invalid FileFlag object."))}else{if(N&&N.isDirectory())return p(g.EISDIR(d));switch(l.pathExistsAction()){case y.THROW_EXCEPTION:return p(g.EEXIST(d));case y.TRUNCATE_FILE:return m.openFile(d,l,function(F,$){F?p(F):$?$.truncate(0,function(){$.sync(function(){p(null,$)})}):V()});case y.NOP:return m.openFile(d,l,p);default:return p(new g(s.EINVAL,"Invalid FileFlag object."))}}})},K.prototype.rename=function(d,l,u){u(new g(s.ENOTSUP))},K.prototype.renameSync=function(d,l){throw new g(s.ENOTSUP)},K.prototype.stat=function(d,l,u){u(new g(s.ENOTSUP))},K.prototype.statSync=function(d,l){throw new g(s.ENOTSUP)},K.prototype.openFileSync=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.createFileSync=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.openSync=function(d,l,u){var p;try{p=this.statSync(d,!1)}catch{switch(l.pathNotExistsAction()){case y.CREATE_FILE:if(!this.statSync(f.dirname(d),!1).isDirectory())throw g.ENOTDIR(f.dirname(d));return this.createFileSync(d,l,u);case y.THROW_EXCEPTION:throw g.ENOENT(d);default:throw new g(s.EINVAL,"Invalid FileFlag object.")}}if(p.isDirectory())throw g.EISDIR(d);switch(l.pathExistsAction()){case y.THROW_EXCEPTION:throw g.EEXIST(d);case y.TRUNCATE_FILE:return this.unlinkSync(d),this.createFileSync(d,l,p.mode);case y.NOP:return this.openFileSync(d,l,u);default:throw new g(s.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(d,l){l(new g(s.ENOTSUP))},K.prototype.unlinkSync=function(d){throw new g(s.ENOTSUP)},K.prototype.rmdir=function(d,l){l(new g(s.ENOTSUP))},K.prototype.rmdirSync=function(d){throw new g(s.ENOTSUP)},K.prototype.mkdir=function(d,l,u){u(new g(s.ENOTSUP))},K.prototype.mkdirSync=function(d,l){throw new g(s.ENOTSUP)},K.prototype.readdir=function(d,l){l(new g(s.ENOTSUP))},K.prototype.readdirSync=function(d){throw new g(s.ENOTSUP)},K.prototype.exists=function(d,l){this.stat(d,null,function(u){l(!u)})},K.prototype.existsSync=function(d){try{return this.statSync(d,!0),!0}catch{return!1}},K.prototype.realpath=function(d,l,u){if(this.supportsLinks())for(var p=d.split(f.sep),m=0;m<p.length;m++){var I=p.slice(0,m+1);p[m]=f.join.apply(null,I)}else this.exists(d,function(N){N?u(null,d):u(g.ENOENT(d))})},K.prototype.realpathSync=function(d,l){if(this.supportsLinks()){for(var u=d.split(f.sep),p=0;p<u.length;p++){var m=u.slice(0,p+1);u[p]=f.join.apply(f,m)}return u.join(f.sep)}if(this.existsSync(d))return d;throw g.ENOENT(d)},K.prototype.truncate=function(d,l,u){this.open(d,O.getFileFlag("r+"),420,function(p,m){if(p)return u(p);m.truncate(l,function(I){m.close(function(N){u(I||N)})})})},K.prototype.truncateSync=function(d,l){var u=this.openSync(d,O.getFileFlag("r+"),420);try{u.truncateSync(l)}catch(p){throw p}finally{u.closeSync()}},K.prototype.readFile=function(d,l,u,p){var m=p;this.open(d,u,420,function(I,N){if(I)return p(I);p=function(F,$){N.close(function(ie){return F||(F=ie),m(F,$)})},N.stat(function(F,$){if(F)return p(F);var ie=n.alloc($.size);N.read(ie,0,$.size,0,function(he){if(he)return p(he);if(l===null)return p(he,ie);try{p(null,ie.toString(l))}catch(_e){p(_e)}})})})},K.prototype.readFileSync=function(d,l,u){var p=this.openSync(d,u,420);try{var m=p.statSync(),I=n.alloc(m.size);return p.readSync(I,0,m.size,0),p.closeSync(),l===null?I:I.toString(l)}finally{p.closeSync()}},K.prototype.writeFile=function(d,l,u,p,m,I){var N=I;this.open(d,p,420,function(F,$){if(F)return I(F);I=function(ie){$.close(function(he){N(ie||he)})};try{typeof l=="string"&&(l=n.from(l,u))}catch(ie){return I(ie)}$.write(l,0,l.length,0,I)})},K.prototype.writeFileSync=function(d,l,u,p,m){var I=this.openSync(d,p,m);try{typeof l=="string"&&(l=n.from(l,u)),I.writeSync(l,0,l.length,0)}finally{I.closeSync()}},K.prototype.appendFile=function(d,l,u,p,m,I){var N=I;this.open(d,p,m,function(F,$){if(F)return I(F);I=function(ie){$.close(function(he){N(ie||he)})},typeof l=="string"&&(l=n.from(l,u)),$.write(l,0,l.length,null,I)})},K.prototype.appendFileSync=function(d,l,u,p,m){var I=this.openSync(d,p,m);try{typeof l=="string"&&(l=n.from(l,u)),I.writeSync(l,0,l.length,null)}finally{I.closeSync()}},K.prototype.chmod=function(d,l,u,p){p(new g(s.ENOTSUP))},K.prototype.chmodSync=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.chown=function(d,l,u,p,m){m(new g(s.ENOTSUP))},K.prototype.chownSync=function(d,l,u,p){throw new g(s.ENOTSUP)},K.prototype.utimes=function(d,l,u,p){p(new g(s.ENOTSUP))},K.prototype.utimesSync=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.link=function(d,l,u){u(new g(s.ENOTSUP))},K.prototype.linkSync=function(d,l){throw new g(s.ENOTSUP)},K.prototype.symlink=function(d,l,u,p){p(new g(s.ENOTSUP))},K.prototype.symlinkSync=function(d,l,u){throw new g(s.ENOTSUP)},K.prototype.readlink=function(d,l){l(new g(s.ENOTSUP))},K.prototype.readlinkSync=function(d){throw new g(s.ENOTSUP)};var ee=function(d){function l(){d.apply(this,arguments)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.supportsSynch=function(){return!0},l.prototype.rename=function(u,p,m){try{this.renameSync(u,p),m()}catch(I){m(I)}},l.prototype.stat=function(u,p,m){try{m(null,this.statSync(u,p))}catch(I){m(I)}},l.prototype.open=function(u,p,m,I){try{I(null,this.openSync(u,p,m))}catch(N){I(N)}},l.prototype.unlink=function(u,p){try{this.unlinkSync(u),p()}catch(m){p(m)}},l.prototype.rmdir=function(u,p){try{this.rmdirSync(u),p()}catch(m){p(m)}},l.prototype.mkdir=function(u,p,m){try{this.mkdirSync(u,p),m()}catch(I){m(I)}},l.prototype.readdir=function(u,p){try{p(null,this.readdirSync(u))}catch(m){p(m)}},l.prototype.chmod=function(u,p,m,I){try{this.chmodSync(u,p,m),I()}catch(N){I(N)}},l.prototype.chown=function(u,p,m,I,N){try{this.chownSync(u,p,m,I),N()}catch(F){N(F)}},l.prototype.utimes=function(u,p,m,I){try{this.utimesSync(u,p,m),I()}catch(N){I(N)}},l.prototype.link=function(u,p,m){try{this.linkSync(u,p),m()}catch(I){m(I)}},l.prototype.symlink=function(u,p,m,I){try{this.symlinkSync(u,p,m),I()}catch(N){I(N)}},l.prototype.readlink=function(u,p){try{p(null,this.readlinkSync(u))}catch(m){p(m)}},l}(K),G=function(){};G.prototype.sync=function(d){d(new g(s.ENOTSUP))},G.prototype.syncSync=function(){throw new g(s.ENOTSUP)},G.prototype.datasync=function(d){this.sync(d)},G.prototype.datasyncSync=function(){return this.syncSync()},G.prototype.chown=function(d,l,u){u(new g(s.ENOTSUP))},G.prototype.chownSync=function(d,l){throw new g(s.ENOTSUP)},G.prototype.chmod=function(d,l){l(new g(s.ENOTSUP))},G.prototype.chmodSync=function(d){throw new g(s.ENOTSUP)},G.prototype.utimes=function(d,l,u){u(new g(s.ENOTSUP))},G.prototype.utimesSync=function(d,l){throw new g(s.ENOTSUP)};var J=function(d){function l(u,p,m,I,N){if(d.call(this),this._pos=0,this._dirty=!1,this._fs=u,this._path=p,this._flag=m,this._stat=I,this._buffer=N||C(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.getBuffer=function(){return this._buffer},l.prototype.getStats=function(){return this._stat},l.prototype.getFlag=function(){return this._flag},l.prototype.getPath=function(){return this._path},l.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},l.prototype.advancePos=function(u){return this._pos+=u},l.prototype.setPos=function(u){return this._pos=u},l.prototype.sync=function(u){try{this.syncSync(),u()}catch(p){u(p)}},l.prototype.syncSync=function(){throw new g(s.ENOTSUP)},l.prototype.close=function(u){try{this.closeSync(),u()}catch(p){u(p)}},l.prototype.closeSync=function(){throw new g(s.ENOTSUP)},l.prototype.stat=function(u){try{u(null,this._stat.clone())}catch(p){u(p)}},l.prototype.statSync=function(){return this._stat.clone()},l.prototype.truncate=function(u,p){try{this.truncateSync(u),this._flag.isSynchronous()&&!v.getRootFS().supportsSynch()&&this.sync(p),p()}catch(m){return p(m)}},l.prototype.truncateSync=function(u){if(this._dirty=!0,!this._flag.isWriteable())throw new g(s.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,u>this._buffer.length){var p=n.alloc(u-this._buffer.length,0);return this.writeSync(p,0,p.length,this._buffer.length),void(this._flag.isSynchronous()&&v.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=u;var m=n.alloc(u);this._buffer.copy(m,0,0,u),this._buffer=m,this._flag.isSynchronous()&&v.getRootFS().supportsSynch()&&this.syncSync()},l.prototype.write=function(u,p,m,I,N){try{N(null,this.writeSync(u,p,m,I),u)}catch(F){N(F)}},l.prototype.writeSync=function(u,p,m,I){if(this._dirty=!0,I==null&&(I=this.getPos()),!this._flag.isWriteable())throw new g(s.EPERM,"File not opened with a writeable mode.");var N=I+m;if(N>this._stat.size&&(this._stat.size=N,N>this._buffer.length)){var F=n.alloc(N);this._buffer.copy(F),this._buffer=F}var $=u.copy(this._buffer,I,p,p+m);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),$):(this.setPos(I+$),$)},l.prototype.read=function(u,p,m,I,N){try{N(null,this.readSync(u,p,m,I),u)}catch(F){N(F)}},l.prototype.readSync=function(u,p,m,I){if(!this._flag.isReadable())throw new g(s.EPERM,"File not opened with a readable mode.");I==null&&(I=this.getPos()),I+m>this._stat.size&&(m=this._stat.size-I);var N=this._buffer.copy(u,p,I,I+m);return this._stat.atime=new Date,this._pos=I+m,N},l.prototype.chmod=function(u,p){try{this.chmodSync(u),p()}catch(m){p(m)}},l.prototype.chmodSync=function(u){if(!this._fs.supportsProps())throw new g(s.ENOTSUP);this._dirty=!0,this._stat.chmod(u),this.syncSync()},l.prototype.isDirty=function(){return this._dirty},l.prototype.resetDirty=function(){this._dirty=!1},l}(G),re=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.sync=function(u){u()},l.prototype.syncSync=function(){},l.prototype.close=function(u){u()},l.prototype.closeSync=function(){},l}(J),de=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},l.prototype.closeSync=function(){this.syncSync()},l}(J),pe=function(d){function l(u,p,m){if(m===void 0&&(m=!0),d.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=u,this._async=p,!u.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");A(m,l.Name,{sync:"sync file system instance",async:"async file system instance"})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){try{var m=new l(u.sync,u.async,!1);m.initialize(function(I){I?p(I):p(null,m)},!1)}catch(I){p(I)}},l.isAvailable=function(){return!0},l.prototype.getName=function(){return l.Name},l.prototype._syncSync=function(u){this._sync.writeFileSync(u.getPath(),u.getBuffer(),null,O.getFileFlag("w"),u.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[u.getPath(),u.getBuffer(),null,u.getFlag(),u.getStats().mode]})},l.prototype.initialize=function(u,p){var m=this;p===void 0&&(p=!0),p&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var I=this._initializeCallbacks;if(this._isInitialized)u();else if(I.push(u)===1){var N=function($,ie,he){$!=="/"&&m._sync.mkdirSync($,ie),m._async.readdir($,function(_e,Ae){var De=0;_e?he(_e):function Te(ze){ze?he(ze):De<Ae.length?(F(f.join($,Ae[De]),Te),De++):he()}()})},F=function($,ie){m._async.stat($,!1,function(he,_e){he?ie(he):_e.isDirectory()?N($,_e.mode,ie):function(Ae,De,Te){m._async.readFile(Ae,null,O.getFileFlag("r"),function(ze,ht){if(ze)Te(ze);else try{m._sync.writeFileSync(Ae,ht,null,O.getFileFlag("w"),De)}catch(or){ze=or}finally{Te(ze)}})}($,_e.mode,ie)})};N("/",0,function($){m._isInitialized=!$,m._initializeCallbacks=[],I.forEach(function(ie){return ie($)})})}},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},l.prototype.renameSync=function(u,p){this.checkInitialized(),this._sync.renameSync(u,p),this.enqueueOp({apiMethod:"rename",arguments:[u,p]})},l.prototype.statSync=function(u,p){return this.checkInitialized(),this._sync.statSync(u,p)},l.prototype.openSync=function(u,p,m){return this.checkInitialized(),this._sync.openSync(u,p,m).closeSync(),new de(this,u,p,this._sync.statSync(u,!1),this._sync.readFileSync(u,null,O.getFileFlag("r")))},l.prototype.unlinkSync=function(u){this.checkInitialized(),this._sync.unlinkSync(u),this.enqueueOp({apiMethod:"unlink",arguments:[u]})},l.prototype.rmdirSync=function(u){this.checkInitialized(),this._sync.rmdirSync(u),this.enqueueOp({apiMethod:"rmdir",arguments:[u]})},l.prototype.mkdirSync=function(u,p){this.checkInitialized(),this._sync.mkdirSync(u,p),this.enqueueOp({apiMethod:"mkdir",arguments:[u,p]})},l.prototype.readdirSync=function(u){return this.checkInitialized(),this._sync.readdirSync(u)},l.prototype.existsSync=function(u){return this.checkInitialized(),this._sync.existsSync(u)},l.prototype.chmodSync=function(u,p,m){this.checkInitialized(),this._sync.chmodSync(u,p,m),this.enqueueOp({apiMethod:"chmod",arguments:[u,p,m]})},l.prototype.chownSync=function(u,p,m,I){this.checkInitialized(),this._sync.chownSync(u,p,m,I),this.enqueueOp({apiMethod:"chown",arguments:[u,p,m,I]})},l.prototype.utimesSync=function(u,p,m){this.checkInitialized(),this._sync.utimesSync(u,p,m),this.enqueueOp({apiMethod:"utimes",arguments:[u,p,m]})},l.prototype.checkInitialized=function(){if(!this._isInitialized)throw new g(s.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},l.prototype.enqueueOp=function(u){var p=this;if(this._queue.push(u),!this._queueRunning){this._queueRunning=!0;var m=function(I){if(I&&console.error("WARNING: File system has desynchronized. Received following error: "+I+`
$`),p._queue.length>0){var N=p._queue.shift(),F=N.arguments;F.push(m),p._async[N.apiMethod].apply(p._async,F)}else p._queueRunning=!1};m()}},l}(ee);pe.Name="AsyncMirror",pe.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var ce=typeof i=="object"&&i&&i.Object===Object&&i,Ee=typeof self=="object"&&self&&self.Object===Object&&self,Ie=ce||Ee||Function("return this")(),we=Ie.Symbol,Re=Object.prototype,Fe=Re.hasOwnProperty,Ce=Re.toString,Ht=we?we.toStringTag:void 0,mt=Object.prototype.toString,rt=we?we.toStringTag:void 0;function Tr(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":rt&&rt in Object(d)?function(l){var u=Fe.call(l,Ht),p=l[Ht];try{l[Ht]=void 0;var m=!0}catch{}var I=Ce.call(l);return m&&(u?l[Ht]=p:delete l[Ht]),I}(d):function(l){return mt.call(l)}(d)}function Ue(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991}function at(d){return d!=null&&Ue(d.length)&&!function(l){if(!function(p){var m=typeof p;return p!=null&&(m=="object"||m=="function")}(l))return!1;var u=Tr(l);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"}(d)}var hn={};function et(){}function lt(d){return function(){if(d!==null){var l=d;d=null,l.apply(this,arguments)}}}var Pi=typeof Symbol=="function"&&Symbol.iterator;function kt(d){return d!=null&&typeof d=="object"}function Tt(d){return kt(d)&&Tr(d)=="[object Arguments]"}var Ri=Object.prototype,bt=Ri.hasOwnProperty,vt=Ri.propertyIsEnumerable,ca=Tt(function(){return arguments}())?Tt:function(d){return kt(d)&&bt.call(d,"callee")&&!vt.call(d,"callee")},wt=Array.isArray,st=typeof e=="object"&&e&&!e.nodeType&&e,Pn=st&&typeof o=="object"&&o&&!o.nodeType&&o,_t=Pn&&Pn.exports===st?Ie.Buffer:void 0,Vt=(_t?_t.isBuffer:void 0)||function(){return!1},la=/^(?:0|[1-9]\d*)$/;function Ot(d,l){return!!(l=l==null?9007199254740991:l)&&(typeof d=="number"||la.test(d))&&d>-1&&d%1==0&&d<l}var Ke={};Ke["[object Float32Array]"]=Ke["[object Float64Array]"]=Ke["[object Int8Array]"]=Ke["[object Int16Array]"]=Ke["[object Int32Array]"]=Ke["[object Uint8Array]"]=Ke["[object Uint8ClampedArray]"]=Ke["[object Uint16Array]"]=Ke["[object Uint32Array]"]=!0,Ke["[object Arguments]"]=Ke["[object Array]"]=Ke["[object ArrayBuffer]"]=Ke["[object Boolean]"]=Ke["[object DataView]"]=Ke["[object Date]"]=Ke["[object Error]"]=Ke["[object Function]"]=Ke["[object Map]"]=Ke["[object Number]"]=Ke["[object Object]"]=Ke["[object RegExp]"]=Ke["[object Set]"]=Ke["[object String]"]=Ke["[object WeakMap]"]=!1;var fa,Pt=typeof e=="object"&&e&&!e.nodeType&&e,Nt=Pt&&typeof o=="object"&&o&&!o.nodeType&&o,ii=Nt&&Nt.exports===Pt&&ce.process,St=function(){try{return ii&&ii.binding&&ii.binding("util")}catch{}}(),jt=St&&St.isTypedArray,Rn=jt?(fa=jt,function(d){return fa(d)}):function(d){return kt(d)&&Ue(d.length)&&!!Ke[Tr(d)]},Wt=Object.prototype.hasOwnProperty;function Ft(d,l){var u=wt(d),p=!u&&ca(d),m=!u&&!p&&Vt(d),I=!u&&!p&&!m&&Rn(d),N=u||p||m||I,F=N?function(he,_e){for(var Ae=-1,De=Array(he);++Ae<he;)De[Ae]=_e(Ae);return De}(d.length,String):[],$=F.length;for(var ie in d)!l&&!Wt.call(d,ie)||N&&(ie=="length"||m&&(ie=="offset"||ie=="parent")||I&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Ot(ie,$))||F.push(ie);return F}var dn=Object.prototype,Ro=function(d,l){return function(u){return d(l(u))}}(Object.keys,Object),so=Object.prototype.hasOwnProperty;function Co(d){if(u=(l=d)&&l.constructor,l!==(typeof u=="function"&&u.prototype||dn))return Ro(d);var l,u,p=[];for(var m in Object(d))so.call(d,m)&&m!="constructor"&&p.push(m);return p}function ha(d){var l,u=at(l=d)?Ft(l):Co(l),p=-1,m=u.length;return function(){var I=u[++p];return p<m?{value:d[I],key:I}:null}}function Mo(d){if(at(d))return function(u){var p=-1,m=u.length;return function(){return++p<m?{value:u[p],key:p}:null}}(d);var l=function(u){return Pi&&u[Pi]&&u[Pi]()}(d);return l?function(u){var p=-1;return function(){var m=u.next();return m.done?null:(p++,{value:m.value,key:p})}}(l):ha(d)}function oi(d){return function(){if(d===null)throw new Error("Callback was already called.");var l=d;d=null,l.apply(this,arguments)}}function uo(d,l,u){u=lt(u||et);var p=0,m=0,I=d.length;function N(F,$){F?u(F):++m!==I&&$!==hn||u(null)}for(I===0&&u(null);p<I;p++)l(d[p],p,oi(N))}var le,be,ke,Be=(le=function(d,l,u,p){(function(m){return function(I,N,F){if(F=lt(F||et),m<=0||!I)return F(null);var $=Mo(I),ie=!1,he=0;function _e(De,Te){if(he-=1,De)ie=!0,F(De);else{if(Te===hn||ie&&he<=0)return ie=!0,F(null);Ae()}}function Ae(){for(;he<m&&!ie;){var De=$();if(De===null)return ie=!0,void(he<=0&&F(null));he+=1,N(De.value,De.key,oi(_e))}}Ae()}})(l)(d,u,p)},be=1/0,function(d,l,u){return le(d,be,l,u)}),Ut=typeof setImmediate=="function"&&setImmediate,rr=typeof a=="object"&&typeof a.nextTick=="function";function Rt(d,l,u){(function(p,m,I){(at(p)?uo:Be)(p,m,I)})(d,function(p){return function(m,I,N){return p(m,N)}}(l),u)}Ut&&setImmediate,rr||Ut&&setImmediate;var Ze=function(d){this._cache={},this._client=d};Ze.prototype.readdir=function(d,l){var u=this,p=this.getCachedDirInfo(d);this._wrap(function(m){p!==null&&p.contents?u._client.readdir(d,{contentHash:p.stat.contentHash},m):u._client.readdir(d,m)},function(m,I,N,F){m?m.status===Dropbox.ApiError.NO_CONTENT&&p!==null?l(null,p.contents.slice(0)):l(m):(u.updateCachedDirInfo(d,N,I.slice(0)),F.forEach(function($){u.updateCachedInfo(f.join(d,$.name),$)}),l(null,I))})},Ze.prototype.remove=function(d,l){var u=this;this._wrap(function(p){u._client.remove(d,p)},function(p,m){p||u.updateCachedInfo(d,m),l(p)})},Ze.prototype.move=function(d,l,u){var p=this;this._wrap(function(m){p._client.move(d,l,m)},function(m,I){m||(p.deleteCachedInfo(d),p.updateCachedInfo(l,I)),u(m)})},Ze.prototype.stat=function(d,l){var u=this;this._wrap(function(p){u._client.stat(d,p)},function(p,m){p||u.updateCachedInfo(d,m),l(p,m)})},Ze.prototype.readFile=function(d,l){var u=this,p=this.getCachedFileInfo(d);p!==null&&p.contents!==null?this.stat(d,function(m,I){m?l(m):I.contentHash===p.stat.contentHash?l(m,p.contents.slice(0),p.stat):u.readFile(d,l)}):this._wrap(function(m){u._client.readFile(d,{arrayBuffer:!0},m)},function(m,I,N){m||u.updateCachedInfo(d,N,I.slice(0)),l(m,I,N)})},Ze.prototype.writeFile=function(d,l,u){var p=this;this._wrap(function(m){p._client.writeFile(d,l,m)},function(m,I){m||p.updateCachedInfo(d,I,l.slice(0)),u(m,I)})},Ze.prototype.mkdir=function(d,l){var u=this;this._wrap(function(p){u._client.mkdir(d,p)},function(p,m){p||u.updateCachedInfo(d,m,[]),l(p)})},Ze.prototype._wrap=function(d,l){var u=0,p=function(m){var I=2;if(m&&3>++u)switch(m.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){d(p)},1e3*I);break;default:l.apply(null,arguments)}else l.apply(null,arguments)};d(p)},Ze.prototype.getCachedInfo=function(d){return this._cache[d.toLowerCase()]},Ze.prototype.putCachedInfo=function(d,l){this._cache[d.toLowerCase()]=l},Ze.prototype.deleteCachedInfo=function(d){delete this._cache[d.toLowerCase()]},Ze.prototype.getCachedDirInfo=function(d){var l,u=this.getCachedInfo(d);return(l=u)&&l.stat.isFolder?u:null},Ze.prototype.getCachedFileInfo=function(d){var l,u=this.getCachedInfo(d);return(l=u)&&l.stat.isFile?u:null},Ze.prototype.updateCachedDirInfo=function(d,l,u){u===void 0&&(u=null);var p=this.getCachedInfo(d);l.contentHash===null||p!==void 0&&p.stat.contentHash===l.contentHash||this.putCachedInfo(d,{stat:l,contents:u})},Ze.prototype.updateCachedFileInfo=function(d,l,u){u===void 0&&(u=null);var p=this.getCachedInfo(d);l.versionTag===null||p!==void 0&&p.stat.versionTag===l.versionTag||this.putCachedInfo(d,{stat:l,contents:u})},Ze.prototype.updateCachedInfo=function(d,l,u){var p;u===void 0&&(u=null),l.isFile&&((p=u)==null||typeof p=="object"&&typeof p.byteLength=="number")?this.updateCachedFileInfo(d,l,u):l.isFolder&&Array.isArray(u)&&this.updateCachedDirInfo(d,l,u)};var zr=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.sync=function(u){var p=this;if(this.isDirty()){var m=U(this.getBuffer());this._fs._writeFileStrict(this.getPath(),m,function(I){I||p.resetDirty(),u(I)})}else u()},l.prototype.close=function(u){this.sync(u)},l}(J),dr=function(d){function l(u,p){p===void 0&&(p=!0),d.call(this),this._client=new Ze(u),A(p,l.Name,{client:"authenticated dropbox client instance"}),ke||((ke={})[Dropbox.ApiError.NETWORK_ERROR]=s.EIO,ke[Dropbox.ApiError.INVALID_PARAM]=s.EINVAL,ke[Dropbox.ApiError.INVALID_TOKEN]=s.EPERM,ke[Dropbox.ApiError.OAUTH_ERROR]=s.EPERM,ke[Dropbox.ApiError.NOT_FOUND]=s.ENOENT,ke[Dropbox.ApiError.INVALID_METHOD]=s.EINVAL,ke[Dropbox.ApiError.NOT_ACCEPTABLE]=s.EINVAL,ke[Dropbox.ApiError.CONFLICT]=s.EINVAL,ke[Dropbox.ApiError.RATE_LIMITED]=s.EBUSY,ke[Dropbox.ApiError.SERVER_ERROR]=s.EBUSY,ke[Dropbox.ApiError.OVER_QUOTA]=s.ENOSPC)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){p(null,new l(u.client,!1))},l.isAvailable=function(){return typeof Dropbox<"u"},l.prototype.getName=function(){return l.Name},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSymlinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!1},l.prototype.empty=function(u){var p=this;this._client.readdir("/",function(m,I){m?u(p.convert(m,"/")):Rt(I,function(N,F){var $=f.join("/",N);p._client.remove($,function(ie){F(ie?p.convert(ie,$):null)})},function(N){N?u(N):u()})})},l.prototype.rename=function(u,p,m){var I=this;this._client.move(u,p,function(N){N?I._client.stat(p,function(F,$){if(F||$.isFolder){var ie=N.response.error.indexOf(u)>-1?u:p;m(I.convert(N,ie))}else I._client.remove(p,function(he){he?m(I.convert(he,p)):I.rename(u,p,m)})}):m()})},l.prototype.stat=function(u,p,m){var I=this;this._client.stat(u,function(N,F){if(N)m(I.convert(N,u));else{if(!F||!F.isRemoved){var $=new R(I._statType(F),F.size);return m(null,$)}m(g.FileError(s.ENOENT,u))}})},l.prototype.open=function(u,p,m,I){var N=this;this._client.readFile(u,function(F,$,ie){if(!F){var he;he=$===null?C():ue($);var _e=N._makeFile(u,p,ie,he);return I(null,_e)}if(!p.isReadable()){if(F.status===Dropbox.ApiError.NOT_FOUND){var Ae=new ArrayBuffer(0);return N._writeFileStrict(u,Ae,function(De,Te){if(De)I(De);else{var ze=N._makeFile(u,p,Te,ue(Ae));I(null,ze)}})}return I(N.convert(F,u))}I(N.convert(F,u))})},l.prototype._writeFileStrict=function(u,p,m){var I=this,N=f.dirname(u);this.stat(N,!1,function(F,$){F?m(g.FileError(s.ENOENT,N)):I._client.writeFile(u,p,function(ie,he){ie?m(I.convert(ie,u)):m(null,he)})})},l.prototype._statType=function(u){return u.isFile?E.FILE:E.DIRECTORY},l.prototype._makeFile=function(u,p,m,I){var N=this._statType(m),F=new R(N,m.size);return new zr(this,u,p,F,I)},l.prototype._remove=function(u,p,m){var I=this;this._client.stat(u,function(N,F){N?p(I.convert(N,u)):F.isFile&&!m?p(g.FileError(s.ENOTDIR,u)):!F.isFile&&m?p(g.FileError(s.EISDIR,u)):I._client.remove(u,function($){p($?I.convert($,u):null)})})},l.prototype.unlink=function(u,p){this._remove(u,p,!0)},l.prototype.rmdir=function(u,p){this._remove(u,p,!1)},l.prototype.mkdir=function(u,p,m){var I=this,N=f.dirname(u);this._client.stat(N,function(F,$){F?m(I.convert(F,N)):I._client.mkdir(u,function(ie){m(ie?g.FileError(s.EEXIST,u):null)})})},l.prototype.readdir=function(u,p){var m=this;this._client.readdir(u,function(I,N){return I?p(m.convert(I)):p(null,N)})},l.prototype.convert=function(u,p){p===void 0&&(p=null);var m=ke[u.status];return m===void 0&&(m=s.EIO),p?g.FileError(m,p):new g(m)},l}(K);function Et(d,l){l===void 0&&(l="");for(var u=d.errno,p=d.node,m=[];p&&(m.unshift(p.name),p!==p.parent);)p=p.parent;return new g(u,h[u],m.length>0?"/"+m.join("/"):l)}dr.Name="Dropbox",dr.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(d,l){d.isAuthenticated&&d.isAuthenticated()?l():l(new g(s.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};var $c=function(d){function l(u,p,m,I){d.call(this),this._fs=u,this._FS=p,this._path=m,this._stream=I}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.getPos=function(){},l.prototype.close=function(u){var p=null;try{this.closeSync()}catch(m){p=m}finally{u(p)}},l.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(u){throw Et(u,this._path)}},l.prototype.stat=function(u){try{u(null,this.statSync())}catch(p){u(p)}},l.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(u){throw Et(u,this._path)}},l.prototype.truncate=function(u,p){var m=null;try{this.truncateSync(u)}catch(I){m=I}finally{p(m)}},l.prototype.truncateSync=function(u){try{this._FS.ftruncate(this._stream.fd,u)}catch(p){throw Et(p,this._path)}},l.prototype.write=function(u,p,m,I,N){try{N(null,this.writeSync(u,p,m,I),u)}catch(F){N(F)}},l.prototype.writeSync=function(u,p,m,I){try{var N=Z(u),F=I===null?void 0:I;return this._FS.write(this._stream,N,p,m,F)}catch($){throw Et($,this._path)}},l.prototype.read=function(u,p,m,I,N){try{N(null,this.readSync(u,p,m,I),u)}catch(F){N(F)}},l.prototype.readSync=function(u,p,m,I){try{var N=Z(u),F=I===null?void 0:I;return this._FS.read(this._stream,N,p,m,F)}catch($){throw Et($,this._path)}},l.prototype.sync=function(u){u()},l.prototype.syncSync=function(){},l.prototype.chown=function(u,p,m){var I=null;try{this.chownSync(u,p)}catch(N){I=N}finally{m(I)}},l.prototype.chownSync=function(u,p){try{this._FS.fchown(this._stream.fd,u,p)}catch(m){throw Et(m,this._path)}},l.prototype.chmod=function(u,p){var m=null;try{this.chmodSync(u)}catch(I){m=I}finally{p(m)}},l.prototype.chmodSync=function(u){try{this._FS.fchmod(this._stream.fd,u)}catch(p){throw Et(p,this._path)}},l.prototype.utimes=function(u,p,m){var I=null;try{this.utimesSync(u,p)}catch(N){I=N}finally{m(I)}},l.prototype.utimesSync=function(u,p){this._fs.utimesSync(this._path,u,p)},l}(G),da=function(d){function l(u){d.call(this),this._FS=u}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){p(null,new l(u.FS))},l.isAvailable=function(){return!0},l.prototype.getName=function(){return this._FS.DB_NAME()},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsLinks=function(){return!0},l.prototype.supportsProps=function(){return!0},l.prototype.supportsSynch=function(){return!0},l.prototype.renameSync=function(u,p){try{this._FS.rename(u,p)}catch(m){throw m.errno===s.ENOENT?Et(m,this.existsSync(u)?p:u):Et(m)}},l.prototype.statSync=function(u,p){try{var m=p?this._FS.lstat(u):this._FS.stat(u),I=this.modeToFileType(m.mode);return new R(I,m.size,m.mode,m.atime,m.mtime,m.ctime)}catch(N){throw Et(N,u)}},l.prototype.openSync=function(u,p,m){try{var I=this._FS.open(u,p.getFlagString(),m);if(this._FS.isDir(I.node.mode))throw this._FS.close(I),g.EISDIR(u);return new $c(this,this._FS,u,I)}catch(N){throw Et(N,u)}},l.prototype.unlinkSync=function(u){try{this._FS.unlink(u)}catch(p){throw Et(p,u)}},l.prototype.rmdirSync=function(u){try{this._FS.rmdir(u)}catch(p){throw Et(p,u)}},l.prototype.mkdirSync=function(u,p){try{this._FS.mkdir(u,p)}catch(m){throw Et(m,u)}},l.prototype.readdirSync=function(u){try{return this._FS.readdir(u).filter(function(p){return p!=="."&&p!==".."})}catch(p){throw Et(p,u)}},l.prototype.truncateSync=function(u,p){try{this._FS.truncate(u,p)}catch(m){throw Et(m,u)}},l.prototype.readFileSync=function(u,p,m){try{var I=se(this._FS.readFile(u,{flags:m.getFlagString()}));return p?I.toString(p):I}catch(N){throw Et(N,u)}},l.prototype.writeFileSync=function(u,p,m,I,N){try{m&&(p=n.from(p,m));var F=Z(p);this._FS.writeFile(u,F,{flags:I.getFlagString(),encoding:"binary"}),this._FS.chmod(u,N)}catch($){throw Et($,u)}},l.prototype.chmodSync=function(u,p,m){try{p?this._FS.lchmod(u,m):this._FS.chmod(u,m)}catch(I){throw Et(I,u)}},l.prototype.chownSync=function(u,p,m,I){try{p?this._FS.lchown(u,m,I):this._FS.chown(u,m,I)}catch(N){throw Et(N,u)}},l.prototype.symlinkSync=function(u,p,m){try{this._FS.symlink(u,p)}catch(I){throw Et(I)}},l.prototype.readlinkSync=function(u){try{return this._FS.readlink(u)}catch(p){throw Et(p,u)}},l.prototype.utimesSync=function(u,p,m){try{this._FS.utime(u,p.getTime(),m.getTime())}catch(I){throw Et(I,u)}},l.prototype.modeToFileType=function(u){if(this._FS.isDir(u))return E.DIRECTORY;if(this._FS.isFile(u))return E.FILE;if(this._FS.isLink(u))return E.SYMLINK;throw g.EPERM("Invalid mode: "+u)},l}(ee);da.Name="EmscriptenFileSystem",da.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var Le=function(d){function l(u,p){d.call(this),this._folder=u,this._wrapped=p}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){p(null,new l(u.folder,u.wrapped))},l.isAvailable=function(){return!0},l.prototype.initialize=function(u){var p=this;this._wrapped.exists(this._folder,function(m){m?u():p._wrapped.isReadOnly()?u(g.ENOENT(p._folder)):p._wrapped.mkdir(p._folder,511,u)})},l.prototype.getName=function(){return this._wrapped.getName()},l.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},l.prototype.supportsProps=function(){return this._wrapped.supportsProps()},l.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},l.prototype.supportsLinks=function(){return!1},l}(K);function ft(d,l){if(l!==null&&typeof l=="object"){var u=l,p=u.path;p&&(p="/"+f.relative(d,p),u.message=u.message.replace(u.path,p),u.path=p)}return l}function nr(d,l){return typeof l=="function"?function(u){arguments.length>0&&(arguments[0]=ft(d,u)),l.apply(null,arguments)}:l}function $r(d,l,u){return d.slice(d.length-4)!=="Sync"?function(){return arguments.length>0&&(l&&(arguments[0]=f.join(this._folder,arguments[0])),u&&(arguments[1]=f.join(this._folder,arguments[1])),arguments[arguments.length-1]=nr(this._folder,arguments[arguments.length-1])),this._wrapped[d].apply(this._wrapped,arguments)}:function(){try{return l&&(arguments[0]=f.join(this._folder,arguments[0])),u&&(arguments[1]=f.join(this._folder,arguments[1])),this._wrapped[d].apply(this._wrapped,arguments)}catch(p){throw ft(this._folder,p)}}}Le.Name="FolderAdapter",Le.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(d){Le.prototype[d]=$r(d,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(d){Le.prototype[d]=$r(d,!0,!0)});var Ct=typeof window<"u"?window:typeof self<"u"?self:i,Ci=Ct.webkitRequestFileSystem||Ct.requestFileSystem||null;function Qe(d,l,u){switch(d.name){case"PathExistsError":return g.EEXIST(l);case"QuotaExceededError":return g.FileError(s.ENOSPC,l);case"NotFoundError":return g.ENOENT(l);case"SecurityError":return g.FileError(s.EACCES,l);case"InvalidModificationError":return g.FileError(s.EPERM,l);case"TypeMismatchError":return g.FileError(u?s.ENOTDIR:s.EISDIR,l);default:return g.FileError(s.EINVAL,l)}}var Or=function(d){function l(u,p,m,I,N,F){d.call(this,u,m,I,N,F),this._entry=p}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.sync=function(u){var p=this;if(!this.isDirty())return u();this._entry.createWriter(function(m){var I=p.getBuffer(),N=new Blob([U(I)]),F=N.size;m.onwriteend=function($){m.onwriteend=null,m.onerror=null,m.truncate(F),p.resetDirty(),u()},m.onerror=function($){u(Qe($,p.getPath(),!1))},m.write(N)})},l.prototype.close=function(u){this.sync(u)},l}(J),Qr=function(d){function l(u,p,m){u===void 0&&(u=5),p===void 0&&(p=Ct.PERSISTENT),m===void 0&&(m=!0),d.call(this),this.size=1048576*u,this.type=p,A(m,l.Name,{size:u,type:p})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){var m=new l(u.size,u.type,!1);m.allocate(function(I){return I?p(I):p(null,m)},!1)},l.isAvailable=function(){return!!Ci},l.prototype.getName=function(){return l.Name},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSymlinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!1},l.prototype.allocate=function(u,p){var m=this;u===void 0&&(u=function(){}),p===void 0&&(p=!0),p&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var I=function(F){m.fs=F,u()},N=function(F){u(Qe(F,"/",!0))};this.type===Ct.PERSISTENT?function(F,$,ie,he){if(navigator.webkitPersistentStorage!==void 0)switch(F){case Ct.PERSISTENT:navigator.webkitPersistentStorage.requestQuota($,ie,he);break;case Ct.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota($,ie,he);break;default:he(new TypeError("Invalid storage type: "+F))}else Ct.webkitStorageInfo.requestQuota(F,$,ie,he)}(this.type,this.size,function(F){Ci(m.type,F,I,N)},N):Ci(this.type,this.size,I,N)},l.prototype.empty=function(u){this._readdir("/",function(p,m){p?(console.error("Failed to empty FS"),u(p)):Rt(m,function(I,N){var F=function(){N()},$=function(ie){N(Qe(ie,I.fullPath,!I.isDirectory))};(function(ie){return ie.isDirectory})(I)?I.removeRecursively(F,$):I.remove(F,$)},function(I){p?(console.error("Failed to empty FS"),u(p)):u()})})},l.prototype.rename=function(u,p,m){var I=this,N=2,F=0,$=this.fs.root,ie=u,he=function(Ae){--N<=0&&m(Qe(Ae,ie,!1))},_e=function(Ae){return++F==2?m(new g(s.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):u===p?m():(ie=f.dirname(p),void $.getDirectory(ie,{},function(De){ie=f.basename(p),Ae.moveTo(De,ie,function(Te){m()},function(Te){Ae.isDirectory?(ie=p,I.unlink(p,function(ze){ze?he(Te):I.rename(u,p,m)})):he(Te)})},he))};$.getFile(u,{},_e,he),$.getDirectory(u,{},_e,he)},l.prototype.stat=function(u,p,m){var I=this,N={create:!1},F=function(ie){var he=new R(E.DIRECTORY,4096);m(null,he)},$=function(ie){m(Qe(ie,u,!1))};this.fs.root.getFile(u,N,function(ie){ie.file(function(he){var _e=new R(E.FILE,he.size);m(null,_e)},$)},function(){I.fs.root.getDirectory(u,N,F,$)})},l.prototype.open=function(u,p,m,I){var N=this,F=function($){$.name==="InvalidModificationError"&&p.isExclusive()?I(g.EEXIST(u)):I(Qe($,u,!1))};this.fs.root.getFile(u,{create:p.pathNotExistsAction()===y.CREATE_FILE,exclusive:p.isExclusive()},function($){$.file(function(ie){var he=new FileReader;he.onloadend=function(_e){var Ae=N._makeFile(u,$,p,ie,he.result);I(null,Ae)},he.onerror=function(_e){F(he.error)},he.readAsArrayBuffer(ie)},F)},F)},l.prototype.unlink=function(u,p){this._remove(u,p,!0)},l.prototype.rmdir=function(u,p){var m=this;this.readdir(u,function(I,N){I?p(I):N.length>0?p(g.ENOTEMPTY(u)):m._remove(u,p,!1)})},l.prototype.mkdir=function(u,p,m){this.fs.root.getDirectory(u,{create:!0,exclusive:!0},function(I){m()},function(I){m(Qe(I,u,!0))})},l.prototype.readdir=function(u,p){this._readdir(u,function(m,I){if(!I)return p(m);for(var N=[],F=0,$=I;F<$.length;F+=1){var ie=$[F];N.push(ie.name)}p(null,N)})},l.prototype._makeFile=function(u,p,m,I,N){N===void 0&&(N=new ArrayBuffer(0));var F=new R(E.FILE,I.size),$=ue(N);return new Or(this,p,u,m,F,$)},l.prototype._readdir=function(u,p){var m=function(I){p(Qe(I,u,!0))};this.fs.root.getDirectory(u,{create:!1},function(I){var N=I.createReader(),F=[],$=function(){N.readEntries(function(ie){ie.length?(F=F.concat(function(he){return Array.prototype.slice.call(he||[],0)}(ie)),$()):p(null,F)},m)};$()},m)},l.prototype._remove=function(u,p,m){var I=function($){$.remove(function(){p()},function(ie){p(Qe(ie,u,!m))})},N=function($){p(Qe($,u,!m))},F={create:!1};m?this.fs.root.getFile(u,F,I,N):this.fs.root.getDirectory(u,F,I,N)},l}(K);Qr.Name="HTML5FS",Qr.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var Pr=function(d,l,u,p,m,I){this.id=d,this.size=l,this.mode=u,this.atime=p,this.mtime=m,this.ctime=I};Pr.fromBuffer=function(d){if(d===void 0)throw new Error("NO");return new Pr(d.toString("ascii",30),d.readUInt32LE(0),d.readUInt16LE(4),d.readDoubleLE(6),d.readDoubleLE(14),d.readDoubleLE(22))},Pr.prototype.toStats=function(){return new R((61440&this.mode)===E.DIRECTORY?E.DIRECTORY:E.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},Pr.prototype.getSize=function(){return 30+this.id.length},Pr.prototype.toBuffer=function(d){return d===void 0&&(d=n.alloc(this.getSize())),d.writeUInt32LE(this.size,0),d.writeUInt16LE(this.mode,4),d.writeDoubleLE(this.atime,6),d.writeDoubleLE(this.mtime,14),d.writeDoubleLE(this.ctime,22),d.write(this.id,30,this.id.length,"ascii"),d},Pr.prototype.update=function(d){var l=!1;this.size!==d.size&&(this.size=d.size,l=!0),this.mode!==d.mode&&(this.mode=d.mode,l=!0);var u=d.atime.getTime();this.atime!==u&&(this.atime=u,l=!0);var p=d.mtime.getTime();this.mtime!==p&&(this.mtime=p,l=!0);var m=d.ctime.getTime();return this.ctime!==m&&(this.ctime=m,l=!0),l},Pr.prototype.isFile=function(){return(61440&this.mode)===E.FILE},Pr.prototype.isDirectory=function(){return(61440&this.mode)===E.DIRECTORY};var No="/",O0=null;function P0(){return O0||(O0=n.from("{}"))}function Qc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var l=16*Math.random()|0;return(d==="x"?l:3&l|8).toString(16)})}function pn(d,l){return!d||(l(d),!1)}function sr(d,l,u){return!d||(l.abort(function(){u(d)}),!1)}var co=function(d){this.store=d,this.originalData={},this.modifiedKeys=[]};co.prototype.get=function(d){var l=this.store.get(d);return this.stashOldValue(d,l),l},co.prototype.put=function(d,l,u){return this.markModified(d),this.store.put(d,l,u)},co.prototype.del=function(d){this.markModified(d),this.store.del(d)},co.prototype.commit=function(){},co.prototype.abort=function(){for(var d=this,l=0,u=d.modifiedKeys;l<u.length;l+=1){var p=u[l],m=d.originalData[p];m?d.store.put(p,m,!0):d.store.del(p)}},co.prototype.stashOldValue=function(d,l){this.originalData.hasOwnProperty(d)||(this.originalData[d]=l)},co.prototype.markModified=function(d){this.modifiedKeys.indexOf(d)===-1&&(this.modifiedKeys.push(d),this.originalData.hasOwnProperty(d)||(this.originalData[d]=this.store.get(d)))};var R0=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},l.prototype.closeSync=function(){this.syncSync()},l}(J),C0=function(d){function l(u){d.call(this),this.store=u.store,this.makeRootDirectory()}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.isAvailable=function(){return!0},l.prototype.getName=function(){return this.store.name()},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSymlinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},l.prototype.renameSync=function(u,p){var m=this.store.beginTransaction("readwrite"),I=f.dirname(u),N=f.basename(u),F=f.dirname(p),$=f.basename(p),ie=this.findINode(m,I),he=this.getDirListing(m,I,ie);if(!he[N])throw g.ENOENT(u);var _e,Ae,De=he[N];if(delete he[N],(F+"/").indexOf(u+"/")===0)throw new g(s.EBUSY,I);if(F===I?(_e=ie,Ae=he):(_e=this.findINode(m,F),Ae=this.getDirListing(m,F,_e)),Ae[$]){var Te=this.getINode(m,p,Ae[$]);if(!Te.isFile())throw g.EPERM(p);try{m.del(Te.id),m.del(Ae[$])}catch(ze){throw m.abort(),ze}}Ae[$]=De;try{m.put(ie.id,n.from(JSON.stringify(he)),!0),m.put(_e.id,n.from(JSON.stringify(Ae)),!0)}catch(ze){throw m.abort(),ze}m.commit()},l.prototype.statSync=function(u,p){return this.findINode(this.store.beginTransaction("readonly"),u).toStats()},l.prototype.createFileSync=function(u,p,m){var I=this.store.beginTransaction("readwrite"),N=C(),F=this.commitNewFile(I,u,E.FILE,m,N);return new R0(this,u,p,F.toStats(),N)},l.prototype.openFileSync=function(u,p){var m=this.store.beginTransaction("readonly"),I=this.findINode(m,u),N=m.get(I.id);if(N===void 0)throw g.ENOENT(u);return new R0(this,u,p,I.toStats(),N)},l.prototype.unlinkSync=function(u){this.removeEntry(u,!1)},l.prototype.rmdirSync=function(u){if(this.readdirSync(u).length>0)throw g.ENOTEMPTY(u);this.removeEntry(u,!0)},l.prototype.mkdirSync=function(u,p){var m=this.store.beginTransaction("readwrite"),I=n.from("{}");this.commitNewFile(m,u,E.DIRECTORY,p,I)},l.prototype.readdirSync=function(u){var p=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(p,u,this.findINode(p,u)))},l.prototype._syncSync=function(u,p,m){var I=this.store.beginTransaction("readwrite"),N=this._findINode(I,f.dirname(u),f.basename(u)),F=this.getINode(I,u,N),$=F.update(m);try{I.put(F.id,p,!0),$&&I.put(N,F.toBuffer(),!0)}catch(ie){throw I.abort(),ie}I.commit()},l.prototype.makeRootDirectory=function(){var u=this.store.beginTransaction("readwrite");if(u.get(No)===void 0){var p=new Date().getTime(),m=new Pr(Qc(),4096,511|E.DIRECTORY,p,p,p);u.put(m.id,P0(),!1),u.put(No,m.toBuffer(),!1),u.commit()}},l.prototype._findINode=function(u,p,m){var I=this,N=function(F){var $=I.getDirListing(u,p,F);if($[m])return $[m];throw g.ENOENT(f.resolve(p,m))};return p==="/"?m===""?No:N(this.getINode(u,p,No)):N(this.getINode(u,p+f.sep+m,this._findINode(u,f.dirname(p),f.basename(p))))},l.prototype.findINode=function(u,p){return this.getINode(u,p,this._findINode(u,f.dirname(p),f.basename(p)))},l.prototype.getINode=function(u,p,m){var I=u.get(m);if(I===void 0)throw g.ENOENT(p);return Pr.fromBuffer(I)},l.prototype.getDirListing=function(u,p,m){if(!m.isDirectory())throw g.ENOTDIR(p);var I=u.get(m.id);if(I===void 0)throw g.ENOENT(p);return JSON.parse(I.toString())},l.prototype.addNewNode=function(u,p){for(var m;;)try{return m=Qc(),u.put(m,p,!1),m}catch{}throw new g(s.EIO,"Unable to commit data to key-value store.")},l.prototype.commitNewFile=function(u,p,m,I,N){var F,$=f.dirname(p),ie=f.basename(p),he=this.findINode(u,$),_e=this.getDirListing(u,$,he),Ae=new Date().getTime();if(p==="/"||_e[ie])throw g.EEXIST(p);try{var De=this.addNewNode(u,N);F=new Pr(De,N.length,I|m,Ae,Ae,Ae);var Te=this.addNewNode(u,F.toBuffer());_e[ie]=Te,u.put(he.id,n.from(JSON.stringify(_e)),!0)}catch(ze){throw u.abort(),ze}return u.commit(),F},l.prototype.removeEntry=function(u,p){var m=this.store.beginTransaction("readwrite"),I=f.dirname(u),N=this.findINode(m,I),F=this.getDirListing(m,I,N),$=f.basename(u);if(!F[$])throw g.ENOENT(u);var ie=F[$];delete F[$];var he=this.getINode(m,u,ie);if(!p&&he.isDirectory())throw g.EISDIR(u);if(p&&!he.isDirectory())throw g.ENOTDIR(u);try{m.del(he.id),m.del(ie),m.put(N.id,n.from(JSON.stringify(F)),!0)}catch(_e){throw m.abort(),_e}m.commit()},l}(ee),M0=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.sync=function(u){var p=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(m){m||p.resetDirty(),u(m)}):u()},l.prototype.close=function(u){this.sync(u)},l}(J),T6=function(d){function l(){d.apply(this,arguments)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.isAvailable=function(){return!0},l.prototype.init=function(u,p){this.store=u,this.makeRootDirectory(p)},l.prototype.getName=function(){return this.store.name()},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSymlinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!1},l.prototype.empty=function(u){var p=this;this.store.clear(function(m){pn(m,u)&&p.makeRootDirectory(u)})},l.prototype.rename=function(u,p,m){var I=this,N=this.store.beginTransaction("readwrite"),F=f.dirname(u),$=f.basename(u),ie=f.dirname(p),he=f.basename(p),_e={},Ae={},De=!1;if((ie+"/").indexOf(u+"/")===0)return m(new g(s.EBUSY,F));var Te=function(ze){I.findINodeAndDirListing(N,ze,function(ht,or,ai){ht?De||(De=!0,N.abort(function(){m(ht)})):(_e[ze]=or,Ae[ze]=ai,function(){if(!De&&Ae.hasOwnProperty(F)&&Ae.hasOwnProperty(ie)){var mn=Ae[F],ps=_e[F],rn=Ae[ie],Fh=_e[ie];if(mn[$]){var _a=mn[$];delete mn[$];var Sa=function(){rn[he]=_a,N.put(ps.id,n.from(JSON.stringify(mn)),!0,function(Uh){sr(Uh,N,m)&&(F===ie?N.commit(m):N.put(Fh.id,n.from(JSON.stringify(rn)),!0,function(cl){sr(cl,N,m)&&N.commit(m)}))})};rn[he]?I.getINode(N,p,rn[he],function(Uh,cl){sr(Uh,N,m)&&(cl.isFile()?N.del(cl.id,function(Sy){sr(Sy,N,m)&&N.del(rn[he],function(q6){sr(q6,N,m)&&Sa()})}):N.abort(function(Sy){m(g.EPERM(p))}))}):Sa()}else m(g.ENOENT(u))}}())})};Te(F),F!==ie&&Te(ie)},l.prototype.stat=function(u,p,m){var I=this.store.beginTransaction("readonly");this.findINode(I,u,function(N,F){pn(N,m)&&m(null,F.toStats())})},l.prototype.createFile=function(u,p,m,I){var N=this,F=this.store.beginTransaction("readwrite"),$=C();this.commitNewFile(F,u,E.FILE,m,$,function(ie,he){pn(ie,I)&&I(null,new M0(N,u,p,he.toStats(),$))})},l.prototype.openFile=function(u,p,m){var I=this,N=this.store.beginTransaction("readonly");this.findINode(N,u,function(F,$){pn(F,m)&&N.get($.id,function(ie,he){pn(ie,m)&&(he===void 0?m(g.ENOENT(u)):m(null,new M0(I,u,p,$.toStats(),he)))})})},l.prototype.unlink=function(u,p){this.removeEntry(u,!1,p)},l.prototype.rmdir=function(u,p){var m=this;this.readdir(u,function(I,N){I?p(I):N.length>0?p(g.ENOTEMPTY(u)):m.removeEntry(u,!0,p)})},l.prototype.mkdir=function(u,p,m){var I=this.store.beginTransaction("readwrite"),N=n.from("{}");this.commitNewFile(I,u,E.DIRECTORY,p,N,m)},l.prototype.readdir=function(u,p){var m=this,I=this.store.beginTransaction("readonly");this.findINode(I,u,function(N,F){pn(N,p)&&m.getDirListing(I,u,F,function($,ie){pn($,p)&&p(null,Object.keys(ie))})})},l.prototype._sync=function(u,p,m,I){var N=this,F=this.store.beginTransaction("readwrite");this._findINode(F,f.dirname(u),f.basename(u),function($,ie){sr($,F,I)&&N.getINode(F,u,ie,function(he,_e){if(sr(he,F,I)){var Ae=_e.update(m);F.put(_e.id,p,!0,function(De){sr(De,F,I)&&(Ae?F.put(ie,_e.toBuffer(),!0,function(Te){sr(Te,F,I)&&F.commit(I)}):F.commit(I))})}})})},l.prototype.makeRootDirectory=function(u){var p=this.store.beginTransaction("readwrite");p.get(No,function(m,I){if(m||I===void 0){var N=new Date().getTime(),F=new Pr(Qc(),4096,511|E.DIRECTORY,N,N,N);p.put(F.id,P0(),!1,function($){sr($,p,u)&&p.put(No,F.toBuffer(),!1,function(ie){ie?p.abort(function(){u(ie)}):p.commit(u)})})}else p.commit(u)})},l.prototype._findINode=function(u,p,m,I){var N=this,F=function($,ie,he){$?I($):he[m]?I(null,he[m]):I(g.ENOENT(f.resolve(p,m)))};p==="/"?m===""?I(null,No):this.getINode(u,p,No,function($,ie){pn($,I)&&N.getDirListing(u,p,ie,function(he,_e){F(he,0,_e)})}):this.findINodeAndDirListing(u,p,F)},l.prototype.findINode=function(u,p,m){var I=this;this._findINode(u,f.dirname(p),f.basename(p),function(N,F){pn(N,m)&&I.getINode(u,p,F,m)})},l.prototype.getINode=function(u,p,m,I){u.get(m,function(N,F){pn(N,I)&&(F===void 0?I(g.ENOENT(p)):I(null,Pr.fromBuffer(F)))})},l.prototype.getDirListing=function(u,p,m,I){m.isDirectory()?u.get(m.id,function(N,F){if(pn(N,I))try{I(null,JSON.parse(F.toString()))}catch{I(g.ENOENT(p))}}):I(g.ENOTDIR(p))},l.prototype.findINodeAndDirListing=function(u,p,m){var I=this;this.findINode(u,p,function(N,F){pn(N,m)&&I.getDirListing(u,p,F,function($,ie){pn($,m)&&m(null,F,ie)})})},l.prototype.addNewNode=function(u,p,m){var I,N=0,F=function(){++N==5?m(new g(s.EIO,"Unable to commit data to key-value store.")):(I=Qc(),u.put(I,p,!1,function($,ie){$||!ie?F():m(null,I)}))};F()},l.prototype.commitNewFile=function(u,p,m,I,N,F){var $=this,ie=f.dirname(p),he=f.basename(p),_e=new Date().getTime();if(p==="/")return F(g.EEXIST(p));this.findINodeAndDirListing(u,ie,function(Ae,De,Te){sr(Ae,u,F)&&(Te[he]?u.abort(function(){F(g.EEXIST(p))}):$.addNewNode(u,N,function(ze,ht){if(sr(ze,u,F)){var or=new Pr(ht,N.length,I|m,_e,_e,_e);$.addNewNode(u,or.toBuffer(),function(ai,mn){sr(ai,u,F)&&(Te[he]=mn,u.put(De.id,n.from(JSON.stringify(Te)),!0,function(ps){sr(ps,u,F)&&u.commit(function(rn){sr(rn,u,F)&&F(null,or)})}))})}}))})},l.prototype.removeEntry=function(u,p,m){var I=this,N=this.store.beginTransaction("readwrite"),F=f.dirname(u),$=f.basename(u);this.findINodeAndDirListing(N,F,function(ie,he,_e){if(sr(ie,N,m))if(_e[$]){var Ae=_e[$];delete _e[$],I.getINode(N,u,Ae,function(De,Te){sr(De,N,m)&&(!p&&Te.isDirectory()?N.abort(function(){m(g.EISDIR(u))}):p&&!Te.isDirectory()?N.abort(function(){m(g.ENOTDIR(u))}):N.del(Te.id,function(ze){sr(ze,N,m)&&N.del(Ae,function(ht){sr(ht,N,m)&&N.put(he.id,n.from(JSON.stringify(_e)),!0,function(or){sr(or,N,m)&&N.commit(m)})})}))})}else N.abort(function(){m(g.ENOENT(u))})})},l}(K),pa=function(){this.store={}};pa.prototype.name=function(){return us.Name},pa.prototype.clear=function(){this.store={}},pa.prototype.beginTransaction=function(d){return new co(this)},pa.prototype.get=function(d){return this.store[d]},pa.prototype.put=function(d,l,u){return!(!u&&this.store.hasOwnProperty(d)||(this.store[d]=l,0))},pa.prototype.del=function(d){delete this.store[d]};var us=function(d){function l(){d.call(this,{store:new pa})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){p(null,new l)},l}(C0);us.Name="InMemory",us.Options={};var xh=Ct.indexedDB||Ct.mozIndexedDB||Ct.webkitIndexedDB||Ct.msIndexedDB;function Iu(d,l){switch(l===void 0&&(l=d.toString()),d.name){case"NotFoundError":return new g(s.ENOENT,l);case"QuotaExceededError":return new g(s.ENOSPC,l);default:return new g(s.EIO,l)}}function Au(d,l,u){return l===void 0&&(l=s.EIO),u===void 0&&(u=null),function(p){p.preventDefault(),d(new g(l,u!==null?u:void 0))}}var Th=function(d,l){this.tx=d,this.store=l};Th.prototype.get=function(d,l){try{var u=this.store.get(d);u.onerror=Au(l),u.onsuccess=function(p){var m=p.target.result;l(null,m===void 0?m:ue(m))}}catch(p){l(Iu(p))}};var O6=function(d){function l(u,p){d.call(this,u,p)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.put=function(u,p,m,I){try{var N,F=U(p);(N=m?this.store.put(F,u):this.store.add(F,u)).onerror=Au(I),N.onsuccess=function($){I(null,!0)}}catch($){I(Iu($))}},l.prototype.del=function(u,p){try{var m=this.store.delete(u);m.onerror=Au(p),m.onsuccess=function(I){p()}}catch(I){p(Iu(I))}},l.prototype.commit=function(u){setTimeout(u,0)},l.prototype.abort=function(u){var p=null;try{this.tx.abort()}catch(m){p=Iu(m)}finally{u(p)}},l}(Th),el=function(d,l){var u=this;l===void 0&&(l="browserfs"),this.storeName=l;var p=xh.open(this.storeName,1);p.onupgradeneeded=function(m){var I=m.target.result;I.objectStoreNames.contains(u.storeName)&&I.deleteObjectStore(u.storeName),I.createObjectStore(u.storeName)},p.onsuccess=function(m){u.db=m.target.result,d(null,u)},p.onerror=Au(d,s.EACCES)};el.prototype.name=function(){return ku.Name+" - "+this.storeName},el.prototype.clear=function(d){try{var l=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();l.onsuccess=function(u){setTimeout(d,0)},l.onerror=Au(d)}catch(u){d(Iu(u))}},el.prototype.beginTransaction=function(d){d===void 0&&(d="readonly");var l=this.db.transaction(this.storeName,d),u=l.objectStore(this.storeName);if(d==="readwrite")return new O6(l,u);if(d==="readonly")return new Th(l,u);throw new g(s.EINVAL,"Invalid transaction type.")};var ku=function(d){function l(u,p,m){var I=this;m===void 0&&(m=!0),d.call(this),this.store=new el(function(N){N?u(N):I.init(I.store,function(F){u(F,I)})},p),A(m,l.Name,{storeName:p})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){new l(p,u.storeName,!1)},l.isAvailable=function(){try{return xh!==void 0&&xh.open("__browserfs_test__")!==null}catch{return!1}},l}(T6);ku.Name="IndexedDB",ku.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Du,Oh=!1;try{Ct.localStorage.setItem("__test__",String.fromCharCode(55296)),Oh=Ct.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{Oh=!1}Du=Oh?"binary_string":"binary_string_ie",n.isEncoding(Du)||(Du="base64");var ya=function(){};ya.prototype.name=function(){return xu.Name},ya.prototype.clear=function(){Ct.localStorage.clear()},ya.prototype.beginTransaction=function(d){return new co(this)},ya.prototype.get=function(d){try{var l=Ct.localStorage.getItem(d);if(l!==null)return n.from(l,Du)}catch{}},ya.prototype.put=function(d,l,u){try{return!(!u&&Ct.localStorage.getItem(d)!==null||(Ct.localStorage.setItem(d,l.toString(Du)),0))}catch{throw new g(s.ENOSPC,"LocalStorage is full.")}},ya.prototype.del=function(d){try{Ct.localStorage.removeItem(d)}catch(l){throw new g(s.EIO,"Unable to delete key "+d+": "+l)}};var xu=function(d){function l(){d.call(this,{store:new ya})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){p(null,new l)},l.isAvailable=function(){return Ct.localStorage!==void 0},l}(C0);xu.Name="LocalStorage",xu.Options={};var cs=function(d){function l(){d.call(this),this.mountList=[],this.mntMap={},this.rootFs=new us}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){var m=new l;Object.keys(u).forEach(function(I){m.mount(I,u[I])}),p(null,m)},l.isAvailable=function(){return!0},l.prototype.mount=function(u,p){if(u[0]!=="/"&&(u="/"+u),u=f.resolve(u),this.mntMap[u])throw new g(s.EINVAL,"Mount point "+u+" is already taken.");Q(u,511,this.rootFs),this.mntMap[u]=p,this.mountList.push(u),this.mountList=this.mountList.sort(function(m,I){return I.length-m.length})},l.prototype.umount=function(u){if(u[0]!=="/"&&(u="/"+u),u=f.resolve(u),!this.mntMap[u])throw new g(s.EINVAL,"Mount point "+u+" is already unmounted.");for(delete this.mntMap[u],this.mountList.splice(this.mountList.indexOf(u),1);u!=="/"&&this.rootFs.readdirSync(u).length===0;)this.rootFs.rmdirSync(u),u=f.dirname(u)},l.prototype._getFs=function(u){for(var p=this.mountList,m=p.length,I=0;I<m;I++){var N=p[I];if(N.length<=u.length&&u.indexOf(N)===0)return(u=u.substr(N.length>1?N.length:0))===""&&(u="/"),{fs:this.mntMap[N],path:u}}return{fs:this.rootFs,path:u}},l.prototype.getName=function(){return l.Name},l.prototype.diskSpace=function(u,p){p(0,0)},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.standardizeError=function(u,p,m){var I=u.message.indexOf(p);return I!==-1&&(u.message=u.message.substr(0,I)+m+u.message.substr(I+p.length),u.path=m),u},l.prototype.rename=function(u,p,m){var I=this,N=this._getFs(u),F=this._getFs(p);return N.fs===F.fs?N.fs.rename(N.path,F.path,function($){$&&I.standardizeError(I.standardizeError($,N.path,u),F.path,p),m($)}):v.readFile(u,function($,ie){if($)return m($);v.writeFile(p,ie,function(he){if(he)return m(he);v.unlink(u,m)})})},l.prototype.renameSync=function(u,p){var m=this._getFs(u),I=this._getFs(p);if(m.fs===I.fs)try{return m.fs.renameSync(m.path,I.path)}catch(F){throw this.standardizeError(this.standardizeError(F,m.path,u),I.path,p),F}var N=v.readFileSync(u);return v.writeFileSync(p,N),v.unlinkSync(u)},l.prototype.readdirSync=function(u){var p=this._getFs(u),m=null;if(p.fs!==this.rootFs)try{m=this.rootFs.readdirSync(u)}catch{}try{var I=p.fs.readdirSync(p.path);return m===null?I:I.concat(m.filter(function(N){return I.indexOf(N)===-1}))}catch(N){if(m===null)throw this.standardizeError(N,p.path,u);return m}},l.prototype.readdir=function(u,p){var m=this,I=this._getFs(u);I.fs.readdir(I.path,function(N,F){if(I.fs!==m.rootFs)try{var $=m.rootFs.readdirSync(u);F=F?F.concat($.filter(function(ie){return F.indexOf(ie)===-1})):$}catch{if(N)return p(m.standardizeError(N,I.path,u))}else if(N)return p(m.standardizeError(N,I.path,u));p(null,F)})},l.prototype.rmdirSync=function(u){var p=this._getFs(u);if(this._containsMountPt(u))throw g.ENOTEMPTY(u);try{p.fs.rmdirSync(p.path)}catch(m){throw this.standardizeError(m,p.path,u)}},l.prototype.rmdir=function(u,p){var m=this,I=this._getFs(u);this._containsMountPt(u)?p(g.ENOTEMPTY(u)):I.fs.rmdir(I.path,function(N){p(N?m.standardizeError(N,I.path,u):null)})},l.prototype._containsMountPt=function(u){for(var p=this.mountList,m=p.length,I=0;I<m;I++){var N=p[I];if(N.length>=u.length&&N.slice(0,u.length)===u)return!0}return!1},l}(K);function N0(d,l,u){return l?function(){for(var p=[],m=arguments.length;m--;)p[m]=arguments[m];var I=p[0],N=this._getFs(I);p[0]=N.path;try{return N.fs[d].apply(N.fs,p)}catch(F){throw this.standardizeError(F,N.path,I),F}}:function(){for(var p=this,m=[],I=arguments.length;I--;)m[I]=arguments[I];var N=m[0],F=this._getFs(N);if(m[0]=F.path,typeof m[m.length-1]=="function"){var $=m[m.length-1];m[m.length-1]=function(){for(var ie=[],he=arguments.length;he--;)ie[he]=arguments[he];ie.length>0&&ie[0]instanceof g&&p.standardizeError(ie[0],F.path,N),$.apply(null,ie)}}return F.fs[d].apply(F.fs,m)}}cs.Name="MountableFileSystem",cs.Options={};for(var Tu,j0=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Ph=0;Ph<j0.length;Ph++)for(var Rh=0,B0=j0[Ph];Rh<B0.length;Rh+=1){var tl=B0[Rh];cs.prototype[tl]=N0(tl,!1),cs.prototype[tl+"Sync"]=N0(tl+"Sync",!0)}if(typeof setImmediate<"u")Tu=setImmediate;else{var Cn=Ct,ls=[],L0="zero-timeout-message";if(function(){if(Cn.importScripts!==void 0||!Cn.postMessage)return!1;var d=!0,l=Cn.onmessage;return Cn.onmessage=function(){d=!1},Cn.postMessage("","*"),Cn.onmessage=l,d}()){Tu=function(d){ls.push(d),Cn.postMessage(L0,"*")};var F0=function(d){if(d.source===self&&d.data===L0&&(d.stopPropagation?d.stopPropagation():d.cancelBubble=!0,ls.length>0))return ls.shift()()};Cn.addEventListener?Cn.addEventListener("message",F0,!0):Cn.attachEvent("onmessage",F0)}else if(Cn.MessageChannel){var U0=new Cn.MessageChannel;U0.port1.onmessage=function(d){if(ls.length>0)return ls.shift()()},Tu=function(d){ls.push(d),U0.port2.postMessage("")}}else Tu=function(d){return setTimeout(d,0)}}var Ch=Tu,Ou=function(){this._locked=!1,this._waiters=[]};Ou.prototype.lock=function(d){this._locked?this._waiters.push(d):(this._locked=!0,d())},Ou.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var d=this._waiters.shift();d?Ch(d):this._locked=!1},Ou.prototype.tryLock=function(){return!this._locked&&(this._locked=!0,!0)},Ou.prototype.isLocked=function(){return this._locked};var He=function(d){this._fs=d,this._mu=new Ou};He.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},He.prototype.getFSUnlocked=function(){return this._fs},He.prototype.initialize=function(d){this._fs.initialize(d)},He.prototype.diskSpace=function(d,l){this._fs.diskSpace(d,l)},He.prototype.isReadOnly=function(){return this._fs.isReadOnly()},He.prototype.supportsLinks=function(){return this._fs.supportsLinks()},He.prototype.supportsProps=function(){return this._fs.supportsProps()},He.prototype.supportsSynch=function(){return this._fs.supportsSynch()},He.prototype.rename=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.rename(d,l,function(m){p._mu.unlock(),u(m)})})},He.prototype.renameSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(d,l)},He.prototype.stat=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.stat(d,l,function(m,I){p._mu.unlock(),u(m,I)})})},He.prototype.statSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(d,l)},He.prototype.open=function(d,l,u,p){var m=this;this._mu.lock(function(){m._fs.open(d,l,u,function(I,N){m._mu.unlock(),p(I,N)})})},He.prototype.openSync=function(d,l,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(d,l,u)},He.prototype.unlink=function(d,l){var u=this;this._mu.lock(function(){u._fs.unlink(d,function(p){u._mu.unlock(),l(p)})})},He.prototype.unlinkSync=function(d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(d)},He.prototype.rmdir=function(d,l){var u=this;this._mu.lock(function(){u._fs.rmdir(d,function(p){u._mu.unlock(),l(p)})})},He.prototype.rmdirSync=function(d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(d)},He.prototype.mkdir=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.mkdir(d,l,function(m){p._mu.unlock(),u(m)})})},He.prototype.mkdirSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(d,l)},He.prototype.readdir=function(d,l){var u=this;this._mu.lock(function(){u._fs.readdir(d,function(p,m){u._mu.unlock(),l(p,m)})})},He.prototype.readdirSync=function(d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(d)},He.prototype.exists=function(d,l){var u=this;this._mu.lock(function(){u._fs.exists(d,function(p){u._mu.unlock(),l(p)})})},He.prototype.existsSync=function(d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(d)},He.prototype.realpath=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.realpath(d,l,function(m,I){p._mu.unlock(),u(m,I)})})},He.prototype.realpathSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(d,l)},He.prototype.truncate=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.truncate(d,l,function(m){p._mu.unlock(),u(m)})})},He.prototype.truncateSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(d,l)},He.prototype.readFile=function(d,l,u,p){var m=this;this._mu.lock(function(){m._fs.readFile(d,l,u,function(I,N){m._mu.unlock(),p(I,N)})})},He.prototype.readFileSync=function(d,l,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(d,l,u)},He.prototype.writeFile=function(d,l,u,p,m,I){var N=this;this._mu.lock(function(){N._fs.writeFile(d,l,u,p,m,function(F){N._mu.unlock(),I(F)})})},He.prototype.writeFileSync=function(d,l,u,p,m){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(d,l,u,p,m)},He.prototype.appendFile=function(d,l,u,p,m,I){var N=this;this._mu.lock(function(){N._fs.appendFile(d,l,u,p,m,function(F){N._mu.unlock(),I(F)})})},He.prototype.appendFileSync=function(d,l,u,p,m){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(d,l,u,p,m)},He.prototype.chmod=function(d,l,u,p){var m=this;this._mu.lock(function(){m._fs.chmod(d,l,u,function(I){m._mu.unlock(),p(I)})})},He.prototype.chmodSync=function(d,l,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(d,l,u)},He.prototype.chown=function(d,l,u,p,m){var I=this;this._mu.lock(function(){I._fs.chown(d,l,u,p,function(N){I._mu.unlock(),m(N)})})},He.prototype.chownSync=function(d,l,u,p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(d,l,u,p)},He.prototype.utimes=function(d,l,u,p){var m=this;this._mu.lock(function(){m._fs.utimes(d,l,u,function(I){m._mu.unlock(),p(I)})})},He.prototype.utimesSync=function(d,l,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(d,l,u)},He.prototype.link=function(d,l,u){var p=this;this._mu.lock(function(){p._fs.link(d,l,function(m){p._mu.unlock(),u(m)})})},He.prototype.linkSync=function(d,l){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(d,l)},He.prototype.symlink=function(d,l,u,p){var m=this;this._mu.lock(function(){m._fs.symlink(d,l,u,function(I){m._mu.unlock(),p(I)})})},He.prototype.symlinkSync=function(d,l,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(d,l,u)},He.prototype.readlink=function(d,l){var u=this;this._mu.lock(function(){u._fs.readlink(d,function(p,m){u._mu.unlock(),l(p,m)})})},He.prototype.readlinkSync=function(d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(d)};var lo="/.deletedFiles.log";function z0(d){return 146|d}function yn(d){return O.getFileFlag(d)}var Jt,K0=function(d){function l(u,p,m,I,N){d.call(this,u,p,m,I,N)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.sync=function(u){var p=this;this.isDirty()?this._fs._syncAsync(this,function(m){p.resetDirty(),u(m)}):u(null)},l.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},l.prototype.close=function(u){this.sync(u)},l.prototype.closeSync=function(){this.syncSync()},l}(J),q0=function(d){function l(u,p){if(d.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=u,this._readable=p,this._writable.isReadOnly())throw new g(s.EINVAL,"Writable file system must be writable.")}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.isAvailable=function(){return!0},l.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},l.prototype._syncAsync=function(u,p){var m=this;this.createParentDirectoriesAsync(u.getPath(),function(I){if(I)return p(I);m._writable.writeFile(u.getPath(),u.getBuffer(),null,yn("w"),u.getStats().mode,p)})},l.prototype._syncSync=function(u){this.createParentDirectories(u.getPath()),this._writable.writeFileSync(u.getPath(),u.getBuffer(),null,yn("w"),u.getStats().mode)},l.prototype.getName=function(){return Pu.Name},l.prototype.initialize=function(u){var p=this,m=this._initializeCallbacks,I=function(N){p._isInitialized=!N,p._initializeCallbacks=[],m.forEach(function(F){return F(N)})};if(this._isInitialized)return u();m.push(u),m.length===1&&this._writable.readFile(lo,"utf8",yn("r"),function(N,F){if(N){if(N.errno!==s.ENOENT)return I(N)}else p._deleteLog=F;p._reparseDeletionLog(),I()})},l.prototype.isReadOnly=function(){return!1},l.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},l.prototype.getDeletionLog=function(){return this._deleteLog},l.prototype.restoreDeletionLog=function(u){this._deleteLog=u,this._reparseDeletionLog(),this.updateLog("")},l.prototype.rename=function(u,p,m){var I=this;if(this.checkInitAsync(m)&&!this.checkPathAsync(u,m)&&!this.checkPathAsync(p,m))return u===lo||p===lo?m(g.EPERM("Cannot rename deletion log.")):u===p?m():void this.stat(u,!1,function(N,F){return N?m(N):I.stat(p,!1,function($,ie){var he=I;function _e(De){var Te=De.shift();if(!Te)return m();var ze=f.resolve(u,Te),ht=f.resolve(p,Te);he.rename(ze,ht,function(or){if(or)return m(or);_e(De)})}var Ae=511;if(F.isDirectory()){if($)return $.errno!==s.ENOENT?m($):I._writable.exists(u,function(De){if(De)return I._writable.rename(u,p,m);I._writable.mkdir(p,Ae,function(Te){if(Te)return m(Te);I._readable.readdir(u,function(ze,ht){if(ze)return m();_e(ht)})})});if(Ae=ie.mode,!ie.isDirectory())return m(g.ENOTDIR(p));I.readdir(p,function(De,Te){if(Te&&Te.length)return m(g.ENOTEMPTY(p));I._readable.readdir(u,function(ze,ht){if(ze)return m();_e(ht)})})}if(ie&&ie.isDirectory())return m(g.EISDIR(p));I.readFile(u,null,yn("r"),function(De,Te){return De?m(De):I.writeFile(p,Te,null,yn("w"),F.mode,function(ze){return ze?m(ze):I.unlink(u,m)})})})})},l.prototype.renameSync=function(u,p){var m=this;if(this.checkInitialized(),this.checkPath(u),this.checkPath(p),u===lo||p===lo)throw g.EPERM("Cannot rename deletion log.");var I=this.statSync(u,!1);if(I.isDirectory()){if(u===p)return;var N=511;if(this.existsSync(p)){var F=this.statSync(p,!1);if(N=F.mode,!F.isDirectory())throw g.ENOTDIR(p);if(this.readdirSync(p).length>0)throw g.ENOTEMPTY(p)}this._writable.existsSync(u)?this._writable.renameSync(u,p):this._writable.existsSync(p)||this._writable.mkdirSync(p,N),this._readable.existsSync(u)&&this._readable.readdirSync(u).forEach(function($){m.renameSync(f.resolve(u,$),f.resolve(p,$))})}else{if(this.existsSync(p)&&this.statSync(p,!1).isDirectory())throw g.EISDIR(p);this.writeFileSync(p,this.readFileSync(u,null,yn("r")),null,yn("w"),I.mode)}u!==p&&this.existsSync(u)&&this.unlinkSync(u)},l.prototype.stat=function(u,p,m){var I=this;this.checkInitAsync(m)&&this._writable.stat(u,p,function(N,F){N&&N.errno===s.ENOENT?(I._deletedFiles[u]&&m(g.ENOENT(u)),I._readable.stat(u,p,function($,ie){ie&&((ie=ie.clone()).mode=z0(ie.mode)),m($,ie)})):m(N,F)})},l.prototype.statSync=function(u,p){this.checkInitialized();try{return this._writable.statSync(u,p)}catch{if(this._deletedFiles[u])throw g.ENOENT(u);var m=this._readable.statSync(u,p).clone();return m.mode=z0(m.mode),m}},l.prototype.open=function(u,p,m,I){var N=this;this.checkInitAsync(I)&&!this.checkPathAsync(u,I)&&this.stat(u,!1,function(F,$){if(!$)return p.pathNotExistsAction()===y.CREATE_FILE?N.createParentDirectoriesAsync(u,function(ie){return ie?I(ie):N._writable.open(u,p,m,I)}):I(g.ENOENT(u));switch(p.pathExistsAction()){case y.TRUNCATE_FILE:return N.createParentDirectoriesAsync(u,function(ie){if(ie)return I(ie);N._writable.open(u,p,m,I)});case y.NOP:return N._writable.exists(u,function(ie){ie?N._writable.open(u,p,m,I):(($=$.clone()).mode=m,N._readable.readFile(u,null,yn("r"),function(he,_e){if(he)return I(he);$.size===-1&&($.size=_e.length);var Ae=new K0(N,u,p,$,_e);I(null,Ae)}))});default:return I(g.EEXIST(u))}})},l.prototype.openSync=function(u,p,m){if(this.checkInitialized(),this.checkPath(u),u===lo)throw g.EPERM("Cannot open deletion log.");if(!this.existsSync(u)){if(p.pathNotExistsAction()===y.CREATE_FILE)return this.createParentDirectories(u),this._writable.openSync(u,p,m);throw g.ENOENT(u)}switch(p.pathExistsAction()){case y.TRUNCATE_FILE:return this.createParentDirectories(u),this._writable.openSync(u,p,m);case y.NOP:if(this._writable.existsSync(u))return this._writable.openSync(u,p,m);var I=this._readable.readFileSync(u,null,yn("r")),N=this._readable.statSync(u,!1).clone();return N.mode=m,new K0(this,u,p,N,I);default:throw g.EEXIST(u)}},l.prototype.unlink=function(u,p){var m=this;this.checkInitAsync(p)&&!this.checkPathAsync(u,p)&&this.exists(u,function(I){if(!I)return p(g.ENOENT(u));m._writable.exists(u,function(N){if(N)return m._writable.unlink(u,function(F){if(F)return p(F);m.exists(u,function($){$&&m.deletePath(u),p(null)})});m.deletePath(u),p(null)})})},l.prototype.unlinkSync=function(u){if(this.checkInitialized(),this.checkPath(u),!this.existsSync(u))throw g.ENOENT(u);this._writable.existsSync(u)&&this._writable.unlinkSync(u),this.existsSync(u)&&this.deletePath(u)},l.prototype.rmdir=function(u,p){var m=this;if(this.checkInitAsync(p)){var I=function(){m.readdir(u,function(N,F){return N?p(N):F.length?p(g.ENOTEMPTY(u)):(m.deletePath(u),void p(null))})};this.exists(u,function(N){if(!N)return p(g.ENOENT(u));m._writable.exists(u,function(F){F?m._writable.rmdir(u,function($){if($)return p($);m._readable.exists(u,function(ie){ie?I():p()})}):I()})})}},l.prototype.rmdirSync=function(u){if(this.checkInitialized(),!this.existsSync(u))throw g.ENOENT(u);if(this._writable.existsSync(u)&&this._writable.rmdirSync(u),this.existsSync(u)){if(this.readdirSync(u).length>0)throw g.ENOTEMPTY(u);this.deletePath(u)}},l.prototype.mkdir=function(u,p,m){var I=this;this.checkInitAsync(m)&&this.exists(u,function(N){if(N)return m(g.EEXIST(u));I.createParentDirectoriesAsync(u,function(F){if(F)return m(F);I._writable.mkdir(u,p,m)})})},l.prototype.mkdirSync=function(u,p){if(this.checkInitialized(),this.existsSync(u))throw g.EEXIST(u);this.createParentDirectories(u),this._writable.mkdirSync(u,p)},l.prototype.readdir=function(u,p){var m=this;this.checkInitAsync(p)&&this.stat(u,!1,function(I,N){return I?p(I):N.isDirectory()?void m._writable.readdir(u,function(F,$){if(F&&F.code!=="ENOENT")return p(F);!F&&$||($=[]),m._readable.readdir(u,function(ie,he){!ie&&he||(he=[]);var _e={},Ae=$.concat(he.filter(function(De){return!m._deletedFiles[u+"/"+De]})).filter(function(De){var Te=!_e[De];return _e[De]=!0,Te});p(null,Ae)})}):p(g.ENOTDIR(u))})},l.prototype.readdirSync=function(u){var p=this;if(this.checkInitialized(),!this.statSync(u,!1).isDirectory())throw g.ENOTDIR(u);var m=[];try{m=m.concat(this._writable.readdirSync(u))}catch{}try{m=m.concat(this._readable.readdirSync(u).filter(function(N){return!p._deletedFiles[u+"/"+N]}))}catch{}var I={};return m.filter(function(N){var F=!I[N];return I[N]=!0,F})},l.prototype.exists=function(u,p){var m=this;this.checkInitialized(),this._writable.exists(u,function(I){if(I)return p(!0);m._readable.exists(u,function(N){p(N&&m._deletedFiles[u]!==!0)})})},l.prototype.existsSync=function(u){return this.checkInitialized(),this._writable.existsSync(u)||this._readable.existsSync(u)&&this._deletedFiles[u]!==!0},l.prototype.chmod=function(u,p,m,I){var N=this;this.checkInitAsync(I)&&this.operateOnWritableAsync(u,function(F){if(F)return I(F);N._writable.chmod(u,p,m,I)})},l.prototype.chmodSync=function(u,p,m){var I=this;this.checkInitialized(),this.operateOnWritable(u,function(){I._writable.chmodSync(u,p,m)})},l.prototype.chown=function(u,p,m,I,N){var F=this;this.checkInitAsync(N)&&this.operateOnWritableAsync(u,function($){if($)return N($);F._writable.chown(u,p,m,I,N)})},l.prototype.chownSync=function(u,p,m,I){var N=this;this.checkInitialized(),this.operateOnWritable(u,function(){N._writable.chownSync(u,p,m,I)})},l.prototype.utimes=function(u,p,m,I){var N=this;this.checkInitAsync(I)&&this.operateOnWritableAsync(u,function(F){if(F)return I(F);N._writable.utimes(u,p,m,I)})},l.prototype.utimesSync=function(u,p,m){var I=this;this.checkInitialized(),this.operateOnWritable(u,function(){I._writable.utimesSync(u,p,m)})},l.prototype.deletePath=function(u){this._deletedFiles[u]=!0,this.updateLog("d"+u+`
`)},l.prototype.updateLog=function(u){var p=this;this._deleteLog+=u,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(lo,this._deleteLog,"utf8",O.getFileFlag("w"),420,function(m){p._deleteLogUpdatePending=!1,m?p._deleteLogError=m:p._deleteLogUpdateNeeded&&(p._deleteLogUpdateNeeded=!1,p.updateLog(""))}))},l.prototype._reparseDeletionLog=function(){var u=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(p){u._deletedFiles[p.slice(1)]=p.slice(0,1)==="d"})},l.prototype.checkInitialized=function(){if(!this._isInitialized)throw new g(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(this._deleteLogError!==null){var u=this._deleteLogError;throw this._deleteLogError=null,u}},l.prototype.checkInitAsync=function(u){if(!this._isInitialized)return u(new g(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(this._deleteLogError!==null){var p=this._deleteLogError;return this._deleteLogError=null,u(p),!1}return!0},l.prototype.checkPath=function(u){if(u===lo)throw g.EPERM(u)},l.prototype.checkPathAsync=function(u,p){return u===lo&&(p(g.EPERM(u)),!0)},l.prototype.createParentDirectoriesAsync=function(u,p){var m=f.dirname(u),I=[],N=this;function F(){if(!I.length)return p();var $=I.pop();N._readable.stat($,!1,function(ie,he){if(!he)return p();N._writable.mkdir($,he.mode,function(_e){if(_e)return p(_e);F()})})}this._writable.stat(m,!1,function $(ie,he){ie?(I.push(m),m=f.dirname(m),N._writable.stat(m,!1,$)):F()})},l.prototype.createParentDirectories=function(u){for(var p=this,m=f.dirname(u),I=[];!this._writable.existsSync(m);)I.push(m),m=f.dirname(m);(I=I.reverse()).forEach(function(N){p._writable.mkdirSync(N,p.statSync(N,!1).mode)})},l.prototype.operateOnWritable=function(u,p){if(!this.existsSync(u))throw g.ENOENT(u);this._writable.existsSync(u)||this.copyToWritable(u),p()},l.prototype.operateOnWritableAsync=function(u,p){var m=this;this.exists(u,function(I){if(!I)return p(g.ENOENT(u));m._writable.exists(u,function(N){if(!N)return m.copyToWritableAsync(u,p);p()})})},l.prototype.copyToWritable=function(u){var p=this.statSync(u,!1);p.isDirectory()?this._writable.mkdirSync(u,p.mode):this.writeFileSync(u,this._readable.readFileSync(u,null,yn("r")),null,yn("w"),this.statSync(u,!1).mode)},l.prototype.copyToWritableAsync=function(u,p){var m=this;this.stat(u,!1,function(I,N){return I?p(I):N.isDirectory()?m._writable.mkdir(u,N.mode,p):void m._readable.readFile(u,null,yn("r"),function(F,$){if(F)return p(F);m.writeFile(u,$,null,yn("w"),N.mode,p)})})},l}(K),Pu=function(d){function l(u,p,m){m===void 0&&(m=!0),d.call(this,new q0(u,p)),A(m,l.Name,{readable:"readable file system",writable:"writable file system"})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){try{var m=new l(u.writable,u.readable,!1);m.initialize(function(I){p(I,m)},!1)}catch(I){p(I)}},l.isAvailable=function(){return q0.isAvailable()},l.prototype.initialize=function(u,p){p===void 0&&(p=!0),p&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),d.prototype.initialize.call(this,u)},l.prototype.getOverlayedFileSystems=function(){return d.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},l.prototype.unwrap=function(){return d.prototype.getFSUnlocked.call(this)},l}(He);Pu.Name="OverlayFS",Pu.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(d){d[d.CB=0]="CB",d[d.FD=1]="FD",d[d.API_ERROR=2]="API_ERROR",d[d.STATS=3]="STATS",d[d.PROBE=4]="PROBE",d[d.FILEFLAG=5]="FILEFLAG",d[d.BUFFER=6]="BUFFER",d[d.ERROR=7]="ERROR"}(Jt||(Jt={}));var Mh=function(){this._callbacks={},this._nextId=0};Mh.prototype.toRemoteArg=function(d){var l=this._nextId++;return this._callbacks[l]=d,{type:Jt.CB,id:l}},Mh.prototype.toLocalArg=function(d){var l=this._callbacks[d];return delete this._callbacks[d],l};var rl=function(){this._fileDescriptors={},this._nextId=0};function nl(d){return{type:Jt.API_ERROR,errorData:ga(d.writeToBuffer())}}function H0(d){return g.fromBuffer(ma(d.errorData))}function V0(d){return{type:Jt.ERROR,name:d.name,message:d.message,stack:d.stack}}function W0(d){var l=Ct[d.name];typeof l!="function"&&(l=Error);var u=new l(d.message);return u.stack=d.stack,u}function J0(d){return{type:Jt.STATS,statsData:ga(d.toBuffer())}}function Y0(d){return R.fromBuffer(ma(d.statsData))}function Z0(d){return{type:Jt.FILEFLAG,flagStr:d.getFlagString()}}function X0(d){return O.getFileFlag(d.flagStr)}function ga(d){return U(d)}function ma(d){return ue(d)}function G0(d){return{type:Jt.BUFFER,data:ga(d)}}function $0(d){return ma(d.data)}rl.prototype.toRemoteArg=function(d,l,u,p){var m,I,N=this._nextId++;this._fileDescriptors[N]=d,d.stat(function(F,$){F?p(F):(I=ga($.toBuffer()),u.isReadable()?d.read(n.alloc($.size),0,$.size,0,function(ie,he,_e){ie?p(ie):(m=ga(_e),p(null,{type:Jt.FD,id:N,data:m,stat:I,path:l,flag:u.getFlagString()}))}):p(null,{type:Jt.FD,id:N,data:new ArrayBuffer(0),stat:I,path:l,flag:u.getFlagString()}))})},rl.prototype.applyFdAPIRequest=function(d,l){var u=this,p=d.args[0];this._applyFdChanges(p,function(m,I){m?l(m):I[d.method](function(N){d.method==="close"&&delete u._fileDescriptors[p.id],l(N)})})},rl.prototype._applyFdChanges=function(d,l){var u=this._fileDescriptors[d.id],p=ma(d.data),m=R.fromBuffer(ma(d.stat)),I=O.getFileFlag(d.flag);I.isWriteable()?u.write(p,0,p.length,I.isAppendable()?u.getPos():0,function(N){function F(){u.stat(function($,ie){$?l($):ie.mode!==m.mode?u.chmod(m.mode,function(he){l(he,u)}):l($,u)})}N?l(N):I.isAppendable()?F():u.truncate(p.length,function(){F()})}):l(null,u)};var Q0=function(d){function l(u,p,m,I,N,F){d.call(this,u,p,m,I,F),this._remoteFdId=N}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.getRemoteFdId=function(){return this._remoteFdId},l.prototype.toRemoteArg=function(){return{type:Jt.FD,id:this._remoteFdId,data:ga(this.getBuffer()),stat:ga(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},l.prototype.sync=function(u){this._syncClose("sync",u)},l.prototype.close=function(u){this._syncClose("close",u)},l.prototype._syncClose=function(u,p){var m=this;this.isDirty()?this._fs.syncClose(u,this,function(I){I||m.resetDirty(),p(I)}):p()},l}(J),il=function(d){function l(u,p){var m=this;p===void 0&&(p=!0),d.call(this),this._callbackConverter=new Mh,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=u,A(p,l.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(I){var N,F=I.data;if((N=F)&&typeof N=="object"&&N.hasOwnProperty("browserfsMessage")&&N.browserfsMessage){var $,ie=F.args,he=new Array(ie.length);for($=0;$<he.length;$++)he[$]=m._argRemote2Local(ie[$]);m._callbackConverter.toLocalArg(F.cbId).apply(null,he)}})}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){var m=new l(u.worker,!1);m.initialize(function(){p(null,m)})},l.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},l.attachRemoteListener=function(u){var p=new rl;function m(N,F,$){typeof N=="object"?N instanceof R?$(null,J0(N)):N instanceof g?$(null,nl(N)):N instanceof G?$(null,p.toRemoteArg(N,F[0],F[1],$)):N instanceof O?$(null,Z0(N)):N instanceof n?$(null,G0(N)):N instanceof Error?$(null,V0(N)):$(null,N):$(null,N)}function I(N,F){if(!N)return N;if(typeof N=="object"){if(typeof N.type!="number")return N;var $=N;switch($.type){case Jt.CB:var ie=N.id;return function(){var he,_e,Ae=arguments,De=new Array(arguments.length),Te=arguments.length;function ze(ht){Te>0&&(Te=-1,_e={browserfsMessage:!0,cbId:ie,args:[nl(ht)]},u.postMessage(_e))}for(he=0;he<arguments.length;he++)(function(ht,or){m(or,F,function(ai,mn){De[ht]=mn,ai?ze(ai):--Te==0&&(_e={browserfsMessage:!0,cbId:ie,args:De},u.postMessage(_e))})})(he,Ae[he]);arguments.length===0&&(_e={browserfsMessage:!0,cbId:ie,args:De},u.postMessage(_e))};case Jt.API_ERROR:return H0($);case Jt.STATS:return Y0($);case Jt.FILEFLAG:return X0($);case Jt.BUFFER:return $0($);case Jt.ERROR:return W0($);default:return N}}return N}u.addEventListener("message",function(N){var F,$,ie=N.data;if(($=ie)&&typeof $=="object"&&$.hasOwnProperty("browserfsMessage")&&$.browserfsMessage){var he=ie.args,_e=new Array(he.length);switch(ie.method){case"close":case"sync":F=he[1],p.applyFdAPIRequest(ie,function(Te){var ze={browserfsMessage:!0,cbId:F.id,args:Te?[nl(Te)]:[]};u.postMessage(ze)});break;case"probe":(function(){var Te=v.getRootFS(),ze=he[1],ht={type:Jt.PROBE,isReadOnly:Te.isReadOnly(),supportsLinks:Te.supportsLinks(),supportsProps:Te.supportsProps()},or={browserfsMessage:!0,cbId:ze.id,args:[ht]};u.postMessage(or)})();break;default:for(var Ae=0;Ae<he.length;Ae++)_e[Ae]=I(he[Ae],_e);var De=v.getRootFS();De[ie.method].apply(De,_e)}}})},l.prototype.getName=function(){return l.Name},l.prototype.initialize=function(u){var p=this;if(this._isInitialized)u();else{var m={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(C()),this._callbackConverter.toRemoteArg(function(I){p._isInitialized=!0,p._isReadOnly=I.isReadOnly,p._supportLinks=I.supportsLinks,p._supportProps=I.supportsProps,u()})]};this._worker.postMessage(m)}},l.prototype.isReadOnly=function(){return this._isReadOnly},l.prototype.supportsSynch=function(){return!1},l.prototype.supportsLinks=function(){return this._supportLinks},l.prototype.supportsProps=function(){return this._supportProps},l.prototype.rename=function(u,p,m){this._rpc("rename",arguments)},l.prototype.stat=function(u,p,m){this._rpc("stat",arguments)},l.prototype.open=function(u,p,m,I){this._rpc("open",arguments)},l.prototype.unlink=function(u,p){this._rpc("unlink",arguments)},l.prototype.rmdir=function(u,p){this._rpc("rmdir",arguments)},l.prototype.mkdir=function(u,p,m){this._rpc("mkdir",arguments)},l.prototype.readdir=function(u,p){this._rpc("readdir",arguments)},l.prototype.exists=function(u,p){this._rpc("exists",arguments)},l.prototype.realpath=function(u,p,m){this._rpc("realpath",arguments)},l.prototype.truncate=function(u,p,m){this._rpc("truncate",arguments)},l.prototype.readFile=function(u,p,m,I){this._rpc("readFile",arguments)},l.prototype.writeFile=function(u,p,m,I,N,F){this._rpc("writeFile",arguments)},l.prototype.appendFile=function(u,p,m,I,N,F){this._rpc("appendFile",arguments)},l.prototype.chmod=function(u,p,m,I){this._rpc("chmod",arguments)},l.prototype.chown=function(u,p,m,I,N){this._rpc("chown",arguments)},l.prototype.utimes=function(u,p,m,I){this._rpc("utimes",arguments)},l.prototype.link=function(u,p,m){this._rpc("link",arguments)},l.prototype.symlink=function(u,p,m,I){this._rpc("symlink",arguments)},l.prototype.readlink=function(u,p){this._rpc("readlink",arguments)},l.prototype.syncClose=function(u,p,m){this._worker.postMessage({browserfsMessage:!0,method:u,args:[p.toRemoteArg(),this._callbackConverter.toRemoteArg(m)]})},l.prototype._argRemote2Local=function(u){if(!u)return u;if(typeof u=="object"){if(typeof u.type!="number")return u;var p=u;switch(p.type){case Jt.API_ERROR:return H0(p);case Jt.FD:var m=p;return new Q0(this,m.path,O.getFileFlag(m.flag),R.fromBuffer(ma(m.stat)),m.id,ma(m.data));case Jt.STATS:return Y0(p);case Jt.FILEFLAG:return X0(p);case Jt.BUFFER:return $0(p);case Jt.ERROR:return W0(p);default:return u}}return u},l.prototype._rpc=function(u,p){for(var m=new Array(p.length),I=0;I<p.length;I++)m[I]=this._argLocal2Remote(p[I]);var N={browserfsMessage:!0,method:u,args:m};this._worker.postMessage(N)},l.prototype._argLocal2Remote=function(u){if(!u)return u;switch(typeof u){case"object":return u instanceof R?J0(u):u instanceof g?nl(u):u instanceof Q0?u.toRemoteArg():u instanceof O?Z0(u):u instanceof n?G0(u):u instanceof Error?V0(u):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(u);default:return u}},l}(K);function ey(d,l,u){var p=new XMLHttpRequest;p.open("HEAD",l,d),p.onreadystatechange=function(m){if(p.readyState===4){if(p.status!==200)return u(new g(p.status,"XHR HEAD error."));try{return u(null,parseInt(p.getResponseHeader("Content-Length")||"-1",10))}catch{return u(new g(s.EIO,"XHR HEAD error: Could not read content-length."))}}},p.send()}il.Name="WorkerFS",il.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(d,l){d.postMessage?l():l(new g(s.EINVAL,"option must be a Web Worker instance."))}}};var ty=function(d,l,u){var p=new XMLHttpRequest;p.open("GET",d,!0);var m=!0;switch(l){case"buffer":p.responseType="arraybuffer";break;case"json":try{p.responseType="json",m=p.responseType==="json"}catch{m=!1}break;default:return u(new g(s.EINVAL,"Invalid download type: "+l))}p.onreadystatechange=function(I){if(p.readyState===4){if(p.status!==200)return u(new g(p.status,"XHR error."));switch(l){case"buffer":return u(null,p.response?n.from(p.response):C());case"json":return u(null,m?p.response:JSON.parse(p.responseText))}}},p.send()},P6=b&&typeof Blob<"u"?function(d,l){var u,p,m=new XMLHttpRequest;switch(m.open("GET",d,!1),l){case"buffer":m.responseType="arraybuffer";break;case"json":break;default:throw new g(s.EINVAL,"Invalid download type: "+l)}if(m.onreadystatechange=function(I){if(m.readyState===4)if(m.status===200)switch(l){case"buffer":u=n.from(m.response);break;case"json":u=JSON.parse(m.response)}else p=new g(m.status,"XHR error.")},m.send(),p)throw p;return u}:function(d,l){var u=new XMLHttpRequest;u.open("GET",d,!1);var p=null,m=null;if(u.overrideMimeType("text/plain; charset=x-user-defined"),u.onreadystatechange=function(I){if(u.readyState===4){if(u.status!==200)return void(m=new g(u.status,"XHR error."));switch(l){case"buffer":var N=u.responseText;p=n.alloc(N.length);for(var F=0;F<N.length;F++)p[F]=N.charCodeAt(F);return;case"json":return void(p=JSON.parse(u.responseText))}}},u.send(),m)throw m;return p},Mn=function(){this._index={},this.addPath("/",new en)};Mn.fromListing=function(d){var l=new Mn,u=new en;l._index["/"]=u;for(var p=[["",d,u]];p.length>0;){var m=void 0,I=p.pop(),N=I[0],F=I[1],$=I[2];for(var ie in F)if(F.hasOwnProperty(ie)){var he=F[ie],_e=N+"/"+ie;he?(l._index[_e]=m=new en,p.push([_e,he,m])):m=new fs(new R(E.FILE,-1,365)),$&&($._ls[ie]=m)}}return l},Mn.prototype.fileIterator=function(d){var l=this;for(var u in l._index)if(l._index.hasOwnProperty(u))for(var p=l._index[u],m=0,I=p.getListing();m<I.length;m+=1){var N=I[m],F=p.getItem(N);fo(F)&&d(F.getData())}},Mn.prototype.addPath=function(d,l){if(!l)throw new Error("Inode must be specified");if(d[0]!=="/")throw new Error("Path must be absolute, got: "+d);if(this._index.hasOwnProperty(d))return this._index[d]===l;var u=this._split_path(d),p=u[0],m=u[1],I=this._index[p];return!(I===void 0&&d!=="/"&&(I=new en,!this.addPath(p,I))||d!=="/"&&!I.addItem(m,l)||(jo(l)&&(this._index[d]=l),0))},Mn.prototype.addPathFast=function(d,l){var u=d.lastIndexOf("/"),p=u===0?"/":d.substring(0,u),m=d.substring(u+1),I=this._index[p];return I===void 0&&(I=new en,this.addPathFast(p,I)),!!I.addItem(m,l)&&(l.isDir()&&(this._index[d]=l),!0)},Mn.prototype.removePath=function(d){var l=this._split_path(d),u=l[0],p=l[1],m=this._index[u];if(m===void 0)return null;var I=m.remItem(p);if(I===null)return null;if(jo(I)){for(var N=0,F=I.getListing();N<F.length;N+=1){var $=F[N];this.removePath(d+"/"+$)}d!=="/"&&delete this._index[d]}return I},Mn.prototype.ls=function(d){var l=this._index[d];return l===void 0?null:l.getListing()},Mn.prototype.getInode=function(d){var l=this._split_path(d),u=l[0],p=l[1],m=this._index[u];return m===void 0?null:u===d?m:m.getItem(p)},Mn.prototype._split_path=function(d){var l=f.dirname(d);return[l,d.substr(l.length+(l==="/"?0:1))]};var fs=function(d){this.data=d};fs.prototype.isFile=function(){return!0},fs.prototype.isDir=function(){return!1},fs.prototype.getData=function(){return this.data},fs.prototype.setData=function(d){this.data=d};var en=function(d){d===void 0&&(d=null),this.data=d,this._ls={}};function fo(d){return!!d&&d.isFile()}function jo(d){return!!d&&d.isDir()}en.prototype.isFile=function(){return!1},en.prototype.isDir=function(){return!0},en.prototype.getData=function(){return this.data},en.prototype.getStats=function(){return new R(E.DIRECTORY,4096,365)},en.prototype.getListing=function(){return Object.keys(this._ls)},en.prototype.getItem=function(d){var l=this._ls[d];return l||null},en.prototype.addItem=function(d,l){return!(d in this._ls)&&(this._ls[d]=l,!0)},en.prototype.remItem=function(d){var l=this._ls[d];return l===void 0?null:(delete this._ls[d],l)};var ol=function(d){function l(u,p,m){p===void 0&&(p=""),m===void 0&&(m=!0),d.call(this),u||(u="index.json"),p.length>0&&p.charAt(p.length-1)!=="/"&&(p+="/"),this.prefixUrl=p;var I=null;if(typeof u=="string"){if(!(I=this._requestFileSync(u,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else I=u;A(m,l.Name,{index:typeof u=="string"?u:"file index as an object",baseUrl:p}),this._index=Mn.fromListing(I)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){u.index===void 0&&(u.index="index.json"),typeof u.index=="string"?l.FromURL(u.index,p,u.baseUrl,!1):p(null,new l(u.index,u.baseUrl,!1))},l.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},l.FromURL=function(u,p,m,I){m===void 0&&(m=u.slice(0,u.lastIndexOf("/")+1)),I===void 0&&(I=!0),I&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+u+'", baseUrl: "'+m+`" }, cb)' instead.`),ty(u,"json",function(N,F){N?p(N):p(null,new l(F,m,!1))})},l.prototype.empty=function(){this._index.fileIterator(function(u){u.fileData=null})},l.prototype.getName=function(){return l.Name},l.prototype.diskSpace=function(u,p){p(0,0)},l.prototype.isReadOnly=function(){return!0},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.preloadFile=function(u,p){var m=this._index.getInode(u);if(!fo(m))throw g.EISDIR(u);if(m===null)throw g.ENOENT(u);var I=m.getData();I.size=p.length,I.fileData=p},l.prototype.stat=function(u,p,m){var I,N=this._index.getInode(u);if(N===null)return m(g.ENOENT(u));fo(N)?(I=N.getData()).size<0?this._requestFileSizeAsync(u,function(F,$){if(F)return m(F);I.size=$,m(null,I.clone())}):m(null,I.clone()):jo(N)?(I=N.getStats(),m(null,I)):m(g.FileError(s.EINVAL,u))},l.prototype.statSync=function(u,p){var m,I=this._index.getInode(u);if(I===null)throw g.ENOENT(u);if(fo(I))(m=I.getData()).size<0&&(m.size=this._requestFileSizeSync(u));else{if(!jo(I))throw g.FileError(s.EINVAL,u);m=I.getStats()}return m},l.prototype.open=function(u,p,m,I){if(p.isWriteable())return I(new g(s.EPERM,u));var N=this,F=this._index.getInode(u);if(F===null)return I(g.ENOENT(u));if(!fo(F))return I(g.EISDIR(u));var $=F.getData();switch(p.pathExistsAction()){case y.THROW_EXCEPTION:case y.TRUNCATE_FILE:return I(g.EEXIST(u));case y.NOP:if($.fileData)return I(null,new re(N,u,p,$.clone(),$.fileData));this._requestFileAsync(u,"buffer",function(ie,he){return ie?I(ie):($.size=he.length,$.fileData=he,I(null,new re(N,u,p,$.clone(),he)))});break;default:return I(new g(s.EINVAL,"Invalid FileMode object."))}},l.prototype.openSync=function(u,p,m){if(p.isWriteable())throw new g(s.EPERM,u);var I=this._index.getInode(u);if(I===null)throw g.ENOENT(u);if(!fo(I))throw g.EISDIR(u);var N=I.getData();switch(p.pathExistsAction()){case y.THROW_EXCEPTION:case y.TRUNCATE_FILE:throw g.EEXIST(u);case y.NOP:if(N.fileData)return new re(this,u,p,N.clone(),N.fileData);var F=this._requestFileSync(u,"buffer");return N.size=F.length,N.fileData=F,new re(this,u,p,N.clone(),F);default:throw new g(s.EINVAL,"Invalid FileMode object.")}},l.prototype.readdir=function(u,p){try{p(null,this.readdirSync(u))}catch(m){p(m)}},l.prototype.readdirSync=function(u){var p=this._index.getInode(u);if(p===null)throw g.ENOENT(u);if(jo(p))return p.getListing();throw g.ENOTDIR(u)},l.prototype.readFile=function(u,p,m,I){var N=I;this.open(u,m,420,function(F,$){if(F)return I(F);I=function(he,_e){$.close(function(Ae){return he||(he=Ae),N(he,_e)})};var ie=$.getBuffer();p===null?I(F,ge(ie)):function(he,_e,Ae){try{Ae(null,he.toString(_e))}catch(De){Ae(De)}}(ie,p,I)})},l.prototype.readFileSync=function(u,p,m){var I=this.openSync(u,m,420);try{var N=I.getBuffer();return p===null?ge(N):N.toString(p)}finally{I.closeSync()}},l.prototype.getXhrPath=function(u){return u.charAt(0)==="/"&&(u=u.slice(1)),this.prefixUrl+u},l.prototype._requestFileAsync=function(u,p,m){ty(this.getXhrPath(u),p,m)},l.prototype._requestFileSync=function(u,p){return P6(this.getXhrPath(u),p)},l.prototype._requestFileSizeAsync=function(u,p){(function(m,I){ey(!0,m,I)})(this.getXhrPath(u),p)},l.prototype._requestFileSizeSync=function(u){return function(p){var m=-1;return ey(!1,p,function(I,N){if(I)throw I;m=N}),m}(this.getXhrPath(u))},l}(K);ol.Name="XmlHttpRequest",ol.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ba=function(){};ba.str2byte=function(d,l){for(var u=d.length>l.length?l.length:d.length,p=0;p<u;p++){var m=d.charCodeAt(p);if(m>127){var I=ba.extendedChars.indexOf(d.charAt(p));I>-1&&(m=I+128)}l[m]=p}return u},ba.byte2str=function(d){for(var l=new Array(d.length),u=0;u<d.length;u++){var p=d[u];l[u]=p>127?ba.extendedChars[p-128]:String.fromCharCode(p)}return l.join("")},ba.byteLength=function(d){return d.length},ba.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var ry,hs,R6=r(31).inflateRaw,ny={};function iy(d,l){return new Date(1980+(l>>9),(l>>5&15)-1,31&l,d>>11,d>>5&63,31&d)}function al(d,l,u,p){return p===0?"":l?d.toString("utf8",u,u+p):ba.byte2str(d.slice(u,u+p))}(function(d){d[d.MSDOS=0]="MSDOS",d[d.AMIGA=1]="AMIGA",d[d.OPENVMS=2]="OPENVMS",d[d.UNIX=3]="UNIX",d[d.VM_CMS=4]="VM_CMS",d[d.ATARI_ST=5]="ATARI_ST",d[d.OS2_HPFS=6]="OS2_HPFS",d[d.MAC=7]="MAC",d[d.Z_SYSTEM=8]="Z_SYSTEM",d[d.CP_M=9]="CP_M",d[d.NTFS=10]="NTFS",d[d.MVS=11]="MVS",d[d.VSE=12]="VSE",d[d.ACORN_RISC=13]="ACORN_RISC",d[d.VFAT=14]="VFAT",d[d.ALT_MVS=15]="ALT_MVS",d[d.BEOS=16]="BEOS",d[d.TANDEM=17]="TANDEM",d[d.OS_400=18]="OS_400",d[d.OSX=19]="OSX"})(ry||(ry={})),function(d){d[d.STORED=0]="STORED",d[d.SHRUNK=1]="SHRUNK",d[d.REDUCED_1=2]="REDUCED_1",d[d.REDUCED_2=3]="REDUCED_2",d[d.REDUCED_3=4]="REDUCED_3",d[d.REDUCED_4=5]="REDUCED_4",d[d.IMPLODE=6]="IMPLODE",d[d.DEFLATE=8]="DEFLATE",d[d.DEFLATE64=9]="DEFLATE64",d[d.TERSE_OLD=10]="TERSE_OLD",d[d.BZIP2=12]="BZIP2",d[d.LZMA=14]="LZMA",d[d.TERSE_NEW=18]="TERSE_NEW",d[d.LZ77=19]="LZ77",d[d.WAVPACK=97]="WAVPACK",d[d.PPMD=98]="PPMD"}(hs||(hs={}));var gn=function(d){if(this.data=d,d.readUInt32LE(0)!==67324752)throw new g(s.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};gn.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},gn.prototype.flags=function(){return this.data.readUInt16LE(6)},gn.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},gn.prototype.lastModFileTime=function(){return iy(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},gn.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},gn.prototype.crc32=function(){return this.data.readUInt32LE(14)},gn.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},gn.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},gn.prototype.fileName=function(){return al(this.data,this.useUTF8(),30,this.fileNameLength())},gn.prototype.extraField=function(){var d=30+this.fileNameLength();return this.data.slice(d,d+this.extraFieldLength())},gn.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},gn.prototype.useUTF8=function(){return(2048&this.flags())==2048};var Ru=function(d,l,u){this.header=d,this.record=l,this.data=u};Ru.prototype.decompress=function(){var d=this.header.compressionMethod(),l=ny[d];if(l)return l(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var u=hs[d];throw u||(u="Unknown: "+d),new g(s.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+u)},Ru.prototype.getHeader=function(){return this.header},Ru.prototype.getRecord=function(){return this.record},Ru.prototype.getRawData=function(){return this.data};var ut=function(d,l){if(this.zipData=d,this.data=l,this.data.readUInt32LE(0)!==33639248)throw new g(s.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};ut.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},ut.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},ut.prototype.flag=function(){return this.data.readUInt16LE(8)},ut.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},ut.prototype.lastModFileTime=function(){return iy(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},ut.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},ut.prototype.crc32=function(){return this.data.readUInt32LE(16)},ut.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},ut.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},ut.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},ut.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},ut.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},ut.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},ut.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},ut.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},ut.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},ut.prototype.produceFilename=function(){return al(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},ut.prototype.fileName=function(){return this._filename},ut.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},ut.prototype.extraField=function(){var d=44+this.fileNameLength();return this.data.slice(d,d+this.extraFieldLength())},ut.prototype.fileComment=function(){var d=46+this.fileNameLength()+this.extraFieldLength();return al(this.data,this.useUTF8(),d,this.fileCommentLength())},ut.prototype.rawFileComment=function(){var d=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(d,d+this.fileCommentLength())},ut.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},ut.prototype.isDirectory=function(){var d=this.fileName();return!!(16&this.externalAttributes())||d.charAt(d.length-1)==="/"},ut.prototype.isFile=function(){return!this.isDirectory()},ut.prototype.useUTF8=function(){return(2048&this.flag())==2048},ut.prototype.isEncrypted=function(){return(1&this.flag())==1},ut.prototype.getFileData=function(){var d=this.headerRelativeOffset(),l=new gn(this.zipData.slice(d));return new Ru(l,this,this.zipData.slice(d+l.totalSize()))},ut.prototype.getData=function(){return this.getFileData().decompress()},ut.prototype.getRawData=function(){return this.getFileData().getRawData()},ut.prototype.getStats=function(){return new R(E.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Mi=function(d){if(this.data=d,this.data.readUInt32LE(0)!==101010256)throw new g(s.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Mi.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Mi.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Mi.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Mi.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Mi.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Mi.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Mi.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Mi.prototype.cdZipComment=function(){return al(this.data,!0,22,this.cdZipCommentLength())},Mi.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var oy=function(d,l,u,p){this.index=d,this.directoryEntries=l,this.eocd=u,this.data=p},va=function(d){function l(u,p,m){p===void 0&&(p=""),m===void 0&&(m=!0),d.call(this),this.name=p,this._index=new Mn,this._directoryEntries=[],this._eocd=null,A(m,l.Name,{zipData:"zip data as a Buffer",name:p}),u instanceof oy?(this._index=u.index,this._directoryEntries=u.directoryEntries,this._eocd=u.eocd,this.data=u.data):(this.data=u,this.populateIndex())}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){try{l.computeIndex(u.zipData,function(m){var I=new l(m,u.name,!1);p(null,I)},!1)}catch(m){p(m)}},l.isAvailable=function(){return!0},l.RegisterDecompressionMethod=function(u,p){ny[u]=p},l.computeIndex=function(u,p,m){m===void 0&&(m=!0),m&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var I=new Mn,N=l.getEOCD(u);if(N.diskNumber()!==N.cdDiskNumber())throw new g(s.EINVAL,"ZipFS does not support spanned zip files.");var F=N.cdOffset();if(F===4294967295)throw new g(s.EINVAL,"ZipFS does not support Zip64.");var $=F+N.cdSize();l.computeIndexResponsive(u,I,F,$,p,[],N)},l.getEOCD=function(u){for(var p=Math.min(65557,u.length-1),m=22;m<p;m++)if(u.readUInt32LE(u.length-m)===101010256)return new Mi(u.slice(u.length-m));throw new g(s.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},l.addToIndex=function(u,p){var m=u.fileName();if(m.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");m.charAt(m.length-1)==="/"&&(m=m.substr(0,m.length-1)),u.isDirectory()?p.addPathFast("/"+m,new en(u)):p.addPathFast("/"+m,new fs(u))},l.computeIndexResponsive=function(u,p,m,I,N,F,$){if(m<I){for(var ie=0;ie++<200&&m<I;){var he=new ut(u,u.slice(m));l.addToIndex(he,p),m+=he.totalSize(),F.push(he)}Ch(function(){l.computeIndexResponsive(u,p,m,I,N,F,$)})}else N(new oy(p,F,$,u))},l.prototype.getName=function(){return l.Name+(this.name!==""?" "+this.name:"")},l.prototype.getCentralDirectoryEntry=function(u){var p=this._index.getInode(u);if(p===null)throw g.ENOENT(u);if(fo(p)||jo(p))return p.getData();throw g.EPERM("Invalid inode: "+p)},l.prototype.getCentralDirectoryEntryAt=function(u){var p=this._directoryEntries[u];if(!p)throw new RangeError("Invalid directory index: "+u+".");return p},l.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},l.prototype.getEndOfCentralDirectory=function(){return this._eocd},l.prototype.diskSpace=function(u,p){p(this.data.length,0)},l.prototype.isReadOnly=function(){return!0},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.statSync=function(u,p){var m,I=this._index.getInode(u);if(I===null)throw g.ENOENT(u);if(fo(I))m=I.getData().getStats();else{if(!jo(I))throw new g(s.EINVAL,"Invalid inode.");m=I.getStats()}return m},l.prototype.openSync=function(u,p,m){if(p.isWriteable())throw new g(s.EPERM,u);var I=this._index.getInode(u);if(!I)throw g.ENOENT(u);if(!fo(I))throw g.EISDIR(u);var N=I.getData(),F=N.getStats();switch(p.pathExistsAction()){case y.THROW_EXCEPTION:case y.TRUNCATE_FILE:throw g.EEXIST(u);case y.NOP:return new re(this,u,p,F,N.getData());default:throw new g(s.EINVAL,"Invalid FileMode object.")}},l.prototype.readdirSync=function(u){var p=this._index.getInode(u);if(p){if(jo(p))return p.getListing();throw g.ENOTDIR(u)}throw g.ENOENT(u)},l.prototype.readFileSync=function(u,p,m){var I=this.openSync(u,m,420);try{var N=I.getBuffer();return p===null?ge(N):N.toString(p)}finally{I.closeSync()}},l.prototype.populateIndex=function(){var u=this,p=this._eocd=l.getEOCD(this.data);if(p.diskNumber()!==p.cdDiskNumber())throw new g(s.EINVAL,"ZipFS does not support spanned zip files.");var m=p.cdOffset();if(m===4294967295)throw new g(s.EINVAL,"ZipFS does not support Zip64.");for(var I=m+p.cdSize();m<I;){var N=new ut(u.data,u.data.slice(m));m+=N.totalSize(),l.addToIndex(N,u._index),u._directoryEntries.push(N)}},l}(ee);function tn(d,l,u){return d.toString("ascii",l,l+u).trim()}function Nh(d,l,u){if(u===1)return String.fromCharCode(d[l]);for(var p=Math.floor(u/2),m=new Array(p),I=0;I<p;I++){var N=l+(I<<1);m[I]=String.fromCharCode(d[N+1]|d[N]<<8)}return m.join("")}function Ni(d,l){var u=parseInt(tn(d,l,4),10),p=parseInt(tn(d,l+4,2),10),m=parseInt(tn(d,l+6,2),10),I=parseInt(tn(d,l+8,2),10),N=parseInt(tn(d,l+10,2),10),F=parseInt(tn(d,l+12,2),10),$=parseInt(tn(d,l+14,2),10);return new Date(u,p,m,I,N,F,100*$)}function wa(d,l){var u=d[l],p=d[l+1],m=d[l+2],I=d[l+3],N=d[l+4],F=d[l+5];return new Date(u,p-1,m,I,N,F)}function C6(d,l){var u=d.slice(l),p=new ir(u);switch(p.signatureWord()){case 17221:return new ly(u);case 20548:return new j6(u);case 21328:return new fy(u);case 21332:return new hy(u);case 17746:return new dy(u);case 17747:return new B6(u);case 20568:return new yy(u);case 20558:return new L6(u);case 21324:return new jh(u);case 20045:return new gy(u);case 17228:return new Bh(u);case 20556:return new F6(u);case 21061:return new my(u);case 21574:return new by(u);case 21318:return new U6(u);case 21074:return new py(u);default:return p}}function ay(d,l,u,p){u-=4;for(var m=new Array;l<u;){var I=C6(d,l),N=I.length();if(N===0)return m;if(l+=N,I instanceof hy)break;I instanceof ly?m=m.concat(I.getEntries(p)):m.push(I)}return m}va.Name="ZipFS",va.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:j},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},va.CompressionMethod=hs,va.RegisterDecompressionMethod(hs.DEFLATE,function(d,l,u){return fe(R6(d.slice(0,l),{chunkSize:u}))}),va.RegisterDecompressionMethod(hs.STORED,function(d,l,u){return ge(d,0,u)});var ds=function(d){this._data=d};ds.prototype.type=function(){return this._data[0]},ds.prototype.standardIdentifier=function(){return tn(this._data,1,5)},ds.prototype.version=function(){return this._data[6]},ds.prototype.data=function(){return this._data.slice(7,2048)};var sy=function(d){function l(u){d.call(this,u),this._root=null}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.systemIdentifier=function(){return this._getString32(8)},l.prototype.volumeIdentifier=function(){return this._getString32(40)},l.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},l.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},l.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},l.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},l.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},l.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},l.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},l.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},l.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},l.prototype.rootDirectoryEntry=function(u){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(u)),this._root},l.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},l.prototype.publisherIdentifier=function(){return this._getString(318,128)},l.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},l.prototype.applicationIdentifier=function(){return this._getString(574,128)},l.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},l.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},l.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},l.prototype.volumeCreationDate=function(){return Ni(this._data,813)},l.prototype.volumeModificationDate=function(){return Ni(this._data,830)},l.prototype.volumeExpirationDate=function(){return Ni(this._data,847)},l.prototype.volumeEffectiveDate=function(){return Ni(this._data,864)},l.prototype.fileStructureVersion=function(){return this._data[881]},l.prototype.applicationUsed=function(){return this._data.slice(883,1395)},l.prototype.reserved=function(){return this._data.slice(1395,2048)},l.prototype._getString32=function(u){return this._getString(u,32)},l}(ds),M6=function(d){function l(u){if(d.call(this,u),this.type()!==1)throw new g(s.EIO,"Invalid primary volume descriptor.")}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.name=function(){return"ISO9660"},l.prototype._constructRootDirectoryRecord=function(u){return new uy(u,-1)},l.prototype._getString=function(u,p){return this._getString(u,p)},l}(sy),N6=function(d){function l(u){if(d.call(this,u),this.type()!==2)throw new g(s.EIO,"Invalid supplementary volume descriptor.");var p=this.escapeSequence(),m=p[2];if(p[0]!==37||p[1]!==47||m!==64&&m!==67&&m!==69)throw new g(s.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+p.toString())}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.name=function(){return"Joliet"},l.prototype.escapeSequence=function(){return this._data.slice(88,120)},l.prototype._constructRootDirectoryRecord=function(u){return new cy(u,-1)},l.prototype._getString=function(u,p){return Nh(this._data,u,p)},l}(sy),zt=function(d,l){this._suEntries=null,this._fileOrDir=null,this._data=d,this._rockRidgeOffset=l};zt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},zt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},zt.prototype.rootCheckForRockRidge=function(d){var l=this.getDirectory(d);this._rockRidgeOffset=l.getDotEntry(d)._getRockRidgeOffset(d),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},zt.prototype.length=function(){return this._data[0]},zt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},zt.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},zt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},zt.prototype.recordingDate=function(){return wa(this._data,18)},zt.prototype.fileFlags=function(){return this._data[25]},zt.prototype.fileUnitSize=function(){return this._data[26]},zt.prototype.interleaveGapSize=function(){return this._data[27]},zt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},zt.prototype.identifier=function(){return this._getString(33,this._data[32])},zt.prototype.fileName=function(d){if(this.hasRockRidge()){var l=this._rockRidgeFilename(d);if(l!==null)return l}var u=this.identifier();if(this.isDirectory(d))return u;var p=u.indexOf(";");return p===-1?u:u[p-1]==="."?u.slice(0,p-1):u.slice(0,p)},zt.prototype.isDirectory=function(d){var l=!!(2&this.fileFlags());return!l&&this.hasRockRidge()&&(l=this.getSUEntries(d).filter(function(u){return u instanceof Bh}).length>0),l},zt.prototype.isSymlink=function(d){return this.hasRockRidge()&&this.getSUEntries(d).filter(function(l){return l instanceof jh}).length>0},zt.prototype.getSymlinkPath=function(d){for(var l="",u=this.getSUEntries(d),p=this._getGetString(),m=0,I=u;m<I.length;m+=1){var N=I[m];if(N instanceof jh){for(var F=0,$=N.componentRecords();F<$.length;F+=1){var ie=$[F],he=ie.flags();2&he?l+="./":4&he?l+="../":8&he?l+="/":(l+=ie.content(p),1&he||(l+="/"))}if(!N.continueFlag())break}}return l.length>1&&l[l.length-1]==="/"?l.slice(0,l.length-1):l},zt.prototype.getFile=function(d){if(this.isDirectory(d))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=d.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},zt.prototype.getDirectory=function(d){if(!this.isDirectory(d))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(d)),this._fileOrDir},zt.prototype.getSUEntries=function(d){return this._suEntries||this._constructSUEntries(d),this._suEntries},zt.prototype._rockRidgeFilename=function(d){var l=this.getSUEntries(d).filter(function(F){return F instanceof gy});if(l.length===0||6&l[0].flags())return null;for(var u="",p=this._getGetString(),m=0,I=l;m<I.length;m+=1){var N=I[m];if(u+=N.name(p),!(1&N.flags()))break}return u},zt.prototype._constructSUEntries=function(d){var l=33+this._data[32];l%2==1&&l++,l+=this._rockRidgeOffset,this._suEntries=ay(this._data,l,this.length(),d)},zt.prototype._getRockRidgeOffset=function(d){this._rockRidgeOffset=0;var l=this.getSUEntries(d);if(l.length>0){var u=l[0];if(u instanceof fy&&u.checkBytesPass())for(var p=1;p<l.length;p++){var m=l[p];if(m instanceof py||m instanceof dy&&m.extensionIdentifier()==="IEEE_P1282")return u.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var uy=function(d){function l(u,p){d.call(this,u,p)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype._getString=function(u,p){return tn(this._data,u,p)},l.prototype._constructDirectory=function(u){return new z6(this,u)},l.prototype._getGetString=function(){return tn},l}(zt),cy=function(d){function l(u,p){d.call(this,u,p)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype._getString=function(u,p){return Nh(this._data,u,p)},l.prototype._constructDirectory=function(u){return new K6(this,u)},l.prototype._getGetString=function(){return Nh},l}(zt),ir=function(d){this._data=d};ir.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},ir.prototype.signatureWordString=function(){return tn(this._data,0,2)},ir.prototype.length=function(){return this._data[2]},ir.prototype.suVersion=function(){return this._data[3]};var ly=function(d){function l(u){d.call(this,u),this._entries=null}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},l.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},l.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},l.prototype.getEntries=function(u){if(!this._entries){var p=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=ay(u,p,this.continuationLength(),u)}return this._entries},l}(ir),j6=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l}(ir),fy=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},l.prototype.bytesSkipped=function(){return this._data[6]},l}(ir),hy=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l}(ir),dy=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.identifierLength=function(){return this._data[4]},l.prototype.descriptorLength=function(){return this._data[5]},l.prototype.sourceLength=function(){return this._data[6]},l.prototype.extensionVersion=function(){return this._data[7]},l.prototype.extensionIdentifier=function(){return tn(this._data,8,this.identifierLength())},l.prototype.extensionDescriptor=function(){return tn(this._data,8+this.identifierLength(),this.descriptorLength())},l.prototype.extensionSource=function(){return tn(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},l}(ir),B6=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.extensionSequence=function(){return this._data[4]},l}(ir),py=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l}(ir),yy=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.mode=function(){return this._data.readUInt32LE(4)},l.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},l.prototype.uid=function(){return this._data.readUInt32LE(20)},l.prototype.gid=function(){return this._data.readUInt32LE(28)},l.prototype.inode=function(){return this._data.readUInt32LE(36)},l}(ir),L6=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},l.prototype.devTLow=function(){return this._data.readUInt32LE(12)},l}(ir),jh=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.flags=function(){return this._data[4]},l.prototype.continueFlag=function(){return 1&this.flags()},l.prototype.componentRecords=function(){for(var u=new Array,p=5;p<this.length();){var m=new Cu(this._data.slice(p));u.push(m),p+=m.length()}return u},l}(ir),Cu=function(d){this._data=d};Cu.prototype.flags=function(){return this._data[0]},Cu.prototype.length=function(){return 2+this.componentLength()},Cu.prototype.componentLength=function(){return this._data[1]},Cu.prototype.content=function(d){return d(this._data,2,this.componentLength())};var gy=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.flags=function(){return this._data[4]},l.prototype.name=function(u){return u(this._data,5,this.length()-5)},l}(ir),Bh=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},l}(ir),F6=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},l}(ir),my=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l}(ir),by=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.flags=function(){return this._data[4]},l.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?Ni(this._data,5):wa(this._data,5):null},l.prototype.modify=function(){if(2&this.flags()){var u=1&this.flags()?1:0;return this._longFormDates?Ni(this._data,5+17*u):wa(this._data,5+7*u)}return null},l.prototype.access=function(){if(4&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,this._longFormDates?Ni(this._data,5+17*u):wa(this._data,5+7*u)}return null},l.prototype.backup=function(){if(16&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,this._longFormDates?Ni(this._data,5+17*u):wa(this._data,5+7*u)}return null},l.prototype.expiration=function(){if(32&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,this._longFormDates?Ni(this._data,5+17*u):wa(this._data,5+7*u)}return null},l.prototype.effective=function(){if(64&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,u+=32&this.flags()?1:0,this._longFormDates?Ni(this._data,5+17*u):wa(this._data,5+7*u)}return null},l.prototype._longFormDates=function(){return!!this.flags()},l}(ir),U6=function(d){function l(u){d.call(this,u)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},l.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},l.prototype.tableDepth=function(){return this._data[20]},l}(ir),Mu=function(d,l){var u=this;this._fileList=[],this._fileMap={},this._record=d;var p=d.lba(),m=p+d.dataLength();for(2&d.fileFlags()||(p=2048*d.getSUEntries(l).filter(function(F){return F instanceof Bh})[0].childDirectoryLba(),m=1/0);p<m;)if(l[p]!==0){var I=u._constructDirectoryRecord(l.slice(p)),N=I.fileName(l);N!=="\0"&&N!==""?I.hasRockRidge()&&I.getSUEntries(l).filter(function(F){return F instanceof my}).length!==0||(u._fileMap[N]=I,u._fileList.push(N)):m===1/0&&(m=p+I.dataLength()),p+=I.length()}else p++};Mu.prototype.getRecord=function(d){return this._fileMap[d]},Mu.prototype.getFileList=function(){return this._fileList},Mu.prototype.getDotEntry=function(d){return this._constructDirectoryRecord(d.slice(this._record.lba()))};var z6=function(d){function l(u,p){d.call(this,u,p)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype._constructDirectoryRecord=function(u){return new uy(u,this._record.getRockRidgeOffset())},l}(Mu),K6=function(d){function l(u,p){d.call(this,u,p)}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype._constructDirectoryRecord=function(u){return new cy(u,this._record.getRockRidgeOffset())},l}(Mu),sl=function(d){function l(u,p,m){var I=this;p===void 0&&(p=""),m===void 0&&(m=!0),d.call(this),this._data=u,A(m,l.Name,{data:"ISO data as a Buffer",name:p});for(var N=!1,F=32768,$=new Array;!N;){var ie=u.slice(F);switch(new ds(ie).type()){case 1:$.push(new M6(ie));break;case 2:$.push(new N6(ie));break;case 255:N=!0}F+=2048}if($.length===0)throw new g(s.EIO,"Unable to find a suitable volume descriptor.");$.forEach(function(he){I._pvd&&I._pvd.type()===2||(I._pvd=he)}),this._root=this._pvd.rootDirectoryEntry(u),this._name=p}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.Create=function(u,p){var m;try{m=new l(u.data,u.name,!1)}catch(I){I=I}finally{p(void 0,m)}},l.isAvailable=function(){return!0},l.prototype.getName=function(){var u="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(u+="-RockRidge"),u},l.prototype.diskSpace=function(u,p){p(this._data.length,0)},l.prototype.isReadOnly=function(){return!0},l.prototype.supportsLinks=function(){return!1},l.prototype.supportsProps=function(){return!1},l.prototype.supportsSynch=function(){return!0},l.prototype.statSync=function(u,p){var m=this._getDirectoryRecord(u);if(m===null)throw g.ENOENT(u);return this._getStats(u,m)},l.prototype.openSync=function(u,p,m){if(p.isWriteable())throw new g(s.EPERM,u);var I=this._getDirectoryRecord(u);if(!I)throw g.ENOENT(u);if(I.isSymlink(this._data))return this.openSync(f.resolve(u,I.getSymlinkPath(this._data)),p,m);if(I.isDirectory(this._data))throw g.EISDIR(u);var N=I.getFile(this._data),F=this._getStats(u,I);switch(p.pathExistsAction()){case y.THROW_EXCEPTION:case y.TRUNCATE_FILE:throw g.EEXIST(u);case y.NOP:return new re(this,u,p,F,N);default:throw new g(s.EINVAL,"Invalid FileMode object.")}},l.prototype.readdirSync=function(u){var p=this._getDirectoryRecord(u);if(p){if(p.isDirectory(this._data))return p.getDirectory(this._data).getFileList().slice(0);throw g.ENOTDIR(u)}throw g.ENOENT(u)},l.prototype.readFileSync=function(u,p,m){var I=this.openSync(u,m,420);try{var N=I.getBuffer();return p===null?ge(N):N.toString(p)}finally{I.closeSync()}},l.prototype._getDirectoryRecord=function(u){if(u==="/")return this._root;for(var p=u.split("/").slice(1),m=this._root,I=0,N=p;I<N.length;I+=1){var F=N[I];if(!m.isDirectory(this._data)||!(m=m.getDirectory(this._data).getRecord(F)))return null}return m},l.prototype._getStats=function(u,p){if(p.isSymlink(this._data)){var m=f.resolve(u,p.getSymlinkPath(this._data)),I=this._getDirectoryRecord(m);return I?this._getStats(m,I):null}var N=p.dataLength(),F=365,$=p.recordingDate(),ie=$,he=$,_e=$;if(p.hasRockRidge())for(var Ae=0,De=p.getSUEntries(this._data);Ae<De.length;Ae+=1){var Te=De[Ae];if(Te instanceof yy)F=Te.mode();else if(Te instanceof by){var ze=Te.flags();4&ze&&(ie=Te.access()),2&ze&&(he=Te.modify()),1&ze&&(_e=Te.creation())}}return F&=365,new R(p.isDirectory(this._data)?E.DIRECTORY:E.FILE,N,F,ie,he,_e)},l}(ee);sl.Name="IsoFS",sl.Options={data:{type:"object",description:"The ISO file in a buffer",validator:j}},[pe,dr,da,Le,Qr,us,ku,sl,xu,cs,Pu,il,ol,va].forEach(function(d){var l=d.Create;d.Create=function(u,p){var m=typeof u=="function",I=m?u:p,N=m?{}:u;S(d,N,function(F){F?I(F):l.call(d,N,I)})}});var vy,ul={AsyncMirror:pe,Dropbox:dr,Emscripten:da,FolderAdapter:Le,HTML5FS:Qr,InMemory:us,IndexedDB:ku,IsoFS:sl,LocalStorage:xu,MountableFileSystem:cs,OverlayFS:Pu,WorkerFS:il,XmlHttpRequest:ol,ZipFS:va};function wy(d){switch(d){case"fs":return v;case"path":return f;case"buffer":return c;case"process":return a;case"bfs_utils":return M;default:return ul[d]}}function _y(d){return v.initialize(d)}function Lh(d,l){var u=d.fs;if(!u)return l(new g(s.EPERM,'Missing "fs" property on configuration object.'));var p=d.options,m=0,I=!1;function N(){if(!I){I=!0;var $=ul[u];$?$.Create(p,l):l(new g(s.EPERM,"File system "+u+" is not available in BrowserFS."))}}if(p!==null&&typeof p=="object"){var F=!1;Object.keys(p).filter(function($){return $!=="fs"}).forEach(function($){var ie=p[$];ie!==null&&typeof ie=="object"&&ie.fs&&(m++,Lh(ie,function(he,_e){if(m--,he){if(I)return;I=!0,l(he)}else p[$]=_e,m===0&&F&&N()}))}),F=!0}m===0&&N()}a.initializeTTYs&&a.initializeTTYs(),"ab".substr(-1)!=="b"&&(String.prototype.substr=(vy=String.prototype.substr,function(d,l){return d<0&&(d=this.length+d),vy.call(this,d,l)})),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(d,l){return d===void 0&&(d=0),l===void 0&&(l=this.length),d<0&&(d=this.length+d)<0&&(d=0),l<0&&(l=this.length+l)<0&&(l=0),l<d&&(l=d),new Uint8Array(this.buffer,this.byteOffset+d,l-d)})),e.install=function(d){d.Buffer=n,d.process=a;var l=d.require?d.require:null;d.require=function(u){var p=wy(u);return p||l.apply(null,Array.prototype.slice.call(arguments,0))}},e.registerFileSystem=function(d,l){ul[d]=l},e.BFSRequire=wy,e.initialize=_y,e.configure=function(d,l){Lh(d,function(u,p){p?(_y(p),l()):l(u)})},e.getFileSystem=Lh,e.EmscriptenFS=x,e.FileSystem=ul,e.Errors=_,e.setImmediate=Ch}).call(e,r(1),function(){return this}(),r(5)(t),r(6))},function(t,e,r){t.exports=r(2).Buffer},function(t,e,r){(function(c){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */var i=r(3),o=r(4);e.Buffer=c,e.SlowBuffer=function(S){return+S!=S&&(S=0),c.alloc(+S)},e.INSPECT_MAX_BYTES=50;var a=2147483647;function s(S){if(S>a)throw new RangeError("Invalid typed array length");var M=new Uint8Array(S);return M.__proto__=c.prototype,M}function c(S,M,B){if(typeof S=="number"){if(typeof M=="string")throw new Error("If encoding is specified then the first argument must be a string");return y(S)}return f(S,M,B)}function f(S,M,B){if(typeof S=="number")throw new TypeError('"value" argument must not be a number');return me(S)?function(z,x,K){if(x<0||z.byteLength<x)throw new RangeError("'offset' is out of bounds");if(z.byteLength<x+(K||0))throw new RangeError("'length' is out of bounds");var ee;return(ee=x===void 0&&K===void 0?new Uint8Array(z):K===void 0?new Uint8Array(z,x):new Uint8Array(z,x,K)).__proto__=c.prototype,ee}(S,M,B):typeof S=="string"?function(z,x){if(typeof x=="string"&&x!==""||(x="utf8"),!c.isEncoding(x))throw new TypeError('"encoding" must be a valid string encoding');var K=0|E(z,x),ee=s(K),G=ee.write(z,x);return G!==K&&(ee=ee.slice(0,G)),ee}(S,M):function(z){if(c.isBuffer(z)){var x=0|_(z.length),K=s(x);return K.length===0||z.copy(K,0,0,x),K}if(z){if(C(z)||"length"in z)return typeof z.length!="number"||j(z.length)?s(0):g(z);if(z.type==="Buffer"&&Array.isArray(z.data))return g(z.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(S)}function h(S){if(typeof S!="number")throw new TypeError('"size" argument must be a number');if(S<0)throw new RangeError('"size" argument must not be negative')}function y(S){return h(S),s(S<0?0:0|_(S))}function g(S){for(var M=S.length<0?0:0|_(S.length),B=s(M),z=0;z<M;z+=1)B[z]=255&S[z];return B}function _(S){if(S>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|S}function E(S,M){if(c.isBuffer(S))return S.length;if(C(S)||me(S))return S.byteLength;typeof S!="string"&&(S=""+S);var B=S.length;if(B===0)return 0;for(var z=!1;;)switch(M){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":case void 0:return se(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*B;case"hex":return B>>>1;case"base64":return ue(S).length;default:if(z)return se(S).length;M=(""+M).toLowerCase(),z=!0}}function O(S,M,B){var z=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0)<=(M>>>=0))return"";for(S||(S="utf8");;)switch(S){case"hex":return A(this,M,B);case"utf8":case"utf-8":return v(this,M,B);case"ascii":return w(this,M,B);case"latin1":case"binary":return k(this,M,B);case"base64":return te(this,M,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,M,B);default:if(z)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),z=!0}}function R(S,M,B){var z=S[M];S[M]=S[B],S[B]=z}function L(S,M,B,z,x){if(S.length===0)return-1;if(typeof B=="string"?(z=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),j(B=+B)&&(B=x?0:S.length-1),B<0&&(B=S.length+B),B>=S.length){if(x)return-1;B=S.length-1}else if(B<0){if(!x)return-1;B=0}if(typeof M=="string"&&(M=c.from(M,z)),c.isBuffer(M))return M.length===0?-1:q(S,M,B,z,x);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(S,M,B):Uint8Array.prototype.lastIndexOf.call(S,M,B):q(S,[M],B,z,x);throw new TypeError("val must be string, number or Buffer")}function q(S,M,B,z,x){var K,ee=1,G=S.length,J=M.length;if(z!==void 0&&((z=String(z).toLowerCase())==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(S.length<2||M.length<2)return-1;ee=2,G/=2,J/=2,B/=2}function re(Ee,Ie){return ee===1?Ee[Ie]:Ee.readUInt16BE(Ie*ee)}if(x){var de=-1;for(K=B;K<G;K++)if(re(S,K)===re(M,de===-1?0:K-de)){if(de===-1&&(de=K),K-de+1===J)return de*ee}else de!==-1&&(K-=K-de),de=-1}else for(B+J>G&&(B=G-J),K=B;K>=0;K--){for(var pe=!0,ce=0;ce<J;ce++)if(re(S,K+ce)!==re(M,ce)){pe=!1;break}if(pe)return K}return-1}function X(S,M,B,z){B=Number(B)||0;var x=S.length-B;z?(z=Number(z))>x&&(z=x):z=x;var K=M.length;if(K%2!=0)throw new TypeError("Invalid hex string");z>K/2&&(z=K/2);for(var ee=0;ee<z;++ee){var G=parseInt(M.substr(2*ee,2),16);if(j(G))return ee;S[B+ee]=G}return ee}function ne(S,M,B,z){return ge(se(M,S.length-B),S,B,z)}function W(S,M,B,z){return ge(function(x){for(var K=[],ee=0;ee<x.length;++ee)K.push(255&x.charCodeAt(ee));return K}(M),S,B,z)}function H(S,M,B,z){return W(S,M,B,z)}function Y(S,M,B,z){return ge(ue(M),S,B,z)}function T(S,M,B,z){return ge(function(x,K){for(var ee,G,J,re=[],de=0;de<x.length&&!((K-=2)<0);++de)G=(ee=x.charCodeAt(de))>>8,J=ee%256,re.push(J),re.push(G);return re}(M,S.length-B),S,B,z)}function te(S,M,B){return M===0&&B===S.length?i.fromByteArray(S):i.fromByteArray(S.slice(M,B))}function v(S,M,B){B=Math.min(S.length,B);for(var z=[],x=M;x<B;){var K,ee,G,J,re=S[x],de=null,pe=re>239?4:re>223?3:re>191?2:1;if(x+pe<=B)switch(pe){case 1:re<128&&(de=re);break;case 2:(192&(K=S[x+1]))==128&&(J=(31&re)<<6|63&K)>127&&(de=J);break;case 3:K=S[x+1],ee=S[x+2],(192&K)==128&&(192&ee)==128&&(J=(15&re)<<12|(63&K)<<6|63&ee)>2047&&(J<55296||J>57343)&&(de=J);break;case 4:K=S[x+1],ee=S[x+2],G=S[x+3],(192&K)==128&&(192&ee)==128&&(192&G)==128&&(J=(15&re)<<18|(63&K)<<12|(63&ee)<<6|63&G)>65535&&J<1114112&&(de=J)}de===null?(de=65533,pe=1):de>65535&&(de-=65536,z.push(de>>>10&1023|55296),de=56320|1023&de),z.push(de),x+=pe}return function(ce){var Ee=ce.length;if(Ee<=D)return String.fromCharCode.apply(String,ce);for(var Ie="",we=0;we<Ee;)Ie+=String.fromCharCode.apply(String,ce.slice(we,we+=D));return Ie}(z)}e.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{var S=new Uint8Array(1);return S.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},S.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(S,M,B){return f(S,M,B)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(S,M,B){return function(z,x,K){return h(z),z<=0?s(z):x!==void 0?typeof K=="string"?s(z).fill(x,K):s(z).fill(x):s(z)}(S,M,B)},c.allocUnsafe=function(S){return y(S)},c.allocUnsafeSlow=function(S){return y(S)},c.isBuffer=function(S){return S!=null&&S._isBuffer===!0},c.compare=function(S,M){if(!c.isBuffer(S)||!c.isBuffer(M))throw new TypeError("Arguments must be Buffers");if(S===M)return 0;for(var B=S.length,z=M.length,x=0,K=Math.min(B,z);x<K;++x)if(S[x]!==M[x]){B=S[x],z=M[x];break}return B<z?-1:z<B?1:0},c.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(S,M){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return c.alloc(0);var B;if(M===void 0)for(M=0,B=0;B<S.length;++B)M+=S[B].length;var z=c.allocUnsafe(M),x=0;for(B=0;B<S.length;++B){var K=S[B];if(!c.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(z,x),x+=K.length}return z},c.byteLength=E,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var S=this.length;if(S%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<S;M+=2)R(this,M,M+1);return this},c.prototype.swap32=function(){var S=this.length;if(S%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<S;M+=4)R(this,M,M+3),R(this,M+1,M+2);return this},c.prototype.swap64=function(){var S=this.length;if(S%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<S;M+=8)R(this,M,M+7),R(this,M+1,M+6),R(this,M+2,M+5),R(this,M+3,M+4);return this},c.prototype.toString=function(){var S=this.length;return S===0?"":arguments.length===0?v(this,0,S):O.apply(this,arguments)},c.prototype.equals=function(S){if(!c.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S||c.compare(this,S)===0},c.prototype.inspect=function(){var S="",M=e.INSPECT_MAX_BYTES;return this.length>0&&(S=this.toString("hex",0,M).match(/.{2}/g).join(" "),this.length>M&&(S+=" ... ")),"<Buffer "+S+">"},c.prototype.compare=function(S,M,B,z,x){if(!c.isBuffer(S))throw new TypeError("Argument must be a Buffer");if(M===void 0&&(M=0),B===void 0&&(B=S?S.length:0),z===void 0&&(z=0),x===void 0&&(x=this.length),M<0||B>S.length||z<0||x>this.length)throw new RangeError("out of range index");if(z>=x&&M>=B)return 0;if(z>=x)return-1;if(M>=B)return 1;if(this===S)return 0;for(var K=(x>>>=0)-(z>>>=0),ee=(B>>>=0)-(M>>>=0),G=Math.min(K,ee),J=this.slice(z,x),re=S.slice(M,B),de=0;de<G;++de)if(J[de]!==re[de]){K=J[de],ee=re[de];break}return K<ee?-1:ee<K?1:0},c.prototype.includes=function(S,M,B){return this.indexOf(S,M,B)!==-1},c.prototype.indexOf=function(S,M,B){return L(this,S,M,B,!0)},c.prototype.lastIndexOf=function(S,M,B){return L(this,S,M,B,!1)},c.prototype.write=function(S,M,B,z){if(M===void 0)z="utf8",B=this.length,M=0;else if(B===void 0&&typeof M=="string")z=M,B=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(B)?(B>>>=0,z===void 0&&(z="utf8")):(z=B,B=void 0)}var x=this.length-M;if((B===void 0||B>x)&&(B=x),S.length>0&&(B<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var K=!1;;)switch(z){case"hex":return X(this,S,M,B);case"utf8":case"utf-8":return ne(this,S,M,B);case"ascii":return W(this,S,M,B);case"latin1":case"binary":return H(this,S,M,B);case"base64":return Y(this,S,M,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,S,M,B);default:if(K)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),K=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function w(S,M,B){var z="";B=Math.min(S.length,B);for(var x=M;x<B;++x)z+=String.fromCharCode(127&S[x]);return z}function k(S,M,B){var z="";B=Math.min(S.length,B);for(var x=M;x<B;++x)z+=String.fromCharCode(S[x]);return z}function A(S,M,B){var z,x=S.length;(!M||M<0)&&(M=0),(!B||B<0||B>x)&&(B=x);for(var K="",ee=M;ee<B;++ee)K+=(z=S[ee])<16?"0"+z.toString(16):z.toString(16);return K}function b(S,M,B){for(var z=S.slice(M,B),x="",K=0;K<z.length;K+=2)x+=String.fromCharCode(z[K]+256*z[K+1]);return x}function P(S,M,B){if(S%1!=0||S<0)throw new RangeError("offset is not uint");if(S+M>B)throw new RangeError("Trying to access beyond buffer length")}function V(S,M,B,z,x,K){if(!c.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>x||M<K)throw new RangeError('"value" argument is out of bounds');if(B+z>S.length)throw new RangeError("Index out of range")}function Q(S,M,B,z,x,K){if(B+z>S.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function U(S,M,B,z,x){return M=+M,B>>>=0,x||Q(S,0,B,4),o.write(S,M,B,z,23,4),B+4}function Z(S,M,B,z,x){return M=+M,B>>>=0,x||Q(S,0,B,8),o.write(S,M,B,z,52,8),B+8}c.prototype.slice=function(S,M){var B=this.length;(S=~~S)<0?(S+=B)<0&&(S=0):S>B&&(S=B),(M=M===void 0?B:~~M)<0?(M+=B)<0&&(M=0):M>B&&(M=B),M<S&&(M=S);var z=this.subarray(S,M);return z.__proto__=c.prototype,z},c.prototype.readUIntLE=function(S,M,B){S>>>=0,M>>>=0,B||P(S,M,this.length);for(var z=this[S],x=1,K=0;++K<M&&(x*=256);)z+=this[S+K]*x;return z},c.prototype.readUIntBE=function(S,M,B){S>>>=0,M>>>=0,B||P(S,M,this.length);for(var z=this[S+--M],x=1;M>0&&(x*=256);)z+=this[S+--M]*x;return z},c.prototype.readUInt8=function(S,M){return S>>>=0,M||P(S,1,this.length),this[S]},c.prototype.readUInt16LE=function(S,M){return S>>>=0,M||P(S,2,this.length),this[S]|this[S+1]<<8},c.prototype.readUInt16BE=function(S,M){return S>>>=0,M||P(S,2,this.length),this[S]<<8|this[S+1]},c.prototype.readUInt32LE=function(S,M){return S>>>=0,M||P(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+16777216*this[S+3]},c.prototype.readUInt32BE=function(S,M){return S>>>=0,M||P(S,4,this.length),16777216*this[S]+(this[S+1]<<16|this[S+2]<<8|this[S+3])},c.prototype.readIntLE=function(S,M,B){S>>>=0,M>>>=0,B||P(S,M,this.length);for(var z=this[S],x=1,K=0;++K<M&&(x*=256);)z+=this[S+K]*x;return z>=(x*=128)&&(z-=Math.pow(2,8*M)),z},c.prototype.readIntBE=function(S,M,B){S>>>=0,M>>>=0,B||P(S,M,this.length);for(var z=M,x=1,K=this[S+--z];z>0&&(x*=256);)K+=this[S+--z]*x;return K>=(x*=128)&&(K-=Math.pow(2,8*M)),K},c.prototype.readInt8=function(S,M){return S>>>=0,M||P(S,1,this.length),128&this[S]?-1*(255-this[S]+1):this[S]},c.prototype.readInt16LE=function(S,M){S>>>=0,M||P(S,2,this.length);var B=this[S]|this[S+1]<<8;return 32768&B?4294901760|B:B},c.prototype.readInt16BE=function(S,M){S>>>=0,M||P(S,2,this.length);var B=this[S+1]|this[S]<<8;return 32768&B?4294901760|B:B},c.prototype.readInt32LE=function(S,M){return S>>>=0,M||P(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},c.prototype.readInt32BE=function(S,M){return S>>>=0,M||P(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},c.prototype.readFloatLE=function(S,M){return S>>>=0,M||P(S,4,this.length),o.read(this,S,!0,23,4)},c.prototype.readFloatBE=function(S,M){return S>>>=0,M||P(S,4,this.length),o.read(this,S,!1,23,4)},c.prototype.readDoubleLE=function(S,M){return S>>>=0,M||P(S,8,this.length),o.read(this,S,!0,52,8)},c.prototype.readDoubleBE=function(S,M){return S>>>=0,M||P(S,8,this.length),o.read(this,S,!1,52,8)},c.prototype.writeUIntLE=function(S,M,B,z){S=+S,M>>>=0,B>>>=0,z||V(this,S,M,B,Math.pow(2,8*B)-1,0);var x=1,K=0;for(this[M]=255&S;++K<B&&(x*=256);)this[M+K]=S/x&255;return M+B},c.prototype.writeUIntBE=function(S,M,B,z){S=+S,M>>>=0,B>>>=0,z||V(this,S,M,B,Math.pow(2,8*B)-1,0);var x=B-1,K=1;for(this[M+x]=255&S;--x>=0&&(K*=256);)this[M+x]=S/K&255;return M+B},c.prototype.writeUInt8=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,1,255,0),this[M]=255&S,M+1},c.prototype.writeUInt16LE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,2,65535,0),this[M]=255&S,this[M+1]=S>>>8,M+2},c.prototype.writeUInt16BE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,2,65535,0),this[M]=S>>>8,this[M+1]=255&S,M+2},c.prototype.writeUInt32LE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,4,4294967295,0),this[M+3]=S>>>24,this[M+2]=S>>>16,this[M+1]=S>>>8,this[M]=255&S,M+4},c.prototype.writeUInt32BE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,4,4294967295,0),this[M]=S>>>24,this[M+1]=S>>>16,this[M+2]=S>>>8,this[M+3]=255&S,M+4},c.prototype.writeIntLE=function(S,M,B,z){if(S=+S,M>>>=0,!z){var x=Math.pow(2,8*B-1);V(this,S,M,B,x-1,-x)}var K=0,ee=1,G=0;for(this[M]=255&S;++K<B&&(ee*=256);)S<0&&G===0&&this[M+K-1]!==0&&(G=1),this[M+K]=(S/ee>>0)-G&255;return M+B},c.prototype.writeIntBE=function(S,M,B,z){if(S=+S,M>>>=0,!z){var x=Math.pow(2,8*B-1);V(this,S,M,B,x-1,-x)}var K=B-1,ee=1,G=0;for(this[M+K]=255&S;--K>=0&&(ee*=256);)S<0&&G===0&&this[M+K+1]!==0&&(G=1),this[M+K]=(S/ee>>0)-G&255;return M+B},c.prototype.writeInt8=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,1,127,-128),S<0&&(S=255+S+1),this[M]=255&S,M+1},c.prototype.writeInt16LE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,2,32767,-32768),this[M]=255&S,this[M+1]=S>>>8,M+2},c.prototype.writeInt16BE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,2,32767,-32768),this[M]=S>>>8,this[M+1]=255&S,M+2},c.prototype.writeInt32LE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,4,2147483647,-2147483648),this[M]=255&S,this[M+1]=S>>>8,this[M+2]=S>>>16,this[M+3]=S>>>24,M+4},c.prototype.writeInt32BE=function(S,M,B){return S=+S,M>>>=0,B||V(this,S,M,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[M]=S>>>24,this[M+1]=S>>>16,this[M+2]=S>>>8,this[M+3]=255&S,M+4},c.prototype.writeFloatLE=function(S,M,B){return U(this,S,M,!0,B)},c.prototype.writeFloatBE=function(S,M,B){return U(this,S,M,!1,B)},c.prototype.writeDoubleLE=function(S,M,B){return Z(this,S,M,!0,B)},c.prototype.writeDoubleBE=function(S,M,B){return Z(this,S,M,!1,B)},c.prototype.copy=function(S,M,B,z){if(B||(B=0),z||z===0||(z=this.length),M>=S.length&&(M=S.length),M||(M=0),z>0&&z<B&&(z=B),z===B||S.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("sourceStart out of bounds");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),S.length-M<z-B&&(z=S.length-M+B);var x,K=z-B;if(this===S&&B<M&&M<z)for(x=K-1;x>=0;--x)S[x+M]=this[x+B];else if(K<1e3)for(x=0;x<K;++x)S[x+M]=this[x+B];else Uint8Array.prototype.set.call(S,this.subarray(B,B+K),M);return K},c.prototype.fill=function(S,M,B,z){if(typeof S=="string"){if(typeof M=="string"?(z=M,M=0,B=this.length):typeof B=="string"&&(z=B,B=this.length),S.length===1){var x=S.charCodeAt(0);x<256&&(S=x)}if(z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!c.isEncoding(z))throw new TypeError("Unknown encoding: "+z)}else typeof S=="number"&&(S&=255);if(M<0||this.length<M||this.length<B)throw new RangeError("Out of range index");if(B<=M)return this;var K;if(M>>>=0,B=B===void 0?this.length:B>>>0,S||(S=0),typeof S=="number")for(K=M;K<B;++K)this[K]=S;else{var ee=c.isBuffer(S)?S:new c(S,z),G=ee.length;for(K=0;K<B-M;++K)this[K+M]=ee[K%G]}return this};var fe=/[^+/0-9A-Za-z-_]/g;function se(S,M){var B;M=M||1/0;for(var z=S.length,x=null,K=[],ee=0;ee<z;++ee){if((B=S.charCodeAt(ee))>55295&&B<57344){if(!x){if(B>56319){(M-=3)>-1&&K.push(239,191,189);continue}if(ee+1===z){(M-=3)>-1&&K.push(239,191,189);continue}x=B;continue}if(B<56320){(M-=3)>-1&&K.push(239,191,189),x=B;continue}B=65536+(x-55296<<10|B-56320)}else x&&(M-=3)>-1&&K.push(239,191,189);if(x=null,B<128){if((M-=1)<0)break;K.push(B)}else if(B<2048){if((M-=2)<0)break;K.push(B>>6|192,63&B|128)}else if(B<65536){if((M-=3)<0)break;K.push(B>>12|224,B>>6&63|128,63&B|128)}else{if(!(B<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;K.push(B>>18|240,B>>12&63|128,B>>6&63|128,63&B|128)}}return K}function ue(S){return i.toByteArray(function(M){if((M=M.trim().replace(fe,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(S))}function ge(S,M,B,z){for(var x=0;x<z&&!(x+B>=M.length||x>=S.length);++x)M[x+B]=S[x];return x}function me(S){return S instanceof ArrayBuffer||S!=null&&S.constructor!=null&&S.constructor.name==="ArrayBuffer"&&typeof S.byteLength=="number"}function C(S){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(S)}function j(S){return S!=S}}).call(e,r(1))},function(t,e){e.byteLength=function(h){return 3*h.length/4-c(h)},e.toByteArray=function(h){var y,g,_,E,O,R,L=h.length;O=c(h),R=new i(3*L/4-O),_=O>0?L-4:L;var q=0;for(y=0,g=0;y<_;y+=4,g+=3)E=n[h.charCodeAt(y)]<<18|n[h.charCodeAt(y+1)]<<12|n[h.charCodeAt(y+2)]<<6|n[h.charCodeAt(y+3)],R[q++]=E>>16&255,R[q++]=E>>8&255,R[q++]=255&E;return O===2?(E=n[h.charCodeAt(y)]<<2|n[h.charCodeAt(y+1)]>>4,R[q++]=255&E):O===1&&(E=n[h.charCodeAt(y)]<<10|n[h.charCodeAt(y+1)]<<4|n[h.charCodeAt(y+2)]>>2,R[q++]=E>>8&255,R[q++]=255&E),R},e.fromByteArray=function(h){for(var y,g=h.length,_=g%3,E="",O=[],R=16383,L=0,q=g-_;L<q;L+=R)O.push(f(h,L,L+R>q?q:L+R));return _===1?(y=h[g-1],E+=r[y>>2],E+=r[y<<4&63],E+="=="):_===2&&(y=(h[g-2]<<8)+h[g-1],E+=r[y>>10],E+=r[y>>4&63],E+=r[y<<2&63],E+="="),O.push(E),O.join("")};for(var r=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function c(h){var y=h.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return h[y-2]==="="?2:h[y-1]==="="?1:0}function f(h,y,g){for(var _,E,O=[],R=y;R<g;R+=3)_=(h[R]<<16)+(h[R+1]<<8)+h[R+2],O.push(r[(E=_)>>18&63]+r[E>>12&63]+r[E>>6&63]+r[63&E]);return O.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(r,n,i,o,a){var s,c,f=8*a-o-1,h=(1<<f)-1,y=h>>1,g=-7,_=i?a-1:0,E=i?-1:1,O=r[n+_];for(_+=E,s=O&(1<<-g)-1,O>>=-g,g+=f;g>0;s=256*s+r[n+_],_+=E,g-=8);for(c=s&(1<<-g)-1,s>>=-g,g+=o;g>0;c=256*c+r[n+_],_+=E,g-=8);if(s===0)s=1-y;else{if(s===h)return c?NaN:1/0*(O?-1:1);c+=Math.pow(2,o),s-=y}return(O?-1:1)*c*Math.pow(2,s-o)},e.write=function(r,n,i,o,a,s){var c,f,h,y=8*s-a-1,g=(1<<y)-1,_=g>>1,E=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=o?0:s-1,R=o?1:-1,L=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(f=isNaN(n)?1:0,c=g):(c=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-c))<1&&(c--,h*=2),(n+=c+_>=1?E/h:E*Math.pow(2,1-_))*h>=2&&(c++,h/=2),c+_>=g?(f=0,c=g):c+_>=1?(f=(n*h-1)*Math.pow(2,a),c+=_):(f=n*Math.pow(2,_-1)*Math.pow(2,a),c=0));a>=8;r[i+O]=255&f,O+=R,f/=256,a-=8);for(c=c<<a|f,y+=a;y>0;r[i+O]=255&c,O+=R,c/=256,y-=8);r[i+O-R]|=128*L}},function(t,e){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children=[],r.webpackPolyfill=1),r}},function(t,e,r){var n=new(r(7)),i={};function o(s){i[s]||(typeof n[s]=="function"?i[s]=function(){return n[s].apply(n,arguments)}:i[s]=n[s])}for(var a in n)o(a);i.initializeTTYs=function(){n.stdin===null&&(n.initializeTTYs(),i.stdin=n.stdin,i.stdout=n.stdout,i.stderr=n.stderr)},n.nextTick(function(){i.initializeTTYs()}),t.exports=i},function(t,e,r){(function(n){var i=this&&this.__extends||function(h,y){for(var g in y)y.hasOwnProperty(g)&&(h[g]=y[g]);function _(){this.constructor=h}h.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)},o=r(8),a=null,s=function(){function h(y,g){this.fun=y,this.array=g}return h.prototype.run=function(){this.fun.apply(null,this.array)},h}(),c=function(){function h(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return h.prototype.push=function(y){var g=this;this._queue.push(y)!==1||this._draining||setTimeout(function(){return g._drainQueue()},0)},h.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},h.prototype._drainQueue=function(){var y=this;if(!this._draining){var g=setTimeout(function(){return y._cleanUpNextTick()});this._draining=!0;for(var _=this._queue.length;_;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<_;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,_=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(g)}},h}(),f=function(h){function y(){h.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new c,this.execPath=n,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return i(y,h),y.prototype.chdir=function(g){a===null&&(a=r(9)),this._cwd=a.resolve(g)},y.prototype.cwd=function(){return this._cwd},y.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},y.prototype.nextTick=function(g){for(var _=[],E=1;E<arguments.length;E++)_[E-1]=arguments[E];this._queue.push(new s(g,_))},y.prototype.abort=function(){this.emit("abort")},y.prototype.exit=function(g){this.exitCode=g,this.emit("exit",[g])},y.prototype.getgid=function(){return this._gid},y.prototype.setgid=function(g){this._gid=typeof g=="number"?g:1},y.prototype.getuid=function(){return this._uid},y.prototype.setuid=function(g){this._uid=typeof g=="number"?g:1},y.prototype.kill=function(g,_){this.emit("kill",[g,_])},y.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},y.prototype.umask=function(g){g===void 0&&(g=this._mask);var _=this._mask;return this._mask=g,this.emit("umask",[g]),_},y.prototype.hrtime=function(){var g,_=(g=typeof performance<"u"?performance.now():Date.now?Date.now():new Date().getTime())/1e3|0;return[_,g=1e6*(g-=1e3*_)|0]},y.prototype.initializeTTYs=function(){if(this.stdout===null){var g=r(10);this.stdout=new g,this.stderr=new g,this.stdin=new g}},y.prototype.disconnect=function(){},y}(o.EventEmitter);t.exports=f}).call(e,"/")},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(a){return typeof a=="function"}function i(a){return typeof a=="object"&&a!==null}function o(a){return a===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(a){if(typeof a!="number"||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},r.prototype.emit=function(a){var s,c,f,h,y,g;if(this._events||(this._events={}),a==="error"&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((s=arguments[1])instanceof Error)throw s;var _=new Error('Uncaught, unspecified "error" event. ('+s+")");throw _.context=s,_}if(o(c=this._events[a]))return!1;if(n(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(i(c))for(h=Array.prototype.slice.call(arguments,1),f=(g=c.slice()).length,y=0;y<f;y++)g[y].apply(this,h);return!0},r.prototype.addListener=function(a,s){var c;if(!n(s))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,n(s.listener)?s.listener:s),this._events[a]?i(this._events[a])?this._events[a].push(s):this._events[a]=[this._events[a],s]:this._events[a]=s,i(this._events[a])&&!this._events[a].warned&&(c=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),typeof console.trace=="function"&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(a,s){if(!n(s))throw TypeError("listener must be a function");var c=!1;function f(){this.removeListener(a,f),c||(c=!0,s.apply(this,arguments))}return f.listener=s,this.on(a,f),this},r.prototype.removeListener=function(a,s){var c,f,h,y;if(!n(s))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(h=(c=this._events[a]).length,f=-1,c===s||n(c.listener)&&c.listener===s)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,s);else if(i(c)){for(y=h;y-- >0;)if(c[y]===s||c[y].listener&&c[y].listener===s){f=y;break}if(f<0)return this;c.length===1?(c.length=0,delete this._events[a]):c.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,s)}return this},r.prototype.removeAllListeners=function(a){var s,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[a]&&delete this._events[a],this;if(arguments.length===0){for(s in this._events)s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(n(c=this._events[a]))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},r.prototype.listeners=function(a){return this._events&&this._events[a]?n(this._events[a])?[this._events[a]]:this._events[a].slice():[]},r.prototype.listenerCount=function(a){if(this._events){var s=this._events[a];if(n(s))return 1;if(s)return s.length}return 0},r.listenerCount=function(a,s){return a.listenerCount(s)}},function(t,e,r){(function(n){var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(){function a(){}return a.normalize=function(s){s===""&&(s=".");for(var c=s.charAt(0)===a.sep,f=(s=a._removeDuplicateSeps(s)).split(a.sep),h=[],y=0;y<f.length;y++){var g=f[y];g!=="."&&(g===".."&&(c||!c&&h.length>0&&h[0]!=="..")?h.pop():h.push(g))}return!c&&h.length<2&&(h.length===1?h[0]===""&&h.unshift("."):h.push(".")),s=h.join(a.sep),c&&s.charAt(0)!==a.sep&&(s=a.sep+s),s},a.join=function(){for(var s=[],c=0;c<arguments.length;c++)s[c-0]=arguments[c];for(var f=[],h=0;h<s.length;h++){var y=s[h];if(typeof y!="string")throw new TypeError("Invalid argument type to path.join: "+typeof y);y!==""&&f.push(y)}return a.normalize(f.join(a.sep))},a.resolve=function(){for(var s=[],c=0;c<arguments.length;c++)s[c-0]=arguments[c];for(var f=[],h=0;h<s.length;h++){var y=s[h];if(typeof y!="string")throw new TypeError("Invalid argument type to path.join: "+typeof y);y!==""&&(y.charAt(0)===a.sep&&(f=[]),f.push(y))}var g=a.normalize(f.join(a.sep));if(g.length>1&&g.charAt(g.length-1)===a.sep)return g.substr(0,g.length-1);if(g.charAt(0)!==a.sep){g.charAt(0)!=="."||g.length!==1&&g.charAt(1)!==a.sep||(g=g.length===1?"":g.substr(2));var _=n.cwd();g=g!==""?this.normalize(_+(_!=="/"?a.sep:"")+g):_}return g},a.relative=function(s,c){var f;s=a.resolve(s),c=a.resolve(c);var h=s.split(a.sep),y=c.split(a.sep);y.shift(),h.shift();var g=0,_=[];for(f=0;f<h.length;f++)if(h[f]!==y[f]){g=h.length-f;break}_=y.slice(f),h.length===1&&h[0]===""&&(g=0),g>h.length&&(g=h.length);var E="";for(f=0;f<g;f++)E+="../";return(E+=_.join(a.sep)).length>1&&E.charAt(E.length-1)===a.sep&&(E=E.substr(0,E.length-1)),E},a.dirname=function(s){var c=(s=a._removeDuplicateSeps(s)).charAt(0)===a.sep,f=s.split(a.sep);return f.pop()===""&&f.length>0&&f.pop(),f.length>1||f.length===1&&!c?f.join(a.sep):c?a.sep:"."},a.basename=function(s,c){if(c===void 0&&(c=""),s==="")return s;var f=(s=a.normalize(s)).split(a.sep),h=f[f.length-1];return h===""&&f.length>1?f[f.length-2]:c.length>0&&h.substr(h.length-c.length)===c?h.substr(0,h.length-c.length):h},a.extname=function(s){var c=(s=a.normalize(s)).split(a.sep);if((s=c.pop())===""&&c.length>0&&(s=c.pop()),s==="..")return"";var f=s.lastIndexOf(".");return f===-1||f===0?"":s.substr(f)},a.isAbsolute=function(s){return s.length>0&&s.charAt(0)===a.sep},a._makeLong=function(s){return s},a.parse=function(s){var c,f,h=(c=s,(f=i.exec(c)).shift(),f);return{root:h[0],dir:h[0]+h[1].slice(0,-1),base:h[2],ext:h[3],name:h[2].slice(0,h[2].length-h[3].length)}},a.format=function(s){if(s===null||typeof s!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);if(typeof(s.root||"")!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+a.sep:"")+(s.base||"")},a._removeDuplicateSeps=function(s){return s=s.replace(this._replaceRegex,this.sep)},a.sep="/",a._replaceRegex=new RegExp("//+","g"),a.delimiter=":",a.posix=a,a.win32=a,a}();t.exports=o}).call(e,r(6))},function(t,e,r){(function(n){var i=this&&this.__extends||function(a,s){for(var c in s)s.hasOwnProperty(c)&&(a[c]=s[c]);function f(){this.constructor=a}a.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)},o=function(a){function s(){a.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return i(s,a),s.prototype.setRawMode=function(c){this.isRaw!==c&&(this.isRaw=c,this.emit("modeChange"))},s.prototype.changeColumns=function(c){c!==this.columns&&(this.columns=c,this.emit("resize"))},s.prototype.changeRows=function(c){c!==this.rows&&(this.rows=c,this.emit("resize"))},s.isatty=function(c){return c&&c instanceof s},s.prototype._write=function(c,f,h){var y;try{var g;g=typeof c=="string"?new n(c,f):c,this._bufferedWrites.push(g),this._waitingForWrites&&this._read(1024)}catch(_){y=_}finally{h(y)}},s.prototype._read=function(c){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},s}(r(11).Duplex);t.exports=o}).call(e,r(1))},function(t,e,r){t.exports=i;var n=r(8).EventEmitter;function i(){n.call(this)}r(12)(i,n),i.Readable=r(13),i.Writable=r(27),i.Duplex=r(28),i.Transform=r(29),i.PassThrough=r(30),i.Stream=i,i.prototype.pipe=function(o,a){var s=this;function c(O){o.writable&&o.write(O)===!1&&s.pause&&s.pause()}function f(){s.readable&&s.resume&&s.resume()}s.on("data",c),o.on("drain",f),o._isStdio||a&&a.end===!1||(s.on("end",y),s.on("close",g));var h=!1;function y(){h||(h=!0,o.end())}function g(){h||(h=!0,typeof o.destroy=="function"&&o.destroy())}function _(O){if(E(),n.listenerCount(this,"error")===0)throw O}function E(){s.removeListener("data",c),o.removeListener("drain",f),s.removeListener("end",y),s.removeListener("close",g),s.removeListener("error",_),o.removeListener("error",_),s.removeListener("end",E),s.removeListener("close",E),o.removeListener("close",E)}return s.on("error",_),o.on("error",_),s.on("end",E),s.on("close",E),o.on("close",E),o.emit("pipe",s),o}},function(t,e){typeof Object.create=="function"?t.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}},function(t,e,r){(function(n){var i=function(){try{return r(11)}catch{}}();(e=t.exports=r(14)).Stream=i||e,e.Readable=e,e.Writable=r(22),e.Duplex=r(21),e.Transform=r(25),e.PassThrough=r(26),!n.browser&&n.env.READABLE_STREAM==="disable"&&i&&(t.exports=i)}).call(e,r(6))},function(t,e,r){(function(n){t.exports=L;var i,o=r(15),a=r(16);L.ReadableState=R,r(8).EventEmitter;var s,c=function(b,P){return b.listeners(P).length};(function(){try{s=r(11)}catch{}finally{s||(s=r(8).EventEmitter)}})();var f=r(2).Buffer,h=r(17),y=r(18);y.inherits=r(12);var g=r(19),_=void 0;_=g&&g.debuglog?g.debuglog("stream"):function(){};var E,O=r(20);function R(b,P){i=i||r(21),b=b||{},this.objectMode=!!b.objectMode,P instanceof i&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var V=b.highWaterMark,Q=this.objectMode?16:16384;this.highWaterMark=V||V===0?V:Q,this.highWaterMark=~~this.highWaterMark,this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(E||(E=r(24).StringDecoder),this.decoder=new E(b.encoding),this.encoding=b.encoding)}function L(b){if(i=i||r(21),!(this instanceof L))return new L(b);this._readableState=new R(b,this),this.readable=!0,b&&typeof b.read=="function"&&(this._read=b.read),s.call(this)}function q(b,P,V,Q,U){var Z=function(ge,me){var C=null;return f.isBuffer(me)||typeof me=="string"||me==null||ge.objectMode||(C=new TypeError("Invalid non-string/buffer chunk")),C}(P,V);if(Z)b.emit("error",Z);else if(V===null)P.reading=!1,function(ge,me){if(!me.ended){if(me.decoder){var C=me.decoder.end();C&&C.length&&(me.buffer.push(C),me.length+=me.objectMode?1:C.length)}me.ended=!0,W(ge)}}(b,P);else if(P.objectMode||V&&V.length>0)if(P.ended&&!U){var fe=new Error("stream.push() after EOF");b.emit("error",fe)}else if(P.endEmitted&&U){var se=new Error("stream.unshift() after end event");b.emit("error",se)}else{var ue;!P.decoder||U||Q||(V=P.decoder.write(V),ue=!P.objectMode&&V.length===0),U||(P.reading=!1),ue||(P.flowing&&P.length===0&&!P.sync?(b.emit("data",V),b.read(0)):(P.length+=P.objectMode?1:V.length,U?P.buffer.unshift(V):P.buffer.push(V),P.needReadable&&W(b))),function(ge,me){me.readingMore||(me.readingMore=!0,o(Y,ge,me))}(b,P)}else U||(P.reading=!1);return function(ge){return!ge.ended&&(ge.needReadable||ge.length<ge.highWaterMark||ge.length===0)}(P)}y.inherits(L,s),L.prototype.push=function(b,P){var V=this._readableState;return V.objectMode||typeof b!="string"||(P=P||V.defaultEncoding)!==V.encoding&&(b=h.from(b,P),P=""),q(this,V,b,P,!1)},L.prototype.unshift=function(b){return q(this,this._readableState,b,"",!0)},L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(b){return E||(E=r(24).StringDecoder),this._readableState.decoder=new E(b),this._readableState.encoding=b,this};var X=8388608;function ne(b,P){return b<=0||P.length===0&&P.ended?0:P.objectMode?1:b!=b?P.flowing&&P.length?P.buffer.head.data.length:P.length:(b>P.highWaterMark&&(P.highWaterMark=function(V){return V>=X?V=X:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}(b)),b<=P.length?b:P.ended?P.length:(P.needReadable=!0,0))}function W(b){var P=b._readableState;P.needReadable=!1,P.emittedReadable||(_("emitReadable",P.flowing),P.emittedReadable=!0,P.sync?o(H,b):H(b))}function H(b){_("emit readable"),b.emit("readable"),v(b)}function Y(b,P){for(var V=P.length;!P.reading&&!P.flowing&&!P.ended&&P.length<P.highWaterMark&&(_("maybeReadMore read 0"),b.read(0),V!==P.length);)V=P.length;P.readingMore=!1}function T(b){_("readable nexttick read 0"),b.read(0)}function te(b,P){P.reading||(_("resume read 0"),b.read(0)),P.resumeScheduled=!1,P.awaitDrain=0,b.emit("resume"),v(b),P.flowing&&!P.reading&&b.read(0)}function v(b){var P=b._readableState;for(_("flow",P.flowing);P.flowing&&b.read()!==null;);}function D(b,P){return P.length===0?null:(P.objectMode?V=P.buffer.shift():!b||b>=P.length?(V=P.decoder?P.buffer.join(""):P.buffer.length===1?P.buffer.head.data:P.buffer.concat(P.length),P.buffer.clear()):V=function(Q,U,Z){var fe;return Q<U.head.data.length?(fe=U.head.data.slice(0,Q),U.head.data=U.head.data.slice(Q)):fe=Q===U.head.data.length?U.shift():Z?function(se,ue){var ge=ue.head,me=1,C=ge.data;for(se-=C.length;ge=ge.next;){var j=ge.data,S=se>j.length?j.length:se;if(S===j.length?C+=j:C+=j.slice(0,se),(se-=S)==0){S===j.length?(++me,ge.next?ue.head=ge.next:ue.head=ue.tail=null):(ue.head=ge,ge.data=j.slice(S));break}++me}return ue.length-=me,C}(Q,U):function(se,ue){var ge=h.allocUnsafe(se),me=ue.head,C=1;for(me.data.copy(ge),se-=me.data.length;me=me.next;){var j=me.data,S=se>j.length?j.length:se;if(j.copy(ge,ge.length-se,0,S),(se-=S)==0){S===j.length?(++C,me.next?ue.head=me.next:ue.head=ue.tail=null):(ue.head=me,me.data=j.slice(S));break}++C}return ue.length-=C,ge}(Q,U),fe}(b,P.buffer,P.decoder),V);var V}function w(b){var P=b._readableState;if(P.length>0)throw new Error('"endReadable()" called on non-empty stream');P.endEmitted||(P.ended=!0,o(k,P,b))}function k(b,P){b.endEmitted||b.length!==0||(b.endEmitted=!0,P.readable=!1,P.emit("end"))}function A(b,P){for(var V=0,Q=b.length;V<Q;V++)if(b[V]===P)return V;return-1}L.prototype.read=function(b){_("read",b),b=parseInt(b,10);var P=this._readableState,V=b;if(b!==0&&(P.emittedReadable=!1),b===0&&P.needReadable&&(P.length>=P.highWaterMark||P.ended))return _("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?w(this):W(this),null;if((b=ne(b,P))===0&&P.ended)return P.length===0&&w(this),null;var Q,U=P.needReadable;return _("need readable",U),(P.length===0||P.length-b<P.highWaterMark)&&_("length less than watermark",U=!0),P.ended||P.reading?_("reading or ended",U=!1):U&&(_("do read"),P.reading=!0,P.sync=!0,P.length===0&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(b=ne(V,P))),(Q=b>0?D(b,P):null)===null?(P.needReadable=!0,b=0):P.length-=b,P.length===0&&(P.ended||(P.needReadable=!0),V!==b&&P.ended&&w(this)),Q!==null&&this.emit("data",Q),Q},L.prototype._read=function(b){this.emit("error",new Error("_read() is not implemented"))},L.prototype.pipe=function(b,P){var V=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=b;break;case 1:Q.pipes=[Q.pipes,b];break;default:Q.pipes.push(b)}Q.pipesCount+=1,_("pipe count=%d opts=%j",Q.pipesCount,P);var U=P&&P.end===!1||b===n.stdout||b===n.stderr?ge:fe;function Z(z){_("onunpipe"),z===V&&ge()}function fe(){_("onend"),b.end()}Q.endEmitted?o(U):V.once("end",U),b.on("unpipe",Z);var se=function(z){return function(){var x=z._readableState;_("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&c(z,"data")&&(x.flowing=!0,v(z))}}(V);b.on("drain",se);var ue=!1;function ge(){_("cleanup"),b.removeListener("close",S),b.removeListener("finish",M),b.removeListener("drain",se),b.removeListener("error",j),b.removeListener("unpipe",Z),V.removeListener("end",fe),V.removeListener("end",ge),V.removeListener("data",C),ue=!0,!Q.awaitDrain||b._writableState&&!b._writableState.needDrain||se()}var me=!1;function C(z){_("ondata"),me=!1,b.write(z)!==!1||me||((Q.pipesCount===1&&Q.pipes===b||Q.pipesCount>1&&A(Q.pipes,b)!==-1)&&!ue&&(_("false write response, pause",V._readableState.awaitDrain),V._readableState.awaitDrain++,me=!0),V.pause())}function j(z){_("onerror",z),B(),b.removeListener("error",j),c(b,"error")===0&&b.emit("error",z)}function S(){b.removeListener("finish",M),B()}function M(){_("onfinish"),b.removeListener("close",S),B()}function B(){_("unpipe"),V.unpipe(b)}return V.on("data",C),function(z,x,K){if(typeof z.prependListener=="function")return z.prependListener(x,K);z._events&&z._events[x]?a(z._events[x])?z._events[x].unshift(K):z._events[x]=[K,z._events[x]]:z.on(x,K)}(b,"error",j),b.once("close",S),b.once("finish",M),b.emit("pipe",V),Q.flowing||(_("pipe resume"),V.resume()),b},L.prototype.unpipe=function(b){var P=this._readableState;if(P.pipesCount===0)return this;if(P.pipesCount===1)return b&&b!==P.pipes||(b||(b=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,b&&b.emit("unpipe",this)),this;if(!b){var V=P.pipes,Q=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var U=0;U<Q;U++)V[U].emit("unpipe",this);return this}var Z=A(P.pipes,b);return Z===-1||(P.pipes.splice(Z,1),P.pipesCount-=1,P.pipesCount===1&&(P.pipes=P.pipes[0]),b.emit("unpipe",this)),this},L.prototype.on=function(b,P){var V=s.prototype.on.call(this,b,P);if(b==="data")this._readableState.flowing!==!1&&this.resume();else if(b==="readable"){var Q=this._readableState;Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.emittedReadable=!1,Q.reading?Q.length&&W(this):o(T,this))}return V},L.prototype.addListener=L.prototype.on,L.prototype.resume=function(){var b=this._readableState;return b.flowing||(_("resume"),b.flowing=!0,function(P,V){V.resumeScheduled||(V.resumeScheduled=!0,o(te,P,V))}(this,b)),this},L.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},L.prototype.wrap=function(b){var P=this._readableState,V=!1,Q=this;for(var U in b.on("end",function(){if(_("wrapped end"),P.decoder&&!P.ended){var Z=P.decoder.end();Z&&Z.length&&Q.push(Z)}Q.push(null)}),b.on("data",function(Z){_("wrapped data"),P.decoder&&(Z=P.decoder.write(Z)),P.objectMode&&Z==null||(P.objectMode||Z&&Z.length)&&(Q.push(Z)||(V=!0,b.pause()))}),b)this[U]===void 0&&typeof b[U]=="function"&&(this[U]=function(Z){return function(){return b[Z].apply(b,arguments)}}(U));return function(Z,fe){for(var se=0,ue=Z.length;se<ue;se++)fe(Z[se],se)}(["error","close","destroy","pause","resume"],function(Z){b.on(Z,Q.emit.bind(Q,Z))}),Q._read=function(Z){_("wrapped _read",Z),V&&(V=!1,b.resume())},Q},L._fromList=D}).call(e,r(6))},function(t,e,r){(function(n){!n.version||n.version.indexOf("v0.")===0||n.version.indexOf("v1.")===0&&n.version.indexOf("v1.8.")!==0?t.exports=function(i,o,a,s){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var c,f,h=arguments.length;switch(h){case 0:case 1:return n.nextTick(i);case 2:return n.nextTick(function(){i.call(null,o)});case 3:return n.nextTick(function(){i.call(null,o,a)});case 4:return n.nextTick(function(){i.call(null,o,a,s)});default:for(c=new Array(h-1),f=0;f<c.length;)c[f++]=arguments[f];return n.nextTick(function(){i.apply(null,c)})}}:t.exports=n.nextTick}).call(e,r(6))},function(t,e){var r={}.toString;t.exports=Array.isArray||function(n){return r.call(n)=="[object Array]"}},function(t,e,r){(function(n){var i=r(2),o=i.Buffer,a=i.SlowBuffer,s=i.kMaxLength||2147483647;e.alloc=function(c,f,h){if(typeof o.alloc=="function")return o.alloc(c,f,h);if(typeof h=="number")throw new TypeError("encoding must not be number");if(typeof c!="number")throw new TypeError("size must be a number");if(c>s)throw new RangeError("size is too large");var y=h,g=f;g===void 0&&(y=void 0,g=0);var _=new o(c);if(typeof g=="string")for(var E=new o(g,y),O=E.length,R=-1;++R<c;)_[R]=E[R%O];else _.fill(g);return _},e.allocUnsafe=function(c){if(typeof o.allocUnsafe=="function")return o.allocUnsafe(c);if(typeof c!="number")throw new TypeError("size must be a number");if(c>s)throw new RangeError("size is too large");return new o(c)},e.from=function(c,f,h){if(typeof o.from=="function"&&(!n.Uint8Array||Uint8Array.from!==o.from))return o.from(c,f,h);if(typeof c=="number")throw new TypeError('"value" argument must not be a number');if(typeof c=="string")return new o(c,f);if(typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer){var y=f;if(arguments.length===1)return new o(c);y===void 0&&(y=0);var g=h;if(g===void 0&&(g=c.byteLength-y),y>=c.byteLength)throw new RangeError("'offset' is out of bounds");if(g>c.byteLength-y)throw new RangeError("'length' is out of bounds");return new o(c.slice(y,y+g))}if(o.isBuffer(c)){var _=new o(c.length);return c.copy(_,0,0,c.length),_}if(c){if(Array.isArray(c)||typeof ArrayBuffer<"u"&&c.buffer instanceof ArrayBuffer||"length"in c)return new o(c);if(c.type==="Buffer"&&Array.isArray(c.data))return new o(c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(c){if(typeof o.allocUnsafeSlow=="function")return o.allocUnsafeSlow(c);if(typeof c!="number")throw new TypeError("size must be a number");if(c>=s)throw new RangeError("size is too large");return new a(c)}}).call(e,function(){return this}())},function(t,e,r){(function(n){function i(o){return Object.prototype.toString.call(o)}e.isArray=function(o){return Array.isArray?Array.isArray(o):i(o)==="[object Array]"},e.isBoolean=function(o){return typeof o=="boolean"},e.isNull=function(o){return o===null},e.isNullOrUndefined=function(o){return o==null},e.isNumber=function(o){return typeof o=="number"},e.isString=function(o){return typeof o=="string"},e.isSymbol=function(o){return typeof o=="symbol"},e.isUndefined=function(o){return o===void 0},e.isRegExp=function(o){return i(o)==="[object RegExp]"},e.isObject=function(o){return typeof o=="object"&&o!==null},e.isDate=function(o){return i(o)==="[object Date]"},e.isError=function(o){return i(o)==="[object Error]"||o instanceof Error},e.isFunction=function(o){return typeof o=="function"},e.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},e.isBuffer=n.isBuffer}).call(e,r(1))},function(t,e){},function(t,e,r){r(2).Buffer;var n=r(17);function i(){this.head=null,this.tail=null,this.length=0}t.exports=i,i.prototype.push=function(o){var a={data:o,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},i.prototype.unshift=function(o){var a={data:o,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},i.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(o){if(this.length===0)return"";for(var a=this.head,s=""+a.data;a=a.next;)s+=o+a.data;return s},i.prototype.concat=function(o){if(this.length===0)return n.alloc(0);if(this.length===1)return this.head.data;for(var a=n.allocUnsafe(o>>>0),s=this.head,c=0;s;)s.data.copy(a,c),c+=s.data.length,s=s.next;return a}},function(t,e,r){var n=Object.keys||function(E){var O=[];for(var R in E)O.push(R);return O};t.exports=y;var i=r(15),o=r(18);o.inherits=r(12);var a=r(14),s=r(22);o.inherits(y,a);for(var c=n(s.prototype),f=0;f<c.length;f++){var h=c[f];y.prototype[h]||(y.prototype[h]=s.prototype[h])}function y(E){if(!(this instanceof y))return new y(E);a.call(this,E),s.call(this,E),E&&E.readable===!1&&(this.readable=!1),E&&E.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,E&&E.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",g)}function g(){this.allowHalfOpen||this._writableState.ended||i(_,this)}function _(E){E.end()}},function(t,e,r){(function(n){t.exports=R;var i,o=r(15),a=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:o;R.WritableState=O;var s=r(18);s.inherits=r(12);var c,f={deprecate:r(23)};(function(){try{c=r(11)}catch{}finally{c||(c=r(8).EventEmitter)}})();var h,y=r(2).Buffer,g=r(17);function _(){}function E(T,te,v){this.chunk=T,this.encoding=te,this.callback=v,this.next=null}function O(T,te){i=i||r(21),T=T||{},this.objectMode=!!T.objectMode,te instanceof i&&(this.objectMode=this.objectMode||!!T.writableObjectMode);var v=T.highWaterMark,D=this.objectMode?16:16384;this.highWaterMark=v||v===0?v:D,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var w=T.decodeStrings===!1;this.decodeStrings=!w,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){(function(A,b){var P=A._writableState,V=P.sync,Q=P.writecb;if(function(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}(P),b)(function(Z,fe,se,ue,ge){--fe.pendingcb,se?o(ge,ue):ge(ue),Z._writableState.errorEmitted=!0,Z.emit("error",ue)})(A,P,V,b,Q);else{var U=ne(P);U||P.corked||P.bufferProcessing||!P.bufferedRequest||X(A,P),V?a(q,A,P,U,Q):q(A,P,U,Q)}})(te,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Y(this)}function R(T){if(i=i||r(21),!(h.call(R,this)||this instanceof i))return new R(T);this._writableState=new O(T,this),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev)),c.call(this)}function L(T,te,v,D,w,k,A){te.writelen=D,te.writecb=A,te.writing=!0,te.sync=!0,v?T._writev(w,te.onwrite):T._write(w,k,te.onwrite),te.sync=!1}function q(T,te,v,D){v||function(w,k){k.length===0&&k.needDrain&&(k.needDrain=!1,w.emit("drain"))}(T,te),te.pendingcb--,D(),H(T,te)}function X(T,te){te.bufferProcessing=!0;var v=te.bufferedRequest;if(T._writev&&v&&v.next){var D=te.bufferedRequestCount,w=new Array(D),k=te.corkedRequestsFree;k.entry=v;for(var A=0;v;)w[A]=v,v=v.next,A+=1;L(T,te,!0,te.length,w,"",k.finish),te.pendingcb++,te.lastBufferedRequest=null,k.next?(te.corkedRequestsFree=k.next,k.next=null):te.corkedRequestsFree=new Y(te)}else{for(;v;){var b=v.chunk,P=v.encoding,V=v.callback;if(L(T,te,!1,te.objectMode?1:b.length,b,P,V),v=v.next,te.writing)break}v===null&&(te.lastBufferedRequest=null)}te.bufferedRequestCount=0,te.bufferedRequest=v,te.bufferProcessing=!1}function ne(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function W(T,te){te.prefinished||(te.prefinished=!0,T.emit("prefinish"))}function H(T,te){var v=ne(te);return v&&(te.pendingcb===0?(W(T,te),te.finished=!0,T.emit("finish")):W(T,te)),v}function Y(T){var te=this;this.next=null,this.entry=null,this.finish=function(v){var D=te.entry;for(te.entry=null;D;){var w=D.callback;T.pendingcb--,w(v),D=D.next}T.corkedRequestsFree?T.corkedRequestsFree.next=te:T.corkedRequestsFree=te}}s.inherits(R,c),O.prototype.getBuffer=function(){for(var T=this.bufferedRequest,te=[];T;)te.push(T),T=T.next;return te},function(){try{Object.defineProperty(O.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(T){return!!h.call(this,T)||T&&T._writableState instanceof O}})):h=function(T){return T instanceof this},R.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},R.prototype.write=function(T,te,v){var D=this._writableState,w=!1,k=y.isBuffer(T);return typeof te=="function"&&(v=te,te=null),k?te="buffer":te||(te=D.defaultEncoding),typeof v!="function"&&(v=_),D.ended?function(A,b){var P=new Error("write after end");A.emit("error",P),o(b,P)}(this,v):(k||function(A,b,P,V){var Q=!0,U=!1;return P===null?U=new TypeError("May not write null values to stream"):typeof P=="string"||P===void 0||b.objectMode||(U=new TypeError("Invalid non-string/buffer chunk")),U&&(A.emit("error",U),o(V,U),Q=!1),Q}(this,D,T,v))&&(D.pendingcb++,w=function(A,b,P,V,Q,U){P||(V=function(ue,ge,me){return ue.objectMode||ue.decodeStrings===!1||typeof ge!="string"||(ge=g.from(ge,me)),ge}(b,V,Q),y.isBuffer(V)&&(Q="buffer"));var Z=b.objectMode?1:V.length;b.length+=Z;var fe=b.length<b.highWaterMark;if(fe||(b.needDrain=!0),b.writing||b.corked){var se=b.lastBufferedRequest;b.lastBufferedRequest=new E(V,Q,U),se?se.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else L(A,b,!1,Z,V,Q,U);return fe}(this,D,k,T,te,v)),w},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.finished||T.bufferProcessing||!T.bufferedRequest||X(this,T))},R.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+T);return this._writableState.defaultEncoding=T,this},R.prototype._write=function(T,te,v){v(new Error("_write() is not implemented"))},R.prototype._writev=null,R.prototype.end=function(T,te,v){var D=this._writableState;typeof T=="function"?(v=T,T=null,te=null):typeof te=="function"&&(v=te,te=null),T!=null&&this.write(T,te),D.corked&&(D.corked=1,this.uncork()),D.ending||D.finished||function(w,k,A){k.ending=!0,H(w,k),A&&(k.finished?o(A):w.once("finish",A)),k.ended=!0,w.writable=!1}(this,D,v)}}).call(e,r(6))},function(t,e){(function(r){function n(i){try{if(!r.localStorage)return!1}catch{return!1}var o=r.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}t.exports=function(i,o){if(n("noDeprecation"))return i;var a=!1;return function(){if(!a){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),a=!0}return i.apply(this,arguments)}}}).call(e,function(){return this}())},function(t,e,r){var n=r(2).Buffer,i=n.isEncoding||function(f){switch(f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=e.StringDecoder=function(f){switch(this.encoding=(f||"utf8").toLowerCase().replace(/[-_]/,""),function(h){if(h&&!i(h))throw new Error("Unknown encoding: "+h)}(f),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function a(f){return f.toString(this.encoding)}function s(f){this.charReceived=f.length%2,this.charLength=this.charReceived?2:0}function c(f){this.charReceived=f.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(f){for(var h="";this.charLength;){var y=f.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:f.length;if(f.copy(this.charBuffer,this.charReceived,0,y),this.charReceived+=y,this.charReceived<this.charLength)return"";if(f=f.slice(y,f.length),!((g=(h=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(h.length-1))>=55296&&g<=56319)){if(this.charReceived=this.charLength=0,f.length===0)return h;break}this.charLength+=this.surrogateSize,h=""}this.detectIncompleteChar(f);var g,_=f.length;if(this.charLength&&(f.copy(this.charBuffer,0,f.length-this.charReceived,_),_-=this.charReceived),_=(h+=f.toString(this.encoding,0,_)).length-1,(g=h.charCodeAt(_))>=55296&&g<=56319){var E=this.surrogateSize;return this.charLength+=E,this.charReceived+=E,this.charBuffer.copy(this.charBuffer,E,0,E),f.copy(this.charBuffer,0,0,E),h.substring(0,_)}return h},o.prototype.detectIncompleteChar=function(f){for(var h=f.length>=3?3:f.length;h>0;h--){var y=f[f.length-h];if(h==1&&y>>5==6){this.charLength=2;break}if(h<=2&&y>>4==14){this.charLength=3;break}if(h<=3&&y>>3==30){this.charLength=4;break}}this.charReceived=h},o.prototype.end=function(f){var h="";if(f&&f.length&&(h=this.write(f)),this.charReceived){var y=this.charReceived,g=this.charBuffer,_=this.encoding;h+=g.slice(0,y).toString(_)}return h}},function(t,e,r){t.exports=a;var n=r(21),i=r(18);function o(c){this.afterTransform=function(f,h){return function(y,g,_){var E=y._transformState;E.transforming=!1;var O=E.writecb;if(!O)return y.emit("error",new Error("no writecb in Transform class"));E.writechunk=null,E.writecb=null,_!=null&&y.push(_),O(g);var R=y._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&y._read(R.highWaterMark)}(c,f,h)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(c){if(!(this instanceof a))return new a(c);n.call(this,c),this._transformState=new o(this);var f=this;this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(h,y){s(f,h,y)}):s(f)})}function s(c,f,h){if(f)return c.emit("error",f);h!=null&&c.push(h);var y=c._writableState,g=c._transformState;if(y.length)throw new Error("Calling transform done when ws.length != 0");if(g.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}i.inherits=r(12),i.inherits(a,n),a.prototype.push=function(c,f){return this._transformState.needTransform=!1,n.prototype.push.call(this,c,f)},a.prototype._transform=function(c,f,h){throw new Error("_transform() is not implemented")},a.prototype._write=function(c,f,h){var y=this._transformState;if(y.writecb=h,y.writechunk=c,y.writeencoding=f,!y.transforming){var g=this._readableState;(y.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(c){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0}},function(t,e,r){t.exports=o;var n=r(25),i=r(18);function o(a){if(!(this instanceof o))return new o(a);n.call(this,a)}i.inherits=r(12),i.inherits(o,n),o.prototype._transform=function(a,s,c){c(null,a)}},function(t,e,r){t.exports=r(22)},function(t,e,r){t.exports=r(21)},function(t,e,r){t.exports=r(25)},function(t,e,r){t.exports=r(26)},function(t,e,r){var n=r(32),i=r(33),o=r(38),a=r(39),s=r(40),c=r(41),f=r(42),h=Object.prototype.toString;function y(_){if(!(this instanceof y))return new y(_);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},_||{});var E=this.options;E.raw&&E.windowBits>=0&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(E.windowBits>=0&&E.windowBits<16)||_&&_.windowBits||(E.windowBits+=32),E.windowBits>15&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var O=n.inflateInit2(this.strm,E.windowBits);if(O!==a.Z_OK)throw new Error(s[O]);this.header=new f,n.inflateGetHeader(this.strm,this.header)}function g(_,E){var O=new y(E);if(O.push(_,!0),O.err)throw O.msg||s[O.err];return O.result}y.prototype.push=function(_,E){var O,R,L,q,X,ne,W=this.strm,H=this.options.chunkSize,Y=this.options.dictionary,T=!1;if(this.ended)return!1;R=E===~~E?E:E===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof _=="string"?W.input=o.binstring2buf(_):h.call(_)==="[object ArrayBuffer]"?W.input=new Uint8Array(_):W.input=_,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new i.Buf8(H),W.next_out=0,W.avail_out=H),(O=n.inflate(W,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&Y&&(ne=typeof Y=="string"?o.string2buf(Y):h.call(Y)==="[object ArrayBuffer]"?new Uint8Array(Y):Y,O=n.inflateSetDictionary(this.strm,ne)),O===a.Z_BUF_ERROR&&T===!0&&(O=a.Z_OK,T=!1),O!==a.Z_STREAM_END&&O!==a.Z_OK)return this.onEnd(O),this.ended=!0,!1;W.next_out&&(W.avail_out!==0&&O!==a.Z_STREAM_END&&(W.avail_in!==0||R!==a.Z_FINISH&&R!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(L=o.utf8border(W.output,W.next_out),q=W.next_out-L,X=o.buf2string(W.output,L),W.next_out=q,W.avail_out=H-q,q&&i.arraySet(W.output,W.output,L,q,0),this.onData(X)):this.onData(i.shrinkBuf(W.output,W.next_out)))),W.avail_in===0&&W.avail_out===0&&(T=!0)}while((W.avail_in>0||W.avail_out===0)&&O!==a.Z_STREAM_END);return O===a.Z_STREAM_END&&(R=a.Z_FINISH),R===a.Z_FINISH?(O=n.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===a.Z_OK):R!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),W.avail_out=0,!0)},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},e.Inflate=y,e.inflate=g,e.inflateRaw=function(_,E){return(E=E||{}).raw=!0,g(_,E)},e.ungzip=g},function(t,e,r){var n=r(33),i=r(34),o=r(35),a=r(36),s=r(37),c=-2,f=12,h=30;function y(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(H){var Y;return H&&H.state?(Y=H.state,H.total_in=H.total_out=Y.total=0,H.msg="",Y.wrap&&(H.adler=1&Y.wrap),Y.mode=1,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new n.Buf32(852),Y.distcode=Y.distdyn=new n.Buf32(592),Y.sane=1,Y.back=-1,0):c}function E(H){var Y;return H&&H.state?((Y=H.state).wsize=0,Y.whave=0,Y.wnext=0,_(H)):c}function O(H,Y){var T,te;return H&&H.state?(te=H.state,Y<0?(T=0,Y=-Y):(T=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||Y>15)?c:(te.window!==null&&te.wbits!==Y&&(te.window=null),te.wrap=T,te.wbits=Y,E(H))):c}function R(H,Y){var T,te;return H?(te=new g,H.state=te,te.window=null,(T=O(H,Y))!==0&&(H.state=null),T):c}var L,q,X=!0;function ne(H){if(X){var Y;for(L=new n.Buf32(512),q=new n.Buf32(32),Y=0;Y<144;)H.lens[Y++]=8;for(;Y<256;)H.lens[Y++]=9;for(;Y<280;)H.lens[Y++]=7;for(;Y<288;)H.lens[Y++]=8;for(s(1,H.lens,0,288,L,0,H.work,{bits:9}),Y=0;Y<32;)H.lens[Y++]=5;s(2,H.lens,0,32,q,0,H.work,{bits:5}),X=!1}H.lencode=L,H.lenbits=9,H.distcode=q,H.distbits=5}function W(H,Y,T,te){var v,D=H.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new n.Buf8(D.wsize)),te>=D.wsize?(n.arraySet(D.window,Y,T-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):((v=D.wsize-D.wnext)>te&&(v=te),n.arraySet(D.window,Y,T-te,v,D.wnext),(te-=v)?(n.arraySet(D.window,Y,T-te,te,0),D.wnext=te,D.whave=D.wsize):(D.wnext+=v,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=v))),0}e.inflateReset=E,e.inflateReset2=O,e.inflateResetKeep=_,e.inflateInit=function(H){return R(H,15)},e.inflateInit2=R,e.inflate=function(H,Y){var T,te,v,D,w,k,A,b,P,V,Q,U,Z,fe,se,ue,ge,me,C,j,S,M,B,z,x=0,K=new n.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return c;(T=H.state).mode===f&&(T.mode=13),w=H.next_out,v=H.output,A=H.avail_out,D=H.next_in,te=H.input,k=H.avail_in,b=T.hold,P=T.bits,V=k,Q=A,M=0;e:for(;;)switch(T.mode){case 1:if(T.wrap===0){T.mode=13;break}for(;P<16;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(2&T.wrap&&b===35615){T.check=0,K[0]=255&b,K[1]=b>>>8&255,T.check=o(T.check,K,2,0),b=0,P=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&b)<<8)+(b>>8))%31){H.msg="incorrect header check",T.mode=h;break}if((15&b)!=8){H.msg="unknown compression method",T.mode=h;break}if(P-=4,S=8+(15&(b>>>=4)),T.wbits===0)T.wbits=S;else if(S>T.wbits){H.msg="invalid window size",T.mode=h;break}T.dmax=1<<S,H.adler=T.check=1,T.mode=512&b?10:f,b=0,P=0;break;case 2:for(;P<16;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(T.flags=b,(255&T.flags)!=8){H.msg="unknown compression method",T.mode=h;break}if(57344&T.flags){H.msg="unknown header flags set",T.mode=h;break}T.head&&(T.head.text=b>>8&1),512&T.flags&&(K[0]=255&b,K[1]=b>>>8&255,T.check=o(T.check,K,2,0)),b=0,P=0,T.mode=3;case 3:for(;P<32;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.head&&(T.head.time=b),512&T.flags&&(K[0]=255&b,K[1]=b>>>8&255,K[2]=b>>>16&255,K[3]=b>>>24&255,T.check=o(T.check,K,4,0)),b=0,P=0,T.mode=4;case 4:for(;P<16;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.head&&(T.head.xflags=255&b,T.head.os=b>>8),512&T.flags&&(K[0]=255&b,K[1]=b>>>8&255,T.check=o(T.check,K,2,0)),b=0,P=0,T.mode=5;case 5:if(1024&T.flags){for(;P<16;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.length=b,T.head&&(T.head.extra_len=b),512&T.flags&&(K[0]=255&b,K[1]=b>>>8&255,T.check=o(T.check,K,2,0)),b=0,P=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&((U=T.length)>k&&(U=k),U&&(T.head&&(S=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),n.arraySet(T.head.extra,te,D,U,S)),512&T.flags&&(T.check=o(T.check,te,U,D)),k-=U,D+=U,T.length-=U),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(k===0)break e;U=0;do S=te[D+U++],T.head&&S&&T.length<65536&&(T.head.name+=String.fromCharCode(S));while(S&&U<k);if(512&T.flags&&(T.check=o(T.check,te,U,D)),k-=U,D+=U,S)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(k===0)break e;U=0;do S=te[D+U++],T.head&&S&&T.length<65536&&(T.head.comment+=String.fromCharCode(S));while(S&&U<k);if(512&T.flags&&(T.check=o(T.check,te,U,D)),k-=U,D+=U,S)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;P<16;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(b!==(65535&T.check)){H.msg="header crc mismatch",T.mode=h;break}b=0,P=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),H.adler=T.check=0,T.mode=f;break;case 10:for(;P<32;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}H.adler=T.check=y(b),b=0,P=0,T.mode=11;case 11:if(T.havedict===0)return H.next_out=w,H.avail_out=A,H.next_in=D,H.avail_in=k,T.hold=b,T.bits=P,2;H.adler=T.check=1,T.mode=f;case f:if(Y===5||Y===6)break e;case 13:if(T.last){b>>>=7&P,P-=7&P,T.mode=27;break}for(;P<3;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}switch(T.last=1&b,P-=1,3&(b>>>=1)){case 0:T.mode=14;break;case 1:if(ne(T),T.mode=20,Y===6){b>>>=2,P-=2;break e}break;case 2:T.mode=17;break;case 3:H.msg="invalid block type",T.mode=h}b>>>=2,P-=2;break;case 14:for(b>>>=7&P,P-=7&P;P<32;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if((65535&b)!=(b>>>16^65535)){H.msg="invalid stored block lengths",T.mode=h;break}if(T.length=65535&b,b=0,P=0,T.mode=15,Y===6)break e;case 15:T.mode=16;case 16:if(U=T.length){if(U>k&&(U=k),U>A&&(U=A),U===0)break e;n.arraySet(v,te,D,U,w),k-=U,D+=U,A-=U,w+=U,T.length-=U;break}T.mode=f;break;case 17:for(;P<14;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(T.nlen=257+(31&b),b>>>=5,P-=5,T.ndist=1+(31&b),b>>>=5,P-=5,T.ncode=4+(15&b),b>>>=4,P-=4,T.nlen>286||T.ndist>30){H.msg="too many length or distance symbols",T.mode=h;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;P<3;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.lens[ee[T.have++]]=7&b,b>>>=3,P-=3}for(;T.have<19;)T.lens[ee[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,B={bits:T.lenbits},M=s(0,T.lens,0,19,T.lencode,0,T.work,B),T.lenbits=B.bits,M){H.msg="invalid code lengths set",T.mode=h;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;ue=(x=T.lencode[b&(1<<T.lenbits)-1])>>>16&255,ge=65535&x,!((se=x>>>24)<=P);){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(ge<16)b>>>=se,P-=se,T.lens[T.have++]=ge;else{if(ge===16){for(z=se+2;P<z;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(b>>>=se,P-=se,T.have===0){H.msg="invalid bit length repeat",T.mode=h;break}S=T.lens[T.have-1],U=3+(3&b),b>>>=2,P-=2}else if(ge===17){for(z=se+3;P<z;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}P-=se,S=0,U=3+(7&(b>>>=se)),b>>>=3,P-=3}else{for(z=se+7;P<z;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}P-=se,S=0,U=11+(127&(b>>>=se)),b>>>=7,P-=7}if(T.have+U>T.nlen+T.ndist){H.msg="invalid bit length repeat",T.mode=h;break}for(;U--;)T.lens[T.have++]=S}}if(T.mode===h)break;if(T.lens[256]===0){H.msg="invalid code -- missing end-of-block",T.mode=h;break}if(T.lenbits=9,B={bits:T.lenbits},M=s(1,T.lens,0,T.nlen,T.lencode,0,T.work,B),T.lenbits=B.bits,M){H.msg="invalid literal/lengths set",T.mode=h;break}if(T.distbits=6,T.distcode=T.distdyn,B={bits:T.distbits},M=s(2,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,B),T.distbits=B.bits,M){H.msg="invalid distances set",T.mode=h;break}if(T.mode=20,Y===6)break e;case 20:T.mode=21;case 21:if(k>=6&&A>=258){H.next_out=w,H.avail_out=A,H.next_in=D,H.avail_in=k,T.hold=b,T.bits=P,a(H,Q),w=H.next_out,v=H.output,A=H.avail_out,D=H.next_in,te=H.input,k=H.avail_in,b=T.hold,P=T.bits,T.mode===f&&(T.back=-1);break}for(T.back=0;ue=(x=T.lencode[b&(1<<T.lenbits)-1])>>>16&255,ge=65535&x,!((se=x>>>24)<=P);){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(ue&&(240&ue)==0){for(me=se,C=ue,j=ge;ue=(x=T.lencode[j+((b&(1<<me+C)-1)>>me)])>>>16&255,ge=65535&x,!(me+(se=x>>>24)<=P);){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}b>>>=me,P-=me,T.back+=me}if(b>>>=se,P-=se,T.back+=se,T.length=ge,ue===0){T.mode=26;break}if(32&ue){T.back=-1,T.mode=f;break}if(64&ue){H.msg="invalid literal/length code",T.mode=h;break}T.extra=15&ue,T.mode=22;case 22:if(T.extra){for(z=T.extra;P<z;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.length+=b&(1<<T.extra)-1,b>>>=T.extra,P-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;ue=(x=T.distcode[b&(1<<T.distbits)-1])>>>16&255,ge=65535&x,!((se=x>>>24)<=P);){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if((240&ue)==0){for(me=se,C=ue,j=ge;ue=(x=T.distcode[j+((b&(1<<me+C)-1)>>me)])>>>16&255,ge=65535&x,!(me+(se=x>>>24)<=P);){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}b>>>=me,P-=me,T.back+=me}if(b>>>=se,P-=se,T.back+=se,64&ue){H.msg="invalid distance code",T.mode=h;break}T.offset=ge,T.extra=15&ue,T.mode=24;case 24:if(T.extra){for(z=T.extra;P<z;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}T.offset+=b&(1<<T.extra)-1,b>>>=T.extra,P-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){H.msg="invalid distance too far back",T.mode=h;break}T.mode=25;case 25:if(A===0)break e;if(U=Q-A,T.offset>U){if((U=T.offset-U)>T.whave&&T.sane){H.msg="invalid distance too far back",T.mode=h;break}U>T.wnext?(U-=T.wnext,Z=T.wsize-U):Z=T.wnext-U,U>T.length&&(U=T.length),fe=T.window}else fe=v,Z=w-T.offset,U=T.length;U>A&&(U=A),A-=U,T.length-=U;do v[w++]=fe[Z++];while(--U);T.length===0&&(T.mode=21);break;case 26:if(A===0)break e;v[w++]=T.length,A--,T.mode=21;break;case 27:if(T.wrap){for(;P<32;){if(k===0)break e;k--,b|=te[D++]<<P,P+=8}if(Q-=A,H.total_out+=Q,T.total+=Q,Q&&(H.adler=T.check=T.flags?o(T.check,v,Q,w-Q):i(T.check,v,Q,w-Q)),Q=A,(T.flags?b:y(b))!==T.check){H.msg="incorrect data check",T.mode=h;break}b=0,P=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;P<32;){if(k===0)break e;k--,b+=te[D++]<<P,P+=8}if(b!==(4294967295&T.total)){H.msg="incorrect length check",T.mode=h;break}b=0,P=0}T.mode=29;case 29:M=1;break e;case h:M=-3;break e;case 31:return-4;default:return c}return H.next_out=w,H.avail_out=A,H.next_in=D,H.avail_in=k,T.hold=b,T.bits=P,(T.wsize||Q!==H.avail_out&&T.mode<h&&(T.mode<27||Y!==4))&&W(H,H.output,H.next_out,Q-H.avail_out),V-=H.avail_in,Q-=H.avail_out,H.total_in+=V,H.total_out+=Q,T.total+=Q,T.wrap&&Q&&(H.adler=T.check=T.flags?o(T.check,v,Q,H.next_out-Q):i(T.check,v,Q,H.next_out-Q)),H.data_type=T.bits+(T.last?64:0)+(T.mode===f?128:0)+(T.mode===20||T.mode===15?256:0),(V===0&&Q===0||Y===4)&&M===0&&(M=-5),M},e.inflateEnd=function(H){if(!H||!H.state)return c;var Y=H.state;return Y.window&&(Y.window=null),H.state=null,0},e.inflateGetHeader=function(H,Y){var T;return H&&H.state?(2&(T=H.state).wrap)==0?c:(T.head=Y,Y.done=!1,0):c},e.inflateSetDictionary=function(H,Y){var T,te=Y.length;return H&&H.state?(T=H.state).wrap!==0&&T.mode!==11?c:T.mode===11&&i(1,Y,te,0)!==T.check?-3:W(H,Y,te,te)?(T.mode=31,-4):(T.havedict=1,0):c},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(o){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var s=a.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var c in s)s.hasOwnProperty(c)&&(o[c]=s[c])}}return o},e.shrinkBuf=function(o,a){return o.length===a?o:o.subarray?o.subarray(0,a):(o.length=a,o)};var n={arraySet:function(o,a,s,c,f){if(a.subarray&&o.subarray)o.set(a.subarray(s,s+c),f);else for(var h=0;h<c;h++)o[f+h]=a[s+h]},flattenChunks:function(o){var a,s,c,f,h,y;for(c=0,a=0,s=o.length;a<s;a++)c+=o[a].length;for(y=new Uint8Array(c),f=0,a=0,s=o.length;a<s;a++)h=o[a],y.set(h,f),f+=h.length;return y}},i={arraySet:function(o,a,s,c,f){for(var h=0;h<c;h++)o[f+h]=a[s+h]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},function(t,e){t.exports=function(r,n,i,o){for(var a=65535&r|0,s=r>>>16&65535|0,c=0;i!==0;){i-=c=i>2e3?2e3:i;do s=s+(a=a+n[o++]|0)|0;while(--c);a%=65521,s%=65521}return a|s<<16|0}},function(t,e){var r=function(){for(var n,i=[],o=0;o<256;o++){n=o;for(var a=0;a<8;a++)n=1&n?3988292384^n>>>1:n>>>1;i[o]=n}return i}();t.exports=function(n,i,o,a){var s=r,c=a+o;n^=-1;for(var f=a;f<c;f++)n=n>>>8^s[255&(n^i[f])];return-1^n}},function(t,e){t.exports=function(r,n){var i,o,a,s,c,f,h,y,g,_,E,O,R,L,q,X,ne,W,H,Y,T,te,v,D,w;i=r.state,o=r.next_in,D=r.input,a=o+(r.avail_in-5),s=r.next_out,w=r.output,c=s-(n-r.avail_out),f=s+(r.avail_out-257),h=i.dmax,y=i.wsize,g=i.whave,_=i.wnext,E=i.window,O=i.hold,R=i.bits,L=i.lencode,q=i.distcode,X=(1<<i.lenbits)-1,ne=(1<<i.distbits)-1;e:do{R<15&&(O+=D[o++]<<R,R+=8,O+=D[o++]<<R,R+=8),W=L[O&X];t:for(;;){if(O>>>=H=W>>>24,R-=H,(H=W>>>16&255)==0)w[s++]=65535&W;else{if(!(16&H)){if((64&H)==0){W=L[(65535&W)+(O&(1<<H)-1)];continue t}if(32&H){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}Y=65535&W,(H&=15)&&(R<H&&(O+=D[o++]<<R,R+=8),Y+=O&(1<<H)-1,O>>>=H,R-=H),R<15&&(O+=D[o++]<<R,R+=8,O+=D[o++]<<R,R+=8),W=q[O&ne];r:for(;;){if(O>>>=H=W>>>24,R-=H,!(16&(H=W>>>16&255))){if((64&H)==0){W=q[(65535&W)+(O&(1<<H)-1)];continue r}r.msg="invalid distance code",i.mode=30;break e}if(T=65535&W,R<(H&=15)&&(O+=D[o++]<<R,(R+=8)<H&&(O+=D[o++]<<R,R+=8)),(T+=O&(1<<H)-1)>h){r.msg="invalid distance too far back",i.mode=30;break e}if(O>>>=H,R-=H,T>(H=s-c)){if((H=T-H)>g&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(te=0,v=E,_===0){if(te+=y-H,H<Y){Y-=H;do w[s++]=E[te++];while(--H);te=s-T,v=w}}else if(_<H){if(te+=y+_-H,(H-=_)<Y){Y-=H;do w[s++]=E[te++];while(--H);if(te=0,_<Y){Y-=H=_;do w[s++]=E[te++];while(--H);te=s-T,v=w}}}else if(te+=_-H,H<Y){Y-=H;do w[s++]=E[te++];while(--H);te=s-T,v=w}for(;Y>2;)w[s++]=v[te++],w[s++]=v[te++],w[s++]=v[te++],Y-=3;Y&&(w[s++]=v[te++],Y>1&&(w[s++]=v[te++]))}else{te=s-T;do w[s++]=w[te++],w[s++]=w[te++],w[s++]=w[te++],Y-=3;while(Y>2);Y&&(w[s++]=w[te++],Y>1&&(w[s++]=w[te++]))}break}}break}}while(o<a&&s<f);o-=Y=R>>3,O&=(1<<(R-=Y<<3))-1,r.next_in=o,r.next_out=s,r.avail_in=o<a?a-o+5:5-(o-a),r.avail_out=s<f?f-s+257:257-(s-f),i.hold=O,i.bits=R}},function(t,e,r){var n=r(33),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(f,h,y,g,_,E,O,R){var L,q,X,ne,W,H,Y,T,te,v=R.bits,D=0,w=0,k=0,A=0,b=0,P=0,V=0,Q=0,U=0,Z=0,fe=null,se=0,ue=new n.Buf16(16),ge=new n.Buf16(16),me=null,C=0;for(D=0;D<=i;D++)ue[D]=0;for(w=0;w<g;w++)ue[h[y+w]]++;for(b=v,A=i;A>=1&&ue[A]===0;A--);if(b>A&&(b=A),A===0)return _[E++]=20971520,_[E++]=20971520,R.bits=1,0;for(k=1;k<A&&ue[k]===0;k++);for(b<k&&(b=k),Q=1,D=1;D<=i;D++)if(Q<<=1,(Q-=ue[D])<0)return-1;if(Q>0&&(f===0||A!==1))return-1;for(ge[1]=0,D=1;D<i;D++)ge[D+1]=ge[D]+ue[D];for(w=0;w<g;w++)h[y+w]!==0&&(O[ge[h[y+w]]++]=w);if(f===0?(fe=me=O,H=19):f===1?(fe=o,se-=257,me=a,C-=257,H=256):(fe=s,me=c,H=-1),Z=0,w=0,D=k,W=E,P=b,V=0,X=-1,ne=(U=1<<b)-1,f===1&&U>852||f===2&&U>592)return 1;for(;;){Y=D-V,O[w]<H?(T=0,te=O[w]):O[w]>H?(T=me[C+O[w]],te=fe[se+O[w]]):(T=96,te=0),L=1<<D-V,k=q=1<<P;do _[W+(Z>>V)+(q-=L)]=Y<<24|T<<16|te|0;while(q!==0);for(L=1<<D-1;Z&L;)L>>=1;if(L!==0?(Z&=L-1,Z+=L):Z=0,w++,--ue[D]==0){if(D===A)break;D=h[y+O[w]]}if(D>b&&(Z&ne)!==X){for(V===0&&(V=b),W+=k,Q=1<<(P=D-V);P+V<A&&!((Q-=ue[P+V])<=0);)P++,Q<<=1;if(U+=1<<P,f===1&&U>852||f===2&&U>592)return 1;_[X=Z&ne]=b<<24|P<<16|W-E|0}}return Z!==0&&(_[W+Z]=D-V<<24|64<<16|0),R.bits=b,0}},function(t,e,r){var n=r(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(f,h){if(h<65537&&(f.subarray&&o||!f.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(f,h));for(var y="",g=0;g<h;g++)y+=String.fromCharCode(f[g]);return y}a[254]=a[254]=1,e.string2buf=function(f){var h,y,g,_,E,O=f.length,R=0;for(_=0;_<O;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<O&&(64512&(g=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),R+=y<128?1:y<2048?2:y<65536?3:4;for(h=new n.Buf8(R),E=0,_=0;E<R;_++)(64512&(y=f.charCodeAt(_)))==55296&&_+1<O&&(64512&(g=f.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),y<128?h[E++]=y:y<2048?(h[E++]=192|y>>>6,h[E++]=128|63&y):y<65536?(h[E++]=224|y>>>12,h[E++]=128|y>>>6&63,h[E++]=128|63&y):(h[E++]=240|y>>>18,h[E++]=128|y>>>12&63,h[E++]=128|y>>>6&63,h[E++]=128|63&y);return h},e.buf2binstring=function(f){return c(f,f.length)},e.binstring2buf=function(f){for(var h=new n.Buf8(f.length),y=0,g=h.length;y<g;y++)h[y]=f.charCodeAt(y);return h},e.buf2string=function(f,h){var y,g,_,E,O=h||f.length,R=new Array(2*O);for(g=0,y=0;y<O;)if((_=f[y++])<128)R[g++]=_;else if((E=a[_])>4)R[g++]=65533,y+=E-1;else{for(_&=E===2?31:E===3?15:7;E>1&&y<O;)_=_<<6|63&f[y++],E--;E>1?R[g++]=65533:_<65536?R[g++]=_:(_-=65536,R[g++]=55296|_>>10&1023,R[g++]=56320|1023&_)}return c(R,g)},e.utf8border=function(f,h){var y;for((h=h||f.length)>f.length&&(h=f.length),y=h-1;y>=0&&(192&f[y])==128;)y--;return y<0||y===0?h:y+a[f[y]]>h?y:h}},function(t,e){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])},g0.exports=tm();var U7=wb(g0.exports);const z7=g0.exports.BFSRequire("fs"),{existsSync:Ed,mkdirSync:K7,readdirSync:nm,readFileSync:Iw,renameSync:q7,rmdirSync:H7,statSync:V7,lstatSync:W7,writeFileSync:Ap,unlinkSync:im}=z7;U7.configure({fs:"LocalStorage",options:{}},function(t){if(t)throw t});const xa=new We("DIDStore");class Me{constructor(e,r,n){e<0&&(e=0),r<0&&(r=0),this.cache=new x6({maxItems:r}),this.storage=n,xa.info("DID store opened: {}, cache(init:{}, max:{})",n.getLocation(),e,r)}static open(e,r=Me.CACHE_INITIAL_CAPACITY,n=Me.CACHE_MAX_CAPACITY){return ve(this,void 0,void 0,function*(){oe(e!=null&&e!="","Invalid store context"),oe(n>=r,"Invalid cache capacity spec");let i=new xe(e);yield i.init();let o=new Me(r,n,i);return o.metadata=yield i.loadMetadata(),o.metadata.attachStore(o),o})}close(){this.cache.invalidateAll(),this.cache=null,this.metadata=null,this.storage=null}static calcFingerprint(e){let r=om(Se.Buffer.from(e)).toString();try{return om(au.encrypt(Se.Buffer.from(r,"hex"),e)).toString()}catch(n){throw new ql("Calculate fingerprint error.",n)}}static encryptToBase64(e,r){try{return au.encryptToBase64(e,r)}catch(n){throw new ql("Encrypt data error.",n)}}static decryptFromBase64(e,r){try{return au.decryptFromBase64(e,r)}catch(n){throw new Ps("Decrypt private key error.",n)}}static reEncrypt(e,r,n){let i=this.decryptFromBase64(e,r);return this.encryptToBase64(i,n)}encrypt(e,r){let n=this.metadata.getFingerprint(),i=Me.calcFingerprint(r);if(n!=null&&i!==n)throw new Ps("Password mismatched with previous password.");let o=Me.encryptToBase64(e,r);return n!=null&&n!==""||this.metadata.setFingerprint(i),o}decrypt(e,r){let n=this.metadata.getFingerprint(),i=Me.calcFingerprint(r),o=Me.decryptFromBase64(e,r);return n!=null&&n!==""||this.metadata.setFingerprint(i),o}storeRootIdentity(e,r){if(oe(e!=null,"Invalid identity"),r!==void 0){oe(r!=null&&r!=="","Invalid storepass");let n=null;e.getMnemonic()!=null&&(n=this.encrypt(Se.Buffer.from(e.getMnemonic(),"utf8"),r));let i=this.encrypt(e.getRootPrivateKey().serialize(),r),o=e.getPreDerivedPublicKey().serializePublicKeyBase58();this.storage.storeRootIdentity(e.getId(),n,i,o,e.getIndex()),this.metadata.getDefaultRootIdentity()==null&&this.metadata.setDefaultRootIdentity(e.getId()),this.cache.invalidate(Me.Key.forRootIdentity(e.getId())),this.cache.invalidate(Me.Key.forRootIdentityPrivateKey(e.getId()))}else this.storage.updateRootIdentityIndex(e.getId(),e.getIndex())}setDefaultRootIdentity(e){if(oe(e!=null,"Invalid identity"),!this.containsRootIdentity(e.getId()))throw new ti("Invalid identity, not exists in the store");this.metadata.setDefaultRootIdentity(e.getId())}loadRootIdentity(e){return ve(this,void 0,void 0,function*(){if(e===void 0&&((e=this.metadata.getDefaultRootIdentity())==null||e==="")){let r=this.storage.listRootIdentities();if(r.length!=1)return null;{let n=r[0],i=yield this.loadRootIdentityMetadata(n.getId());return n.setMetadata(i),this.metadata.setDefaultRootIdentity(n.getId()),n}}oe(e!=null&&e!=="","Invalid id");try{let r=yield this.cache.getAsync(Me.Key.forRootIdentity(e),()=>ve(this,void 0,void 0,function*(){let n=this.storage.loadRootIdentity(e);return n!=null?(n.setMetadata(yield this.loadRootIdentityMetadata(e)),{value:n}):{value:Me.NULL}}));return r===Me.NULL?null:r}catch(r){throw new vr("Load root identity failed: "+e,r)}})}containsRootIdentity(e){return oe(e!=null&&e!=="","Invalid id"),this.storage.containsRootIdentity(e)}exportRootIdentityMnemonic(e,r){oe(e!=null&&e!=="","Invalid id"),oe(r!=null&&r!=="","Invalid storepass");let n=this.storage.loadRootIdentityMnemonic(e);return n!=null?new String(this.decrypt(n,r)).valueOf():null}containsRootIdentityMnemonic(e){return oe(e!=null&&e!=="","Invalid id"),this.storage.loadRootIdentityMnemonic(e)!=null}loadRootIdentityPrivateKey(e,r){try{let n=this.cache.get(Me.Key.forRootIdentityPrivateKey(e),()=>{let i=this.storage.loadRootIdentityPrivateKey(e);return{value:i!=null?i:Me.NULL}});if(n!==Me.NULL){let i=this.decrypt(n,r);return qe.deserialize(i)}return null}catch(n){throw n instanceof Ps?n:new vr("Load root identity private key failed: "+e,n)}}derive(e,r,n){oe(e!=null&&e!=="","Invalid identity"),oe(r!=null&&r!=="","Invalid path"),oe(n!=null&&n!=="","Invalid storepass");let i=this.loadRootIdentityPrivateKey(e,n);if(!i)throw new ql("Unable to load root private key for id "+e+". Null private key returned.");return i.deriveWithPath(r)}deleteRootIdentity(e){oe(e!=null&&e!=="","Invalid id");let r=this.storage.deleteRootIdentity(e);return r&&(this.metadata.getDefaultRootIdentity()!=null&&this.metadata.getDefaultRootIdentity()===e&&this.metadata.setDefaultRootIdentity(null),this.cache.invalidate(Me.Key.forRootIdentity(e)),this.cache.invalidate(Me.Key.forRootIdentityPrivateKey(e))),r}listRootIdentities(){return ve(this,void 0,void 0,function*(){let e=this.storage.listRootIdentities();for(let r of e){let n=yield this.loadRootIdentityMetadata(r.getId());r.setMetadata(n)}return e})}containsRootIdentities(){return this.storage.containsRootIdenities()}storeRootIdentityMetadata(e,r){oe(e!=null&&e!=="","Invalid id"),oe(r!=null,"Invalid metadata"),this.storage.storeRootIdentityMetadata(e,r)}loadRootIdentityMetadata(e){return ve(this,void 0,void 0,function*(){oe(e!=null&&e!=="","Invalid id");let r=yield this.storage.loadRootIdentityMetadata(e);return r!=null?(r.setId(e),r.attachStore(this)):r=new Dr.Metadata(e,this),r})}storeDid(e){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid doc"),this.storage.storeDid(e),e.getStore()!=this){let r=yield this.loadDidMetadata(e.getSubject());e.getMetadata().merge(r),e.getMetadata().attachStore(this)}this.storeDidMetadata(e.getSubject(),e.getMetadata());for(let r of e.getCredentials())yield this.storeCredential(r);this.cache.put(Me.Key.forDidDocument(e.getSubject()),e)})}loadDid(e){return ve(this,void 0,void 0,function*(){let r;oe(e!=null,"Invalid did"),r=e instanceof Oe?e:Oe.from(e);try{let n=yield this.cache.getAsync(Me.Key.forDidDocument(r),()=>ve(this,void 0,void 0,function*(){let i=yield this.storage.loadDid(r);return i!=null?(i.setMetadata(yield this.loadDidMetadata(r)),{value:i}):{value:Me.NULL}}));return n===Me.NULL?null:n}catch(n){throw new vr("Load did document failed: "+r,n)}})}containsDid(e){let r;return oe(e!=null,"Invalid did"),r=e instanceof Oe?e:Oe.from(e),this.storage.containsDid(r)}containsDids(){return this.storage.containsDids()}storeDidMetadata(e,r){oe(e!=null,"Invalid did"),oe(r!=null,"Invalid metadata"),this.storage.storeDidMetadata(e,r),r.attachStore(this),this.cache.put(Me.Key.forDidMetadata(e),r)}loadDidMetadata(e){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid did");try{let r=yield this.cache.getAsync(Me.Key.forDidMetadata(e),()=>ve(this,void 0,void 0,function*(){let n=yield this.storage.loadDidMetadata(e);return n!=null?(n.setDid(e),n.attachStore(this)):n=new ct(e,this),{value:n}}));return r===Me.NULL?null:r}catch(r){throw new vr("Load did metadata failed: "+e,r)}})}deleteDid(e){let r;oe(e!=null,"Invalid did"),r=e instanceof Oe?e:Oe.from(e);let n=this.storage.deleteDid(r);return n&&(this.cache.invalidate(Me.Key.forDidDocument(r)),this.cache.invalidate(Me.Key.forDidMetadata(r)),this.cache.invalidateAll(i=>i.id instanceof Je&&i.id.getDid()===r)),n}listDids(){return ve(this,void 0,void 0,function*(){let e=this.storage.listDids();for(let r of e){let n=yield this.loadDidMetadata(r);n==null?n=new ct(r,this):(n.setDid(r),n.attachStore(this)),r.setMetadata(n)}return e})}selectDids(e){return ve(this,void 0,void 0,function*(){let r=yield this.listDids();if(e!=null){let n=[];for(let i of r)e.select(i)&&n.push(i);r=n}return r})}storeCredential(e){return ve(this,void 0,void 0,function*(){if(oe(e!=null,"Invalid credential"),this.storage.storeCredential(e),e.getMetadata().getStore()!=this){let r=yield this.loadCredentialMetadata(e.getId());e.getMetadata().merge(r),e.getMetadata().attachStore(this)}this.storeCredentialMetadata(e.getId(),e.getMetadata()),this.cache.put(Me.Key.forCredential(e.getId()),e)})}loadCredential(e){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid credential id"),typeof e=="string"&&(e=Je.from(e)),oe(e.isQualified(),"Unqualified credential id");try{let r=yield this.cache.getAsync(Me.Key.forCredential(e),()=>ve(this,void 0,void 0,function*(){let n=yield this.storage.loadCredential(e);return n!=null?(n.setMetadata(yield this.loadCredentialMetadata(e)),{value:n}):{value:Me.NULL}}));return r===Me.NULL?null:r}catch(r){throw new vr("Load credential failed: "+e,r)}})}containsCredential(e){oe(e!=null,"Invalid credential id");let r=Je.from(e);return oe(r.isQualified(),"Unqualified credential id"),this.storage.containsCredential(r)}containsCredentials(e){return oe(e!=null,"Invalid did"),this.storage.containsCredentials(e)}storeCredentialMetadata(e,r){oe(e!=null,"Invalid credential id"),oe(e.isQualified(),"Unqualified credential id"),oe(r!=null,"Invalid credential metadata"),this.storage.storeCredentialMetadata(e,r),r.attachStore(this),this.cache.put(Me.Key.forCredentialMetadata(e),r)}loadCredentialMetadata(e){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid credential id"),oe(e.isQualified(),"Unqualified credential id");try{let r=yield this.cache.getAsync(Me.Key.forCredentialMetadata(e),()=>ve(this,void 0,void 0,function*(){let n=yield this.storage.loadCredentialMetadata(e);return n!=null?(n.setId(e),n.attachStore(this)):n=new lr(e,this),{value:n}}));return r===Me.NULL?null:r}catch(r){throw new vr("Load Credential metadata failed: "+e,r)}})}deleteCredential(e){oe(e!=null,"Invalid credential id");let r=Je.from(e);oe(r.isQualified(),"Unqualified credential id");let n=this.storage.deleteCredential(r);return n&&(this.cache.invalidate(Me.Key.forCredential(r)),this.cache.invalidate(Me.Key.forCredentialMetadata(r))),n}listCredentials(e){return ve(this,void 0,void 0,function*(){let r;oe(e!=null,"Invalid did"),r=e instanceof Oe?e:Oe.from(e);let n=this.storage.listCredentials(r);for(let i of n){let o=yield this.loadCredentialMetadata(i);o==null?o=new lr(i,this):(o.setId(i),o.attachStore(this)),i.setMetadata(o)}return n})}selectCredentials(e,r){return ve(this,void 0,void 0,function*(){let n;oe(e!=null,"Invalid did"),n=e instanceof Oe?e:Oe.from(e);let i=yield this.listCredentials(n);if(r!=null){let o=[];for(let a of i)r.select(a)&&o.push(a);i=o}return i})}storePrivateKey(e,r,n){oe(e!=null,"Invalid private key id");let i=Je.from(e);oe(i.isQualified(),"Unqualified private key id"),oe(r!=null&&r.length!=0,"Invalid private key"),oe(n!=null&&n!=="","Invalid storepass");let o=this.encrypt(r,n);this.storage.storePrivateKey(i,o),this.cache.put(Me.Key.forDidPrivateKey(i),o)}storeLazyPrivateKey(e){oe(e!=null,"Invalid private key id"),oe(e.isQualified(),"Unqualified private key id"),this.storage.storePrivateKey(e,Me.DID_LAZY_PRIVATEKEY),this.cache.put(Me.Key.forDidPrivateKey(e),Me.DID_LAZY_PRIVATEKEY)}loadPrivateKey(e,r){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid private key id"),oe(e.isQualified(),"Unqualified private key id"),oe(r&&r!=null,"Invalid storepass");try{let n=this.cache.get(Me.Key.forDidPrivateKey(e),()=>{let i=this.storage.loadPrivateKey(e);return{value:i!=null?i:Me.NULL}});return n!==Me.NULL&&n?n===Me.DID_LAZY_PRIVATEKEY?yield Dr.lazyCreateDidPrivateKey(e,this,r):this.decrypt(n,r):null}catch{throw new vr("Load did private key failed.")}})}containsPrivateKey(e){oe(e!=null,"Invalid private key id");let r=Je.from(e);return oe(r.isQualified(),"Unqualified private key id"),this.storage.containsPrivateKey(r)}containsPrivateKeys(e){let r;return oe(e!=null,"Invalid did"),r=e instanceof Oe?e:Oe.from(e),this.storage.containsPrivateKeys(r)}deletePrivateKey(e){oe(e!=null,"Invalid private key id");let r=Je.from(e),n=this.storage.deletePrivateKey(r);return n&&this.cache.invalidate(Me.Key.forDidPrivateKey(r)),n}sign(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid private key id"),oe(e.isQualified(),"Unqualified private key id"),oe(r!=null&&r!=="","Invalid storepass"),oe(n!=null&&n.length>0,"Invalid digest");let i=yield this.loadPrivateKey(e,r);if(i==null)throw new vr("Private key not exists: "+e.toString());let o=qe.deserialize(i),a=vc.sign(o.getPrivateKeyBytes(),n);return i.fill(0),o.wipe(),Zr.fromHex(a.toString("hex"))})}changePassword(e,r){oe(e!=null&&e!=="","Invalid old password"),oe(r!=null&&r!=="","Invalid new password"),this.storage.changePassword({reEncrypt:n=>Me.reEncrypt(n,e,r)}),this.metadata.setFingerprint(Me.calcFingerprint(r)),this.cache.invalidateAll()}synchronize(e=null){return ve(this,void 0,void 0,function*(){e==null&&(e=Ya.getInstance());let r=yield this.listRootIdentities();for(let i of r)yield i.synchronize(e);let n=this.storage.listDids();for(let i of n){let o=yield this.storage.loadDid(i);if(o.isCustomizedDid()){let s=yield i.resolve();if(s==null)continue;let c=s;if(o.getMetadata().detachStore(),o.getSignature()===s.getSignature()||o.getMetadata().getSignature()!=null&&o.getProof().getSignature()===o.getMetadata().getSignature())c.getMetadata().merge(o.getMetadata());else{if(xa.debug("{} on-chain copy conflict with local copy.",i.toString()),c=e.merge(s,o),c==null||!c.getSubject().equals(i))throw xa.error("Conflict handle merge the DIDDocument error."),new vr("deal with local modification error.");xa.debug("Conflict handle return the final copy.")}o.getMetadata().attachStore(this);let f=c.getMetadata();f.setPublished(s.getMetadata().getPublished()),f.setSignature(s.getProof().getSignature()),s.getMetadata().isDeactivated()&&f.setDeactivated(!0),f.attachStore(this),this.storage.storeDid(c)}let a=this.storage.listCredentials(i);for(let s of a){let c=yield this.storage.loadCredential(s),f=yield gt.resolve(s,c.getIssuer());f!=null&&(f.getMetadata().merge(c.getMetadata()),this.storage.storeCredential(f))}}})}exportDid(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid id"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass"),typeof e=="string"&&(e=Oe.from(e));let i=yield this.storage.loadDid(e);if(i==null)throw new vr("Export DID "+e+" failed, not exist.");i.setMetadata(yield this.storage.loadDidMetadata(e)),xa.debug("Exporting {}...",e.toString());let o=new Me.DIDExport(e);if(o.setDocument(i),this.storage.containsCredentials(e)){let a=Array.from(yield this.listCredentials(e));a.sort();for(let s of a){xa.debug("Exporting credential {}...",s.toString());let c=yield this.storage.loadCredential(s);c.setMetadata(yield this.storage.loadCredentialMetadata(s)),o.addCredential(c)}}if(this.storage.containsPrivateKeys(e)){let a=i.getPublicKeys();for(let s of a){if(!s.getController().equals(e))continue;let c=s.getId(),f=this.storage.loadPrivateKey(c);f!=null&&(xa.debug("Exporting private key {}...",c.toString()),o.addPrivatekey(c,f,n,r))}}return o.seal(r),o.serialize(!0)})}importDid(e,r,n){oe(e!=null&&e!=="","Invalid import data"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass");let i=Me.DIDExport.parse(e);i.verify(r);let o=i.getDocument();this.storage.storeDid(o),this.storage.storeDidMetadata(o.getSubject(),o.getMetadata());let a=i.getCredentials();for(let c of a)this.storage.storeCredential(c),this.storage.storeCredentialMetadata(c.getId(),c.getMetadata());let s=i.getPrivateKeys();for(let c of s)this.storage.storePrivateKey(c.getId(),c.getKey(r,n));return null}exportRootIdentity(e,r,n){oe(e!=null&&e!=="","Invalid id"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass");let i=new Me.RootIdentityExport,o=this.storage.loadRootIdentityMnemonic(e);o!==null&&i.setMnemonic(o,n,r),i.setPirvateKey(this.storage.loadRootIdentityPrivateKey(e),n,r);let a=this.storage.loadRootIdentity(e);return i.setPublicKey(a.getPreDerivedPublicKey().serializePublicKeyBase58()),i.setIndex(a.getIndex()),a.getId()==this.metadata.getDefaultRootIdentity()&&i.setDefault(),i.seal(r),i.serialize(!0)}importRootIdentity(e,r,n){oe(e!=null&&e!=="","Invalid import data"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass");let i=Me.RootIdentityExport.parse(e);i.verify(r);let o=i.getMnemonic(r,n),a=i.getPrivateKey(r,n),s=i.getPublicKey(),c=qe.deserializeBase58(s),f=Dr.getId(c.serializePublicKey());return this.storage.storeRootIdentity(f,o,a,s,i.getIndex()),i.isDefault()&&this.metadata.getDefaultRootIdentity()==null&&this.metadata.setDefaultRootIdentity(f),null}exportStore(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid zip file"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass");let i=new rm,o=yield this.listDids();for(let s of o){let c=yield this.exportDid(s,r,n);i.file("did-"+s.getMethodSpecificId(),c)}let a=yield this.listRootIdentities();for(let s of a){let c=yield this.exportRootIdentity(s.getId(),r,n);i.file("rootIdentity-"+s.getId(),c)}new Xe(e).createFile();try{let s=yield i.generateAsync({type:"nodebuffer",platform:"UNIX"});Ap(e,s,{mode:420,flag:"w+"})}catch(s){throw new er(s)}})}importStore(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid zip file"),oe(r!=null&&r!=="","Invalid password"),oe(n!=null&&n!=="","Invalid storepass");let i=this.metadata.getFingerprint(),o=Me.calcFingerprint(n);if(i!=null&&o!==i)throw new Ps("Password mismatched with previous password.");try{const a=[];let s=yield Iw(e),c=yield rm.loadAsync(s);c.forEach((f,h)=>{let y=c.file(f).async("string").then(g=>ve(this,void 0,void 0,function*(){f.startsWith("rootIdentity-")?yield this.importRootIdentity(g,r,n):f.startsWith("did-")?yield this.importDid(g,r,n):console.log("Skip unknow export entry: "+f)}));a.push(y)}),yield Promise.all(a)}catch(a){throw new er(a)}i!=null&&i!=""||this.metadata.setFingerprint(o)})}}Me.CACHE_INITIAL_CAPACITY=16,Me.CACHE_MAX_CAPACITY=128,Me.NULL=null,Me.DID_LAZY_PRIVATEKEY="lazy-private-key",function(t){class e{constructor(o,a){this.type=o,this.id=a}hashCode(){return this.type+this.id.hashCode()}equals(o){if(o==this)return!0;if(o instanceof e){let a=o;return this.type==a.type&&this.id.equals(a.id)}return!1}static forRootIdentity(o){return new e(t.Key.TYPE_ROOT_IDENTITY,new class{equals(a){return a===o}compareTo(a){return o.localeCompare(a)}hashCode(){return na(o)}})}static forRootIdentityPrivateKey(o){return new e(t.Key.TYPE_ROOT_IDENTITY_PRIVATEKEY,new class{constructor(){this.key=o}equals(a){return a===this.key}compareTo(a){return this.key<a?-1:this.key>a?1:0}hashCode(){return na(this.key)}})}static forDidDocument(o){return new e(t.Key.TYPE_DID_DOCUMENT,o)}static forDidMetadata(o){return new e(t.Key.TYPE_DID_METADATA,o)}static forDidPrivateKey(o){return new e(t.Key.TYPE_DID_PRIVATEKEY,o)}static forCredential(o){return new e(t.Key.TYPE_CREDENTIAL,o)}static forCredentialMetadata(o){return new e(t.Key.TYPE_CREDENTIAL_METADATA,o)}}e.TYPE_ROOT_IDENTITY=0,e.TYPE_ROOT_IDENTITY_PRIVATEKEY=1,e.TYPE_DID_DOCUMENT=16,e.TYPE_DID_METADATA=17,e.TYPE_DID_PRIVATEKEY=18,e.TYPE_CREDENTIAL=32,e.TYPE_CREDENTIAL_METADATA=33,t.Key=e;class r extends Pe{constructor(o=null){super(),this.document=null,this.credentials=[],this.privatekeys=[],this.created=null,this.fingerprint=null,this.type=r.DID_EXPORT,this.id=o}getId(){return this.id}getDocument(){return this.document.content}setDocument(o){this.document=new t.DIDExport.Document(o,o.getMetadata().isEmpty()?null:o.getMetadata())}getCredentials(){if(this.credentials==null)return[];let o=[];for(let a of this.credentials)o.push(a.content);return o}addCredential(o){this.credentials==null&&(this.credentials=[]),this.credentials.push(new r.Credential(o,o.getMetadata().isEmpty()?null:o.getMetadata()))}getPrivateKeys(){return this.privatekeys!=null?this.privatekeys:[]}addPrivatekey(o,a,s,c){this.privatekeys==null&&(this.privatekeys=[]);let f=new t.DIDExport.PrivateKey(o);f.setKey(a,s,c),this.privatekeys.push(f)}calculateFingerprint(o){let a=Jo("sha256");if(a.update(Se.Buffer.from(o)),a.update(Se.Buffer.from(this.type)),a.update(Se.Buffer.from(this.id.toString())),a.update(Se.Buffer.from(this.document.content.toString(!0))),this.document.metadata&&a.update(Se.Buffer.from(this.document.metadata.toString(!0))),this.credentials)for(let c of this.credentials)a.update(Se.Buffer.from(c.content.toString(!0))),c.metadata&&a.update(Se.Buffer.from(c.metadata.toString(!0)));for(let c of this.privatekeys)a.update(Se.Buffer.from(c.id.toString())),a.update(Se.Buffer.from(c.key));a.update(Se.Buffer.from(this.dateToString(this.created)));let s=a.digest();return Zr.toUrlFormat(s.toString("base64"))}seal(o){let a=ei();return a.set("milliseconds",0),this.created=a.toDate(),this.fingerprint=this.calculateFingerprint(o),this}verify(o){if(this.fingerprint!==this.calculateFingerprint(o))throw new er("Invalid export data, fingerprint mismatch. "+this.id.toString())}toJSON(o=null){let a={};return a.type=this.type,a.id=this.id.toString(),a.document=this.document.toJSON(),this.credentials&&this.credentials.length>0&&(a.credential=Array.from(this.credentials,s=>s.toJSON())),this.privatekeys&&this.privatekeys.length>0&&(a.privateKey=Array.from(this.privatekeys,s=>s.toJSON())),a.created=this.dateToString(this.created),a.fingerprint=this.fingerprint,a}fromJSON(o,a=null){if(this.type=this.getString("type",o.type,{mandatory:!0,nullable:!1}),!this.type||this.type!==r.DID_EXPORT)throw new er("Invalid export data, unknown type.");if(this.id=this.getDid("id",o.id,{mandatory:!0,nullable:!1}),!o.document)throw new er("Invalid export data, missing document.");if(this.document=r.Document.parse(o.document),o.credential){if(!Array.isArray(o.credential))throw new er("Invalid export data, invalid credentials.");this.credentials=Array.from(o.credential,s=>r.Credential.parse(s))}if(o.privateKey){if(!Array.isArray(o.privateKey))throw new er("Invalid export data, invalid privatekeys.");this.privatekeys=Array.from(o.privateKey,s=>r.PrivateKey.parse(s))}this.created=this.getDate("created",o.created,{mandatory:!0,nullable:!1}),this.fingerprint=this.getString("fingerprint",o.fingerprint,{mandatory:!0,nullable:!1})}static parse(o,a=null){try{return Pe.deserialize(o,r,a)}catch(s){throw s instanceof er?s:new er(s)}}}r.DID_EXPORT="did.elastos.export/2.0",t.DIDExport=r,function(i){class o extends Pe{constructor(f=null,h=null){super(),this.content=f,this.metadata=h}toJSON(f=null){let h={};return h.content=this.content.toJSON(),this.metadata&&(h.metadata=this.metadata.toJSON()),h}fromJSON(f,h=null){if(!f.content)throw new er("Invalid export data, missing document content");this.content=Ne._parseOnly(f.content),f.metadata&&(this.metadata=ct.parse(f.metadata),this.content.setMetadata(this.metadata))}static parse(f,h=null){try{return Pe.deserialize(f,o,h)}catch(y){throw y instanceof er?y:new er(y)}}}i.Document=o;class a extends Pe{constructor(f=null,h=null){super(),this.content=f,this.metadata=h}toJSON(f=null){let h={};return h.content=this.content.toJSON(),this.metadata&&(h.metadata=this.metadata.toJSON()),h}fromJSON(f,h=null){if(!f.content)throw new er("Invalid export data, missing credential content");this.content=gt.parse(f.content),f.metadata&&(this.metadata=lr.parse(f.metadata),this.content.setMetadata(this.metadata))}static parse(f,h=null){try{return Pe.deserialize(f,a,h)}catch(y){throw y instanceof er?y:new er(y)}}}i.Credential=a;class s extends Pe{constructor(f=null){super(),this.id=f}getId(){return this.id}setId(f){this.id=f}getKey(f,h){return t.reEncrypt(this.key,f,h)}setKey(f,h,y){this.key=t.reEncrypt(f,h,y)}toJSON(f=null){return{id:this.id.toString(),key:this.key}}fromJSON(f,h=null){this.id=this.getDidUrl("id",f.id,{mandatory:!0,nullable:!1}),this.key=this.getString("key",f.key,{mandatory:!0,nullable:!1})}static parse(f,h=null){try{return Pe.deserialize(f,s,h)}catch(y){throw y instanceof er?y:new er(y)}}}i.PrivateKey=s}(r=t.DIDExport||(t.DIDExport={}));class n extends Pe{constructor(){super(),this.type=n.DID_EXPORT}getMnemonic(o,a){return this.mnemonic==null?null:t.reEncrypt(this.mnemonic,o,a)}setMnemonic(o,a,s){this.mnemonic=t.reEncrypt(o,a,s)}getPrivateKey(o,a){return t.reEncrypt(this.privatekey,o,a)}setPirvateKey(o,a,s){this.privatekey=t.reEncrypt(o,a,s)}getPublicKey(){return this.publickey}setPublicKey(o){this.publickey=o}getIndex(){return this.index}setIndex(o){this.index=o}isDefault(){return this.default==1}setDefault(){this.default=!0}calculateFingerprint(o){let a=Jo("sha256");a.update(Se.Buffer.from(o)),a.update(Se.Buffer.from(this.type)),this.mnemonic&&a.update(Se.Buffer.from(this.mnemonic)),a.update(Se.Buffer.from(this.privatekey)),a.update(Se.Buffer.from(this.publickey)),a.update(Se.Buffer.from(this.index.toString())),a.update(Se.Buffer.from(this.default.toString())),a.update(Se.Buffer.from(this.dateToString(this.created)));let s=a.digest();return Zr.toUrlFormat(s.toString("base64"))}seal(o){let a=ei();return a.set("milliseconds",0),this.created=a.toDate(),this.fingerprint=this.calculateFingerprint(o),this}verify(o){if(this.fingerprint!==this.calculateFingerprint(o))throw new er("Invalid export data, fingerprint mismatch.")}toJSON(o=null){return{type:this.type,mnemonic:this.mnemonic,privateKey:this.privatekey,publicKey:this.publickey,index:this.index.toString(),default:this.default.toString(),created:this.dateToString(this.created),fingerprint:this.fingerprint}}fromJSON(o,a=null){if(this.type=this.getString("type",o.type,{mandatory:!0,nullable:!1}),!this.type||this.type!==n.DID_EXPORT)throw new er("Invalid export data, unknown type.");this.mnemonic=this.getString("mnemonic",o.mnemonic,{mandatory:!0,nullable:!1}),this.privatekey=this.getString("privateKey",o.privateKey,{mandatory:!0,nullable:!1}),this.publickey=this.getString("publicKey",o.publicKey,{mandatory:!0,nullable:!1});let s=this.getString("index",o.index,{mandatory:!0,nullable:!1});this.index=s!=null?Number.parseInt(s):0;let c=this.getString("default",o.default,{mandatory:!0,nullable:!1});this.default=!(!c||c!=="true"),this.created=this.getDate("created",o.created,{mandatory:!0,nullable:!1}),this.fingerprint=this.getString("fingerprint",o.fingerprint,{mandatory:!0,nullable:!1})}static parse(o,a=null){try{return Pe.deserialize(o,n,a)}catch(s){throw s instanceof er?s:new er(s)}}}n.DID_EXPORT="did.elastos.export/2.0",t.RootIdentityExport=n}(Me||(Me={}));class Us{constructor(e,r){if(this.self=e,r){if(!this.self.isAuthenticationKey(r))throw new It(r.toString()+" isn't the authentication key")}else if((r=this.self.getDefaultPublicKeyId())==null)throw new It("Need explict sign key or effective controller");if(!e.hasPrivateKey(r))throw new It("No private key: "+r);this.signKey=r}static newWithDocument(e,r){return oe(e!=null,"Invalid document"),r?new Us(e,r instanceof Je?r:Je.from(r,e.getSubject())):new Us(e)}static newWithDID(e,r,n){return ve(this,void 0,void 0,function*(){oe(e!=null,"Invalid did"),oe(r!=null,"Invalid store");let i=yield r.loadDid(e);return n?new Us(i,n instanceof Je?n:Je.from(n,e)):new Us(i)})}getDid(){return this.self.getSubject()}getDocument(){return this.self}getSignKey(){return this.signKey}sign(e,r){return this.self.signWithId(this.signKey,e,r)}issueFor(e){return oe(e!=null,"Invalid did"),e instanceof Oe?new gt.Builder(this,e):new gt.Builder(this,Oe.from(e))}}class Lc{constructor(e){this.buffer=e,this.position=0}static wrap(e){let r=new Uint8Array(e);for(let n=0;n<e.length;++n)r[n]=e[n];return new Lc(r)}static allocate(e){return new Lc(new Uint8Array(e))}hasRemaining(){return this.size()>this.position}size(){return this.buffer.length}reallocate(){const e=new Uint8Array(2*this.size());e.set(this.buffer),this.buffer=e}shrink(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer}put(e){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=e}get(e){return e==null&&(e=this.position,this.position+=1),this.buffer.length<e+1?0:this.buffer[e]}putShort(e){if(65535<e)throw e+" is over short value";const r=255&e,n=(65280&e)>>8;this.put(r),this.put(n)}getShort(e){if(e==null&&(e=this.position,this.position+=2),this.buffer.length<e+2)return 0;const r=this.buffer[e];return(this.buffer[e+1]<<8)+r}putInt(e){if(4294967295<e)throw e+" is over integer value";const r=255&e,n=(65280&e)>>8,i=(16711680&e)>>16,o=(4278190080&e)>>24;this.put(r),this.put(n),this.put(i),this.put(o)}getInt(e){if(e>this.size()+4)throw new Hd;if(e==null&&(e=this.position,this.position+=4),this.buffer.length<e+4)return 0;const r=this.buffer[e],n=this.buffer[e+1],i=this.buffer[e+2];return(this.buffer[e+3]<<24)+(i<<16)+(n<<8)+r}readInt(){if(!this.hasRemaining())throw new Hd("Buffer exhausted");const e=this.position;return this.position+=4,this.getInt(e)}putString(e){const r=this.stringToUtf8Bytes(e);for(let n=0;n<r.length;n++)this.put(r[n]);this.put(0)}getString(e){let r,n=[];for(e==null&&(e=this.position);!(this.buffer.length<e+1)&&(r=this.get(e++),r!==0);)n.push(r);return this.position=e,this.utf8BytesToString(n)}stringToUtf8Bytes(e){const r=new Uint8Array(4*e.length);let n=0,i=0;for(;n<e.length;){let o;const a=e.charCodeAt(n++);if(a>=55296&&a<=56319){const s=a,c=e.charCodeAt(n++);if(!(c>=56320&&c<=57343))return null;o=1024*(s-55296)+65536+(c-56320)}else o=a;o<128?r[i++]=o:o<2048?(r[i++]=o>>>6|192,r[i++]=63&o|128):o<65536?(r[i++]=o>>>12|224,r[i++]=o>>6&63|128,r[i++]=63&o|128):o<1<<21&&(r[i++]=o>>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=63&o|128)}return r.subarray(0,i)}utf8BytesToString(e){let r,n,i,o,a,s,c,f="",h=0;for(;h<e.length;)n=e[h++],n<128?r=n:n>>5==6?(i=e[h++],r=(31&n)<<6|63&i):n>>4==14?(i=e[h++],o=e[h++],r=(15&n)<<12|(63&i)<<6|63&o):(i=e[h++],o=e[h++],a=e[h++],r=(7&n)<<18|(63&i)<<12|(63&o)<<6|63&a),r<65536?f+=String.fromCharCode(r):(r-=65536,s=55296|r>>10,c=56320|1023&r,f+=String.fromCharCode(s,c));return f}}function om(t){return za.createHash("md5").update(t).digest("hex")}class In{static hashTwice(e){let r=Jo("sha256").update(e).digest();return Jo("sha256").update(r).digest()}static sha256ripemd160(e){let r=Jo("sha256").update(e).digest();return Jo("ripemd160").update(r).digest()}static encodeToString(...e){let r=e.reduce((n,i)=>Se.Buffer.concat([n,i]),Se.Buffer.from(""));return Jo("sha256").update(r).digest().toString()}static encodeToBuffer(...e){let r=e.reduce((n,i)=>Se.Buffer.concat([n,i]),Se.Buffer.from(""));return Jo("sha256").update(r).digest()}}class vc{static sign(e,r){const n=new oa.ec("p256").keyFromPrivate(e,"hex").sign(r);return Se.Buffer.from(n.r.toString("hex",64)+n.s.toString("hex",64),"hex")}static signData(e,...r){return this.sign(e,In.encodeToBuffer(...r))}static verify(e,r,n){const i=new oa.ec("p256").keyFromPublic(e,"hex"),o={r:r.slice(0,32).toString("hex"),s:r.slice(32).toString("hex")};return i.verify(n,o)}static verifyData(e,r,...n){return this.verify(e,r,In.encodeToBuffer(...n))}static sha256Digest(...e){return In.encodeToBuffer(...e)}}class Zr{static fromString(e){let r=Se.Buffer.from(e,"utf-8").toString("base64");return this.convertToURI(r)}static fromHex(e){return this.encode(e)}static fromUrlFormat(e){return this.convertFromURI(e)}static toUrlFormat(e){return this.convertToURI(e)}static toHex(e){return this.decode(e)}static toString(e){let r=e;return r.endsWith("=")||(r=this.convertFromURI(r)),Se.Buffer.from(r,"base64").toString("utf-8")}static decode(e){let r=e;return r.endsWith("=")||(r=this.convertFromURI(r)),Se.Buffer.from(r,"base64").toString("hex")}static encode(e){let r=Se.Buffer.from(e,"hex").toString("base64");return this.convertToURI(r)}static convertToURI(e){return e.replace(/[+/]/g,r=>r=="+"?"-":"_").replace(/=+$/m,"")}static convertFromURI(e){return e.replace(/[-_]/g,r=>r=="-"?"+":"/")+"="}}var pi={exports:{}},m0={},Aw={},kw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;for(e in t[e]=42,t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(t,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0},J7=kw,Sh=function(){return J7()&&!!Symbol.toStringTag},am=typeof Symbol<"u"&&Symbol,Y7=kw,Z7="Function.prototype.bind called on incompatible ",Id=Array.prototype.slice,X7=Object.prototype.toString,G7=function(t){var e=this;if(typeof e!="function"||X7.call(e)!=="[object Function]")throw new TypeError(Z7+e);for(var r,n=Id.call(arguments,1),i=function(){if(this instanceof r){var f=e.apply(this,n.concat(Id.call(arguments)));return Object(f)===f?f:this}return e.apply(t,n.concat(Id.call(arguments)))},o=Math.max(0,e.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},b0=Function.prototype.bind||G7,$7=b0.call(Function.call,Object.prototype.hasOwnProperty),Fc=SyntaxError,Dw=Function,iu=TypeError,Ad=function(t){try{return Dw('"use strict"; return ('+t+").constructor;")()}catch{}},Hf=Object.getOwnPropertyDescriptor,kd=function(){throw new iu},Q7=Hf?function(){try{return kd}catch{try{return Hf(arguments,"callee").get}catch{return kd}}}():kd,bs=typeof am=="function"&&typeof Symbol=="function"&&typeof am("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&Y7(),Zo=Object.getPrototypeOf||function(t){return t.__proto__},Os={},e9=typeof Uint8Array>"u"?void 0:Zo(Uint8Array),ou={"%AggregateError%":typeof AggregateError>"u"?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":bs?Zo([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":Os,"%AsyncGenerator%":Os,"%AsyncGeneratorFunction%":Os,"%AsyncIteratorPrototype%":Os,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%BigInt%":typeof BigInt>"u"?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry,"%Function%":Dw,"%GeneratorFunction%":Os,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bs?Zo(Zo([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&bs?Zo(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&bs?Zo(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bs?Zo(""[Symbol.iterator]()):void 0,"%Symbol%":bs?Symbol:void 0,"%SyntaxError%":Fc,"%ThrowTypeError%":Q7,"%TypedArray%":e9,"%TypeError%":iu,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakRef%":typeof WeakRef>"u"?void 0:WeakRef,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet},t9=function t(e){var r;if(e==="%AsyncFunction%")r=Ad("async function () {}");else if(e==="%GeneratorFunction%")r=Ad("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ad("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Zo(i.prototype))}return ou[e]=r,r},sm={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Eh=b0,Vf=$7,r9=Eh.call(Function.call,Array.prototype.concat),n9=Eh.call(Function.apply,Array.prototype.splice),um=Eh.call(Function.call,String.prototype.replace),Wf=Eh.call(Function.call,String.prototype.slice),i9=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,o9=/\\(\\)?/g,a9=function(t){var e=Wf(t,0,1),r=Wf(t,-1);if(e==="%"&&r!=="%")throw new Fc("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&e!=="%")throw new Fc("invalid intrinsic syntax, expected opening `%`");var n=[];return um(t,i9,function(i,o,a,s){n[n.length]=a?um(s,o9,"$1"):o||i}),n},s9=function(t,e){var r,n=t;if(Vf(sm,n)&&(n="%"+(r=sm[n])[0]+"%"),Vf(ou,n)){var i=ou[n];if(i===Os&&(i=t9(n)),i===void 0&&!e)throw new iu("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new Fc("intrinsic "+t+" does not exist!")},v0=function(t,e){if(typeof t!="string"||t.length===0)throw new iu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new iu('"allowMissing" argument must be a boolean');var r=a9(t),n=r.length>0?r[0]:"",i=s9("%"+n+"%",e),o=i.name,a=i.value,s=!1,c=i.alias;c&&(n=c[0],n9(r,r9([0,1],c)));for(var f=1,h=!0;f<r.length;f+=1){var y=r[f],g=Wf(y,0,1),_=Wf(y,-1);if((g==='"'||g==="'"||g==="`"||_==='"'||_==="'"||_==="`")&&g!==_)throw new Fc("property names with quotes must have matching quotes");if(y!=="constructor"&&h||(s=!0),Vf(ou,o="%"+(n+="."+y)+"%"))a=ou[o];else if(a!=null){if(!(y in a)){if(!e)throw new iu("base intrinsic for "+t+" exists, but the property is not available.");return}if(Hf&&f+1>=r.length){var E=Hf(a,y);a=(h=!!E)&&"get"in E&&!("originalValue"in E.get)?E.get:a[y]}else h=Vf(a,y),a=a[y];h&&!s&&(ou[o]=a)}}return a},Ih={exports:{}};(function(t){var e=b0,r=v0,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(h){var y=o(e,i,arguments);if(a&&s){var g=a(y,"length");g.configurable&&s(y,"length",{value:1+c(0,h.length-(arguments.length-1))})}return y};var f=function(){return o(e,n,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(Ih);var xw=v0,Tw=Ih.exports,u9=Tw(xw("String.prototype.indexOf")),w0=function(t,e){var r=xw(t,!!e);return typeof r=="function"&&u9(t,".prototype.")>-1?Tw(r):r},c9=Sh(),kp=w0("Object.prototype.toString"),Ah=function(t){return!(c9&&t&&typeof t=="object"&&Symbol.toStringTag in t)&&kp(t)==="[object Arguments]"},Ow=function(t){return!!Ah(t)||t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&kp(t)!=="[object Array]"&&kp(t.callee)==="[object Function]"},l9=function(){return Ah(arguments)}();Ah.isLegacyArguments=Ow;var Dd,f9=l9?Ah:Ow,h9=Object.prototype.toString,d9=Function.prototype.toString,p9=/^\s*(?:function)?\*/,cm=Sh(),xd=Object.getPrototypeOf,y9=function(t){if(typeof t!="function")return!1;if(p9.test(d9.call(t)))return!0;if(!cm)return h9.call(t)==="[object GeneratorFunction]";if(!xd)return!1;if(Dd===void 0){var e=function(){if(!cm)return!1;try{return Function("return function*() {}")()}catch{}}();Dd=!!e&&xd(e)}return xd(t)===Dd},g9=Object.prototype.hasOwnProperty,m9=Object.prototype.toString,Pw=function(t,e,r){if(m9.call(e)!=="[object Function]")throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var i=0;i<n;i++)e.call(r,t[i],i,t);else for(var o in t)g9.call(t,o)&&e.call(r,t[o],o,t)},Td=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],b9=typeof globalThis>"u"?ae:globalThis,Rw=function(){for(var t=[],e=0;e<Td.length;e++)typeof b9[Td[e]]=="function"&&(t[t.length]=Td[e]);return t},bf=v0("%Object.getOwnPropertyDescriptor%",!0);if(bf)try{bf([],"length")}catch{bf=null}var Cw=bf,Mw=Pw,v9=Rw,_0=w0,w9=_0("Object.prototype.toString"),Nw=Sh(),_9=typeof globalThis>"u"?ae:globalThis,jw=v9(),S9=_0("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},E9=_0("String.prototype.slice"),Bw={},vf=Cw,Od=Object.getPrototypeOf;Nw&&vf&&Od&&Mw(jw,function(t){var e=new _9[t];if(Symbol.toStringTag in e){var r=Od(e),n=vf(r,Symbol.toStringTag);if(!n){var i=Od(r);n=vf(i,Symbol.toStringTag)}Bw[t]=n.get}});var Lw=function(t){if(!t||typeof t!="object")return!1;if(!Nw||!(Symbol.toStringTag in t)){var e=E9(w9(t),8,-1);return S9(jw,e)>-1}return!!vf&&function(r){var n=!1;return Mw(Bw,function(i,o){if(!n)try{n=i.call(r)===o}catch{}}),n}(t)},Fw=Pw,I9=Rw,Uw=w0,A9=Uw("Object.prototype.toString"),zw=Sh(),lm=typeof globalThis>"u"?ae:globalThis,k9=I9(),D9=Uw("String.prototype.slice"),Kw={},Pd=Cw,Rd=Object.getPrototypeOf;zw&&Pd&&Rd&&Fw(k9,function(t){if(typeof lm[t]=="function"){var e=new lm[t];if(Symbol.toStringTag in e){var r=Rd(e),n=Pd(r,Symbol.toStringTag);if(!n){var i=Rd(r);n=Pd(i,Symbol.toStringTag)}Kw[t]=n.get}}});var x9=Lw,T9=function(t){return!!x9(t)&&(zw&&Symbol.toStringTag in t?function(e){var r=!1;return Fw(Kw,function(n,i){if(!r)try{var o=n.call(e);o===i&&(r=o)}catch{}}),r}(t):D9(A9(t),8,-1))};(function(t){var e=f9,r=y9,n=T9,i=Lw;function o(b){return b.call.bind(b)}var a=typeof BigInt<"u",s=typeof Symbol<"u",c=o(Object.prototype.toString),f=o(Number.prototype.valueOf),h=o(String.prototype.valueOf),y=o(Boolean.prototype.valueOf);if(a)var g=o(BigInt.prototype.valueOf);if(s)var _=o(Symbol.prototype.valueOf);function E(b,P){if(typeof b!="object")return!1;try{return P(b),!0}catch{return!1}}function O(b){return c(b)==="[object Map]"}function R(b){return c(b)==="[object Set]"}function L(b){return c(b)==="[object WeakMap]"}function q(b){return c(b)==="[object WeakSet]"}function X(b){return c(b)==="[object ArrayBuffer]"}function ne(b){return typeof ArrayBuffer<"u"&&(X.working?X(b):b instanceof ArrayBuffer)}function W(b){return c(b)==="[object DataView]"}function H(b){return typeof DataView<"u"&&(W.working?W(b):b instanceof DataView)}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i,t.isPromise=function(b){return typeof Promise<"u"&&b instanceof Promise||b!==null&&typeof b=="object"&&typeof b.then=="function"&&typeof b.catch=="function"},t.isArrayBufferView=function(b){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(b):i(b)||H(b)},t.isUint8Array=function(b){return n(b)==="Uint8Array"},t.isUint8ClampedArray=function(b){return n(b)==="Uint8ClampedArray"},t.isUint16Array=function(b){return n(b)==="Uint16Array"},t.isUint32Array=function(b){return n(b)==="Uint32Array"},t.isInt8Array=function(b){return n(b)==="Int8Array"},t.isInt16Array=function(b){return n(b)==="Int16Array"},t.isInt32Array=function(b){return n(b)==="Int32Array"},t.isFloat32Array=function(b){return n(b)==="Float32Array"},t.isFloat64Array=function(b){return n(b)==="Float64Array"},t.isBigInt64Array=function(b){return n(b)==="BigInt64Array"},t.isBigUint64Array=function(b){return n(b)==="BigUint64Array"},O.working=typeof Map<"u"&&O(new Map),t.isMap=function(b){return typeof Map<"u"&&(O.working?O(b):b instanceof Map)},R.working=typeof Set<"u"&&R(new Set),t.isSet=function(b){return typeof Set<"u"&&(R.working?R(b):b instanceof Set)},L.working=typeof WeakMap<"u"&&L(new WeakMap),t.isWeakMap=function(b){return typeof WeakMap<"u"&&(L.working?L(b):b instanceof WeakMap)},q.working=typeof WeakSet<"u"&&q(new WeakSet),t.isWeakSet=function(b){return q(b)},X.working=typeof ArrayBuffer<"u"&&X(new ArrayBuffer),t.isArrayBuffer=ne,W.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&W(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=H;var Y=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function T(b){return c(b)==="[object SharedArrayBuffer]"}function te(b){return Y!==void 0&&(T.working===void 0&&(T.working=T(new Y)),T.working?T(b):b instanceof Y)}function v(b){return E(b,f)}function D(b){return E(b,h)}function w(b){return E(b,y)}function k(b){return a&&E(b,g)}function A(b){return s&&E(b,_)}t.isSharedArrayBuffer=te,t.isAsyncFunction=function(b){return c(b)==="[object AsyncFunction]"},t.isMapIterator=function(b){return c(b)==="[object Map Iterator]"},t.isSetIterator=function(b){return c(b)==="[object Set Iterator]"},t.isGeneratorObject=function(b){return c(b)==="[object Generator]"},t.isWebAssemblyCompiledModule=function(b){return c(b)==="[object WebAssembly.Module]"},t.isNumberObject=v,t.isStringObject=D,t.isBooleanObject=w,t.isBigIntObject=k,t.isSymbolObject=A,t.isBoxedPrimitive=function(b){return v(b)||D(b)||w(b)||k(b)||A(b)},t.isAnyArrayBuffer=function(b){return typeof Uint8Array<"u"&&(ne(b)||te(b))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(b){Object.defineProperty(t,b,{enumerable:!1,value:function(){throw new Error(b+" is not supported in userland")}})})})(Aw);var O9=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"},Eu={};function Uc(t){return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function P9(t,e){return!e||Uc(e)!=="object"&&typeof e!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(t):e}function Dp(t){return Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dp(t)}function xp(t,e){return xp=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},xp(t,e)}(function(t){var e=Object.getOwnPropertyDescriptors||function(A){for(var b=Object.keys(A),P={},V=0;V<b.length;V++)P[b[V]]=Object.getOwnPropertyDescriptor(A,b[V]);return P},r=/%[sdj%]/g;t.format=function(A){if(!R(A)){for(var b=[],P=0;P<arguments.length;P++)b.push(a(arguments[P]));return b.join(" ")}P=1;for(var V=arguments,Q=V.length,U=String(A).replace(r,function(fe){if(fe==="%%")return"%";if(P>=Q)return fe;switch(fe){case"%s":return String(V[P++]);case"%d":return Number(V[P++]);case"%j":try{return JSON.stringify(V[P++])}catch{return"[Circular]"}default:return fe}}),Z=V[P];P<Q;Z=V[++P])E(Z)||!X(Z)?U+=" "+Z:U+=" "+a(Z);return U},t.deprecate=function(A,b){if(Zt!==void 0&&Zt.noDeprecation===!0)return A;if(Zt===void 0)return function(){return t.deprecate(A,b).apply(this,arguments)};var P=!1;return function(){if(!P){if(Zt.throwDeprecation)throw new Error(b);Zt.traceDeprecation?console.trace(b):console.error(b),P=!0}return A.apply(this,arguments)}};var n={},i=/^$/;if(Zt.env.NODE_DEBUG){var o=Zt.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}function a(A,b){var P={seen:[],stylize:c};return arguments.length>=3&&(P.depth=arguments[2]),arguments.length>=4&&(P.colors=arguments[3]),_(b)?P.showHidden=b:b&&t._extend(P,b),L(P.showHidden)&&(P.showHidden=!1),L(P.depth)&&(P.depth=2),L(P.colors)&&(P.colors=!1),L(P.customInspect)&&(P.customInspect=!0),P.colors&&(P.stylize=s),f(P,A,P.depth)}function s(A,b){var P=a.styles[b];return P?"\x1B["+a.colors[P][0]+"m"+A+"\x1B["+a.colors[P][1]+"m":A}function c(A,b){return A}function f(A,b,P){if(A.customInspect&&b&&H(b.inspect)&&b.inspect!==t.inspect&&(!b.constructor||b.constructor.prototype!==b)){var V=b.inspect(P,A);return R(V)||(V=f(A,V,P)),V}var Q=function(C,j){if(L(j))return C.stylize("undefined","undefined");if(R(j)){var S="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return C.stylize(S,"string")}if(O(j))return C.stylize(""+j,"number");if(_(j))return C.stylize(""+j,"boolean");if(E(j))return C.stylize("null","null")}(A,b);if(Q)return Q;var U=Object.keys(b),Z=function(C){var j={};return C.forEach(function(S,M){j[S]=!0}),j}(U);if(A.showHidden&&(U=Object.getOwnPropertyNames(b)),W(b)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return h(b);if(U.length===0){if(H(b)){var fe=b.name?": "+b.name:"";return A.stylize("[Function"+fe+"]","special")}if(q(b))return A.stylize(RegExp.prototype.toString.call(b),"regexp");if(ne(b))return A.stylize(Date.prototype.toString.call(b),"date");if(W(b))return h(b)}var se,ue="",ge=!1,me=["{","}"];return g(b)&&(ge=!0,me=["[","]"]),H(b)&&(ue=" [Function"+(b.name?": "+b.name:"")+"]"),q(b)&&(ue=" "+RegExp.prototype.toString.call(b)),ne(b)&&(ue=" "+Date.prototype.toUTCString.call(b)),W(b)&&(ue=" "+h(b)),U.length!==0||ge&&b.length!=0?P<0?q(b)?A.stylize(RegExp.prototype.toString.call(b),"regexp"):A.stylize("[Object]","special"):(A.seen.push(b),se=ge?function(C,j,S,M,B){for(var z=[],x=0,K=j.length;x<K;++x)D(j,String(x))?z.push(y(C,j,S,M,String(x),!0)):z.push("");return B.forEach(function(ee){ee.match(/^\d+$/)||z.push(y(C,j,S,M,ee,!0))}),z}(A,b,P,Z,U):U.map(function(C){return y(A,b,P,Z,C,ge)}),A.seen.pop(),function(C,j,S){return C.reduce(function(M,B){return B.indexOf(`
`),M+B.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?S[0]+(j===""?"":j+`
 `)+" "+C.join(`,
  `)+" "+S[1]:S[0]+j+" "+C.join(", ")+" "+S[1]}(se,ue,me)):me[0]+ue+me[1]}function h(A){return"["+Error.prototype.toString.call(A)+"]"}function y(A,b,P,V,Q,U){var Z,fe,se;if((se=Object.getOwnPropertyDescriptor(b,Q)||{value:b[Q]}).get?fe=se.set?A.stylize("[Getter/Setter]","special"):A.stylize("[Getter]","special"):se.set&&(fe=A.stylize("[Setter]","special")),D(V,Q)||(Z="["+Q+"]"),fe||(A.seen.indexOf(se.value)<0?(fe=E(P)?f(A,se.value,null):f(A,se.value,P-1)).indexOf(`
`)>-1&&(fe=U?fe.split(`
`).map(function(ue){return"  "+ue}).join(`
`).substr(2):`
`+fe.split(`
`).map(function(ue){return"   "+ue}).join(`
`)):fe=A.stylize("[Circular]","special")),L(Z)){if(U&&Q.match(/^\d+$/))return fe;(Z=JSON.stringify(""+Q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=A.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=A.stylize(Z,"string"))}return Z+": "+fe}function g(A){return Array.isArray(A)}function _(A){return typeof A=="boolean"}function E(A){return A===null}function O(A){return typeof A=="number"}function R(A){return typeof A=="string"}function L(A){return A===void 0}function q(A){return X(A)&&Y(A)==="[object RegExp]"}function X(A){return typeof A=="object"&&A!==null}function ne(A){return X(A)&&Y(A)==="[object Date]"}function W(A){return X(A)&&(Y(A)==="[object Error]"||A instanceof Error)}function H(A){return typeof A=="function"}function Y(A){return Object.prototype.toString.call(A)}function T(A){return A<10?"0"+A.toString(10):A.toString(10)}t.debuglog=function(A){if(A=A.toUpperCase(),!n[A])if(i.test(A)){var b=Zt.pid;n[A]=function(){var P=t.format.apply(t,arguments);console.error("%s %d: %s",A,b,P)}}else n[A]=function(){};return n[A]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=Aw,t.isArray=g,t.isBoolean=_,t.isNull=E,t.isNullOrUndefined=function(A){return A==null},t.isNumber=O,t.isString=R,t.isSymbol=function(A){return typeof A=="symbol"},t.isUndefined=L,t.isRegExp=q,t.types.isRegExp=q,t.isObject=X,t.isDate=ne,t.types.isDate=ne,t.isError=W,t.types.isNativeError=W,t.isFunction=H,t.isPrimitive=function(A){return A===null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||typeof A=="symbol"||A===void 0},t.isBuffer=O9;var te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function v(){var A=new Date,b=[T(A.getHours()),T(A.getMinutes()),T(A.getSeconds())].join(":");return[A.getDate(),te[A.getMonth()],b].join(" ")}function D(A,b){return Object.prototype.hasOwnProperty.call(A,b)}t.log=function(){console.log("%s - %s",v(),t.format.apply(t,arguments))},t.inherits=ot.exports,t._extend=function(A,b){if(!b||!X(b))return A;for(var P=Object.keys(b),V=P.length;V--;)A[P[V]]=b[P[V]];return A};var w=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function k(A,b){if(!A){var P=new Error("Promise was rejected with a falsy value");P.reason=A,A=P}return b(A)}t.promisify=function(A){if(typeof A!="function")throw new TypeError('The "original" argument must be of type Function');if(w&&A[w]){var b;if(typeof(b=A[w])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(b,w,{value:b,enumerable:!1,writable:!1,configurable:!0}),b}function b(){for(var P,V,Q=new Promise(function(fe,se){P=fe,V=se}),U=[],Z=0;Z<arguments.length;Z++)U.push(arguments[Z]);U.push(function(fe,se){fe?V(fe):P(se)});try{A.apply(this,U)}catch(fe){V(fe)}return Q}return Object.setPrototypeOf(b,Object.getPrototypeOf(A)),w&&Object.defineProperty(b,w,{value:b,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(b,e(A))},t.promisify.custom=w,t.callbackify=function(A){if(typeof A!="function")throw new TypeError('The "original" argument must be of type Function');function b(){for(var P=[],V=0;V<arguments.length;V++)P.push(arguments[V]);var Q=P.pop();if(typeof Q!="function")throw new TypeError("The last argument must be of type Function");var U=this,Z=function(){return Q.apply(U,arguments)};A.apply(this,P).then(function(fe){xr(Z.bind(null,null,fe))},function(fe){xr(k.bind(null,fe,Z))})}return Object.setPrototypeOf(b,Object.getPrototypeOf(A)),Object.defineProperties(b,e(A)),b}})(Eu);var vs,Cd,qw={};function Xu(t,e,r){r||(r=Error);var n=function(i){function o(a,s,c){var f;return function(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}(this,o),f=P9(this,Dp(o).call(this,function(h,y,g){return typeof e=="string"?e:e(h,y,g)}(a,s,c))),f.code=t,f}return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),s&&xp(a,s)}(o,i),o}(r);qw[t]=n}function fm(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function R9(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ws(t,e){return!e||Ai(e)!=="object"&&typeof e!="function"?Tp(t):e}function Tp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Op(t){var e=typeof Map=="function"?new Map:void 0;return Op=function(r){if(r===null||(n=r,Function.toString.call(n).indexOf("[native code]")===-1))return r;var n;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Pp(r,arguments,Qo(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),zc(i,r)},Op(t)}function M9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Pp(t,e,r){return Pp=M9()?Reflect.construct:function(n,i,o){var a=[null];a.push.apply(a,i);var s=new(Function.bind.apply(n,a));return o&&zc(s,o.prototype),s},Pp.apply(null,arguments)}function zc(t,e){return zc=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},zc(t,e)}function Qo(t){return Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qo(t)}function Ai(t){return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(t)}Xu("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),Xu("ERR_INVALID_ARG_TYPE",function(t,e,r){var n,i,o;if(vs===void 0&&(vs=null),vs(typeof t=="string","'name' must be a string"),typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(s,c,f){return(f===void 0||f>s.length)&&(f=s.length),s.substring(f-c.length,f)===c}(t," argument"))o="The ".concat(t," ").concat(n," ").concat(fm(e,"type"));else{var a=function(s,c,f){return typeof f!="number"&&(f=0),!(f+c.length>s.length)&&s.indexOf(c,f)!==-1}(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(a," ").concat(n," ").concat(fm(e,"type"))}return o+=". Received type ".concat(Uc(r))},TypeError),Xu("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";Cd===void 0&&(Cd=Eu);var n=Cd.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError),Xu("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return n=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(Uc(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError),Xu("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];vs===void 0&&(vs=null),vs(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments")}return"".concat(n," must be specified")},TypeError),m0.codes=qw;var Rp=Eu.inspect,N9=m0.codes.ERR_INVALID_ARG_TYPE;function hm(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}var mi="",wc="",_c="",Er="",Ja={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function dm(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function Sc(t){return Rp(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function j9(t,e,r){var n="",i="",o=0,a="",s=!1,c=Sc(t),f=c.split(`
`),h=Sc(e).split(`
`),y=0,g="";if(r==="strictEqual"&&Ai(t)==="object"&&Ai(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),f.length===1&&h.length===1&&f[0]!==h[0]){var _=f[0].length+h[0].length;if(_<=10){if(!(Ai(t)==="object"&&t!==null||Ai(e)==="object"&&e!==null||t===0&&e===0))return"".concat(Ja[r],`

`)+"".concat(f[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"&&_<(Zt.stderr&&Zt.stderr.isTTY?Zt.stderr.columns:80)){for(;f[0][y]===h[0][y];)y++;y>2&&(g=`
  `.concat(function(te,v){if(v=Math.floor(v),te.length==0||v==0)return"";var D=te.length*v;for(v=Math.floor(Math.log(v)/Math.log(2));v;)te+=te,v--;return te+te.substring(0,D-te.length)}(" ",y),"^"),y=0)}}for(var E=f[f.length-1],O=h[h.length-1];E===O&&(y++<2?a=`
  `.concat(E).concat(a):n=E,f.pop(),h.pop(),f.length!==0&&h.length!==0);)E=f[f.length-1],O=h[h.length-1];var R=Math.max(f.length,h.length);if(R===0){var L=c.split(`
`);if(L.length>30)for(L[26]="".concat(mi,"...").concat(Er);L.length>27;)L.pop();return"".concat(Ja.notIdentical,`

`).concat(L.join(`
`),`
`)}y>3&&(a=`
`.concat(mi,"...").concat(Er).concat(a),s=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var q=0,X=Ja[r]+`
`.concat(wc,"+ actual").concat(Er," ").concat(_c,"- expected").concat(Er),ne=" ".concat(mi,"...").concat(Er," Lines skipped");for(y=0;y<R;y++){var W=y-o;if(f.length<y+1)W>1&&y>2&&(W>4?(i+=`
`.concat(mi,"...").concat(Er),s=!0):W>3&&(i+=`
  `.concat(h[y-2]),q++),i+=`
  `.concat(h[y-1]),q++),o=y,n+=`
`.concat(_c,"-").concat(Er," ").concat(h[y]),q++;else if(h.length<y+1)W>1&&y>2&&(W>4?(i+=`
`.concat(mi,"...").concat(Er),s=!0):W>3&&(i+=`
  `.concat(f[y-2]),q++),i+=`
  `.concat(f[y-1]),q++),o=y,i+=`
`.concat(wc,"+").concat(Er," ").concat(f[y]),q++;else{var H=h[y],Y=f[y],T=Y!==H&&(!hm(Y,",")||Y.slice(0,-1)!==H);T&&hm(H,",")&&H.slice(0,-1)===Y&&(T=!1,Y+=","),T?(W>1&&y>2&&(W>4?(i+=`
`.concat(mi,"...").concat(Er),s=!0):W>3&&(i+=`
  `.concat(f[y-2]),q++),i+=`
  `.concat(f[y-1]),q++),o=y,i+=`
`.concat(wc,"+").concat(Er," ").concat(Y),n+=`
`.concat(_c,"-").concat(Er," ").concat(H),q+=2):(i+=n,n="",W!==1&&y!==0||(i+=`
  `.concat(Y),q++))}if(q>20&&y<R-2)return"".concat(X).concat(ne,`
`).concat(i,`
`).concat(mi,"...").concat(Er).concat(n,`
`)+"".concat(mi,"...").concat(Er)}return"".concat(X).concat(s?ne:"",`
`).concat(i).concat(n).concat(a).concat(g)}var B9=function(t){function e(i){var o;if(function(L,q){if(!(L instanceof q))throw new TypeError("Cannot call a class as a function")}(this,e),Ai(i)!=="object"||i===null)throw new N9("options","Object",i);var a=i.message,s=i.operator,c=i.stackStartFn,f=i.actual,h=i.expected,y=Error.stackTraceLimit;if(Error.stackTraceLimit=0,a!=null)o=ws(this,Qo(e).call(this,String(a)));else if(Zt.stderr&&Zt.stderr.isTTY&&(Zt.stderr&&Zt.stderr.getColorDepth&&Zt.stderr.getColorDepth()!==1?(mi="\x1B[34m",wc="\x1B[32m",Er="\x1B[39m",_c="\x1B[31m"):(mi="",wc="",Er="",_c="")),Ai(f)==="object"&&f!==null&&Ai(h)==="object"&&h!==null&&"stack"in f&&f instanceof Error&&"stack"in h&&h instanceof Error&&(f=dm(f),h=dm(h)),s==="deepStrictEqual"||s==="strictEqual")o=ws(this,Qo(e).call(this,j9(f,h,s)));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var g=Ja[s],_=Sc(f).split(`
`);if(s==="notStrictEqual"&&Ai(f)==="object"&&f!==null&&(g=Ja.notStrictEqualObject),_.length>30)for(_[26]="".concat(mi,"...").concat(Er);_.length>27;)_.pop();o=_.length===1?ws(this,Qo(e).call(this,"".concat(g," ").concat(_[0]))):ws(this,Qo(e).call(this,"".concat(g,`

`).concat(_.join(`
`),`
`)))}else{var E=Sc(f),O="",R=Ja[s];s==="notDeepEqual"||s==="notEqual"?(E="".concat(Ja[s],`

`).concat(E)).length>1024&&(E="".concat(E.slice(0,1021),"...")):(O="".concat(Sc(h)),E.length>512&&(E="".concat(E.slice(0,509),"...")),O.length>512&&(O="".concat(O.slice(0,509),"...")),s==="deepEqual"||s==="equal"?E="".concat(R,`

`).concat(E,`

should equal

`):O=" ".concat(s," ").concat(O)),o=ws(this,Qo(e).call(this,"".concat(E).concat(O)))}return Error.stackTraceLimit=y,o.generatedMessage=!a,Object.defineProperty(Tp(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=f,o.expected=h,o.operator=s,Error.captureStackTrace&&Error.captureStackTrace(Tp(o),c),o.name="AssertionError",ws(o)}var r,n;return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&zc(i,o)}(e,Op(Error)),r=e,n=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:Rp.custom,value:function(i,o){return Rp(this,function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{},f=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(c).filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable}))),f.forEach(function(h){R9(a,h,c[h])})}return a}({},o,{customInspect:!1,depth:0}))}}],n&&C9(r.prototype,n),e}(),L9=B9;function pm(t,e){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],f=Object.getOwnPropertyDescriptor(i,c);f!==void 0&&f.enumerable&&(r[c]=i[c])}}return r}var Hw,F9={assign:pm,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:pm})}},ym=Object.prototype.toString,Vw=function(t){var e=ym.call(t),r=e==="[object Arguments]";return r||(r=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&ym.call(t.callee)==="[object Function]"),r};if(!Object.keys){var Rl=Object.prototype.hasOwnProperty,gm=Object.prototype.toString,U9=Vw,mm=Object.prototype.propertyIsEnumerable,z9=!mm.call({toString:null},"toString"),K9=mm.call(function(){},"prototype"),Cl=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Md=function(t){var e=t.constructor;return e&&e.prototype===t},q9={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},H9=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!q9["$"+t]&&Rl.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Md(window[t])}catch{return!0}}catch{return!0}return!1}();Hw=function(t){var e=t!==null&&typeof t=="object",r=gm.call(t)==="[object Function]",n=U9(t),i=e&&gm.call(t)==="[object String]",o=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=K9&&r;if(i&&t.length>0&&!Rl.call(t,0))for(var s=0;s<t.length;++s)o.push(String(s));if(n&&t.length>0)for(var c=0;c<t.length;++c)o.push(String(c));else for(var f in t)a&&f==="prototype"||!Rl.call(t,f)||o.push(String(f));if(z9)for(var h=function(g){if(typeof window>"u"||!H9)return Md(g);try{return Md(g)}catch{return!1}}(t),y=0;y<Cl.length;++y)h&&Cl[y]==="constructor"||!Rl.call(t,Cl[y])||o.push(Cl[y]);return o}}var V9=Hw,W9=Array.prototype.slice,J9=Vw,bm=Object.keys,wf=bm?function(t){return bm(t)}:V9,vm=Object.keys;wf.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(e){return J9(e)?vm(W9.call(e)):vm(e)})}else Object.keys=wf;return Object.keys||wf};var Y9=wf,Z9=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",X9=Object.prototype.toString,G9=Array.prototype.concat,Cp=Object.defineProperty,Ww=Cp&&function(){var t={};try{for(var e in Cp(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch{return!1}}(),$9=function(t,e,r,n){var i;(!(e in t)||typeof(i=n)=="function"&&X9.call(i)==="[object Function]"&&n())&&(Ww?Cp(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},Jw=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Y9(e);Z9&&(n=G9.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)$9(t,n[i],e[n[i]],r[n[i]])};Jw.supportsDescriptors=!!Ww;var kh=Jw,wm=function(t){return t!=t},Yw=function(t,e){return t===0&&e===0?1/t==1/e:t===e||!(!wm(t)||!wm(e))},Q9=Yw,Zw=function(){return typeof Object.is=="function"?Object.is:Q9},eI=Zw,tI=kh,rI=kh,nI=Yw,Xw=Zw,iI=function(){var t=eI();return tI(Object,{is:t},{is:function(){return Object.is!==t}}),t},Gw=(0,Ih.exports)(Xw(),Object);rI(Gw,{getPolyfill:Xw,implementation:nI,shim:iI});var $w=Gw,Qw=function(t){return t!=t},oI=Qw,e6=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:oI},aI=kh,sI=e6,uI=kh,cI=Qw,t6=e6,lI=function(){var t=sI();return aI(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t},r6=(0,Ih.exports)(t6(),Number);uI(r6,{getPolyfill:t6,implementation:cI,shim:lI});var fI=r6;function _m(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,n){var i=[],o=!0,a=!1,s=void 0;try{for(var c,f=r[Symbol.iterator]();!(o=(c=f.next()).done)&&(i.push(c.value),!n||i.length!==n);o=!0);}catch(h){a=!0,s=h}finally{try{o||f.return==null||f.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Gn(t){return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(t)}var hI=/a/g.flags!==void 0,Jf=function(t){var e=[];return t.forEach(function(r){return e.push(r)}),e},Sm=function(t){var e=[];return t.forEach(function(r,n){return e.push([n,r])}),e},Em=Object.is?Object.is:$w,_f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},Mp=Number.isNaN?Number.isNaN:fI;function S0(t){return t.call.bind(t)}var dc=S0(Object.prototype.hasOwnProperty),Sf=S0(Object.prototype.propertyIsEnumerable),Im=S0(Object.prototype.toString),Gr=Eu.types,dI=Gr.isAnyArrayBuffer,pI=Gr.isArrayBufferView,Am=Gr.isDate,Ml=Gr.isMap,km=Gr.isRegExp,Nl=Gr.isSet,yI=Gr.isNativeError,gI=Gr.isBoxedPrimitive,Dm=Gr.isNumberObject,xm=Gr.isStringObject,Tm=Gr.isBooleanObject,Om=Gr.isBigIntObject,mI=Gr.isSymbolObject,bI=Gr.isFloat32Array,vI=Gr.isFloat64Array;function wI(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function jl(t){return Object.keys(t).filter(wI).concat(_f(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Pm(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function $n(t,e,r,n){if(t===e)return t!==0||!r||Em(t,e);if(r){if(Gn(t)!=="object")return typeof t=="number"&&Mp(t)&&Mp(e);if(Gn(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||Gn(t)!=="object")return(e===null||Gn(e)!=="object")&&t==e;if(e===null||Gn(e)!=="object")return!1}var i,o,a,s,c=Im(t);if(c!==Im(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var f=jl(t),h=jl(e);return f.length===h.length&&Gu(t,e,r,n,1,f)}if(c==="[object Object]"&&(!Ml(t)&&Ml(e)||!Nl(t)&&Nl(e)))return!1;if(Am(t)){if(!Am(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(km(t)){if(!km(e)||(a=t,s=e,!(hI?a.source===s.source&&a.flags===s.flags:RegExp.prototype.toString.call(a)===RegExp.prototype.toString.call(s))))return!1}else if(yI(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(pI(t)){if(r||!bI(t)&&!vI(t)){if(!function(_,E){return _.byteLength===E.byteLength&&Pm(new Uint8Array(_.buffer,_.byteOffset,_.byteLength),new Uint8Array(E.buffer,E.byteOffset,E.byteLength))===0}(t,e))return!1}else if(!function(_,E){if(_.byteLength!==E.byteLength)return!1;for(var O=0;O<_.byteLength;O++)if(_[O]!==E[O])return!1;return!0}(t,e))return!1;var y=jl(t),g=jl(e);return y.length===g.length&&Gu(t,e,r,n,0,y)}if(Nl(t))return!(!Nl(e)||t.size!==e.size)&&Gu(t,e,r,n,2);if(Ml(t))return!(!Ml(e)||t.size!==e.size)&&Gu(t,e,r,n,3);if(dI(t)){if(o=e,(i=t).byteLength!==o.byteLength||Pm(new Uint8Array(i),new Uint8Array(o))!==0)return!1}else if(gI(t)&&!function(_,E){return Dm(_)?Dm(E)&&Em(Number.prototype.valueOf.call(_),Number.prototype.valueOf.call(E)):xm(_)?xm(E)&&String.prototype.valueOf.call(_)===String.prototype.valueOf.call(E):Tm(_)?Tm(E)&&Boolean.prototype.valueOf.call(_)===Boolean.prototype.valueOf.call(E):Om(_)?Om(E)&&BigInt.prototype.valueOf.call(_)===BigInt.prototype.valueOf.call(E):mI(E)&&Symbol.prototype.valueOf.call(_)===Symbol.prototype.valueOf.call(E)}(t,e))return!1}return Gu(t,e,r,n,0)}function Rm(t,e){return e.filter(function(r){return Sf(t,r)})}function Gu(t,e,r,n,i,o){if(arguments.length===5){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!dc(e,o[s]))return!1;if(r&&arguments.length===5){var c=_f(t);if(c.length!==0){var f=0;for(s=0;s<c.length;s++){var h=c[s];if(Sf(t,h)){if(!Sf(e,h))return!1;o.push(h),f++}else if(Sf(e,h))return!1}var y=_f(e);if(c.length!==y.length&&Rm(e,y).length!==f)return!1}else{var g=_f(e);if(g.length!==0&&Rm(e,g).length!==0)return!1}}if(o.length===0&&(i===0||i===1&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var _=n.val1.get(t);if(_!==void 0){var E=n.val2.get(e);if(E!==void 0)return _===E}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var O=EI(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),O}function Cm(t,e,r,n){for(var i=Jf(t),o=0;o<i.length;o++){var a=i[o];if($n(e,a,r,n))return t.delete(a),!0}return!1}function n6(t){switch(Gn(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(Mp(t))return!1}return!0}function _I(t,e,r){var n=n6(r);return n!=null?n:e.has(n)&&!t.has(n)}function SI(t,e,r,n,i){var o=n6(r);if(o!=null)return o;var a=e.get(o);return!(a===void 0&&!e.has(o)||!$n(n,a,!1,i))&&!t.has(o)&&$n(n,a,!1,i)}function Mm(t,e,r,n,i,o){for(var a=Jf(t),s=0;s<a.length;s++){var c=a[s];if($n(r,c,i,o)&&$n(n,e.get(c),i,o))return t.delete(c),!0}return!1}function EI(t,e,r,n,i,o){var a=0;if(o===2){if(!function(h,y,g,_){for(var E=null,O=Jf(h),R=0;R<O.length;R++){var L=O[R];if(Gn(L)==="object"&&L!==null)E===null&&(E=new Set),E.add(L);else if(!y.has(L)){if(g||!_I(h,y,L))return!1;E===null&&(E=new Set),E.add(L)}}if(E!==null){for(var q=Jf(y),X=0;X<q.length;X++){var ne=q[X];if(Gn(ne)==="object"&&ne!==null){if(!Cm(E,ne,g,_))return!1}else if(!g&&!h.has(ne)&&!Cm(E,ne,g,_))return!1}return E.size===0}return!0}(t,e,r,i))return!1}else if(o===3){if(!function(h,y,g,_){for(var E=null,O=Sm(h),R=0;R<O.length;R++){var L=_m(O[R],2),q=L[0],X=L[1];if(Gn(q)==="object"&&q!==null)E===null&&(E=new Set),E.add(q);else{var ne=y.get(q);if(ne===void 0&&!y.has(q)||!$n(X,ne,g,_)){if(g||!SI(h,y,q,X,_))return!1;E===null&&(E=new Set),E.add(q)}}}if(E!==null){for(var W=Sm(y),H=0;H<W.length;H++){var Y=_m(W[H],2),T=(q=Y[0],Y[1]);if(Gn(q)==="object"&&q!==null){if(!Mm(E,h,q,T,g,_))return!1}else if(!(g||h.has(q)&&$n(h.get(q),T,!1,_)||Mm(E,h,q,T,!1,_)))return!1}return E.size===0}return!0}(t,e,r,i))return!1}else if(o===1)for(;a<t.length;a++){if(!dc(t,a)){if(dc(e,a))return!1;for(var s=Object.keys(t);a<s.length;a++){var c=s[a];if(!dc(e,c)||!$n(t[c],e[c],r,i))return!1}return s.length===Object.keys(e).length}if(!dc(e,a)||!$n(t[a],e[a],r,i))return!1}for(a=0;a<n.length;a++){var f=n[a];if(!$n(t[f],e[f],r,i))return!1}return!0}var Nm={isDeepEqual:function(t,e){return $n(t,e,!1)},isDeepStrictEqual:function(t,e){return $n(t,e,!0)}};function rs(t){return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rs(t)}var Xo,Yf,Gc=m0.codes,jm=Gc.ERR_AMBIGUOUS_ARGUMENT,Kc=Gc.ERR_INVALID_ARG_TYPE,II=Gc.ERR_INVALID_ARG_VALUE,AI=Gc.ERR_INVALID_RETURN_VALUE,Uo=Gc.ERR_MISSING_ARGS,ns=L9,kI=Eu.inspect,i6=Eu.types,DI=i6.isPromise,Np=i6.isRegExp,xI=Object.assign?Object.assign:F9.assign,Bm=Object.is?Object.is:$w;function pc(){Xo=Nm.isDeepEqual,Yf=Nm.isDeepStrictEqual}var Lm=!1,Yt=pi.exports=E0,Dh={};function bi(t){throw t.message instanceof Error?t.message:new ns(t)}function o6(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new ns({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function E0(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o6.apply(void 0,[E0,e.length].concat(e))}Yt.fail=function t(e,r,n,i,o){var a,s=arguments.length;if(s===0)a="Failed";else if(s===1)n=e,e=void 0;else{if(Lm===!1){Lm=!0;var c=Zt.emitWarning?Zt.emitWarning:console.warn.bind(console);c("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}s===2&&(i="!=")}if(n instanceof Error)throw n;var f={actual:e,expected:r,operator:i===void 0?"fail":i,stackStartFn:o||t};n!==void 0&&(f.message=n);var h=new ns(f);throw a&&(h.message=a,h.generatedMessage=!0),h},Yt.AssertionError=ns,Yt.ok=E0,Yt.equal=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");e!=r&&bi({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})},Yt.notEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");e==r&&bi({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})},Yt.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Xo===void 0&&pc(),Xo(e,r)||bi({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})},Yt.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Xo===void 0&&pc(),Xo(e,r)&&bi({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})},Yt.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Xo===void 0&&pc(),Yf(e,r)||bi({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})},Yt.notDeepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Xo===void 0&&pc(),Yf(e,r)&&bi({actual:e,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:t})},Yt.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Bm(e,r)||bi({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})},Yt.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Uo("actual","expected");Bm(e,r)&&bi({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var Fm=function t(e,r,n){var i=this;(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),r.forEach(function(o){o in e&&(n!==void 0&&typeof n[o]=="string"&&Np(e[o])&&e[o].test(n[o])?i[o]=n[o]:i[o]=e[o])})};function TI(t,e,r,n,i,o){if(!(r in t)||!Yf(t[r],e[r])){if(!n){var a=new Fm(t,i),s=new Fm(e,i,t),c=new ns({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=t,c.expected=e,c.operator=o.name,c}bi({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}function a6(t,e,r,n){if(typeof e!="function"){if(Np(e))return e.test(t);if(arguments.length===2)throw new Kc("expected",["Function","RegExp"],e);if(rs(t)!=="object"||t===null){var i=new ns({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new II("error",e,"may not be an empty object");return Xo===void 0&&pc(),o.forEach(function(a){typeof t[a]=="string"&&Np(e[a])&&e[a].test(t[a])||TI(t,e,a,r,o,n)}),!0}return e.prototype!==void 0&&t instanceof e||!Error.isPrototypeOf(e)&&e.call({},t)===!0}function Um(t){if(typeof t!="function")throw new Kc("fn","Function",t);try{t()}catch(e){return e}return Dh}function zm(t){return DI(t)||t!==null&&rs(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function Km(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(!zm(e=t()))throw new AI("instance of Promise","promiseFn",e)}else{if(!zm(t))throw new Kc("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then(function(){return e}).then(function(){return Dh}).catch(function(r){return r})})}function qm(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Kc("error",["Object","Error","Function","RegExp"],r);if(rs(e)==="object"&&e!==null){if(e.message===r)throw new jm("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new jm("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&rs(r)!=="object"&&typeof r!="function")throw new Kc("error",["Object","Error","Function","RegExp"],r);if(e===Dh){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=t.name==="rejects"?"rejection":"exception";bi({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(r&&!a6(e,r,n,t))throw e}function Hm(t,e,r,n){if(e!==Dh){if(typeof r=="string"&&(n=r,r=void 0),!r||a6(e,r)){var i=n?": ".concat(n):".",o=t.name==="doesNotReject"?"rejection":"exception";bi({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function s6(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o6.apply(void 0,[s6,e.length].concat(e))}Yt.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];qm.apply(void 0,[t,Um(e)].concat(n))},Yt.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Km(e).then(function(o){return qm.apply(void 0,[t,o].concat(n))})},Yt.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Hm.apply(void 0,[t,Um(e)].concat(n))},Yt.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Km(e).then(function(o){return Hm.apply(void 0,[t,o].concat(n))})},Yt.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";rs(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=kI(e);var n=new ns({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),s=0;s<o.length;s++){var c=a.indexOf(o[s]);if(c!==-1){a=a.slice(0,c);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}},Yt.strict=xI(s6,Yt,{equal:Yt.strictEqual,deepEqual:Yt.deepStrictEqual,notEqual:Yt.notStrictEqual,notDeepEqual:Yt.notDeepStrictEqual}),Yt.strict.strict=Yt.strict;var Bl=Ye.exports.Buffer,OI=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var a=t.length,s=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return Bl.alloc(0);for(var g=0,_=0,E=0;y[g]===s;)_++,g++;for(var O=(y.length-g)*c+1>>>0,R=new Uint8Array(O);y[g];){var L=e[y.charCodeAt(g)];if(L===255)return;for(var q=0,X=O-1;(L!==0||q<E)&&X!==-1;X--,q++)L+=a*R[X]>>>0,R[X]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");E=q,g++}for(var ne=O-E;ne!==O&&R[ne]===0;)ne++;var W=Bl.allocUnsafe(_+(O-ne));W.fill(0,0,_);for(var H=_;ne!==O;)W[H++]=R[ne++];return W}return{encode:function(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=Bl.from(y)),!Bl.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var g=0,_=0,E=0,O=y.length;E!==O&&y[E]===0;)E++,g++;for(var R=(O-E)*f+1>>>0,L=new Uint8Array(R);E!==O;){for(var q=y[E],X=0,ne=R-1;(q!==0||X<_)&&ne!==-1;ne--,X++)q+=256*L[ne]>>>0,L[ne]=q%a>>>0,q=q/a>>>0;if(q!==0)throw new Error("Non-zero carry");_=X,E++}for(var W=R-_;W!==R&&L[W]===0;)W++;for(var H=s.repeat(g);W<R;++W)H+=t.charAt(L[W]);return H},decodeUnsafe:h,decode:function(y){var g=h(y);if(g)return g;throw new Error("Non-base"+a+" character")}}},Ec=OI("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Nd="the public key could not be parsed or is invalid",Vm="nonce generation function failed or private key is invalid";const zs=new oa.ec("p256"),Ui=zs.curve;function Ll(t){return zs.keyFromPublic(t)}const PI=Se.Buffer.from("Bitcoin seed","utf8"),Wm={private:76066276,public:76067358};class Si{constructor(e){this.versions=e||Wm,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0}static fromMasterSeed(e,r){const n=N1("sha512",PI).update(e).digest(),i=n.slice(0,32),o=n.slice(32),a=new Si(r);return a.chainCode=o,a.privateKey=i,a}static fromExtendedKey(e,r){const n=new Si(r=r||Wm),i=Ec.decode(e),o=i.readUInt32BE(0);pi.exports.ok(o===r.private||o===r.public,"Version mismatch: does not match private or public"),n.depth=i.readUInt8(4),n.parentFingerprint=i.readUInt32BE(5),n.index=i.readUInt32BE(9),n.chainCode=i.slice(13,45);const a=i.slice(45);return a.readUInt8(0)===0?(pi.exports.ok(o===r.private,"Version mismatch: version does not match private"),n.privateKey=a.slice(1,33)):(pi.exports.ok(o===r.public,"Version mismatch: version does not match public"),n.publicKey=a.slice(0,33)),n}static fromJSON(e){return Si.fromExtendedKey(e.xpriv)}get fingerprint(){return this._fingerprint}get identifier(){return this._identifier}get pubKeyHash(){return this.identifier}get privateKey(){return this._privateKey}set privateKey(e){if(e===null)throw new Error("Can not directly set privateKey to null.");pi.exports.equal(e.length,32,"Private key must be 32 bytes."),pi.exports.ok(function(r){const n=new ho(r);return n.cmp(Ui.n)<0&&!n.isZero()}(e)===!0,"Invalid private key"),this._privateKey=e,this._publicKey=function(r,n){const i=new ho(r);if(i.cmp(Ui.n)>=0||i.isZero())throw new Error("private was invalid, try again");return Se.Buffer.from(zs.keyFromPrivate(r).getPublic(n,"true"))}(e,!0),this._identifier=Ym(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0)}get publicKey(){return this._publicKey}set publicKey(e){if(e===null)throw new Error("Can not directly set privateKey to null.");pi.exports.ok(e.length===33||e.length===65,"Public key must be 33 or 65 bytes."),pi.exports.ok(Ll(e)!==null,"Invalid public key"),this._publicKey=function(r,n){const i=Ll(r);if(i===null)throw new Error(Nd);return Se.Buffer.from(i.getPublic(n,"true"))}(e,!0),this._identifier=Ym(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null}get privateExtendedKey(){return this._privateKey?Ec.encode(Jm(this,this.versions.private,Se.Buffer.concat([Se.Buffer.alloc(1,0),this.privateKey]))):null}get publicExtendedKey(){return Ec.encode(Jm(this,this.versions.public,this.publicKey))}derive(e){if(e==="m"||e==="M"||e==="m'"||e==="M'")return this;const r=e.split("/");let n=this;return r.forEach(function(i,o){if(o===0)return void pi.exports.ok(/^[mM]{1}/.test(i),'Path must start with "m" or "M"');const a=i.length>1&&i[i.length-1]==="'";let s=parseInt(i,10);pi.exports.ok(s<Si.HARDENED_OFFSET,"Invalid index"),a&&(s+=Si.HARDENED_OFFSET),n=n.deriveChild(s)}),n}deriveChild(e){const r=e>=Si.HARDENED_OFFSET,n=Se.Buffer.allocUnsafe(4);let i;if(n.writeUInt32BE(e,0),r){pi.exports.ok(this.privateKey,"Could not derive hardened child key");let f=this.privateKey;const h=Se.Buffer.alloc(1,0);f=Se.Buffer.concat([h,f]),i=Se.Buffer.concat([f,n])}else i=Se.Buffer.concat([this.publicKey,n]);const o=N1("sha512",this.chainCode).update(i).digest(),a=o.slice(0,32),s=o.slice(32),c=new Si(this.versions);if(this.privateKey)try{c.privateKey=function(f,h){const y=new ho(h);if(y.cmp(Ui.n)>=0)throw new Error("tweak out of range or resulting private key is invalid");if(y.iadd(new ho(f)),y.cmp(Ui.n)>=0&&y.isub(Ui.n),y.isZero())throw new Error("tweak out of range or resulting private key is invalid");return y.toArrayLike(Se.Buffer,"be",32)}(this.privateKey,a)}catch{return this.deriveChild(e+1)}else try{c.publicKey=function(f,h,y){const g=Ll(f);if(g===null)throw new Error(Nd);if((h=new ho(h)).cmp(Ui.n)>=0)throw new Error("tweak out of range or resulting public key is invalid");return Se.Buffer.from(Ui.g.mul(h).add(g.getPublic()).encode(!0,y))}(this.publicKey,a,!0)}catch{return this.deriveChild(e+1)}return c.chainCode=s,c.depth=this.depth+1,c.parentFingerprint=this.fingerprint,c.index=e,c}sign(e){return function(r,n,i,o){if(typeof i=="function"){const c=i;i=function(f){const h=c(r,n,null,o,f);if(!Se.Buffer.isBuffer(h)||h.length!==32)throw new Error(Vm);return new ho(h)}}const a=new ho(n);if(a.cmp(Ui.n)>=0||a.isZero())throw new Error(Vm);const s=zs.sign(r,n,{canonical:!0,k:i,pers:o});return{signature:Se.Buffer.concat([s.r.toArrayLike(Se.Buffer,"be",32),s.s.toArrayLike(Se.Buffer,"be",32)]),recovery:s.recoveryParam}}(e,this.privateKey).signature}verify(e,r){return function(n,i,o){if(n.length%2!=0)throw new Error("Wrong message length");const a={r:i.slice(0,32),s:i.slice(32,64)},s=new ho(a.r),c=new ho(a.s);if(s.cmp(Ui.n)>=0||c.cmp(Ui.n)>=0)throw new Error("couldn't parse signature");if(c.cmp(zs.nh)===1||s.isZero()||c.isZero())return!1;const f=Ll(o);if(f===null)throw new Error(Nd);return zs.verify(n,a,{x:f.getPublic().x,y:f.getPublic().y})}(e,r,this.publicKey)}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}}function Jm(t,e,r){const n=Se.Buffer.allocUnsafe(78);n.writeUInt32BE(e,0),n.writeUInt8(t.depth,4);const i=t.depth?t.parentFingerprint:0;return n.writeUInt32BE(i,5),n.writeUInt32BE(t.index,9),t.chainCode.copy(n,13),r.copy(n,45),n}function Ym(t){const e=M1("sha256").update(t).digest();return M1("rmd160").update(e).digest()}Si.HARDENED_OFFSET=2147483648;class Sn{static decode(e){return Ec.decode(e)}static encode(e){return Ec.encode(e)}}class qe{constructor(e){this.key=e}static newWithMnemonic(e,r){let n=Lt.toSeed(e,r);return qe.newWithSeed(n)}static newWithSeed(e){return qe.newWithKey(Si.fromMasterSeed(e))}static newWithKey(e){return new qe(e)}getPrivateKeyBytes(){return this.key.privateKey}getPrivateKeyBase58(){return Sn.encode(this.getPrivateKeyBytes())}getPublicKeyBytes(){return this.key.publicKey}getPublicKeyBase58(){return Sn.encode(this.getPublicKeyBytes())}serialize(){return Sn.decode(this.serializeBase58())}serializeBase58(){let e=Sn.decode(this.key.privateExtendedKey),r=Se.Buffer.alloc(82);return e.copy(r),In.hashTwice(e).copy(r,78,0,4),Sn.encode(r)}serializePublicKey(){return Sn.decode(this.serializePublicKeyBase58())}serializePublicKeyBase58(){let e=Sn.decode(this.key.publicExtendedKey),r=Se.Buffer.alloc(82);return e.copy(r),In.hashTwice(e).copy(r,78,0,4),Sn.encode(r)}static deserialize(e){return this.deserializeBase58(Sn.encode(e))}static deserializeBase58(e){return new qe(Si.fromExtendedKey(e))}static transformBip32HeaderToBuffer(e){let r=Se.Buffer.alloc(4);return r[0]=e>>24&255,r[1]=e>>16&255,r[2]=e>>8&255,r[3]=255&e,r}static paddingToExtendedPrivateKey(e){let r=Se.Buffer.alloc(qe.EXTENDED_PRIVATEKEY_BYTES);qe.transformBip32HeaderToBuffer(this.bip32HeaderP2PKHpriv).copy(r),e.copy(r,46,0,32);let n=Se.Buffer.alloc(78);return r.copy(n,0,0,78),In.hashTwice(n).copy(r,78,0,4),r}static paddingToExtendedPublicKey(e){let r=Se.Buffer.alloc(qe.EXTENDED_PUBLICKEY_BYTES);qe.transformBip32HeaderToBuffer(this.bip32HeaderP2PKHpub).copy(r),e.copy(r,45,0,33);let n=Se.Buffer.alloc(78);return r.copy(n,0,0,78),In.hashTwice(n).copy(r,78,0,4),r}deriveWithPath(e){return new qe(this.key.derive(e))}deriveWithIndex(e,r=!1){return r&&(e+=qe.HARDENED_BIT),new qe(this.key.deriveChild(e))}static getRedeemScript(e){let r=Se.Buffer.alloc(35);return r[0]=33,e.copy(r,1),r[34]=qe.PADDING_STANDARD,r}static getBinAddressFromBuffer(e){let r=this.getRedeemScript(e),n=In.sha256ripemd160(r),i=Se.Buffer.alloc(n.length+1);i[0]=qe.PADDING_IDENTITY,n.copy(i,1),n=In.hashTwice(i);let o=Se.Buffer.alloc(i.length+4);return i.copy(o,0),n.copy(o,i.length,0,4),o}getBinAddress(){return qe.getBinAddressFromBuffer(this.getPublicKeyBytes())}getAddress(){let e=this.getBinAddress();return Sn.encode(e)}static toAddress(e){return Sn.encode(this.getBinAddressFromBuffer(e))}static isAddressValid(e){let r=Sn.decode(e);if(r.length!=25||r[0]!=qe.PADDING_IDENTITY)return!1;let n=In.hashTwice(Se.Buffer.from(r.toString("hex").substr(0,21)));return n[0]==r[21]&&n[1]==r[22]&&n[2]==r[23]&&n[3]==r[24]}wipe(){}}qe.PUBLICKEY_BYTES=33,qe.PRIVATEKEY_BYTES=32,qe.SEED_BYTES=64,qe.EXTENDED_KEY_BYTES=82,qe.EXTENDED_PRIVATEKEY_BYTES=qe.EXTENDED_KEY_BYTES,qe.EXTENDED_PUBLICKEY_BYTES=qe.EXTENDED_KEY_BYTES,qe.HARDENED_BIT=2147483648,qe.PADDING_IDENTITY=103,qe.PADDING_STANDARD=173,qe.bip32HeaderP2PKHpub=76067358,qe.bip32HeaderP2PKHpriv=76066276,qe.bip32HeaderP2WPKHpub=78792518,qe.bip32HeaderP2WPKHpriv=78791436,qe.DERIVE_PATH_PREFIX="m/44'/0'/0'/0/",qe.PRE_DERIVED_PUBLICKEY_PATH="m/44'/0'/0'";class au{static generateKeyAndIv(e){let r=Se.Buffer.from(e,"utf-8"),n=za.createHash("md5").update(r).digest(),i=za.createHash("md5").update(n).update(r).digest(),o=za.createHash("md5").update(i).update(r).digest();return{key:Se.Buffer.concat([n,i]),iv:o}}static encrypt(e,r){let{key:n,iv:i}=au.generateKeyAndIv(r),o=za.createCipheriv("aes-256-cbc",n,i);return Se.Buffer.concat([o.update(e),o.final()])}static decrypt(e,r){let{key:n,iv:i}=this.generateKeyAndIv(r),o=za.createDecipheriv("aes-256-cbc",n,i);return Se.Buffer.concat([o.update(e),o.final()])}static encryptToBase64(e,r){let n=this.encrypt(e,r);return Zr.toUrlFormat(n.toString("base64"))}static decryptFromBase64(e,r){let n=Se.Buffer.from(Zr.fromUrlFormat(e),"base64");return au.decrypt(n,r)}}var ao={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});const xn={};let $t;Xr.wordlists=xn,Xr._default=$t;try{Xr._default=$t=[],xn.czech=$t}catch{}try{Xr._default=$t=["\u7684","\u4E00","\u662F","\u5728","\u4E0D","\u4E86","\u6709","\u548C","\u4EBA","\u8FD9","\u4E2D","\u5927","\u4E3A","\u4E0A","\u4E2A","\u56FD","\u6211","\u4EE5","\u8981","\u4ED6","\u65F6","\u6765","\u7528","\u4EEC","\u751F","\u5230","\u4F5C","\u5730","\u4E8E","\u51FA","\u5C31","\u5206","\u5BF9","\u6210","\u4F1A","\u53EF","\u4E3B","\u53D1","\u5E74","\u52A8","\u540C","\u5DE5","\u4E5F","\u80FD","\u4E0B","\u8FC7","\u5B50","\u8BF4","\u4EA7","\u79CD","\u9762","\u800C","\u65B9","\u540E","\u591A","\u5B9A","\u884C","\u5B66","\u6CD5","\u6240","\u6C11","\u5F97","\u7ECF","\u5341","\u4E09","\u4E4B","\u8FDB","\u7740","\u7B49","\u90E8","\u5EA6","\u5BB6","\u7535","\u529B","\u91CC","\u5982","\u6C34","\u5316","\u9AD8","\u81EA","\u4E8C","\u7406","\u8D77","\u5C0F","\u7269","\u73B0","\u5B9E","\u52A0","\u91CF","\u90FD","\u4E24","\u4F53","\u5236","\u673A","\u5F53","\u4F7F","\u70B9","\u4ECE","\u4E1A","\u672C","\u53BB","\u628A","\u6027","\u597D","\u5E94","\u5F00","\u5B83","\u5408","\u8FD8","\u56E0","\u7531","\u5176","\u4E9B","\u7136","\u524D","\u5916","\u5929","\u653F","\u56DB","\u65E5","\u90A3","\u793E","\u4E49","\u4E8B","\u5E73","\u5F62","\u76F8","\u5168","\u8868","\u95F4","\u6837","\u4E0E","\u5173","\u5404","\u91CD","\u65B0","\u7EBF","\u5185","\u6570","\u6B63","\u5FC3","\u53CD","\u4F60","\u660E","\u770B","\u539F","\u53C8","\u4E48","\u5229","\u6BD4","\u6216","\u4F46","\u8D28","\u6C14","\u7B2C","\u5411","\u9053","\u547D","\u6B64","\u53D8","\u6761","\u53EA","\u6CA1","\u7ED3","\u89E3","\u95EE","\u610F","\u5EFA","\u6708","\u516C","\u65E0","\u7CFB","\u519B","\u5F88","\u60C5","\u8005","\u6700","\u7ACB","\u4EE3","\u60F3","\u5DF2","\u901A","\u5E76","\u63D0","\u76F4","\u9898","\u515A","\u7A0B","\u5C55","\u4E94","\u679C","\u6599","\u8C61","\u5458","\u9769","\u4F4D","\u5165","\u5E38","\u6587","\u603B","\u6B21","\u54C1","\u5F0F","\u6D3B","\u8BBE","\u53CA","\u7BA1","\u7279","\u4EF6","\u957F","\u6C42","\u8001","\u5934","\u57FA","\u8D44","\u8FB9","\u6D41","\u8DEF","\u7EA7","\u5C11","\u56FE","\u5C71","\u7EDF","\u63A5","\u77E5","\u8F83","\u5C06","\u7EC4","\u89C1","\u8BA1","\u522B","\u5979","\u624B","\u89D2","\u671F","\u6839","\u8BBA","\u8FD0","\u519C","\u6307","\u51E0","\u4E5D","\u533A","\u5F3A","\u653E","\u51B3","\u897F","\u88AB","\u5E72","\u505A","\u5FC5","\u6218","\u5148","\u56DE","\u5219","\u4EFB","\u53D6","\u636E","\u5904","\u961F","\u5357","\u7ED9","\u8272","\u5149","\u95E8","\u5373","\u4FDD","\u6CBB","\u5317","\u9020","\u767E","\u89C4","\u70ED","\u9886","\u4E03","\u6D77","\u53E3","\u4E1C","\u5BFC","\u5668","\u538B","\u5FD7","\u4E16","\u91D1","\u589E","\u4E89","\u6D4E","\u9636","\u6CB9","\u601D","\u672F","\u6781","\u4EA4","\u53D7","\u8054","\u4EC0","\u8BA4","\u516D","\u5171","\u6743","\u6536","\u8BC1","\u6539","\u6E05","\u7F8E","\u518D","\u91C7","\u8F6C","\u66F4","\u5355","\u98CE","\u5207","\u6253","\u767D","\u6559","\u901F","\u82B1","\u5E26","\u5B89","\u573A","\u8EAB","\u8F66","\u4F8B","\u771F","\u52A1","\u5177","\u4E07","\u6BCF","\u76EE","\u81F3","\u8FBE","\u8D70","\u79EF","\u793A","\u8BAE","\u58F0","\u62A5","\u6597","\u5B8C","\u7C7B","\u516B","\u79BB","\u534E","\u540D","\u786E","\u624D","\u79D1","\u5F20","\u4FE1","\u9A6C","\u8282","\u8BDD","\u7C73","\u6574","\u7A7A","\u5143","\u51B5","\u4ECA","\u96C6","\u6E29","\u4F20","\u571F","\u8BB8","\u6B65","\u7FA4","\u5E7F","\u77F3","\u8BB0","\u9700","\u6BB5","\u7814","\u754C","\u62C9","\u6797","\u5F8B","\u53EB","\u4E14","\u7A76","\u89C2","\u8D8A","\u7EC7","\u88C5","\u5F71","\u7B97","\u4F4E","\u6301","\u97F3","\u4F17","\u4E66","\u5E03","\u590D","\u5BB9","\u513F","\u987B","\u9645","\u5546","\u975E","\u9A8C","\u8FDE","\u65AD","\u6DF1","\u96BE","\u8FD1","\u77FF","\u5343","\u5468","\u59D4","\u7D20","\u6280","\u5907","\u534A","\u529E","\u9752","\u7701","\u5217","\u4E60","\u54CD","\u7EA6","\u652F","\u822C","\u53F2","\u611F","\u52B3","\u4FBF","\u56E2","\u5F80","\u9178","\u5386","\u5E02","\u514B","\u4F55","\u9664","\u6D88","\u6784","\u5E9C","\u79F0","\u592A","\u51C6","\u7CBE","\u503C","\u53F7","\u7387","\u65CF","\u7EF4","\u5212","\u9009","\u6807","\u5199","\u5B58","\u5019","\u6BDB","\u4EB2","\u5FEB","\u6548","\u65AF","\u9662","\u67E5","\u6C5F","\u578B","\u773C","\u738B","\u6309","\u683C","\u517B","\u6613","\u7F6E","\u6D3E","\u5C42","\u7247","\u59CB","\u5374","\u4E13","\u72B6","\u80B2","\u5382","\u4EAC","\u8BC6","\u9002","\u5C5E","\u5706","\u5305","\u706B","\u4F4F","\u8C03","\u6EE1","\u53BF","\u5C40","\u7167","\u53C2","\u7EA2","\u7EC6","\u5F15","\u542C","\u8BE5","\u94C1","\u4EF7","\u4E25","\u9996","\u5E95","\u6DB2","\u5B98","\u5FB7","\u968F","\u75C5","\u82CF","\u5931","\u5C14","\u6B7B","\u8BB2","\u914D","\u5973","\u9EC4","\u63A8","\u663E","\u8C08","\u7F6A","\u795E","\u827A","\u5462","\u5E2D","\u542B","\u4F01","\u671B","\u5BC6","\u6279","\u8425","\u9879","\u9632","\u4E3E","\u7403","\u82F1","\u6C27","\u52BF","\u544A","\u674E","\u53F0","\u843D","\u6728","\u5E2E","\u8F6E","\u7834","\u4E9A","\u5E08","\u56F4","\u6CE8","\u8FDC","\u5B57","\u6750","\u6392","\u4F9B","\u6CB3","\u6001","\u5C01","\u53E6","\u65BD","\u51CF","\u6811","\u6EB6","\u600E","\u6B62","\u6848","\u8A00","\u58EB","\u5747","\u6B66","\u56FA","\u53F6","\u9C7C","\u6CE2","\u89C6","\u4EC5","\u8D39","\u7D27","\u7231","\u5DE6","\u7AE0","\u65E9","\u671D","\u5BB3","\u7EED","\u8F7B","\u670D","\u8BD5","\u98DF","\u5145","\u5175","\u6E90","\u5224","\u62A4","\u53F8","\u8DB3","\u67D0","\u7EC3","\u5DEE","\u81F4","\u677F","\u7530","\u964D","\u9ED1","\u72AF","\u8D1F","\u51FB","\u8303","\u7EE7","\u5174","\u4F3C","\u4F59","\u575A","\u66F2","\u8F93","\u4FEE","\u6545","\u57CE","\u592B","\u591F","\u9001","\u7B14","\u8239","\u5360","\u53F3","\u8D22","\u5403","\u5BCC","\u6625","\u804C","\u89C9","\u6C49","\u753B","\u529F","\u5DF4","\u8DDF","\u867D","\u6742","\u98DE","\u68C0","\u5438","\u52A9","\u5347","\u9633","\u4E92","\u521D","\u521B","\u6297","\u8003","\u6295","\u574F","\u7B56","\u53E4","\u5F84","\u6362","\u672A","\u8DD1","\u7559","\u94A2","\u66FE","\u7AEF","\u8D23","\u7AD9","\u7B80","\u8FF0","\u94B1","\u526F","\u5C3D","\u5E1D","\u5C04","\u8349","\u51B2","\u627F","\u72EC","\u4EE4","\u9650","\u963F","\u5BA3","\u73AF","\u53CC","\u8BF7","\u8D85","\u5FAE","\u8BA9","\u63A7","\u5DDE","\u826F","\u8F74","\u627E","\u5426","\u7EAA","\u76CA","\u4F9D","\u4F18","\u9876","\u7840","\u8F7D","\u5012","\u623F","\u7A81","\u5750","\u7C89","\u654C","\u7565","\u5BA2","\u8881","\u51B7","\u80DC","\u7EDD","\u6790","\u5757","\u5242","\u6D4B","\u4E1D","\u534F","\u8BC9","\u5FF5","\u9648","\u4ECD","\u7F57","\u76D0","\u53CB","\u6D0B","\u9519","\u82E6","\u591C","\u5211","\u79FB","\u9891","\u9010","\u9760","\u6DF7","\u6BCD","\u77ED","\u76AE","\u7EC8","\u805A","\u6C7D","\u6751","\u4E91","\u54EA","\u65E2","\u8DDD","\u536B","\u505C","\u70C8","\u592E","\u5BDF","\u70E7","\u8FC5","\u5883","\u82E5","\u5370","\u6D32","\u523B","\u62EC","\u6FC0","\u5B54","\u641E","\u751A","\u5BA4","\u5F85","\u6838","\u6821","\u6563","\u4FB5","\u5427","\u7532","\u6E38","\u4E45","\u83DC","\u5473","\u65E7","\u6A21","\u6E56","\u8D27","\u635F","\u9884","\u963B","\u6BEB","\u666E","\u7A33","\u4E59","\u5988","\u690D","\u606F","\u6269","\u94F6","\u8BED","\u6325","\u9152","\u5B88","\u62FF","\u5E8F","\u7EB8","\u533B","\u7F3A","\u96E8","\u5417","\u9488","\u5218","\u554A","\u6025","\u5531","\u8BEF","\u8BAD","\u613F","\u5BA1","\u9644","\u83B7","\u8336","\u9C9C","\u7CAE","\u65A4","\u5B69","\u8131","\u786B","\u80A5","\u5584","\u9F99","\u6F14","\u7236","\u6E10","\u8840","\u6B22","\u68B0","\u638C","\u6B4C","\u6C99","\u521A","\u653B","\u8C13","\u76FE","\u8BA8","\u665A","\u7C92","\u4E71","\u71C3","\u77DB","\u4E4E","\u6740","\u836F","\u5B81","\u9C81","\u8D35","\u949F","\u7164","\u8BFB","\u73ED","\u4F2F","\u9999","\u4ECB","\u8FEB","\u53E5","\u4E30","\u57F9","\u63E1","\u5170","\u62C5","\u5F26","\u86CB","\u6C89","\u5047","\u7A7F","\u6267","\u7B54","\u4E50","\u8C01","\u987A","\u70DF","\u7F29","\u5F81","\u8138","\u559C","\u677E","\u811A","\u56F0","\u5F02","\u514D","\u80CC","\u661F","\u798F","\u4E70","\u67D3","\u4E95","\u6982","\u6162","\u6015","\u78C1","\u500D","\u7956","\u7687","\u4FC3","\u9759","\u8865","\u8BC4","\u7FFB","\u8089","\u8DF5","\u5C3C","\u8863","\u5BBD","\u626C","\u68C9","\u5E0C","\u4F24","\u64CD","\u5782","\u79CB","\u5B9C","\u6C22","\u5957","\u7763","\u632F","\u67B6","\u4EAE","\u672B","\u5BAA","\u5E86","\u7F16","\u725B","\u89E6","\u6620","\u96F7","\u9500","\u8BD7","\u5EA7","\u5C45","\u6293","\u88C2","\u80DE","\u547C","\u5A18","\u666F","\u5A01","\u7EFF","\u6676","\u539A","\u76DF","\u8861","\u9E21","\u5B59","\u5EF6","\u5371","\u80F6","\u5C4B","\u4E61","\u4E34","\u9646","\u987E","\u6389","\u5440","\u706F","\u5C81","\u63AA","\u675F","\u8010","\u5267","\u7389","\u8D75","\u8DF3","\u54E5","\u5B63","\u8BFE","\u51EF","\u80E1","\u989D","\u6B3E","\u7ECD","\u5377","\u9F50","\u4F1F","\u84B8","\u6B96","\u6C38","\u5B97","\u82D7","\u5DDD","\u7089","\u5CA9","\u5F31","\u96F6","\u6768","\u594F","\u6CBF","\u9732","\u6746","\u63A2","\u6ED1","\u9547","\u996D","\u6D53","\u822A","\u6000","\u8D76","\u5E93","\u593A","\u4F0A","\u7075","\u7A0E","\u9014","\u706D","\u8D5B","\u5F52","\u53EC","\u9F13","\u64AD","\u76D8","\u88C1","\u9669","\u5EB7","\u552F","\u5F55","\u83CC","\u7EAF","\u501F","\u7CD6","\u76D6","\u6A2A","\u7B26","\u79C1","\u52AA","\u5802","\u57DF","\u67AA","\u6DA6","\u5E45","\u54C8","\u7ADF","\u719F","\u866B","\u6CFD","\u8111","\u58E4","\u78B3","\u6B27","\u904D","\u4FA7","\u5BE8","\u6562","\u5F7B","\u8651","\u659C","\u8584","\u5EAD","\u7EB3","\u5F39","\u9972","\u4F38","\u6298","\u9EA6","\u6E7F","\u6697","\u8377","\u74E6","\u585E","\u5E8A","\u7B51","\u6076","\u6237","\u8BBF","\u5854","\u5947","\u900F","\u6881","\u5200","\u65CB","\u8FF9","\u5361","\u6C2F","\u9047","\u4EFD","\u6BD2","\u6CE5","\u9000","\u6D17","\u6446","\u7070","\u5F69","\u5356","\u8017","\u590F","\u62E9","\u5FD9","\u94DC","\u732E","\u786C","\u4E88","\u7E41","\u5708","\u96EA","\u51FD","\u4EA6","\u62BD","\u7BC7","\u9635","\u9634","\u4E01","\u5C3A","\u8FFD","\u5806","\u96C4","\u8FCE","\u6CDB","\u7238","\u697C","\u907F","\u8C0B","\u5428","\u91CE","\u732A","\u65D7","\u7D2F","\u504F","\u5178","\u9986","\u7D22","\u79E6","\u8102","\u6F6E","\u7237","\u8C46","\u5FFD","\u6258","\u60CA","\u5851","\u9057","\u6108","\u6731","\u66FF","\u7EA4","\u7C97","\u503E","\u5C1A","\u75DB","\u695A","\u8C22","\u594B","\u8D2D","\u78E8","\u541B","\u6C60","\u65C1","\u788E","\u9AA8","\u76D1","\u6355","\u5F1F","\u66B4","\u5272","\u8D2F","\u6B8A","\u91CA","\u8BCD","\u4EA1","\u58C1","\u987F","\u5B9D","\u5348","\u5C18","\u95FB","\u63ED","\u70AE","\u6B8B","\u51AC","\u6865","\u5987","\u8B66","\u7EFC","\u62DB","\u5434","\u4ED8","\u6D6E","\u906D","\u5F90","\u60A8","\u6447","\u8C37","\u8D5E","\u7BB1","\u9694","\u8BA2","\u7537","\u5439","\u56ED","\u7EB7","\u5510","\u8D25","\u5B8B","\u73BB","\u5DE8","\u8015","\u5766","\u8363","\u95ED","\u6E7E","\u952E","\u51E1","\u9A7B","\u9505","\u6551","\u6069","\u5265","\u51DD","\u78B1","\u9F7F","\u622A","\u70BC","\u9EBB","\u7EBA","\u7981","\u5E9F","\u76DB","\u7248","\u7F13","\u51C0","\u775B","\u660C","\u5A5A","\u6D89","\u7B52","\u5634","\u63D2","\u5CB8","\u6717","\u5E84","\u8857","\u85CF","\u59D1","\u8D38","\u8150","\u5974","\u5566","\u60EF","\u4E58","\u4F19","\u6062","\u5300","\u7EB1","\u624E","\u8FA9","\u8033","\u5F6A","\u81E3","\u4EBF","\u7483","\u62B5","\u8109","\u79C0","\u8428","\u4FC4","\u7F51","\u821E","\u5E97","\u55B7","\u7EB5","\u5BF8","\u6C57","\u6302","\u6D2A","\u8D3A","\u95EA","\u67EC","\u7206","\u70EF","\u6D25","\u7A3B","\u5899","\u8F6F","\u52C7","\u50CF","\u6EDA","\u5398","\u8499","\u82B3","\u80AF","\u5761","\u67F1","\u8361","\u817F","\u4EEA","\u65C5","\u5C3E","\u8F67","\u51B0","\u8D21","\u767B","\u9ECE","\u524A","\u94BB","\u52D2","\u9003","\u969C","\u6C28","\u90ED","\u5CF0","\u5E01","\u6E2F","\u4F0F","\u8F68","\u4EA9","\u6BD5","\u64E6","\u83AB","\u523A","\u6D6A","\u79D8","\u63F4","\u682A","\u5065","\u552E","\u80A1","\u5C9B","\u7518","\u6CE1","\u7761","\u7AE5","\u94F8","\u6C64","\u9600","\u4F11","\u6C47","\u820D","\u7267","\u7ED5","\u70B8","\u54F2","\u78F7","\u7EE9","\u670B","\u6DE1","\u5C16","\u542F","\u9677","\u67F4","\u5448","\u5F92","\u989C","\u6CEA","\u7A0D","\u5FD8","\u6CF5","\u84DD","\u62D6","\u6D1E","\u6388","\u955C","\u8F9B","\u58EE","\u950B","\u8D2B","\u865A","\u5F2F","\u6469","\u6CF0","\u5E7C","\u5EF7","\u5C0A","\u7A97","\u7EB2","\u5F04","\u96B6","\u7591","\u6C0F","\u5BAB","\u59D0","\u9707","\u745E","\u602A","\u5C24","\u7434","\u5FAA","\u63CF","\u819C","\u8FDD","\u5939","\u8170","\u7F18","\u73E0","\u7A77","\u68EE","\u679D","\u7AF9","\u6C9F","\u50AC","\u7EF3","\u5FC6","\u90A6","\u5269","\u5E78","\u6D46","\u680F","\u62E5","\u7259","\u8D2E","\u793C","\u6EE4","\u94A0","\u7EB9","\u7F62","\u62CD","\u54B1","\u558A","\u8896","\u57C3","\u52E4","\u7F5A","\u7126","\u6F5C","\u4F0D","\u58A8","\u6B32","\u7F1D","\u59D3","\u520A","\u9971","\u4EFF","\u5956","\u94DD","\u9B3C","\u4E3D","\u8DE8","\u9ED8","\u6316","\u94FE","\u626B","\u559D","\u888B","\u70AD","\u6C61","\u5E55","\u8BF8","\u5F27","\u52B1","\u6885","\u5976","\u6D01","\u707E","\u821F","\u9274","\u82EF","\u8BBC","\u62B1","\u6BC1","\u61C2","\u5BD2","\u667A","\u57D4","\u5BC4","\u5C4A","\u8DC3","\u6E21","\u6311","\u4E39","\u8270","\u8D1D","\u78B0","\u62D4","\u7239","\u6234","\u7801","\u68A6","\u82BD","\u7194","\u8D64","\u6E14","\u54ED","\u656C","\u9897","\u5954","\u94C5","\u4EF2","\u864E","\u7A00","\u59B9","\u4E4F","\u73CD","\u7533","\u684C","\u9075","\u5141","\u9686","\u87BA","\u4ED3","\u9B4F","\u9510","\u6653","\u6C2E","\u517C","\u9690","\u788D","\u8D6B","\u62E8","\u5FE0","\u8083","\u7F38","\u7275","\u62A2","\u535A","\u5DE7","\u58F3","\u5144","\u675C","\u8BAF","\u8BDA","\u78A7","\u7965","\u67EF","\u9875","\u5DE1","\u77E9","\u60B2","\u704C","\u9F84","\u4F26","\u7968","\u5BFB","\u6842","\u94FA","\u5723","\u6050","\u6070","\u90D1","\u8DA3","\u62AC","\u8352","\u817E","\u8D34","\u67D4","\u6EF4","\u731B","\u9614","\u8F86","\u59BB","\u586B","\u64A4","\u50A8","\u7B7E","\u95F9","\u6270","\u7D2B","\u7802","\u9012","\u620F","\u540A","\u9676","\u4F10","\u5582","\u7597","\u74F6","\u5A46","\u629A","\u81C2","\u6478","\u5FCD","\u867E","\u8721","\u90BB","\u80F8","\u5DE9","\u6324","\u5076","\u5F03","\u69FD","\u52B2","\u4E73","\u9093","\u5409","\u4EC1","\u70C2","\u7816","\u79DF","\u4E4C","\u8230","\u4F34","\u74DC","\u6D45","\u4E19","\u6682","\u71E5","\u6A61","\u67F3","\u8FF7","\u6696","\u724C","\u79E7","\u80C6","\u8BE6","\u7C27","\u8E0F","\u74F7","\u8C31","\u5446","\u5BBE","\u7CCA","\u6D1B","\u8F89","\u6124","\u7ADE","\u9699","\u6012","\u7C98","\u4E43","\u7EEA","\u80A9","\u7C4D","\u654F","\u6D82","\u7199","\u7686","\u4FA6","\u60AC","\u6398","\u4EAB","\u7EA0","\u9192","\u72C2","\u9501","\u6DC0","\u6068","\u7272","\u9738","\u722C","\u8D4F","\u9006","\u73A9","\u9675","\u795D","\u79D2","\u6D59","\u8C8C","\u5F79","\u5F7C","\u6089","\u9E2D","\u8D8B","\u51E4","\u6668","\u755C","\u8F88","\u79E9","\u5375","\u7F72","\u68AF","\u708E","\u6EE9","\u68CB","\u9A71","\u7B5B","\u5CE1","\u5192","\u5565","\u5BFF","\u8BD1","\u6D78","\u6CC9","\u5E3D","\u8FDF","\u7845","\u7586","\u8D37","\u6F0F","\u7A3F","\u51A0","\u5AE9","\u80C1","\u82AF","\u7262","\u53DB","\u8680","\u5965","\u9E23","\u5CAD","\u7F8A","\u51ED","\u4E32","\u5858","\u7ED8","\u9175","\u878D","\u76C6","\u9521","\u5E99","\u7B79","\u51BB","\u8F85","\u6444","\u88AD","\u7B4B","\u62D2","\u50DA","\u65F1","\u94BE","\u9E1F","\u6F06","\u6C88","\u7709","\u758F","\u6DFB","\u68D2","\u7A57","\u785D","\u97E9","\u903C","\u626D","\u4FA8","\u51C9","\u633A","\u7897","\u683D","\u7092","\u676F","\u60A3","\u998F","\u529D","\u8C6A","\u8FBD","\u52C3","\u9E3F","\u65E6","\u540F","\u62DC","\u72D7","\u57CB","\u8F8A","\u63A9","\u996E","\u642C","\u9A82","\u8F9E","\u52FE","\u6263","\u4F30","\u848B","\u7ED2","\u96FE","\u4E08","\u6735","\u59C6","\u62DF","\u5B87","\u8F91","\u9655","\u96D5","\u507F","\u84C4","\u5D07","\u526A","\u5021","\u5385","\u54AC","\u9A76","\u85AF","\u5237","\u65A5","\u756A","\u8D4B","\u5949","\u4F5B","\u6D47","\u6F2B","\u66FC","\u6247","\u9499","\u6843","\u6276","\u4ED4","\u8FD4","\u4FD7","\u4E8F","\u8154","\u978B","\u68F1","\u8986","\u6846","\u6084","\u53D4","\u649E","\u9A97","\u52D8","\u65FA","\u6CB8","\u5B64","\u5410","\u5B5F","\u6E20","\u5C48","\u75BE","\u5999","\u60DC","\u4EF0","\u72E0","\u80C0","\u8C10","\u629B","\u9709","\u6851","\u5C97","\u561B","\u8870","\u76D7","\u6E17","\u810F","\u8D56","\u6D8C","\u751C","\u66F9","\u9605","\u808C","\u54E9","\u5389","\u70C3","\u7EAC","\u6BC5","\u6628","\u4F2A","\u75C7","\u716E","\u53F9","\u9489","\u642D","\u830E","\u7B3C","\u9177","\u5077","\u5F13","\u9525","\u6052","\u6770","\u5751","\u9F3B","\u7FFC","\u7EB6","\u53D9","\u72F1","\u902E","\u7F50","\u7EDC","\u68DA","\u6291","\u81A8","\u852C","\u5BFA","\u9AA4","\u7A46","\u51B6","\u67AF","\u518C","\u5C38","\u51F8","\u7EC5","\u576F","\u727A","\u7130","\u8F70","\u6B23","\u664B","\u7626","\u5FA1","\u952D","\u9526","\u4E27","\u65EC","\u953B","\u5784","\u641C","\u6251","\u9080","\u4EAD","\u916F","\u8FC8","\u8212","\u8106","\u9176","\u95F2","\u5FE7","\u915A","\u987D","\u7FBD","\u6DA8","\u5378","\u4ED7","\u966A","\u8F9F","\u60E9","\u676D","\u59DA","\u809A","\u6349","\u98D8","\u6F02","\u6606","\u6B3A","\u543E","\u90CE","\u70F7","\u6C41","\u5475","\u9970","\u8427","\u96C5","\u90AE","\u8FC1","\u71D5","\u6492","\u59FB","\u8D74","\u5BB4","\u70E6","\u503A","\u5E10","\u6591","\u94C3","\u65E8","\u9187","\u8463","\u997C","\u96CF","\u59FF","\u62CC","\u5085","\u8179","\u59A5","\u63C9","\u8D24","\u62C6","\u6B6A","\u8461","\u80FA","\u4E22","\u6D69","\u5FBD","\u6602","\u57AB","\u6321","\u89C8","\u8D2A","\u6170","\u7F34","\u6C6A","\u614C","\u51AF","\u8BFA","\u59DC","\u8C0A","\u51F6","\u52A3","\u8BEC","\u8000","\u660F","\u8EBA","\u76C8","\u9A91","\u4E54","\u6EAA","\u4E1B","\u5362","\u62B9","\u95F7","\u54A8","\u522E","\u9A7E","\u7F06","\u609F","\u6458","\u94D2","\u63B7","\u9887","\u5E7B","\u67C4","\u60E0","\u60E8","\u4F73","\u4EC7","\u814A","\u7A9D","\u6DA4","\u5251","\u77A7","\u5821","\u6CFC","\u8471","\u7F69","\u970D","\u635E","\u80CE","\u82CD","\u6EE8","\u4FE9","\u6345","\u6E58","\u780D","\u971E","\u90B5","\u8404","\u75AF","\u6DEE","\u9042","\u718A","\u7CAA","\u70D8","\u5BBF","\u6863","\u6208","\u9A73","\u5AC2","\u88D5","\u5F99","\u7BAD","\u6350","\u80A0","\u6491","\u6652","\u8FA8","\u6BBF","\u83B2","\u644A","\u6405","\u9171","\u5C4F","\u75AB","\u54C0","\u8521","\u5835","\u6CAB","\u76B1","\u7545","\u53E0","\u9601","\u83B1","\u6572","\u8F96","\u94A9","\u75D5","\u575D","\u5DF7","\u997F","\u7978","\u4E18","\u7384","\u6E9C","\u66F0","\u903B","\u5F6D","\u5C1D","\u537F","\u59A8","\u8247","\u541E","\u97E6","\u6028","\u77EE","\u6B47"],xn.chinese_simplified=$t}catch{}try{Xr._default=$t=[],xn.chinese_traditional=$t}catch{}try{Xr._default=$t=[],xn.korean=$t}catch{}try{Xr._default=$t=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","acade\u0301mie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acque\u0301rir","acronyme","acteur","actif","actuel","adepte","ade\u0301quat","adhe\u0301sif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","ae\u0301rer","ae\u0301ronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agre\u0301able","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","alge\u0300bre","algue","alie\u0301ner","aliment","alle\u0301ger","alliage","allouer","allumer","alourdir","alpaga","altesse","alve\u0301ole","amateur","ambigu","ambre","ame\u0301nager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","ane\u0301antir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","ape\u0301ritif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arte\u0301riel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","bannie\u0300re","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","be\u0301lier","belote","be\u0301ne\u0301fice","berceau","berger","berline","bermuda","besace","besogne","be\u0301tail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","bre\u0300che","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafe\u0301ine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","came\u0301ra","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","ce\u0301dille","ceinture","ce\u0301leste","cellule","cendrier","censurer","central","cercle","ce\u0301re\u0301bral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","che\u0301quier","chercher","cheval","chien","chiffre","chignon","chime\u0300re","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cine\u0301ma","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohe\u0301sion","coiffer","coincer","cole\u0300re","colibri","colline","colmater","colonel","combat","come\u0301die","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","corte\u0300ge","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","cre\u0301ature","cre\u0301diter","cre\u0301meux","creuser","crevette","cribler","crier","cristal","crite\u0300re","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuille\u0300re","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","de\u0301battre","de\u0301biter","de\u0301border","de\u0301brider","de\u0301butant","de\u0301caler","de\u0301cembre","de\u0301chirer","de\u0301cider","de\u0301clarer","de\u0301corer","de\u0301crire","de\u0301cupler","de\u0301dale","de\u0301ductif","de\u0301esse","de\u0301fensif","de\u0301filer","de\u0301frayer","de\u0301gager","de\u0301givrer","de\u0301glutir","de\u0301grafer","de\u0301jeuner","de\u0301lice","de\u0301loger","demander","demeurer","de\u0301molir","de\u0301nicher","de\u0301nouer","dentelle","de\u0301nuder","de\u0301part","de\u0301penser","de\u0301phaser","de\u0301placer","de\u0301poser","de\u0301ranger","de\u0301rober","de\u0301sastre","descente","de\u0301sert","de\u0301signer","de\u0301sobe\u0301ir","dessiner","destrier","de\u0301tacher","de\u0301tester","de\u0301tourer","de\u0301tresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","diffe\u0301rer","dige\u0301rer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","e\u0301blouir","e\u0301carter","e\u0301charpe","e\u0301chelle","e\u0301clairer","e\u0301clipse","e\u0301clore","e\u0301cluse","e\u0301cole","e\u0301conomie","e\u0301corce","e\u0301couter","e\u0301craser","e\u0301cre\u0301mer","e\u0301crivain","e\u0301crou","e\u0301cume","e\u0301cureuil","e\u0301difier","e\u0301duquer","effacer","effectif","effigie","effort","effrayer","effusion","e\u0301galiser","e\u0301garer","e\u0301jecter","e\u0301laborer","e\u0301largir","e\u0301lectron","e\u0301le\u0301gant","e\u0301le\u0301phant","e\u0301le\u0300ve","e\u0301ligible","e\u0301litisme","e\u0301loge","e\u0301lucider","e\u0301luder","emballer","embellir","embryon","e\u0301meraude","e\u0301mission","emmener","e\u0301motion","e\u0301mouvoir","empereur","employer","emporter","emprise","e\u0301mulsion","encadrer","enche\u0300re","enclave","encoche","endiguer","endosser","endroit","enduire","e\u0301nergie","enfance","enfermer","enfouir","engager","engin","englober","e\u0301nigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","e\u0301nume\u0301rer","envahir","enviable","envoyer","enzyme","e\u0301olien","e\u0301paissir","e\u0301pargne","e\u0301patant","e\u0301paule","e\u0301picerie","e\u0301pide\u0301mie","e\u0301pier","e\u0301pilogue","e\u0301pine","e\u0301pisode","e\u0301pitaphe","e\u0301poque","e\u0301preuve","e\u0301prouver","e\u0301puisant","e\u0301querre","e\u0301quipe","e\u0301riger","e\u0301rosion","erreur","e\u0301ruption","escalier","espadon","espe\u0300ce","espie\u0300gle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","e\u0301tage\u0300re","e\u0301taler","e\u0301tanche","e\u0301tatique","e\u0301teindre","e\u0301tendoir","e\u0301ternel","e\u0301thanol","e\u0301thique","ethnie","e\u0301tirer","e\u0301toffer","e\u0301toile","e\u0301tonnant","e\u0301tourdir","e\u0301trange","e\u0301troit","e\u0301tude","euphorie","e\u0301valuer","e\u0301vasion","e\u0301ventail","e\u0301vidence","e\u0301viter","e\u0301volutif","e\u0301voquer","exact","exage\u0301rer","exaucer","exceller","excitant","exclusif","excuse","exe\u0301cuter","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expe\u0301dier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","fe\u0301brile","fe\u0301conder","fe\u0301de\u0301rer","fe\u0301lin","femme","fe\u0301mur","fendoir","fe\u0301odal","fermer","fe\u0301roce","ferveur","festival","feuille","feutre","fe\u0301vrier","fiasco","ficeler","fictif","fide\u0300le","figure","filature","filetage","filie\u0300re","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fle\u0301au","fle\u0300che","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fouge\u0300re","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fre\u0301gate","freiner","frelon","fre\u0301mir","fre\u0301ne\u0301sie","fre\u0300re","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","ge\u0301ant","ge\u0301latine","ge\u0301lule","gendarme","ge\u0301ne\u0301ral","ge\u0301nie","genou","gentil","ge\u0301ologie","ge\u0301ome\u0300tre","ge\u0301ranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruye\u0300re","gue\u0301pard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","he\u0301lium","he\u0301matome","herbe","he\u0301risson","hermine","he\u0301ron","he\u0301siter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homoge\u0300ne","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygie\u0300ne","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","impe\u0301rial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","ine\u0301dit","ineptie","inexact","infini","infliger","informer","infusion","inge\u0301rer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irre\u0301el","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juve\u0301nile","kayak","kimono","kiosque","label","labial","labourer","lace\u0301rer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","le\u0301gal","le\u0301ger","le\u0301gume","lessive","lettre","levier","lexique","le\u0301zard","liasse","libe\u0301rer","libre","licence","licorne","lie\u0300ge","lie\u0300vre","ligature","ligoter","ligue","limer","limite","limonade","limpide","line\u0301aire","lingot","lionceau","liquide","lisie\u0300re","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumie\u0300re","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","male\u0301fice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","mate\u0301riel","matie\u0300re","matraque","maudire","maussade","mauve","maximal","me\u0301chant","me\u0301connu","me\u0301daille","me\u0301decin","me\u0301diter","me\u0301duse","meilleur","me\u0301lange","me\u0301lodie","membre","me\u0301moire","menacer","mener","menhir","mensonge","mentor","mercredi","me\u0301rite","merle","messager","mesure","me\u0301tal","me\u0301te\u0301ore","me\u0301thode","me\u0301tier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mine\u0301ral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","mure\u0300ne","murmure","muscle","muse\u0301um","musicien","mutation","muter","mutuel","myriade","myrtille","myste\u0300re","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","ne\u0301buleux","nectar","ne\u0301faste","ne\u0301gation","ne\u0301gliger","ne\u0301gocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","nume\u0301ro","nuptial","nuque","nutritif","obe\u0301ir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","oce\u0301an","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","one\u0301reux","onirique","opale","opaque","ope\u0301rer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxyge\u0300ne","ozone","paisible","palace","palmare\u0300s","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","paste\u0300que","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pe\u0301lican","pelle","pelouse","peluche","pendule","pe\u0301ne\u0301trer","pe\u0301nible","pensif","pe\u0301nurie","pe\u0301pite","pe\u0301plum","perdrix","perforer","pe\u0301riode","permuter","perplexe","persil","perte","peser","pe\u0301tale","petit","pe\u0301trir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","pie\u0300ce","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poe\u0301sie","poe\u0300te","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponde\u0301rer","poney","portique","position","posse\u0301der","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","pre\u0301cieux","pre\u0301dire","pre\u0301fixe","pre\u0301lude","pre\u0301nom","pre\u0301sence","pre\u0301texte","pre\u0301voir","primitif","prince","prison","priver","proble\u0300me","proce\u0301der","prodige","profond","progre\u0300s","proie","projeter","prologue","promener","propre","prospe\u0300re","prote\u0301ger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quie\u0301tude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","re\u0301actif","re\u0301agir","re\u0301aliser","re\u0301animer","recevoir","re\u0301citer","re\u0301clamer","re\u0301colter","recruter","reculer","recycler","re\u0301diger","redouter","refaire","re\u0301flexe","re\u0301former","refrain","refuge","re\u0301galien","re\u0301gion","re\u0301glage","re\u0301gulier","re\u0301ite\u0301rer","rejeter","rejouer","relatif","relever","relief","remarque","reme\u0300de","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","re\u0301serve","re\u0301sineux","re\u0301soudre","respect","rester","re\u0301sultat","re\u0301tablir","retenir","re\u0301ticule","retomber","retracer","re\u0301union","re\u0301ussir","revanche","revivre","re\u0301volte","re\u0301vulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","rivie\u0300re","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","sce\u0301le\u0301rat","sce\u0301nario","sceptre","sche\u0301ma","science","scinder","score","scrutin","sculpter","se\u0301ance","se\u0301cable","se\u0301cher","secouer","se\u0301cre\u0301ter","se\u0301datif","se\u0301duire","seigneur","se\u0301jour","se\u0301lectif","semaine","sembler","semence","se\u0301minal","se\u0301nateur","sensible","sentence","se\u0301parer","se\u0301quence","serein","sergent","se\u0301rieux","serrure","se\u0301rum","service","se\u0301same","se\u0301vir","sevrage","sextuple","side\u0301ral","sie\u0300cle","sie\u0301ger","siffler","sigle","signal","silence","silicium","simple","since\u0300re","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","spe\u0301cial","sphe\u0300re","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succe\u0300s","sucre","suffixe","sugge\u0301rer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","syme\u0301trie","synapse","syntaxe","syste\u0300me","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","te\u0301moin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","te\u0301tine","texte","the\u0300me","the\u0301orie","the\u0301rapie","thorax","tibia","tie\u0300de","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tole\u0301rant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","tre\u0300fle","tremper","tre\u0301sor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","ve\u0301ge\u0301tal","ve\u0301hicule","veinard","ve\u0301loce","vendredi","ve\u0301ne\u0301rer","venger","venimeux","ventouse","verdure","ve\u0301rin","vernir","verrou","verser","vertu","veston","ve\u0301te\u0301ran","ve\u0301tuste","vexant","vexer","viaduc","viande","victoire","vidange","vide\u0301o","vignette","vigueur","vilain","village","vinaigre","violon","vipe\u0300re","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xe\u0301non","yacht","ze\u0300bre","ze\u0301nith","zeste","zoologie"],xn.french=$t}catch{}try{Xr._default=$t=[],xn.italian=$t}catch{}try{Xr._default=$t=[],xn.spanish=$t}catch{}try{Xr._default=$t=[],xn.japanese=$t,xn.JA=$t}catch{}try{Xr._default=$t=[],xn.portuguese=$t}catch{}try{Xr._default=$t=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],xn.english=$t,xn.EN=$t}catch{}Object.defineProperty(ao,"__esModule",{value:!0});const RI=ss,u6=jc,CI=aa.exports,Ef=Xr;let Ic=Ef._default;const c6=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function qc(t){return(t||"").normalize("NFKD")}function l6(t,e,r){for(;t.length<r;)t=e+t;return t}function f6(t){return parseInt(t,2)}function h6(t){return t.map(e=>l6(e.toString(2),"0",8)).join("")}function d6(t){const e=8*t.length/32,r=RI("sha256").update(t).digest();return h6(Array.from(r)).slice(0,e)}function p6(t){return"mnemonic"+(t||"")}var MI=ao.mnemonicToSeedSync=function(t,e){const r=ye.from(qc(t),"utf8"),n=ye.from(p6(qc(e)),"utf8");return u6.pbkdf2Sync(r,n,2048,64,"sha512")};function y6(t,e){if(!(e=e||Ic))throw new Error(c6);const r=qc(t).split(" ");if(r.length%3!=0)throw new Error("Invalid mnemonic");const n=r.map(f=>{const h=e.indexOf(f);if(h===-1)throw new Error("Invalid mnemonic");return l6(h.toString(2),"0",11)}).join(""),i=32*Math.floor(n.length/33),o=n.slice(0,i),a=n.slice(i),s=o.match(/(.{1,8})/g).map(f6);if(s.length<16)throw new Error("Invalid entropy");if(s.length>32)throw new Error("Invalid entropy");if(s.length%4!=0)throw new Error("Invalid entropy");const c=ye.from(s);if(d6(c)!==a)throw new Error("Invalid mnemonic checksum");return c.toString("hex")}function g6(t,e){if(kn(t)||(t=ye.from(t,"hex")),!(e=e||Ic))throw new Error(c6);if(t.length<16)throw new TypeError("Invalid entropy");if(t.length>32)throw new TypeError("Invalid entropy");if(t.length%4!=0)throw new TypeError("Invalid entropy");const r=(h6(Array.from(t))+d6(t)).match(/(.{1,11})/g).map(n=>{const i=f6(n);return e[i]});return e[0]==="\u3042\u3044\u3053\u304F\u3057\u3093"?r.join("\u3000"):r.join(" ")}ao.mnemonicToSeed=function(t,e){return Promise.resolve().then(()=>function(r,n,i,o,a){return Promise.resolve().then(()=>new Promise((s,c)=>{u6.pbkdf2(r,n,i,o,a,(f,h)=>f?c(f):s(h))}))}(ye.from(qc(t),"utf8"),ye.from(p6(qc(e)),"utf8"),2048,64,"sha512"))},ao.mnemonicToEntropy=y6;var NI=ao.entropyToMnemonic=g6,jI=ao.generateMnemonic=function(t,e,r){if((t=t||128)%32!=0)throw new TypeError("Invalid entropy");return g6((e=e||CI)(t/8),r)},BI=ao.validateMnemonic=function(t,e){try{y6(t,e)}catch{return!1}return!0};ao.setDefaultWordlist=function(t){const e=Ef.wordlists[t];if(!e)throw new Error('Could not find wordlist for language "'+t+'"');Ic=e},ao.getDefaultWordlist=function(){if(!Ic)throw new Error("No Default Wordlist set");return Object.keys(Ef.wordlists).filter(t=>t!=="JA"&&t!=="EN"&&Ef.wordlists[t].every((e,r)=>e===Ic[r]))[0]};var LI=Xr,go=ao.wordlists=LI.wordlists;class Lt{constructor(e=Lt.ENGLISH){if(this.language=e,!(e in Lt.WORDLISTS))throw new lb("Unsupported language for mnemonic "+e)}static getInstance(e=Lt.ENGLISH){return e!==null&&e!==""||(e=Lt.ENGLISH),new Lt(e)}generate(e){return e?NI(e,Lt.WORDLISTS[this.language]):jI(Lt.TWELVE_WORDS_ENTROPY,null,Lt.WORDLISTS[this.language])}isValid(e){return oe(e!=null&&e!=="","Invalid mnemonic"),e=e.normalize("NFKD"),BI(e,Lt.WORDLISTS[this.language])}static getLanguage(e){oe(e!=null&&e!=="","Invalid menmonic"),e=e.normalize("NFKD");for(let r of Object.keys(Lt.WORDLISTS))if(new Lt(r).isValid(e))return r;return null}static checkIsValid(e){return oe(e!=null&&e!=="","Invalid menmonic"),this.getLanguage(e)!=null}static toSeed(e,r){return oe(e!=null&&e!=="","Invalid menmonic"),r==null&&(r=""),e=e.normalize("NFKD"),r=r.normalize("NFKD"),MI(e,r)}}function zi(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Zm(t,e){for(var r,n="",i=0,o=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)r=t.charCodeAt(s);else{if(r===47)break;r=47}if(r===47){if(!(o===s-1||a===1))if(o!==s-1&&a===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",i=0):i=(n=n.slice(0,c)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(n.length===2||n.length===1){n="",i=0,o=s,a=0;continue}}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(o+1,s):n=t.slice(o+1,s),i=s-o-1;o=s,a=0}else r===46&&a!==-1?++a:a=-1}return n}Lt.DEFAULT=null,Lt.CHINESE_SIMPLIFIED="chinese_simplified",Lt.CHINESE_TRADITIONAL="chinese_traditional",Lt.CZECH="czech",Lt.ENGLISH="english",Lt.FRENCH="french",Lt.ITALIAN="italian",Lt.JAPANESE="japanese",Lt.KOREAN="korean",Lt.SPANISH="spanish",Lt.TWELVE_WORDS_ENTROPY=128,Lt.WORDLISTS={english:go.english,czech:go.czech,chinese_simplified:go.chinese_simplified,chinese_traditional:go.chinese_traditional,french:go.french,italian:go.italian,japanese:go.japanese,spanish:go.spanish,korean:go.korean};var su={resolve:function(){for(var t,e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i;n>=0?i=arguments[n]:(t===void 0&&(t=Zt.cwd()),i=t),zi(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Zm(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(zi(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return(t=Zm(t,!e)).length!==0||e||(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return zi(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];zi(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":su.normalize(t)},relative:function(t,e){if(zi(t),zi(e),t===e||(t=su.resolve(t))===(e=su.resolve(e)))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var n=t.length,i=n-r,o=1;o<e.length&&e.charCodeAt(o)===47;++o);for(var a=e.length-o,s=i<a?i:a,c=-1,f=0;f<=s;++f){if(f===s){if(a>s){if(e.charCodeAt(o+f)===47)return e.slice(o+f+1);if(f===0)return e.slice(o+f)}else i>s&&(t.charCodeAt(r+f)===47?c=f:f===0&&(c=0));break}var h=t.charCodeAt(r+f);if(h!==e.charCodeAt(o+f))break;h===47&&(c=f)}var y="";for(f=r+c+1;f<=n;++f)f!==n&&t.charCodeAt(f)!==47||(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(o+c):(o+=c,e.charCodeAt(o)===47&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(zi(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,n=-1,i=!0,o=t.length-1;o>=1;--o)if((e=t.charCodeAt(o))===47){if(!i){n=o;break}}else i=!1;return n===-1?r?"/":".":r&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');zi(t);var r,n=0,i=-1,o=!0;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,s=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(c===47){if(!o){n=r+1;break}}else s===-1&&(o=!1,s=r+1),a>=0&&(c===e.charCodeAt(a)?--a==-1&&(i=r):(a=-1,i=s))}return n===i?i=s:i===-1&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!o){n=r+1;break}}else i===-1&&(o=!1,i=r+1);return i===-1?"":t.slice(n,i)},extname:function(t){zi(t);for(var e=-1,r=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(s!==47)n===-1&&(i=!1,n=a+1),s===46?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1);else if(!i){r=a+1;break}}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(e,r){var n=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return n?n===r.root?n+i:n+e+i:i}("/",t)},parse:function(t){zi(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r,n=t.charCodeAt(0),i=n===47;i?(e.root="/",r=1):r=0;for(var o=-1,a=0,s=-1,c=!0,f=t.length-1,h=0;f>=r;--f)if((n=t.charCodeAt(f))!==47)s===-1&&(c=!1,s=f+1),n===46?o===-1?o=f:h!==1&&(h=1):o!==-1&&(h=-1);else if(!c){a=f+1;break}return o===-1||s===-1||h===0||h===1&&o===s-1&&o===a+1?s!==-1&&(e.base=e.name=a===0&&i?t.slice(1,s):t.slice(a,s)):(a===0&&i?(e.name=t.slice(1,o),e.base=t.slice(1,s)):(e.name=t.slice(a,o),e.base=t.slice(a,s)),e.ext=t.slice(o,s)),a>0?e.dir=t.slice(0,a-1):i&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};su.posix=su;var Xm=su;class Xe{constructor(e,r){let n=e instanceof Xe?e.getAbsolutePath():e;r&&(n+=Xe.SEPARATOR+r),n.startsWith("/")||n.startsWith("./")||n[1]===":"||(n="./"+n),this.fullPath=n}static exists(e){return typeof e=="string"&&(e=new Xe(e)),e.exists()}static isFile(e){return typeof e=="string"&&(e=new Xe(e)),e.isFile()}static isDirectory(e){return typeof e=="string"&&(e=new Xe(e)),e.isDirectory()}getStats(){return this.fileStats?this.fileStats:this.exists()?V7(this.fullPath):null}exists(){return Ed(this.fullPath)}length(){return this.exists()?this.getStats().size:0}getAbsolutePath(){return this.fullPath}getName(){return this.fullPath.includes(Xe.SEPARATOR)?this.fullPath.substring(this.fullPath.lastIndexOf(Xe.SEPARATOR)+1):this.fullPath}getParentDirectory(){let e=this.getParentDirectoryName();return e?new Xe(e):null}getParentDirectoryName(){return this.fullPath.includes(Xe.SEPARATOR)?this.fullPath.substring(0,this.fullPath.lastIndexOf(Xe.SEPARATOR)):this.isDirectory?this.fullPath:""}isDirectory(){return!!this.exists()&&this.getStats().isDirectory()}isFile(){return!!this.exists()&&this.getStats().isFile()}list(){return this.exists()&&this.getStats().isDirectory()?nm(this.fullPath):null}listFiles(){if(!this.exists()||!this.getStats().isDirectory())return null;let e=[];return this.list().forEach(r=>{e.push(new Xe(this.getAbsolutePath()+"/"+r))}),e}writeText(e){this.exists()&&!this.getStats().isFile()||Ap(this.fullPath,e,{encoding:"utf-8"})}readText(){return this.exists()?Iw(this.fullPath,{encoding:"utf-8"}):null}rename(e){if(this.exists()){let r=this.fullPath.includes(Xe.SEPARATOR)&&!e.includes(Xe.SEPARATOR)?this.getParentDirectoryName+Xe.SEPARATOR+e:e;q7(this.fullPath,r)}}createFile(e){let r=e||!1;this.exists()&&!r||(Ap(this.fullPath,"",{encoding:"utf-8"}),this.fileStats=void 0)}createDirectory(e){let r=e||!1;this.exists()&&!r||(this.mkdirpath(this.fullPath),this.fileStats=void 0)}mkdirpath(e){if(!Ed(e))try{K7(e)}catch(r){let n=Xm.dirname(e);if(n===e)throw r;this.mkdirpath(n),this.mkdirpath(e)}}delete(){this.exists()&&(this.isDirectory()?this.deleteDirectory(this.fullPath):im(this.fullPath),this.fileStats=void 0)}deleteDirectory(e){Ed(e)&&(nm(e).forEach((r,n)=>{const i=Xm.join(e,r);W7(i).isDirectory()?this.deleteDirectory(i):im(i)}),H7(e))}toString(){return this.fullPath}}Xe.SEPARATOR="/";class Ya{constructor(){}static getInstance(){return Ya.instance||(Ya.instance=new Ya),Ya.instance}merge(e,r){return r}}class Ve extends Pe{constructor(){super()}constructWithOperation(e){this.header=Ve.Header.newWithPreviousTxId(e,null)}constructWithPreviousTxId(e,r){this.header=Ve.Header.newWithPreviousTxId(e,r)}constructWithTransferTicket(e,r){this.header=Ve.Header.newWithTransferTicket(e,r)}constructWithIDChainRequest(e){this.header=e.header,this.payload=e.payload,this.proof=e.proof}getHeader(){return this.header}getOperation(){return this.header.getOperation()}getPayload(){return this.payload}setPayload(e){this.payload=e}getProof(){return this.proof}setProof(e){this.proof=e}getSigningInputs(){let e=this.getOperation().equals(Ve.Operation.UPDATE)?this.header.getPreviousTxid():"",r=this.getOperation().equals(Ve.Operation.TRANSFER)?this.header.getTicket():"";return[Se.Buffer.from(this.header.getSpecification()),Se.Buffer.from(this.header.getOperation().toString()),Se.Buffer.from(e),Se.Buffer.from(r),Se.Buffer.from(this.payload)]}isValid(){return ve(this,void 0,void 0,function*(){let e=this.proof.getVerificationMethod(),r=yield this.getSignerDocument();if(r==null||!r.isGenuine())return!1;if(this.getOperation().equals(Ve.Operation.DEACTIVATE)){if(!r.isAuthenticationKey(e)&&!r.isAuthorizationKey(e))return!1}else if(!r.isAuthenticationKey(e))return!1;return r.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),...this.getSigningInputs())})}toJSON(e=null){return{header:this.header.toJSON(),payload:this.payload,proof:this.proof.toJSON()}}fromJSON(e,r=null){if(!e.header)throw new pt("Missing header");if(this.header=Ve.Header.parse(e.header),!e.payload)throw new pt("Missing payload");if(this.payload=this.getString("payload",e.payload,{mandatory:!0,nullable:!1}),!e.proof)throw new pt("Missing proof");this.proof=Ve.Proof.parse(e.proof),this.sanitize()}}Ve.DID_SPECIFICATION="elastos/did/1.0",Ve.CREDENTIAL_SPECIFICATION="elastos/credential/1.0",function(t){class e{constructor(o,a){this.name=o,this.specification=a}getSpecification(){return this.specification}toString(){return this.name}static fromString(o){return e[o.toUpperCase()]}equals(o){return this.name===o.name}}t.Operation=e,function(i){i.CREATE=new i("create",t.DID_SPECIFICATION),i.UPDATE=new i("update",t.DID_SPECIFICATION),i.TRANSFER=new i("transfer",t.DID_SPECIFICATION),i.DEACTIVATE=new i("deactivate",t.DID_SPECIFICATION),i.DECLARE=new i("declare",t.CREDENTIAL_SPECIFICATION),i.REVOKE=new i("revoke",t.CREDENTIAL_SPECIFICATION)}(e=t.Operation||(t.Operation={}));class r extends Pe{constructor(o=null){super(),this.specification=o}static newWithPreviousTxId(o,a){let s=new r(o.getSpecification());return s.operation=o,s.previousTxid=a,s}static newWithTransferTicket(o,a){oe(a!=null,"Invalid ticket");let s=new r(o.getSpecification());s.operation=o;let c=a.toString(!0);return s.ticket=Zr.fromString(c),s.transferTicket=a,s}getSpecification(){return this.specification}getOperation(){return this.operation}getPreviousTxid(){return this.previousTxid}getTicket(){return this.ticket}getTransferTicket(){if(this.ticket&&!this.transferTicket){let o=Zr.toString(this.ticket);try{this.transferTicket=qr.parse(o)}catch(a){throw new ti("Invalid ticket",a)}}return this.transferTicket}toJSON(o=null){let a={};return a.specification=this.specification,a.operation=this.operation.toString(),this.previousTxid&&(a.previousTxid=this.previousTxid),this.ticket&&(a.ticket=this.ticket),a}fromJSON(o,a=null){this.specification=this.getString("specification",o.specification,{mandatory:!0,nullable:!1});let s=this.getString("operation",o.operation,{mandatory:!0,nullable:!1});this.operation=e.fromString(s),this.previousTxid=this.getString("previousTxid",o.previousTxid,{mandatory:!1,nullable:!1,defaultValue:null}),this.ticket=this.getString("ticket",o.ticket,{mandatory:!1,nullable:!1,defaultValue:null})}static parse(o,a=null){try{return Pe.deserialize(o,r,a)}catch(s){throw s instanceof pt?s:new pt(s)}}}t.Header=r;class n extends Pe{constructor(o=null,a=null,s=tt.DEFAULT_PUBLICKEY_TYPE){super(),this.type=s!=null?s:tt.DEFAULT_PUBLICKEY_TYPE,this.verificationMethod=o,this.signature=a}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}qualifyVerificationMethod(o){this.verificationMethod.getDid()==null&&(this.verificationMethod=Je.from(this.verificationMethod,o))}getSignature(){return this.signature}toJSON(o=null){return{type:this.type,verificationMethod:this.verificationMethod.toString(),signature:this.signature}}fromJSON(o,a=null){this.type=this.getString("type",o.type,{mandatory:!1,defaultValue:tt.DEFAULT_PUBLICKEY_TYPE,nullable:!1}),this.verificationMethod=this.getDidUrl("verificationMethod",o.verificationMethod,{mandatory:!0,nullable:!1}),this.signature=this.getString("signature",o.signature,{mandatory:!0,nullable:!1})}static parse(o,a=null){try{return Pe.deserialize(o,n,a)}catch(s){throw s instanceof pt?s:new pt(s)}}}t.Proof=n}(Ve||(Ve={}));class An extends Pe{constructor(e=null,r=null){super(),this.requestId=e,this.method=r}getRequestId(){return this.requestId}getMethod(){return this.method}setParameters(e){this.params=e}getParameters(){return this.params}hashCode(){return na(this.method)+this.params.hashCode()}equals(e){if(!(e instanceof An))return!1;let r=e;return this.method===r.method&&this.params===r.params}toJSON(e=null){return{id:this.requestId,method:this.method,params:[this.params.toJSON(null)]}}fromJSON(e,r=null){if(this.requestId=super.getString("id",e.id,{mandatory:!1,nullable:!0}),this.method=this.getString("method",e.method,{mandatory:!0,nullable:!1}),!e.params)throw new Yr("Missing parameters");if(!Array.isArray(e.params))throw new Yr("Invalid parameters");this.params=this.paramsFromJson(e.params[0])}}An.ID="id",An.METHOD="method",An.PARAMETERS="params",function(t){t.Parameters=class extends Pe{}}(An||(An={}));class Wr extends Pe{constructor(e=null,r=null){super(),this.jsonrpc=Wr.JSON_RPC_VERSION,this.id=e,r instanceof class{constructor(n,i){this.code=n,this.message=i}}?this.error=new Wr.JsonRpcError(r.code,r.message):r instanceof Wr.JsonRpcError?this.error=r:this.result=r}getResponseId(){return this.id}getErrorCode(){return this.error.getCode()}getErrorMessage(){return this.error.getMessage()}getResult(){return this.result}toJSON(e=null){let r={};return r.id=this.id,r.jsonrpc=this.jsonrpc,this.result&&(r.result=this.result.toJSON(null)),this.error&&(r.error=this.error.toJSON()),r}fromJSON(e,r=null){if(this.id=this.getString("id",e.id,{mandatory:!1,nullable:!0,defaultValue:null}),this.jsonrpc=this.getString("jsonrpc",e.jsonrpc,{mandatory:!0,nullable:!1}),this.jsonrpc==null||this.jsonrpc!==Wr.JSON_RPC_VERSION)throw new Di("Invalid JsonRPC version");if(!e.result&&!e.error)throw new Di("Missing response data");e.result&&(this.result=this.resultFromJson(e.result)),e.error&&(this.error=Wr.JsonRpcError.parse(e.error))}}Wr.JSON_RPC_VERSION="2.0",function(t){class e extends Pe{constructor(n=0,i=null,o=null){super(),this.code=n,this.message=i,this.data=o}getCode(){return this.code}getMessage(){return this.message}getData(){return this.data}toJSON(n=null){return{code:this.code,message:this.message,data:this.data}}fromJSON(n,i=null){this.code=this.getNumber("code",n.code,{mandatory:!0,nullable:!1,defaultValue:0}),this.message=this.getString("message",n.message,{mandatory:!1,nullable:!0}),this.data=this.getString("data",n.data,{mandatory:!1,nullable:!0})}static parse(n,i=null){try{return Pe.deserialize(n,e,i)}catch(o){throw o instanceof Di?o:new Di(o)}}}t.JsonRpcError=e,t.Result=class extends Pe{}}(Wr||(Wr={}));class io extends An{constructor(e=null){super(e,io.METHOD_NAME)}setParameters(e,r=!1){e instanceof Oe?super.setParameters(new Za(e,r)):e instanceof Za?super.setParameters(e):super.setParameters(new Za(Oe.from(e),r))}getDid(){return this.getParameters().did}isResolveAll(){return this.getParameters().all}toString(){let e=new Je.Builder(this.getParameters().did);return e.setQueryParameter(io.PARAMETER_ALL,this.getParameters().all?"true":"false"),e.build().toString()}paramsFromJson(e){return Za.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,io,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}io.PARAMETER_DID="did",io.PARAMETER_ALL="all",io.METHOD_NAME="did_resolveDID";class Za extends An.Parameters{constructor(e=null,r=!1){super(),this.did=e,this.all=r}hashCode(){let e=this.did.hashCode();return e+=na(this.all),e}equals(e){if(!(e instanceof Za))return!1;let r=e;return!!this.did.equals(r.did)&&this.all==r.all}toJSON(e=null){let r={};return r.did=this.did.toString(),this.all&&this.all===!0&&(r.all=this.all),r}fromJSON(e,r=null){this.did=super.getDid("did",e.did,{mandatory:!0,nullable:!1}),this.all=this.getBoolean("all",e.all,{mandatory:!1,nullable:!1,defaultValue:!1})}static parse(e,r=null){try{return Pe.deserialize(e,Za,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}class Fr{constructor(e,r){this.name=r,this.value=e}getValue(){return this.value}static fromValue(e){switch(String(e)){case"0":return Fr.VALID;case"2":return Fr.REVOKED;case"3":return Fr.NOT_FOUND;default:throw new ti("Invalid CredentialBiographyStatus")}}toString(){return this.name.toLowerCase()}equals(e){return this.value==e.value}}(function(t){t.VALID=new t(0,"valid"),t.REVOKED=new t(2,"revoked"),t.NOT_FOUND=new t(3,"not_found")})(Fr||(Fr={}));class I0 extends Wr.Result{constructor(e=null,r=null){super(),this.id=e,this.status=r}getId(){return this.id}setStatus(e){this.status=e}getStatus(){return this.status}getTransactionCount(){return this.txs!=null?this.txs.length:0}getTransaction(e){return this.txs!=null?this.txs[e]:null}getAllTransactions(){return this.txs!=null?this.txs:[]}addTransaction(e){this.txs==null&&(this.txs=[]),this.txs.push(e)}toJSON(e=null){let r={};return r.id=this.id.toString(),r.status=this.status.toString(),this.txs&&this.txs.length>0&&(r.transaction=Array.from(this.txs,n=>n.toJSON())),r}fromJSON(e,r=null){this.id=this.getDidUrl("id",e.id,{mandatory:!0,nullable:!1});let n=this.getNumber("status",e.status,{mandatory:!0,nullable:!1});if(this.status=Fr.fromValue(n),this.status.equals(Fr.NOT_FOUND)){if(e.transaction)throw new un("Should not include transaction")}else{if(!e.transaction)throw new un("Missing transaction");if(!Array.isArray(e.transaction)||e.transaction.length==0)throw new un("Invalid transaction");this.txs=Array.from(e.transaction,i=>k0.parse(i))}}static parse(e,r=null){try{return Pe.deserialize(e,I0,r)}catch(n){throw n instanceof un?n:new un(n)}}}class Zf extends Wr{constructor(e=null,r=null){super(e,r)}resultFromJson(e){return I0.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,Zf,r)}catch(n){throw n instanceof Di?n:new Di(n)}}}class Ac extends Pe{constructor(e=null,r=null,n=null){super(),this.txId=e,this.timestamp=r,this.request=n}getTransactionId(){return this.txId}getTimestamp(){return this.timestamp}getRequest(){return this.request}toJSON(e=null){return{txid:this.txId,timestamp:this.dateToString(this.timestamp),operation:this.request.toJSON()}}fromJSON(e,r=null){if(this.txId=this.getString("txid",e.txid,{mandatory:!0,nullable:!1}),this.timestamp=this.getDate("timestamp",e.timestamp,{mandatory:!0,nullable:!1}),!e.operation)throw new cu("Missing request");this.request=this.requestFromJSON(e.operation)}}Ac.TXID="txid",Ac.TIMESTAMP="timestamp",Ac.OPERATION="operation";class ar extends Ve{static newWithOperation(e){let r=new ar;return r.constructWithOperation(e),r}static newWithPreviousTxId(e,r){let n=new ar;return n.constructWithPreviousTxId(e,r),n}static newWithTransferTicket(e,r){let n=new ar;return n.constructWithTransferTicket(e,r),n}static newWithDIDRequest(e){let r=new ar;r.constructWithIDChainRequest(e),r.did=e.did,r.doc=e.doc}static create(e,r,n){return ve(this,void 0,void 0,function*(){let i=ar.newWithOperation(Ve.Operation.CREATE);i.setPayload(e);try{yield i.seal(r,n)}catch(o){throw new Jr(o)}return i})}static update(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=ar.newWithPreviousTxId(Ve.Operation.UPDATE,r);o.setPayload(e);try{yield o.seal(n,i)}catch(a){throw new Jr(a)}return o})}static transfer(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=ar.newWithTransferTicket(Ve.Operation.TRANSFER,r);o.setPayload(e);try{yield o.seal(n,i)}catch(a){throw new Jr(a)}return o})}static deactivate(e,r,n){return ve(this,void 0,void 0,function*(){let i=ar.newWithOperation(Ve.Operation.DEACTIVATE);i.setPayload(e);try{yield i.seal(r,n)}catch(o){throw new Jr(o)}return i})}static deactivateTarget(e,r,n,i,o){return ve(this,void 0,void 0,function*(){let a=ar.newWithOperation(Ve.Operation.DEACTIVATE);a.setPayload(e);try{yield a.sealTarget(r,n,i,o)}catch{}return a})}getPreviousTxid(){return this.getHeader().getPreviousTxid()}getTransferTicket(){return this.getHeader().getTransferTicket()}getDid(){return this.did}getDocument(){return this.doc}setPayload(e){if(e instanceof Ne)if(this.doc=e,this.did=this.doc.getSubject(),this.getHeader().getOperation().equals(Ve.Operation.DEACTIVATE))super.setPayload(this.doc.getSubject().toString());else{let r=this.doc.toString(!0),n=Se.Buffer.from(r,"utf-8");this.setPayload(Zr.fromString(n.toString()))}else super.setPayload(e)}sanitize(){let e=this.getHeader();if(e==null)throw new pt("Missing header");if(e.getSpecification()==null)throw new pt("Missing specification");if(e.getSpecification()!==ar.DID_SPECIFICATION)throw new pt("Unsupported specification");let r=e.getOperation();if(!r.equals(Ve.Operation.CREATE)){if(r.equals(Ve.Operation.UPDATE)){if(e.getPreviousTxid()==null||e.getPreviousTxid()==="")throw new pt("Missing previousTxid")}else if(r.equals(Ve.Operation.TRANSFER)){if(e.getTicket()==null||e.getTicket()==="")throw new pt("Missing ticket")}else if(!r.equals(Ve.Operation.DEACTIVATE))throw new pt("Invalid operation "+e.getOperation().toString())}let n=this.getPayload();if(n==null||n==="")throw new pt("Missing payload");let i=this.getProof();if(i==null)throw new pt("Missing proof");try{if(e.getOperation().equals(Ve.Operation.DEACTIVATE))this.did=new Oe(n);else{let o=Zr.toString(n);this.doc=Ne._parseOnly(o),this.did=this.doc.getSubject()}}catch(o){throw new pt("Invalid payload",o)}i.qualifyVerificationMethod(this.did)}seal(e,r){return ve(this,void 0,void 0,function*(){if(!this.doc.isAuthenticationKey(e))throw new It("Not an authentication key.");if(this.getPayload()==null||this.getPayload()==="")throw new pt("Missing payload");let n=yield this.doc.signWithId(e,r,...this.getSigningInputs());this.setProof(new ar.Proof(e,n))})}sealTarget(e,r,n,i){return ve(this,void 0,void 0,function*(){if(!this.doc.isAuthorizationKey(e))throw new It("Not an authorization key: "+e);if(!r.isAuthenticationKey(n))throw new It("Not an authentication key: "+n);if(!this.getPayload()||this.getPayload()==null)throw new pt("Missing payload");let o=yield r.signWithId(n,i,...this.getSigningInputs());this.setProof(new ar.Proof(e,o))})}getSignerDocument(){return ve(this,void 0,void 0,function*(){return this.doc==null?this.doc=yield this.did.resolve():this.doc.isCustomizedDid()&&(yield this.doc.resolveControllers()),this.doc})}static parse(e,r=null){try{return Pe.deserialize(e,ar,r)}catch(n){throw n instanceof pt?n:new pt(n)}}}class A0 extends Ac{constructor(e=null,r=null,n=null){super(e,r,n)}getDid(){return this.getRequest().getDid()}requestFromJSON(e){return ar.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,A0,r)}catch(n){throw n instanceof cu?n:new cu(n)}}}class oo extends An{constructor(e=null){super(e,oo.METHOD_NAME)}setParameters(e,r=null){e instanceof uu?super.setParameters(e):super.setParameters(new uu(e,r))}getId(){return this.getParameters().id}getIssuer(){return this.getParameters().issuer}toString(){let e=new Je.Builder(this.getParameters().id);return this.getParameters().issuer!=null&&e.setQueryParameter(oo.PARAMETER_ISSUER,this.getParameters().issuer.toString()),e.build().toString()}paramsFromJson(e){return uu.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,oo,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}oo.PARAMETER_ID="id",oo.PARAMETER_ISSUER="issuer",oo.METHOD_NAME="did_resolveCredential";class uu extends An.Parameters{constructor(e=null,r=null){super(),this.id=e,this.issuer=r}hashCode(){let e=this.id.hashCode();return this.issuer!=null&&(e+=this.issuer.hashCode()),e}equals(e){if(!(e instanceof uu))return!1;let r=e;if(!this.id.equals(r.id))return!1;let n=this.issuer!=null?this.issuer:this.id.getDid(),i=r.issuer!=null?r.issuer:r.id.getDid();return n.equals(i)}toJSON(e=null){let r={};return r.id=this.id.toString(),this.issuer&&(r.issuer=this.issuer.toString()),r}fromJSON(e,r=null){this.id=super.getDidUrl("id",e.id,{mandatory:!0,nullable:!1}),this.issuer=this.getDid("issuer",e.issuer,{mandatory:!1,nullable:!0,defaultValue:null})}static parse(e,r=null){try{return Pe.deserialize(e,uu,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}class Xn extends Ve{constructor(){super()}static newWithOperation(e){let r=new Xn;return r.constructWithOperation(e),r}static newWithCredentialRequest(e){let r=new Xn;return r.constructWithIDChainRequest(e),r.id=e.id,r.vc=e.vc,r.signer=e.signer,r}static declare(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=Xn.newWithOperation(Ve.Operation.DECLARE);o.setPayload(e),o.setSigner(r);try{yield o.seal(r,n,i)}catch(a){throw new Jr(a)}return o})}static revoke(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=Xn.newWithOperation(Ve.Operation.REVOKE);o.setPayload(e),o.setSigner(r);try{yield o.seal(r,n,i)}catch(a){throw new Jr(a)}return o})}setSigner(e){this.signer=e}getCredentialId(){return this.id}getCredential(){return this.vc}setPayload(e){if(e instanceof gt){let r=e;if(this.id=r.getId(),this.vc=r,this.getHeader().getOperation().equals(Ve.Operation.DECLARE)){let n=r.toString(!0);this.setPayload(Zr.fromString(n))}else this.getHeader().getOperation().equals(Ve.Operation.REVOKE)&&this.setPayload(r.getId().toString())}else e instanceof Je?(this.id=e,this.vc=null,super.setPayload(e.toString())):super.setPayload(e)}sanitize(){let e=this.getHeader();if(e==null)throw new pt("Missing header");if(e.getSpecification()==null)throw new pt("Missing specification");if(e.getSpecification()!==Xn.CREDENTIAL_SPECIFICATION)throw new pt("Unsupported specification");if(!e.getOperation().equals(Ve.Operation.DECLARE)&&!e.getOperation().equals(Ve.Operation.REVOKE))throw new pt("Invalid operation "+e.getOperation());let r=this.getPayload();if(r==null||r==="")throw new pt("Missing payload");let n=this.getProof();if(n==null)throw new pt("Missing proof");try{if(e.getOperation().equals(Ve.Operation.DECLARE)){let i=Zr.toString(r);this.vc=gt.parse(i),this.id=this.vc.getId()}else this.id=Je.from(r)}catch(i){throw new pt("Invalid payload",i)}n.qualifyVerificationMethod(this.id.getDid())}seal(e,r,n){return ve(this,void 0,void 0,function*(){if(!e.isAuthenticationKey(r))throw new It("Not an authentication key.");if(this.getPayload()==null||this.getPayload()==="")throw new pt("Missing payload");let i=yield e.signWithId(r,n,...this.getSigningInputs());this.setProof(new Ve.Proof(r,i))})}getSignerDocument(){return ve(this,void 0,void 0,function*(){return this.signer!=null||(this.getOperation().equals(Ve.Operation.DECLARE)?this.signer=yield this.getCredential().getSubject().getId().resolve():this.signer=yield this.getProof().getVerificationMethod().getDid().resolve()),this.signer})}static parse(e,r=null){try{return Pe.deserialize(e,Xn,r)}catch(n){throw n instanceof pt?n:new pt(n)}}}class k0 extends Ac{constructor(e=null,r=null,n=null){super(e,r,n)}getId(){return this.getRequest().getCredentialId()}requestFromJSON(e){return Xn.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,k0,r)}catch(n){throw n instanceof cu?n:new cu(n)}}}class ki extends An{constructor(e=null){super(e,ki.METHOD_NAME)}setParameters(e,r=0,n=0){e instanceof Oe?super.setParameters(new Hc(e,r,n)):super.setParameters(e)}getDid(){return this.getParameters().did}getSkip(){return this.getParameters().skip}getLimit(){return this.getParameters().limit}toString(){let e=new Je.Builder(this.getParameters().did);return e.setPath("/credentials"),e.setQueryParameter(ki.PARAMETER_SKIP,this.getParameters().skip.toFixed()),e.setQueryParameter(ki.PARAMETER_LIMIT,this.getParameters().limit.toFixed()),e.build().toString()}paramsFromJson(e){return Hc.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,ki,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}ki.PARAMETER_DID="did",ki.PARAMETER_SKIP="skip",ki.PARAMETER_LIMIT="limit",ki.METHOD_NAME="did_listCredentials";class Hc extends An.Parameters{constructor(e=null,r=0,n=0){super(),this.did=e,this.skip=r,this.limit=n}hashCode(){let e=this.did.hashCode();return e+=na(this.skip),e+=na(this.limit),e}equals(e){if(!(e instanceof Hc))return!1;let r=e;return!!this.did.equals(r.did)&&this.skip==r.skip&&this.limit==r.limit}toJSON(e=null){let r={};return r.did=this.did.toString(),this.skip&&this.skip!=0&&(r.skip=this.skip),this.limit&&this.limit!=0&&(r.limit=this.limit),r}fromJSON(e,r=null){this.did=super.getDid("did",e.did,{mandatory:!0,nullable:!1}),this.skip=this.getNumber("skip",e.skip,{mandatory:!1,nullable:!1,defaultValue:0}),this.limit=this.getNumber("limit",e.limit,{mandatory:!1,nullable:!1,defaultValue:0})}static parse(e,r=null){try{return Pe.deserialize(e,Hc,r)}catch(n){throw n instanceof Yr?n:new Yr(n)}}}class Vc extends Wr.Result{constructor(e=null){super(),this.did=e}getDid(){return this.did}getCredentialIds(){return this.credentialIds!=null?this.credentialIds:[]}size(){return this.credentialIds!=null?this.credentialIds.length:0}getCredentialId(e){return this.credentialIds!=null?this.credentialIds[e]:null}addCredentialId(e){this.credentialIds==null&&(this.credentialIds=[]),this.credentialIds.push(e)}toJSON(e=null){let r={};return r.did=this.did.toString(),this.credentialIds&&this.credentialIds.length>0&&(r.credentials=Array.from(this.credentialIds,n=>n.toString())),r}fromJSON(e,r=null){if(this.did=super.getDid("did",e.did,{mandatory:!0,nullable:!1}),e.credentials){if(!Array.isArray(e.credentials))throw new un("Invalid credential list");e.credentials.length>0&&(this.credentialIds=Array.from(e.credentials,n=>new Je(String(n))))}}static parse(e,r=null){try{return Pe.deserialize(e,Vc,r)}catch(n){throw n instanceof un?n:new un(n)}}}Vc.DEFAULT_SIZE=128,Vc.MAX_SIZE=512;class _r{constructor(e,r){this.name=r,this.value=e}getValue(){return this.value}static fromValue(e){switch(String(e)){case"0":return _r.VALID;case"2":return _r.DEACTIVATED;case"3":return _r.NOT_FOUND;default:throw new ti("Invalid DIDBiographyStatus")}}toString(){return this.name.toLowerCase()}equals(e){return this.value==e.value}}(function(t){t.VALID=new t(0,"valid"),t.DEACTIVATED=new t(2,"deactivated"),t.NOT_FOUND=new t(3,"not_found")})(_r||(_r={}));class D0 extends Wr.Result{constructor(e=null){super(),this.did=e}getDid(){return this.did}setStatus(e){this.status=e}getStatus(){return this.status}getTransactionCount(){return this.txs!=null?this.txs.length:0}getTransaction(e){return this.txs!=null?this.txs[e]:null}getAllTransactions(){return this.txs!=null?this.txs:[]}addTransaction(e){this.txs==null&&(this.txs=[]),this.txs.push(e)}toJSON(e=null){let r={};return r.did=this.did.toString(),r.status=this.status.toString(),this.txs&&this.txs.length>0&&(r.transaction=Array.from(this.txs,n=>n.toJSON())),r}fromJSON(e,r=null){this.did=super.getDid("did",e.did,{mandatory:!0,nullable:!1});let n=this.getNumber("status",e.status,{mandatory:!0,nullable:!1});if(this.status=_r.fromValue(n),this.status.equals(_r.NOT_FOUND)){if(e.transaction)throw new un("Should not include transaction")}else{if(!e.transaction)throw new un("Missing transaction");if(!Array.isArray(e.transaction)||e.transaction.length==0)throw new un("Invalid transaction");this.txs=Array.from(e.transaction,i=>A0.parse(i))}}static parse(e,r=null){try{return Pe.deserialize(e,D0,r)}catch(n){throw n instanceof un?n:new un(n)}}}class Xf extends Wr{constructor(e=null,r=null){super(e,r)}resultFromJson(e){return Vc.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,Xf,r)}catch(n){throw n instanceof Di?n:new Di(n)}}}class Gf extends Wr{constructor(e=null,r=null){super(e,r)}resultFromJson(e){return D0.parse(e)}static parse(e,r=null){try{return Pe.deserialize(e,Gf,r)}catch(n){throw n instanceof Di?n:new Di(n)}}}const bn=new We("DIDBackend");class yt{constructor(e,r,n,i){r<0&&(r=0),n<0&&(n=0),i<0&&(i=0),this.adapter=e,this.cache=new x6({maxItems:n,maxAge:i/1e3,asyncLoader:o=>ve(this,void 0,void 0,function*(){return{value:yield this.resolve(o)}})}),bn.info("DID backend initialized, cache(init:{}, max:{}, ttl:{})",r,n,i/1e3)}static initialize(e,r=yt.DEFAULT_CACHE_INITIAL_CAPACITY,n=yt.DEFAULT_CACHE_MAX_CAPACITY,i=yt.DEFAULT_CACHE_TTL){oe(e!=null,"Invalid adapter"),oe(r<=n,"Invalid cache capacity"),r=r<n?r:n,this.instance=new yt(e,r,n,i)}static getInstance(){return oe(this.instance!=null,"The DIDBackend was not initialized. Please call DIDBackend.initialize() with a valid DIDAdapter (i.e. new DefaultDIDAdapter()) first."),this.instance}static isInitialized(){return this.instance!==null}generateRequestId(){return HE(16).toString("hex")}getAdapter(){return this.adapter}setResolveHandle(e){this.resolveHandle=e}resolve(e){return ve(this,void 0,void 0,function*(){let r=e.serialize(!0);bn.trace("Resolving request: "+r);let n=yield this.getAdapter().resolve(r);if(bn.trace("Resolving response: "+JSON.stringify(n)),n==null)throw new Mt("Unknown error, got null result.");let i=null;try{switch(e.getMethod()){case io.METHOD_NAME:i=Gf.parse(n,Gf);break;case oo.METHOD_NAME:i=Zf.parse(n,Zf);break;case ki.METHOD_NAME:i=Xf.parse(n,Xf);break;default:throw bn.error("INTERNAL - unknown resolve method '{}'",e.getMethod()),new Mt("Unknown resolve method: "+e.getMethod())}}catch(o){throw new Mt(o)}if(i.getResponseId()==null||i.getResponseId()!==e.getRequestId())throw new Mt("Mismatched resolve result with request.");if(i.getResult()!=null)return i.getResult();throw new Mt("Server error("+i.getErrorCode()+"): "+i.getErrorMessage())})}resolveDidBiography(e,r=!0,n=!1){return ve(this,void 0,void 0,function*(){bn.info("Resolving DID {}, all={}...",e.toString(),r);let i=new io(this.generateRequestId());i.setParameters(e,r),n&&this.cache.invalidate(i);try{return yield this.cache.getAsync(i)}catch(o){throw new Mt(o)}})}resolveDid(e,r=!1){return ve(this,void 0,void 0,function*(){if(bn.debug("Resolving DID {}...",e.toString()),this.resolveHandle!=null){let s=this.resolveHandle.resolve(e);if(s!=null)return s}let n=yield this.resolveDidBiography(e,!1,r),i=null;if(n.getStatus().equals(_r.VALID))i=n.getTransaction(0);else if(n.getStatus().equals(_r.DEACTIVATED)){if(n.getTransactionCount()!=2)throw new Mt("Invalid DID biography, wrong transaction count.");if(i=n.getTransaction(0),!i.getRequest().getOperation().equals(Ve.Operation.DEACTIVATE))throw new Mt("Invalid DID biography, wrong status.");let s=n.getTransaction(1).getRequest().getDocument();if(s==null)throw new Mt("Invalid DID biography, invalid trancations.");if(!(yield new class extends ar{constructor(f){super(),this.constructWithIDChainRequest(f)}getSignerDocument(){return ve(this,void 0,void 0,function*(){let f=this.getDocument()==null?s:this.getDocument();return f.isCustomizedDid()&&(yield f.resolveControllers()),f})}}(i.getRequest()).isValid()))throw new Mt("Invalid DID biography, transaction signature mismatch.");i=n.getTransaction(1)}else if(n.getStatus().equals(_r.NOT_FOUND))return null;if(!i.getRequest().getOperation().equals(Ve.Operation.CREATE)&&!i.getRequest().getOperation().equals(Ve.Operation.UPDATE)&&!i.getRequest().getOperation().equals(Ve.Operation.TRANSFER))throw new Mt("Invalid ID transaction, unknown operation.");if(!(yield i.getRequest().isValid()))throw new Mt("Invalid ID transaction, signature mismatch.");let o=i.getRequest().getDocument().clone();yield o.resolveControllers();let a=o.getMetadata();return a.setTransactionId(i.getTransactionId()),a.setSignature(o.getProof().getSignature()),a.setPublished(i.getTimestamp()),n.getStatus().equals(_r.DEACTIVATED)&&a.setDeactivated(!0),o})}resolveUntrustedDid(e,r){return ve(this,void 0,void 0,function*(){if(bn.debug("Resolving untrusted DID {}...",e.toString()),this.resolveHandle!=null){let s=this.resolveHandle.resolve(e);if(s!=null)return s}let n=yield this.resolveDidBiography(e,!1,r),i=null;switch(n.getStatus().getValue()){case _r.VALID.getValue():i=n.getTransaction(0);break;case _r.DEACTIVATED.getValue():if(n.getTransactionCount()!=2)throw new Mt("Invalid DID biography, wrong transaction count.");if(i=n.getTransaction(0),i.getRequest().getOperation()!=Ve.Operation.DEACTIVATE)throw new Mt("Invalid DID biography, wrong status.");if(n.getTransaction(1).getRequest().getDocument()==null)throw new Mt("Invalid DID biography, invalid trancations.");i=n.getTransaction(1);break;case _r.NOT_FOUND.getValue():return null}if(i.getRequest().getOperation()!=Ve.Operation.CREATE&&i.getRequest().getOperation()!=Ve.Operation.UPDATE&&i.getRequest().getOperation()!=Ve.Operation.TRANSFER)throw new Mt("Invalid ID transaction, unknown operation.");let o=i.getRequest().getDocument().clone();yield o.resolveControllers();let a=o.getMetadata();return a.setTransactionId(i.getTransactionId()),a.setSignature(o.getProof().getSignature()),a.setPublished(i.getTimestamp()),n.getStatus()==_r.DEACTIVATED&&a.setDeactivated(!0),o})}resolveCredentialBiography(e,r=null,n=!1){bn.info("Resolving credential {}, issuer={}...",e,r);let i=new oo(this.generateRequestId());i.setParameters(e,r),n&&this.cache.invalidate(i);try{return this.cache.getAsync(i)}catch(o){throw new Mt(o)}}resolveCredential(e,r=null,n=!1){return ve(this,void 0,void 0,function*(){bn.debug("Resolving credential {}...",e);let i=yield this.resolveCredentialBiography(e,r,n),o=null;if(i.getStatus().equals(Fr.VALID))o=i.getTransaction(0);else if(i.getStatus().equals(Fr.REVOKED)){if(o=i.getTransaction(0),!o.getRequest().getOperation().equals(Ve.Operation.REVOKE))throw new Mt("Invalid credential biography, wrong status.");if(i.getTransactionCount()<1||i.getTransactionCount()>2)throw new Mt("Invalid credential biography, transaction signature mismatch.");if(i.getTransactionCount()==1){if(!(yield o.getRequest().isValid()))throw new Mt("Invalid credential biography, transaction signature mismatch.");return null}{const c=i.getTransaction(1).getRequest().getCredential();if(!(yield new class extends Xn{constructor(h){super(),this.constructWithIDChainRequest(h)}getCredential(){return c}}(o.getRequest()).isValid()))throw new Mt("Invalid credential biography, transaction signature mismatch.")}o=i.getTransaction(1)}else if(i.getStatus().equals(Fr.NOT_FOUND))return null;if(!o.getRequest().getOperation().equals(Ve.Operation.DECLARE))throw new Mt("Invalid credential transaction, unknown operation.");if(!(yield o.getRequest().isValid()))throw new Mt("Invalid credential transaction, signature mismatch.");let a=o.getRequest().getCredential(),s=new lr(a.getId());return s.setTransactionId(o.getTransactionId()),s.setPublished(o.getTimestamp()),i.getStatus()==Fr.REVOKED&&s.setRevoked(!0),a.setMetadata(s),a})}listCredentials(e,r,n){return ve(this,void 0,void 0,function*(){bn.info("List credentials for {}",e);let i=new ki(this.generateRequestId());i.setParameters(e,r,n);let o=yield this.resolve(i);return o==null||o.size()==0?null:o.getCredentialIds()})}createTransaction(e,r){return ve(this,void 0,void 0,function*(){bn.info("Create ID transaction...");let n=e.serialize(!0);bn.trace("Transaction payload: '{}'",n),r==null&&(r=this.getAdapter()),yield r.createIdTransaction(n,null),bn.info("ID transaction complete.")})}invalidDidCache(e){let r=new io(this.generateRequestId());r.setParameters(e,!0),this.cache.invalidate(r),r.setParameters(e,!1),this.cache.invalidate(r)}invalidCredentialCache(e,r){let n=new oo(this.generateRequestId());n.setParameters(e,r),this.cache.invalidate(n),r!=null&&(n.setParameters(e,null),this.cache.invalidate(n))}clearCache(){this.cache.invalidateAll()}createDid(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=yield ar.create(e,r,n);yield this.createTransaction(o,i),this.invalidDidCache(e.getSubject())})}updateDid(e,r,n,i,o){return ve(this,void 0,void 0,function*(){let a=yield ar.update(e,r,n,i);yield this.createTransaction(a,o),this.invalidDidCache(e.getSubject())})}transferDid(e,r,n,i,o){return ve(this,void 0,void 0,function*(){let a=yield ar.transfer(e,r,n,i);yield this.createTransaction(a,o),this.invalidDidCache(e.getSubject())})}deactivateDid(e,r,n,i){return ve(this,void 0,void 0,function*(){let o=yield ar.deactivate(e,r,n);yield this.createTransaction(o,i),this.invalidDidCache(e.getSubject())})}deactivateTargetDid(e,r,n,i,o,a){return ve(this,void 0,void 0,function*(){let s=yield ar.deactivateTarget(e,r,n,i,o);yield this.createTransaction(s,a),this.invalidDidCache(e.getSubject())})}declareCredential(e,r,n,i,o){return ve(this,void 0,void 0,function*(){let a=yield Xn.declare(e,r,n,i);yield this.createTransaction(a,o),this.invalidCredentialCache(e.getId(),null),this.invalidCredentialCache(e.getId(),e.getIssuer())})}revokeCredential(e,r,n,i,o){return ve(this,void 0,void 0,function*(){if(e instanceof gt){let a=yield Xn.revoke(e,r,n,i);yield this.createTransaction(a,o),this.invalidCredentialCache(e.getId(),null),this.invalidCredentialCache(e.getId(),e.getIssuer())}else{let a=yield Xn.revoke(e,r,n,i);yield this.createTransaction(a,o),this.invalidCredentialCache(e,null),this.invalidCredentialCache(e,r.getSubject())}})}}yt.DEFAULT_CACHE_INITIAL_CAPACITY=16,yt.DEFAULT_CACHE_MAX_CAPACITY=64,yt.DEFAULT_CACHE_TTL=6e5,yt.instance=null;var jp={exports:{}},m6=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},FI=m6,Xa=Object.prototype.toString;function Bp(t){return Xa.call(t)==="[object Array]"}function jd(t){return t===void 0}function Gm(t){return t!==null&&typeof t=="object"}function Fl(t){if(Xa.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function $m(t){return Xa.call(t)==="[object Function]"}function Bd(t,e){if(t!=null)if(typeof t!="object"&&(t=[t]),Bp(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var On={isArray:Bp,isArrayBuffer:function(t){return Xa.call(t)==="[object ArrayBuffer]"},isBuffer:function(t){return t!==null&&!jd(t)&&t.constructor!==null&&!jd(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},isFormData:function(t){return typeof FormData<"u"&&t instanceof FormData},isArrayBufferView:function(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return typeof t=="string"},isNumber:function(t){return typeof t=="number"},isObject:Gm,isPlainObject:Fl,isUndefined:jd,isDate:function(t){return Xa.call(t)==="[object Date]"},isFile:function(t){return Xa.call(t)==="[object File]"},isBlob:function(t){return Xa.call(t)==="[object Blob]"},isFunction:$m,isStream:function(t){return Gm(t)&&$m(t.pipe)},isURLSearchParams:function(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:Bd,merge:function t(){var e={};function r(o,a){Fl(e[a])&&Fl(o)?e[a]=t(e[a],o):Fl(o)?e[a]=t({},o):Bp(o)?e[a]=o.slice():e[a]=o}for(var n=0,i=arguments.length;n<i;n++)Bd(arguments[n],r);return e},extend:function(t,e,r){return Bd(e,function(n,i){t[i]=r&&typeof n=="function"?FI(n,r):n}),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}},_s=On;function Qm(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var b6=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(_s.isURLSearchParams(e))n=e.toString();else{var i=[];_s.forEach(e,function(a,s){a!=null&&(_s.isArray(a)?s+="[]":a=[a],_s.forEach(a,function(c){_s.isDate(c)?c=c.toISOString():_s.isObject(c)&&(c=JSON.stringify(c)),i.push(Qm(s)+"="+Qm(c))}))}),n=i.join("&")}if(n){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},UI=On;function If(){this.handlers=[]}If.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},If.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},If.prototype.forEach=function(t){UI.forEach(this.handlers,function(e){e!==null&&t(e)})};var zI=If,KI=On,v6=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},qI=v6,w6=function(t,e,r,n,i){var o=new Error(t);return qI(o,e,r,n,i)},HI=w6,Ul=On,VI=Ul.isStandardBrowserEnv()?{write:function(t,e,r,n,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),Ul.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Ul.isString(n)&&a.push("path="+n),Ul.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},WI=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},JI=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},Ld=On,YI=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],eb=On,ZI=eb.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(i){var o=i;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(i){var o=eb.isString(i)?n(i):i;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0},zl=On,XI=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(HI("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)},GI=VI,$I=b6,QI=function(t,e){return t&&!WI(e)?JI(t,e):e},eA=function(t){var e,r,n,i={};return t&&Ld.forEach(t.split(`
`),function(o){if(n=o.indexOf(":"),e=Ld.trim(o.substr(0,n)).toLowerCase(),r=Ld.trim(o.substr(n+1)),e){if(i[e]&&YI.indexOf(e)>=0)return;i[e]=e==="set-cookie"?(i[e]?i[e]:[]).concat([r]):i[e]?i[e]+", "+r:r}}),i},tA=ZI,Fd=w6,rA=function(t){return new Promise(function(e,r){var n=t.data,i=t.headers,o=t.responseType;zl.isFormData(n)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(t.auth){var s=t.auth.username||"",c=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.Authorization="Basic "+btoa(s+":"+c)}var f=QI(t.baseURL,t.url);function h(){if(a){var g="getAllResponseHeaders"in a?eA(a.getAllResponseHeaders()):null,_={data:o&&o!=="text"&&o!=="json"?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:g,config:t,request:a};XI(e,r,_),a=null}}if(a.open(t.method.toUpperCase(),$I(f,t.params,t.paramsSerializer),!0),a.timeout=t.timeout,"onloadend"in a?a.onloadend=h:a.onreadystatechange=function(){a&&a.readyState===4&&(a.status!==0||a.responseURL&&a.responseURL.indexOf("file:")===0)&&setTimeout(h)},a.onabort=function(){a&&(r(Fd("Request aborted",t,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(Fd("Network Error",t,null,a)),a=null},a.ontimeout=function(){var g="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(Fd(g,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",a)),a=null},zl.isStandardBrowserEnv()){var y=(t.withCredentials||tA(f))&&t.xsrfCookieName?GI.read(t.xsrfCookieName):void 0;y&&(i[t.xsrfHeaderName]=y)}"setRequestHeader"in a&&zl.forEach(i,function(g,_){n===void 0&&_.toLowerCase()==="content-type"?delete i[_]:a.setRequestHeader(_,g)}),zl.isUndefined(t.withCredentials)||(a.withCredentials=!!t.withCredentials),o&&o!=="json"&&(a.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&a.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(g){a&&(a.abort(),r(g),a=null)}),n||(n=null),a.send(n)})},Ir=On,tb=function(t,e){KI.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})},nA=v6,iA={"Content-Type":"application/x-www-form-urlencoded"};function rb(t,e){!Ir.isUndefined(t)&&Ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var nb,Af={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:((typeof XMLHttpRequest<"u"||Zt!==void 0&&Object.prototype.toString.call(Zt)==="[object process]")&&(nb=rA),nb),transformRequest:[function(t,e){return tb(e,"Accept"),tb(e,"Content-Type"),Ir.isFormData(t)||Ir.isArrayBuffer(t)||Ir.isBuffer(t)||Ir.isStream(t)||Ir.isFile(t)||Ir.isBlob(t)?t:Ir.isArrayBufferView(t)?t.buffer:Ir.isURLSearchParams(t)?(rb(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ir.isObject(t)||e&&e["Content-Type"]==="application/json"?(rb(e,"application/json"),function(r,n,i){if(Ir.isString(r))try{return(n||JSON.parse)(r),Ir.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(r)}(t)):t}],transformResponse:[function(t){var e=this.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,i=!r&&this.responseType==="json";if(i||n&&Ir.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(i)throw o.name==="SyntaxError"?nA(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Af.headers={common:{Accept:"application/json, text/plain, */*"}},Ir.forEach(["delete","get","head"],function(t){Af.headers[t]={}}),Ir.forEach(["post","put","patch"],function(t){Af.headers[t]=Ir.merge(iA)});var x0=Af,oA=On,aA=x0,_6=function(t){return!(!t||!t.__CANCEL__)},ib=On,Ud=function(t,e,r){var n=this||aA;return oA.forEach(r,function(i){t=i.call(n,t,e)}),t},sA=_6,uA=x0;function zd(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var jr=On,S6=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function s(y,g){return jr.isPlainObject(y)&&jr.isPlainObject(g)?jr.merge(y,g):jr.isPlainObject(g)?jr.merge({},g):jr.isArray(g)?g.slice():g}function c(y){jr.isUndefined(e[y])?jr.isUndefined(t[y])||(r[y]=s(void 0,t[y])):r[y]=s(t[y],e[y])}jr.forEach(n,function(y){jr.isUndefined(e[y])||(r[y]=s(void 0,e[y]))}),jr.forEach(i,c),jr.forEach(o,function(y){jr.isUndefined(e[y])?jr.isUndefined(t[y])||(r[y]=s(void 0,t[y])):r[y]=s(void 0,e[y])}),jr.forEach(a,function(y){y in e?r[y]=s(t[y],e[y]):y in t&&(r[y]=s(void 0,t[y]))});var f=n.concat(i).concat(o).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter(function(y){return f.indexOf(y)===-1});return jr.forEach(h,c),r},E6={_from:"axios@^0.21.1",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"axios@^0.21.1",name:"axios",escapedName:"axios",rawSpec:"^0.21.1",saveSpec:null,fetchSpec:"^0.21.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@^0.21.1",_where:"/Users/lifayi/dev/src/Elastos.DID.JS.SDK",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"},T0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){T0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var ob={},cA=E6.version.split(".");function I6(t,e){for(var r=e?e.split("."):cA,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}T0.transitional=function(t,e,r){var n=e&&I6(e);function i(o,a){return"[Axios v"+E6.version+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return function(o,a,s){if(t===!1)throw new Error(i(a," has been removed in "+e));return n&&!ob[a]&&(ob[a]=!0,console.warn(i(a," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(o,a,s)}};var lA={isOlderVersion:I6,assertOptions:function(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var s=t[o],c=s===void 0||a(s,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c)}else if(r!==!0)throw Error("Unknown option "+o)}},validators:T0},ab=On,fA=b6,sb=zI,ub=function(t){return zd(t),t.headers=t.headers||{},t.data=Ud.call(t,t.data,t.headers,t.transformRequest),t.headers=ib.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ib.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||uA.adapter)(t).then(function(e){return zd(t),e.data=Ud.call(t,e.data,e.headers,t.transformResponse),e},function(e){return sA(e)||(zd(t),e&&e.response&&(e.response.data=Ud.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})},Kl=S6,A6=lA,Ss=A6.validators;function yc(t){this.defaults=t,this.interceptors={request:new sb,response:new sb}}yc.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Kl(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&A6.assertOptions(e,{silentJSONParsing:Ss.transitional(Ss.boolean,"1.0.0"),forcedJSONParsing:Ss.transitional(Ss.boolean,"1.0.0"),clarifyTimeoutError:Ss.transitional(Ss.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(t)===!1||(n=n&&h.synchronous,r.unshift(h.fulfilled,h.rejected))});var i,o=[];if(this.interceptors.response.forEach(function(h){o.push(h.fulfilled,h.rejected)}),!n){var a=[ub,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(o),i=Promise.resolve(t);a.length;)i=i.then(a.shift(),a.shift());return i}for(var s=t;r.length;){var c=r.shift(),f=r.shift();try{s=c(s)}catch(h){f(h);break}}try{i=ub(s)}catch(h){return Promise.reject(h)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},yc.prototype.getUri=function(t){return t=Kl(this.defaults,t),fA(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},ab.forEach(["delete","get","head","options"],function(t){yc.prototype[t]=function(e,r){return this.request(Kl(r||{},{method:t,url:e,data:(r||{}).data}))}}),ab.forEach(["post","put","patch"],function(t){yc.prototype[t]=function(e,r,n){return this.request(Kl(n||{},{method:t,url:e,data:r}))}});var hA=yc;function Lp(t){this.message=t}Lp.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Lp.prototype.__CANCEL__=!0;var k6=Lp,dA=k6;function kf(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;t(function(n){r.reason||(r.reason=new dA(n),e(r.reason))})}kf.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},kf.source=function(){var t;return{token:new kf(function(e){t=e}),cancel:t}};var pA=kf,cb=On,yA=m6,Df=hA,gA=S6;function D6(t){var e=new Df(t),r=yA(Df.prototype.request,e);return cb.extend(r,Df.prototype,e),cb.extend(r,e),r}var ci=D6(x0);ci.Axios=Df,ci.create=function(t){return D6(gA(ci.defaults,t))},ci.Cancel=k6,ci.CancelToken=pA,ci.isCancel=_6,ci.all=function(t){return Promise.all(t)},ci.spread=function(t){return function(e){return t.apply(null,e)}},ci.isAxiosError=function(t){return typeof t=="object"&&t.isAxiosError===!0},jp.exports=ci,jp.exports.default=ci;var mA=jp.exports;const bA=new We("DefaultDIDAdapter");class Ei{constructor(e){oe(e&&e!=null,"Invalid resolver URL");let r=null;switch(e.toLowerCase()){case"mainnet":e=Ei.MAINNET_RPC_ENDPOINTS[0],r=Ei.MAINNET_RPC_ENDPOINTS;break;case"testnet":e=Ei.TESTNET_RPC_ENDPOINTS[0],r=Ei.TESTNET_RPC_ENDPOINTS}try{this.rpcEndpoint=new URL(e)}catch(n){throw new ti("Invalid resolver URL",n)}r&&this.checkNetwork(r)}checkEndpoint(e){return ve(this,void 0,void 0,function*(){let r={},n=Date.now();r.id=n,r.jsonrpc="2.0",r.method="eth_blockNumber";let i,o=JSON.stringify(r),a=Date.now();try{i=yield this.performRequest(e,o);let s=Date.now()-a;if(i.id!=n)throw new bb("Invalid JSON RPC id.");let c=i.result;c.startsWith("0x")&&(c=c.substring(2));let f=parseInt(c,16);return new Ei.CheckResult(e,s,f)}catch{return bA.info("Checking the resolver {}...error",e),Ei.CheckResult.from(e)}})}checkNetwork(e){return ve(this,void 0,void 0,function*(){let r=[],n=[];for(let o of e){let a=this.checkEndpoint(new URL(o)).then(s=>{r.push(s)});n.push(a)}try{yield Promise.all(n)}catch{}r.length>0&&Xc.sort(r);let i=r[0];i.available()&&(this.rpcEndpoint=i.endpoint)})}performRequest(e,r){return new Promise((n,i)=>{mA({method:"post",url:e.toString(),maxRedirects:5,headers:{"Content-Type":"application/json",Accept:"application/json"},data:r,timeout:6e3}).then(o=>{o.status>=200&&o.status<400?n(o.data):i(new qd("HTTP error: "+o.statusText))}).catch(o=>{i(new qd("HTTP timeout"))})})}resolve(e){return ve(this,void 0,void 0,function*(){oe(e&&e!=null,"Invalid request");try{return yield this.performRequest(this.rpcEndpoint,e)}catch{throw new gb("Network error.")}})}createIdTransaction(e,r){throw new yb("Not implemented")}}Ei.MAINNET_RPC_ENDPOINTS=["https://api.elastos.io/eid","https://api.trinity-tech.io/eid"],Ei.TESTNET_RPC_ENDPOINTS=["https://api-testnet.elastos.io/eid","https://api-testnet.trinity-tech.io/eid"],function(t){class e{constructor(n,i,o){this.endpoint=n,this.latency=i,this.lastBlock=o}static from(n){return new e(n,-1,-1)}equals(n){return this.compareTo(n)==0}compareTo(n){if(n==null)return-1;if(n.latency<0&&this.latency<0)return 0;if(n.latency<0||this.latency<0)return this.latency<0?1:-1;let i=n.lastBlock.valueOf()-this.lastBlock.valueOf();return Math.abs(i)-e.MAX_DIFF>0||this.latency==n.latency?i>0?1:-1:this.latency-n.latency}available(){return this.latency>=0}}e.MAX_DIFF=10,t.CheckResult=e}(Ei||(Ei={}));class x6{constructor(e={}){this.count=0,this.items=new Map,this.first=null,this.last=null,this.options=Object.assign({maxItems:void 0,maxAge:void 0,loader:void 0},e),this.invalidateAll()}put(e,r,n){this.putInternal(e,r,n)}putInternal(e,r,n){let i=this.getHash(e),o=this.items.get(i);if(o)o.value=r;else{let a=this.getHash(e);o={key:e,value:r,prev:null,next:null,meta:n},this.items.set(a,o),this.count++}return this.options.maxAge&&(o.expires=Date.now()/1e3+this.options.maxAge),this.promote(o),this.options.maxItems&&this.count>this.options.maxItems&&this.invalidate(this.last.key),o}getHash(e){return typeof e=="string"?e:e.hashCode().toString()}get(e,r){let n=this.getHash(e),i=this.items.get(n);if(i&&i.expires&&Date.now()/1e3>=i.expires&&(this.invalidate(e),i=null),!i){let o=null;if(r?o=r:this.options.loader&&(o=this.options.loader),o){let{value:a,meta:s}=o(e);a!=null&&(i=this.putInternal(e,a,s))}if(!i)return null}return this.promote(i),i.value}getAsync(e,r){return ve(this,void 0,void 0,function*(){let n=this.getHash(e),i=this.items.get(n);if(i&&i.expires&&Date.now()/1e3>=i.expires&&(this.invalidate(e),i=null),!i){let o=null;if(r?o=r:this.options.asyncLoader&&(o=this.options.asyncLoader),o){let{value:a,meta:s}=yield o(e);a!=null&&(i=this.putInternal(e,a,s))}if(!i)return null}return this.promote(i),i.value})}invalidateAll(e){e?this.items.forEach((r,n,i)=>{e(r.key)&&this.invalidate(r.key)}):(this.items.clear(),this.first=null,this.last=null,this.count=0)}invalidate(e){let r=this.getHash(e),n=this.items.get(r);return!!n&&(this.count--,this.items.delete(r),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n===this.first&&(this.first=n.next),n===this.last&&(this.last=n.prev),!0)}has(e){let r=this.getHash(e),n=this.items.get(r);return!!n&&!(n.expires&&Date.now()/1e3>=n.expires)}promote(e){e!==this.first&&(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.last&&(this.last=e.prev),e.prev=null,e.next=this.first,this.first&&(this.first.prev=e),this.first=e,this.last||(this.last=e))}getMeta(e){let r=this.getHash(e),n=this.items.get(r);return n?n.expires&&Date.now()/1e3>=n.expires?(this.invalidate(e),null):(this.promote(n),n.meta):null}}if(typeof window<"u"){if("elastos_did_ver"in window)throw new Error("Elastos DID sdk("+window.elastos_did_ver+") alread loaded.");window.elastos_did_ver="2.2.9"}export{Ii as L,yt as M,Oe as N,Us as O,Me as P,Ne as a,Je as b,Dr as c,We as e,Ve as f,Ei as h,Lt as i,Zr as j,vA as o,b3 as s};
