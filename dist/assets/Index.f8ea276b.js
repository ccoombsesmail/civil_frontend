import{u as _,r as a,d as l,l as A,R as e,M as b,$ as B,V as N}from"./vendor.0dc98fef.js";import{b as O,a as H,F as p}from"./formik.1e3cbfb7.js";import{u as j,b as V,a6 as P}from"./index.43cdcd02.js";import{t as M,g as $,D as G}from"./Index.cd78bc3d.js";import{s as q}from"./index.da0093f6.js";import{y as z,t as W,U as Y}from"./Index.842043b3.js";import{I as u}from"./Index.ced62785.js";import{T as L}from"./Index.906ab2cd.js";import{T as x}from"./Index.31c6c60e.js";import{R as J}from"./Index.c65c3301.js";import"./redux.3f1f2b08.js";import"./@clerk/clerk-react.6c71122b.js";import"./@elastosfoundation/did-js-sdk.ab585390.js";import"./axios.391ccac8.js";import"./socket.io-client.b610e832.js";import"./redux-thunk.1b3bbe7b.js";import"./unicode-emoji-picker.85c61051.js";import"./index.7c84f60a.js";import"./Index.a7509ad4.js";import"./index.3229f831.js";const K=o=>{const i=o.search(z)===-1?null:"ytUrl",r=o.search(W)===-1?null:"tweetUrl";return i||r},Q=(o,i)=>{const{createSubTopic:r,uploadTopicMedia:c}=j(M,q),s=_(t=>t.session.currentUser);return a.exports.useCallback((t,{setSubmitting:T,resetForm:E},C)=>{var h;const g=Object.entries(t).map(([f,y])=>f.includes("Evidence")?y:null).filter(Boolean),k=K(t.contentUrl),m={...t,description:C,createdBy:s.username,userId:s.id,evidenceLinks:g,[k]:t.contentUrl,thumbImgUrl:(h=o.ogImage)==null?void 0:h.url,topicId:i,tweetUrl:null,imageUrl:null,vodUrl:null};if(t.file instanceof File){const[f,y]=t.file.type.split("/"),w=new FormData;w.append("image",t.file),c(w,f,y,m)}else r(m);T(!1),E({})},[o,i])},X=()=>{const[o,i]=a.exports.useState(null),r=a.exports.useCallback(c=>{$(c.currentTarget.value).then(({data:s})=>{i(s)})},[]);return{metaData:o,getLinkMetaDataOnBlur:r}},Z=l("div").withConfig({displayName:"Style__Container",componentId:"sc-lh4dvj-0"})(["overflow-y:scroll;height:90vh;background:white;border-radius:1em;box-shadow:5px 5px 5px -3px #000000;h1{width:100%;margin:0;text-align:center;padding-bottom:.5em;border-bottom:1px solid black;}"]),v=l("div").withConfig({displayName:"Style__FlexDiv",componentId:"sc-lh4dvj-1"})(["  display:flex;align-items:center;justify-content:center;width:100%;"]),ee=l(O).withConfig({displayName:"Style__FormContainer",componentId:"sc-lh4dvj-2"})(["margin-top:1em;h2{font-size:1em;margin:0 1em;}"]),U=l("div").withConfig({displayName:"Style__InputsContainer",componentId:"sc-lh4dvj-3"})(["display:flex;width:100%;"]),te=l("div").withConfig({displayName:"Style__Left",componentId:"sc-lh4dvj-4"})(["display:flex;display:inline-block;flex-direction:column;width:50%;border-right:1px solid black;"]),ne=l("div").withConfig({displayName:"Style__Right",componentId:"sc-lh4dvj-5"})(["display:flex;display:inline-block;flex-direction:column;width:50%;"]);l("section").withConfig({displayName:"Style__SupplementalInformation",componentId:"sc-lh4dvj-6"})([""]);l("div").withConfig({displayName:"Style__InputWrapper",componentId:"sc-lh4dvj-7"})(["display:flex;flex-direction:column;"]);const oe=l("span").withConfig({displayName:"Style__Arrow",componentId:"sc-lh4dvj-8"})(["transition:transform .5s ease-in-out;transform:",";cursor:pointer;"],o=>`rotate(${o.rotate}deg)`),D=l("hr").withConfig({displayName:"Style__Line",componentId:"sc-lh4dvj-9"})(["  width:90%;margin:2em 1.3em;background-color:rgb(48,48,50);height:.5px;border:none;"]),ie=new RegExp(/\b[0-9a-f]{8}\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\b[0-9a-f]{12}\b/g),ke=()=>{var F;const{pathname:o}=A(),[i,r]=a.exports.useState(!1),[c,s]=a.exports.useState(null),[t,T]=a.exports.useState(null),[E,C]=a.exports.useState(0),[g,k]=a.exports.useState(""),[m]=o.match(ie),{metaData:h,getLinkMetaDataOnBlur:f}=X(),y=Q(h,m),{getTopic:w,closeModal:R}=j(V,M),S=_(n=>n.session.currentUser),I=(F=_(n=>n.topics.list))==null?void 0:F.find(n=>n.id===m);return a.exports.useEffect(()=>{w(m,S==null?void 0:S.id)},[]),e.createElement(Z,null,e.createElement(H,{initialValues:{title:""},validate:n=>{const d={};return n.title||(d.title="Title Is Required"),d},onSubmit:(n,d)=>y(n,d,g)},({isSubmitting:n,setFieldValue:d})=>e.createElement(e.Fragment,null,e.createElement(b.Header,{closeButton:!0},e.createElement(b.Title,null,"Create Sub Topic Regarding The Topic"," ",`"${I==null?void 0:I.title}"`)),e.createElement(ee,null,e.createElement(b.Body,null,e.createElement(U,null,e.createElement(te,null,e.createElement(v,null,e.createElement("h2",null," Topic Description "),e.createElement(x,{tooltipHeader:"Topic Description",tooltipText:"Provide information about the topic you would like to discuss"})),e.createElement(p,{type:"text",name:"title",component:u,width:"100%",placeholder:"Enter A Topic Title"}),e.createElement(p,{type:"text",name:"summary",component:u,width:"100%",placeholder:"Give A Short Opinion Or Point"})),e.createElement(ne,null,e.createElement(v,null,e.createElement("h2",null," Link to what you want to discuss here... "),e.createElement(x,{tooltipHeader:"Discussed Content",tooltipText:`Add a link to the external content you would like to discuss (
                        e.g a YouTube video, Tweet, publication, or anything else)`})),e.createElement(p,{type:"url",name:"contentUrl",placeholder:"Link To Content",component:u,width:"100%",onBlur:f}),e.createElement(D,null),e.createElement(v,null,e.createElement("h2",null," Add your own media content "),e.createElement(x,{tooltipHeader:"User Provided Content",tooltipText:"This could be an image, graphic, or video pertaining to the topic you would like to discuss"})),e.createElement(Y,{setFieldValue:d,imgFile:c,videoFile:t,setImgFile:s,setVideoFile:T}))),e.createElement(D,null),e.createElement(G,{imgFile:c,videoFile:t,metaData:h}),e.createElement(J,{content:g,setContent:k}),e.createElement(oe,{rotate:E,onClick:()=>{r(!i),C(E+(i?-180:180))}},e.createElement(P,null)),e.createElement(B,{in:!i},e.createElement("div",null,"Enter Supplemental Information")),e.createElement(U,null,e.createElement(N,{in:i},e.createElement("div",{style:{whiteSpace:"nowrap",width:"100%"}},e.createElement(v,null,e.createElement("h2",null," Enter Links To Supplemental Evidence... "),e.createElement(x,{tooltipText:"Provide links to additional reading or evidence etc...",tooltipHeader:"Supplemental Information"})),e.createElement(p,{type:"url",name:"Evidence Link 1",component:u,width:"100%"}),e.createElement(p,{type:"url",name:"Evidence Link 2",component:u,width:"100%"}),e.createElement(p,{type:"url",name:"Evidence Link 3",component:u,width:"100%"}))))),e.createElement(b.Footer,null,e.createElement(L,{type:"submit",disabled:n,onClick:R},"Cancel"),e.createElement(L,{type:"submit",disabled:n},"Submit"))))))};export{ke as default};
