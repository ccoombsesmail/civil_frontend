import{j as g,r as o,k as f,d as c,R as e,M as i}from"./vendor.0dc98fef.js";import{b as x,a as C,F as h}from"./formik.1e3cbfb7.js";import{T as E}from"./Index.906ab2cd.js";import{I as b}from"./Index.b7438409.js";import{d as y}from"./@clerk/clerk-react.6c71122b.js";import{u as I,a as T,b as k,d as v,ac as w}from"./index.43cdcd02.js";import"./index.3229f831.js";import"./Index.a7509ad4.js";import"./redux.3f1f2b08.js";import"./@elastosfoundation/did-js-sdk.ab585390.js";import"./axios.391ccac8.js";import"./socket.io-client.b610e832.js";import"./redux-thunk.1b3bbe7b.js";import"./unicode-emoji-picker.85c61051.js";const F=a=>{const n=g(),{user:t}=y.useUser(),{createUserTag:s}=I(k,T);return o.exports.useCallback(async(r,{setSubmitting:l,resetForm:m})=>{t&&t.update({unsafeMetadata:{userCivilTag:r.tag}}),await f.promise(s(r),{pending:"Creating Tag...",success:"Unique Tag Succefully Created!",error:{render({data:u}){const{response:d}=u,{data:p}=d;return`${p.msg} \u{1F92F} `}}}),n(v()),l(!1),m({})},[a])},S=c(x).withConfig({displayName:"Index__FormContainer",componentId:"sc-12glxdl-0"})(["margin-top:0;border-radius:.5em;position:relative;"]),_=c("div").withConfig({displayName:"Index__InputContainer",componentId:"sc-12glxdl-1"})(["  display:flex;flex-direction:column;width:80%;align-items:center;p{text-align:center;}"]),q=c("div").withConfig({displayName:"Index__Container",componentId:"sc-12glxdl-2"})(["position:relative;h1{width:100%;margin:0;text-align:center;padding-bottom:.5em;border-bottom:1px solid black;}"]),O=()=>{const[a,n]=o.exports.useState(null),t=o.exports.useCallback(async s=>{const r=await w(s.target.value),{tagExists:l}=await r.data;s.target.value?n(!l):n(null)},[a]);return{isValid:a,checkIfTagExistsOnKeyPress:t}},U=({userId:a})=>{const n=F(a),{isValid:t,checkIfTagExistsOnKeyPress:s}=O();return e.createElement(q,null,e.createElement(C,{initialValues:{tag:""},validate:()=>t===!1?{tag:"Tag Already Exists"}:{},onSubmit:n},({isSubmitting:r})=>e.createElement(e.Fragment,null,e.createElement(i.Header,{closeButton:!0},e.createElement(i.Title,null,"Create Unique Tag")),e.createElement(S,null,e.createElement(i.Body,null,e.createElement(_,null,e.createElement("p",null,'Create a unique tag. This is required to make posts, comment, like, etc. The tag you create is unique accross the Civil platform, and can be used to "mention" you via "@"'),e.createElement(h,{name:"tag",label:"Enter Tag",component:b,width:"50%",onKeyUp:s,validInput:t}))),e.createElement(i.Footer,null,e.createElement(E,{type:"submit",disabled:r},"Submit"))))))},J=o.exports.memo(U);export{J as default};
