import{r as p,Q as f,R as t,d as i,l as b,u as x,i as T,V as N}from"./vendor.0dc98fef.js";import{R as B,y as w,z as R,u as $,D as U,E as M}from"./index.43cdcd02.js";import{a as P,L as O,U as z,b as h,C as g,D as A,R as L,c as j,d as y,e as F}from"./Index.4b46e286.js";import{u as H}from"./useOpenModal.986cd8ad.js";import{P as Y}from"./Index.73362e46.js";import{c as V,t as G,u as Q}from"./useDetectCurrentPage.b5fea03e.js";import{g as W}from"./dateFormatter.922bcdf9.js";import{T as X}from"./Index.31c6c60e.js";const q=({comment:e})=>{const{contentId:n}=f(),s=H(B,{replyType:e.commentType?"TRIBUNAL_COMMENT_REPLY":"COMMENT_REPLY",commentId:e.id,rootParentCommentId:e.rootId||e.id,commentType:e.commentType,tribunalCommentUnderReviewId:n});return t.createElement(w,{icon:t.createElement(R,null),onClick:s})},J=p.exports.memo(q),K=()=>{const[e,n]=p.exports.useState(0);return{onSliderChange:p.exports.useCallback(o=>{const a=o.currentTarget,r=document.getElementById("rangeV"),l=Number((a.value-a.min)*100/(a.max-a.min)),c=10-l*.2;r.innerHTML=`<span>${a.value}</span>`,r.style.left=`calc(${l}% + (${c}px))`,n(Number(a.value))},[]),sliderValue:e}},Z=i("div").withConfig({displayName:"Style__Container",componentId:"sc-fj95sr-0"})(["position:relative;height:2.5vw;width:10vw;display:flex;align-items:center;"]),D=i("div").withConfig({displayName:"Style__Message",componentId:"sc-fj95sr-1"})(["position:absolute;left:50%;bottom:5%;transform:translate(-50%);"]),ee=i("div").withConfig({displayName:"Style__Range",componentId:"sc-fj95sr-2"})(['position:relative;display:flex;flex-direction:column;justify-content:center;width:100%;box-shadow:2px 5px 5px rgba(black,0.3);.range-value{position:absolute;top:-50%;}.range-value span{width:30px;height:24px;line-height:24px;text-align:center;background:var(--clerk-primary);color:#fff;font-size:12px;display:block;position:absolute;left:50%;transform:translate(-50%,0);border-radius:6px;}.range-value span:before{content:"";position:absolute;width:0;height:0;border-top:10px solid var(--clerk-primary);border-left:5px solid transparent;border-right:5px solid transparent;top:100%;left:50%;margin-left:-5px;margin-top:-1px;}input[type="range"]{-webkit-appearance:none;margin:20px 0;width:100%;}input[type="range"]:focus{outline:none;}input[type="range"]::-webkit-slider-runnable-track{width:100%;height:4px;cursor:pointer;animate:0.2s;background:',';border-radius:25px;}input[type="range"]::-webkit-slider-thumb{height:20px;width:20px;border-radius:50%;background:#fff;box-shadow:0 0 4px 0 rgba(0,0,0,1);cursor:pointer;-webkit-appearance:none;margin-top:-8px;}input[type="range"]:focus::-webkit-slider-runnable-track{background:',";}"],({sliderValue:e})=>e===-1||e===-2?"var(--m-danger-color)":e===-3?"red":e===1||e===2?"var(--m-primary-btn-color)":e===3?"green":"var(--clerk-primary)",({sliderValue:e})=>e===-1||e===-2?"var(--m-danger-color)":e===-3?"red":e===1||e===2?"var(--m-primary-btn-color)":e===3?"green":"var(--clerk-primary)"),te=({civility:e,updateCommentCivility:n})=>{const{onSliderChange:s,sliderValue:o}=K();return t.createElement(Z,{onClick:a=>a.stopPropagation()},t.createElement(ee,{sliderValue:o},t.createElement("div",{className:"range-value",id:"rangeV"}),t.createElement("input",{type:"range",min:-3,max:3,step:.1,defaultValue:e,onChange:s,onMouseUp:n,onTouchEnd:n})),t.createElement(D,null,o<0&&`Removing ${o} Civility`,o>0&&`Giving +${o} Civility`))},ne=p.exports.memo(te),oe=e=>{const{pathname:n}=b(),s=x(r=>r.session.currentUser),{updateCommentCivility:o,updateTribunalCommentCivility:a}=$(G,V);return p.exports.useCallback(r=>{const l=n.includes("tribunal"),c={givingUserId:s.id,receivingUserId:e.createdById,commentId:e.id,value:Number(r.currentTarget.value)};return l?a(c):o(c)},[e.civil])},re=({comment:e})=>{const[n,s]=p.exports.useState(!1),o=()=>s(l=>!l),a=oe(e),r=p.exports.useMemo(()=>!e||e.civility===0?t.createElement("img",{onClick:o,alt:"",src:"https://civil-dev.s3.us-west-1.amazonaws.com/assets/handshake.png"}):e.civility>0?t.createElement("img",{onClick:o,alt:"",src:"https://civil-dev.s3.us-west-1.amazonaws.com/assets/handshake-clicked.png"}):t.createElement("img",{alt:"",onClick:o,src:"https://civil-dev.s3.us-west-1.amazonaws.com/assets/no-handshake-clicked.png"}),[e]);return t.createElement(Y,{trigger:["hover","click"],component:t.createElement(ne,{civility:e.civility,updateCommentCivility:a}),placement:"top",onMouseEnter:()=>{},delay:200,showPopover:n,setShowPopover:s},r)},ie=p.exports.memo(re),ae=({likes:e,comment:n,user:s})=>{const{topicId:o,subTopicId:a,...r}=f(),l=n.commentType;return t.createElement(P,null,t.createElement(O,null,t.createElement(z,{content:n,user:s,contentType:l?h:g}),t.createElement("span",null,e||0),t.createElement(A,{content:n,user:s,contentType:l?h:g}),r["*"]&&t.createElement(J,{comment:n}),t.createElement(ie,{comment:n})),t.createElement(L,null,t.createElement(j,{contentId:n==null?void 0:n.id}),t.createElement("span",null,e||0," ","likes")))},se=p.exports.memo(ae),le=i("div").withConfig({displayName:"Style__OuterContainer",componentId:"sc-8pupwa-0"})(["position:relative;width:100%;height:fit-content;z-index:99;"]),pe=i("li").withConfig({displayName:"Style__CommentContainer",componentId:"sc-8pupwa-1"})(["width:100%;outline:none;border-radius:.4em;position:relative;list-style:none;margin-top:1em;cursor:pointer;display:flex;flex-direction:column;align-items:center;background-color:white;border:1px solid lightgray;box-shadow:-5px -5px 10px #5a5a5a,5px 5px 10px #ffffff;border-color:rgba(200,200,200,0.25);:hover{background-color:#D8FFF1;}@media only screen and (max-width:600px){width:100%;border-radius:0;}"]),ce=i("div").withConfig({displayName:"Style__Header",componentId:"sc-8pupwa-2"})(["display:flex;width:100%;padding:1em;border-bottom:1px solid gray;justify-content:space-between;align-items:center;"]),de=i("b").withConfig({displayName:"Style__Username",componentId:"sc-8pupwa-3"})(["  color:black;"]),ue=i("time").withConfig({displayName:"Style__Date",componentId:"sc-8pupwa-4"})(["  color:gray;"]),me=i("div").withConfig({displayName:"Style__Body",componentId:"sc-8pupwa-5"})(["filter:",";pointer-events:",";position:relative;color:black;min-height:10vh;padding:1em;width:100%;"],e=>e.shouldBlur?"blur(5px)":"unset",e=>e.shouldBlur?"none":"initial"),ge=i("img").withConfig({displayName:"Style__Thumb",componentId:"sc-8pupwa-6"})(["  flex-shrink:0;width:50px;height:50px;border-radius:50%;"]),he=i("div").withConfig({displayName:"Style__UserInfoContainer",componentId:"sc-8pupwa-7"})(["display:flex;"]),ye=i("div").withConfig({displayName:"Style__ExpandButton",componentId:"sc-8pupwa-8"})(["  position:absolute;bottom:0;left:50%;transform:translate(-50%);"]),fe=i("ul").withConfig({displayName:"Style__EvidenceSection",componentId:"sc-8pupwa-9"})(["  background-color:#F0F2F5;width:100%;word-break:break-all;padding:0 .5em .5em .5em;display:flex;flex-direction:column;"]),be=i("div").withConfig({displayName:"Style__Footer",componentId:"sc-8pupwa-10"})(["filter:",";pointer-events:",";width:100%;"],e=>e.shouldBlur?"blur(5px)":"unset",e=>e.shouldBlur?"none":"initial"),xe=i("p").withConfig({displayName:"Style__Content",componentId:"sc-8pupwa-11"})(["  padding:1em;"]),v=({commentData:e,replies:n,commentRef:s})=>{if(!e)return null;const{topicId:o}=t.useContext(C)||{},a=p.exports.useRef(null),r=T(),{pathname:l}=b(),[c,u]=p.exports.useState(!1),[d,E]=p.exports.useState((e==null?void 0:e.reportStatus)===y||(e==null?void 0:e.toxicityStatus)==="TOXIC"),I=x(m=>m.session.currentUser);Q(a,e==null?void 0:e.content);const k=W(e.createdAt),S=c?t.createElement(U,null):t.createElement(M,null);return t.createElement(le,{ref:s},t.createElement(pe,null,t.createElement(ce,{onClick:()=>r(`/home/topics/${o}/subtopics/${e.subtopicId}/comments/${e.id}`)},t.createElement(he,null,t.createElement(ge,{src:e.createdByIconSrc||"https://civil-dev.s3.us-west-1.amazonaws.com/profile_img_1.png"}),t.createElement(X,{tooltipHeader:"Experience",tooltipText:e.createdByExperience})),t.createElement(de,null,e.createdBy),t.createElement(ue,null,`${k}`)),t.createElement(me,{shouldBlur:d,onClick:()=>r(`/home/topics/${o}/subtopics/${e.subtopicId}/comments/${e.id}`)},t.createElement(xe,{ref:a}),n.length!==0&&t.createElement(ye,null,t.createElement(w,{icon:S,onClick:()=>u(!c)},"Replies"))),t.createElement(be,{shouldBlur:d},t.createElement(se,{likes:e==null?void 0:e.likes,comment:e,user:I}),t.createElement(N,{in:c},t.createElement(fe,null,n.map((m,_)=>t.createElement(v,{key:e.id+String(_),commentData:m.data,replies:m.children})))))),d&&t.createElement(F,{setShouldBlur:E,contentId:e==null?void 0:e.id,contentType:g,showNavigationToTribunal:(e==null?void 0:e.reportStatus)===y&&!l.includes("tribunal")}))},we=p.exports.memo(v),ve=i("ul").withConfig({displayName:"Style__Container",componentId:"sc-1h9j4ov-0"})(["display:flex;flex-direction:column;align-items:center;margin-top:2em;margin:0;padding:0;z-index:99;opacity:.99;width:50vw;border-top-left-radius:5px;border-top-right-radius:5px;border:1px solid lightgray;border-color:rgba(200,200,200,0.25);h1{display:flex;width:100%;align-items:center;font-weight:bold;padding:1em;font-size:1vw;border-bottom:1px solid black;color:white;border:none;outline:none;background-color:",";border-top-left-radius:5px;border-top-right-radius:5px;@media only screen and (max-width:600px){border-top-left-radius:0;border-top-right-radius:0;font-size:5vw;}}@media only screen and (max-width:600px){width:100%;border-top-left-radius:0;border-top-right-radius:0;}"],e=>e.color),C=t.createContext(null),Be=({numComments:e,comments:n,commentSentiment:s,color:o,topicId:a})=>t.createElement(ve,{color:o},t.createElement("h1",null,e||""," ",s||""," ","Comments"),n==null?void 0:n.map((r,l)=>{var c,u,d;return t.createElement(C.Provider,{key:((c=r.data)==null?void 0:c.id)+String(l),value:{commentId:(u=r.data)==null?void 0:u.id,topicId:a}},t.createElement(we,{key:((d=r.data)==null?void 0:d.id)+String(l),commentData:r.data,replies:r.children}))})),Re=i("div").withConfig({displayName:"Style__ThreadContainer",componentId:"sc-s0sxlo-0"})(["display:flex;flex-direction:column;align-items:center;width:70vw;"]);i("div").withConfig({displayName:"Style__Container",componentId:"sc-s0sxlo-1"})(["width:100vw;height:50vh;display:flex;flex-direction:column;align-items:center;margin-top:5em;header{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1.5em;background-color:var(--m-primary-background-color);border-radius:1em;h1{max-width:30vw;}b{color:var(--m-primary-color)}}"]);const $e=i("section").withConfig({displayName:"Style__ColumnContainer",componentId:"sc-s0sxlo-2"})(["display:flex;justify-content:space-evenly;width:100vw;ul:first-child{}ul:last-child{}"]);export{$e as C,C as P,Re as T,Be as a,we as b};
